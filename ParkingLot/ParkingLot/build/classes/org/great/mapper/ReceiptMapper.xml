<?xml version="1.0" encoding="UTF-8" ?>  
<!DOCTYPE mapper PUBLIC "-//ibatis.apache.org//DTD Mapper 3.0//EN" 
"http://ibatis.apache.org/dtd/ibatis-3-mapper.dtd">


<mapper namespace="org.great.mapper.ReceiptMapper">

	<select id="findDailyRecp" parameterType="org.great.bean.Receipt"
		resultMap="receiptMap">
		select re_id,u_name,c_num,re_thing,re_money,re_time,c.c_id,u_id from 
		(select tb1.*,u.u_name FROM(select * 
		from tb_receipt re where re.re_time like '#{re_time}')tb1
		LEFT JOIN tb_user u on u.u_id= tb1.u_id)tb2 
		LEFT JOIN tb_car c on c.c_id=tb2.c_id
	</select>
	
	<resultMap type="org.great.bean.Receipt" id="receiptMap" >
		<id property="re_id" column="re_id" />
		<result property="re_thing" column="re_thing" />
		<result property="re_money" column="re_money" />
		<result property="re_time" column="re_time" />
	
		<association property="car" javaType="org.great.bean.Car">
			<id property="c_id" column="c_id" />
			<result property="c_num" column="c_num" />
		</association>
		<association property="user" javaType="org.great.bean.User">
			<id property="u_id" column="u_id" />
			<result property="u_name" column="u_name" />
		</association>
	</resultMap>

</mapper>