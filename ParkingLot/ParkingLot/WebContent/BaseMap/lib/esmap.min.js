/*ESMap 2019/01/02 18:29:14*/  
!function(t,e){"object"==typeof exports&&"undefined"!=typeof module?e(exports):"function"==typeof define&&define.amd?define(["exports"],e):e(t.THREE=t.THREE||{})}(this,function(t){"use strict";function e(){}function i(t,e){this.x=t||0,this.y=e||0}function n(t,e,r,a,o,s,c,l,h,u){Object.defineProperty(this,"id",{value:Sr++}),this.uuid=wr.generateUUID(),this.name="",this.image=void 0!==t?t:n.DEFAULT_IMAGE,this.mipmaps=[],this.mapping=void 0!==e?e:n.DEFAULT_MAPPING,this.wrapS=void 0!==r?r:An,this.wrapT=void 0!==a?a:An,this.magFilter=void 0!==o?o:Dn,this.minFilter=void 0!==s?s:In,this.anisotropy=void 0!==h?h:1,this.format=void 0!==c?c:Jn,this.type=void 0!==l?l:On,this.offset=new i(0,0),this.repeat=new i(1,1),this.generateMipmaps=!0,this.premultiplyAlpha=!1,this.flipY=!0,this.unpackAlignment=4,this.encoding=void 0!==u?u:pr,this.version=0,this.onUpdate=null}function r(t,e,i,n){this.x=t||0,this.y=e||0,this.z=i||0,this.w=void 0!==n?n:1}function a(t,e,i){this.uuid=wr.generateUUID(),this.width=t,this.height=e,this.scissor=new r(0,0,t,e),this.scissorTest=!1,this.viewport=new r(0,0,t,e),i=i||{},void 0===i.minFilter&&(i.minFilter=Dn),this.texture=new n(void 0,void 0,i.wrapS,i.wrapT,i.magFilter,i.minFilter,i.format,i.type,i.anisotropy,i.encoding),this.depthBuffer=void 0===i.depthBuffer||i.depthBuffer,this.stencilBuffer=void 0===i.stencilBuffer||i.stencilBuffer,this.depthTexture=void 0!==i.depthTexture?i.depthTexture:null}function o(t,e,i,n){this._x=t||0,this._y=e||0,this._z=i||0,this._w=void 0!==n?n:1}function s(t,e,i){this.x=t||0,this.y=e||0,this.z=i||0}function c(){this.elements=new Float32Array([1,0,0,0,0,1,0,0,0,0,1,0,0,0,0,1]),arguments.length}function l(t,e,i,r,a,o,s,c,l,h){t=void 0!==t?t:[],e=void 0!==e?e:_n,n.call(this,t,e,i,r,a,o,s,c,l,h),this.flipY=!1}function h(){this.seq=[],this.map={}}function u(t,e,i){var n=t[0];if(n<=0||n>0)return t;var r=e*i,a=Lr[r];if(void 0===a&&(a=new Float32Array(r),Lr[r]=a),0!==e){n.toArray(a,0);for(var o=1,s=0;o!==e;++o)s+=i,t[o].toArray(a,s)}return a}function f(t,e){var i=Ar[e];void 0===i&&(i=new Int32Array(e),Ar[e]=i);for(var n=0;n!==e;++n)i[n]=t.allocTextureUnit();return i}function d(t,e){t.uniform1f(this.addr,e)}function p(t,e){t.uniform1i(this.addr,e)}function m(t,e){void 0===e.x?t.uniform2fv(this.addr,e):t.uniform2f(this.addr,e.x,e.y)}function g(t,e){void 0!==e.x?t.uniform3f(this.addr,e.x,e.y,e.z):void 0!==e.r?t.uniform3f(this.addr,e.r,e.g,e.b):t.uniform3fv(this.addr,e)}function v(t,e){void 0===e.x?t.uniform4fv(this.addr,e):t.uniform4f(this.addr,e.x,e.y,e.z,e.w)}function x(t,e){t.uniformMatrix2fv(this.addr,!1,e.elements||e)}function y(t,e){t.uniformMatrix3fv(this.addr,!1,e.elements||e)}function _(t,e){t.uniformMatrix4fv(this.addr,!1,e.elements||e)}function M(t,e,i){var n=i.allocTextureUnit();t.uniform1i(this.addr,n),i.setTexture2D(e||Er,n)}function b(t,e,i){var n=i.allocTextureUnit();t.uniform1i(this.addr,n),i.setTextureCube(e||Tr,n)}function w(t,e){t.uniform2iv(this.addr,e)}function S(t,e){t.uniform3iv(this.addr,e)}function E(t,e){t.uniform4iv(this.addr,e)}function T(t){switch(t){case 5126:return d;case 35664:return m;case 35665:return g;case 35666:return v;case 35674:return x;case 35675:return y;case 35676:return _;case 35678:return M;case 35680:return b;case 5124:case 35670:return p;case 35667:case 35671:return w;case 35668:case 35672:return S;case 35669:case 35673:return E}}function L(t,e){t.uniform1fv(this.addr,e)}function A(t,e){t.uniform1iv(this.addr,e)}function P(t,e){t.uniform2fv(this.addr,u(e,this.size,2))}function C(t,e){t.uniform3fv(this.addr,u(e,this.size,3))}function R(t,e){t.uniform4fv(this.addr,u(e,this.size,4))}function N(t,e){t.uniformMatrix2fv(this.addr,!1,u(e,this.size,4))}function D(t,e){t.uniformMatrix3fv(this.addr,!1,u(e,this.size,9))}function U(t,e){t.uniformMatrix4fv(this.addr,!1,u(e,this.size,16))}function I(t,e,i){var n=e.length,r=f(i,n);t.uniform1iv(this.addr,r);for(var a=0;a!==n;++a)i.setTexture2D(e[a]||Er,r[a])}function O(t,e,i){var n=e.length,r=f(i,n);t.uniform1iv(this.addr,r);for(var a=0;a!==n;++a)i.setTextureCube(e[a]||Tr,r[a])}function z(t){switch(t){case 5126:return L;case 35664:return P;case 35665:return C;case 35666:return R;case 35674:return N;case 35675:return D;case 35676:return U;case 35678:return I;case 35680:return O;case 5124:case 35670:return A;case 35667:case 35671:return w;case 35668:case 35672:return S;case 35669:case 35673:return E}}function F(t,e,i){this.id=t,this.addr=i,this.setValue=T(e.type)}function B(t,e,i){this.id=t,this.addr=i,this.size=e.size,this.setValue=z(e.type)}function G(t){this.id=t,h.call(this)}function V(t,e){t.seq.push(e),t.map[e.id]=e}function k(t,e,i){var n=t.name,r=n.length;for(Pr.lastIndex=0;;){var a=Pr.exec(n),o=Pr.lastIndex,s=a[1],c="]"===a[2],l=a[3];if(c&&(s|=0),void 0===l||"["===l&&o+2===r){V(i,void 0===l?new F(s,t,e):new B(s,t,e));break}var h=i.map,u=h[s];void 0===u&&(u=new G(s),V(i,u)),i=u}}function H(t,e,i){h.call(this),this.renderer=i;for(var n=t.getProgramParameter(e,t.ACTIVE_UNIFORMS),r=0;r<n;++r){var a=t.getActiveUniform(e,r),o=a.name;k(a,t.getUniformLocation(e,o),this)}}function W(t,e,i){return void 0===e&&void 0===i?this.set(t):this.setRGB(t,e,i)}function j(t,e){this.min=void 0!==t?t:new i(1/0,1/0),this.max=void 0!==e?e:new i(-1/0,-1/0)}function X(t,e){function n(){var t=new Float32Array([-1,-1,0,0,1,-1,1,0,1,1,1,1,-1,1,0,1]),e=new Uint16Array([0,1,2,0,2,3]);a=p.createBuffer(),o=p.createBuffer(),p.bindBuffer(p.ARRAY_BUFFER,a),p.bufferData(p.ARRAY_BUFFER,t,p.STATIC_DRAW),p.bindBuffer(p.ELEMENT_ARRAY_BUFFER,o),p.bufferData(p.ELEMENT_ARRAY_BUFFER,e,p.STATIC_DRAW),f=p.createTexture(),d=p.createTexture(),m.bindTexture(p.TEXTURE_2D,f),p.texImage2D(p.TEXTURE_2D,0,p.RGB,16,16,0,p.RGB,p.UNSIGNED_BYTE,null),p.texParameteri(p.TEXTURE_2D,p.TEXTURE_WRAP_S,p.CLAMP_TO_EDGE),p.texParameteri(p.TEXTURE_2D,p.TEXTURE_WRAP_T,p.CLAMP_TO_EDGE),p.texParameteri(p.TEXTURE_2D,p.TEXTURE_MAG_FILTER,p.NEAREST),p.texParameteri(p.TEXTURE_2D,p.TEXTURE_MIN_FILTER,p.NEAREST),m.bindTexture(p.TEXTURE_2D,d),p.texImage2D(p.TEXTURE_2D,0,p.RGBA,16,16,0,p.RGBA,p.UNSIGNED_BYTE,null),p.texParameteri(p.TEXTURE_2D,p.TEXTURE_WRAP_S,p.CLAMP_TO_EDGE),p.texParameteri(p.TEXTURE_2D,p.TEXTURE_WRAP_T,p.CLAMP_TO_EDGE),p.texParameteri(p.TEXTURE_2D,p.TEXTURE_MAG_FILTER,p.NEAREST),p.texParameteri(p.TEXTURE_2D,p.TEXTURE_MIN_FILTER,p.NEAREST),c={vertexShader:["uniform lowp int renderType;","uniform vec3 screenPosition;","uniform vec2 scale;","uniform float rotation;","uniform sampler2D occlusionMap;","attribute vec2 position;","attribute vec2 uv;","varying vec2 vUV;","varying float vVisibility;","void main() {","vUV = uv;","vec2 pos = position;","if ( renderType == 2 ) {","vec4 visibility = texture2D( occlusionMap, vec2( 0.1, 0.1 ) );","visibility += texture2D( occlusionMap, vec2( 0.5, 0.1 ) );","visibility += texture2D( occlusionMap, vec2( 0.9, 0.1 ) );","visibility += texture2D( occlusionMap, vec2( 0.9, 0.5 ) );","visibility += texture2D( occlusionMap, vec2( 0.9, 0.9 ) );","visibility += texture2D( occlusionMap, vec2( 0.5, 0.9 ) );","visibility += texture2D( occlusionMap, vec2( 0.1, 0.9 ) );","visibility += texture2D( occlusionMap, vec2( 0.1, 0.5 ) );","visibility += texture2D( occlusionMap, vec2( 0.5, 0.5 ) );","vVisibility =        visibility.r / 9.0;","vVisibility *= 1.0 - visibility.g / 9.0;","vVisibility *=       visibility.b / 9.0;","vVisibility *= 1.0 - visibility.a / 9.0;","pos.x = cos( rotation ) * position.x - sin( rotation ) * position.y;","pos.y = sin( rotation ) * position.x + cos( rotation ) * position.y;","}","gl_Position = vec4( ( pos * scale + screenPosition.xy ).xy, screenPosition.z, 1.0 );","}"].join("\n"),fragmentShader:["uniform lowp int renderType;","uniform sampler2D map;","uniform float opacity;","uniform vec3 color;","varying vec2 vUV;","varying float vVisibility;","void main() {","if ( renderType == 0 ) {","gl_FragColor = vec4( 1.0, 0.0, 1.0, 0.0 );","} else if ( renderType == 1 ) {","gl_FragColor = texture2D( map, vUV );","} else {","vec4 texture = texture2D( map, vUV );","texture.a *= opacity * vVisibility;","gl_FragColor = texture;","gl_FragColor.rgb *= color;","}","}"].join("\n")},l=r(c),h={vertex:p.getAttribLocation(l,"position"),uv:p.getAttribLocation(l,"uv")},u={renderType:p.getUniformLocation(l,"renderType"),map:p.getUniformLocation(l,"map"),occlusionMap:p.getUniformLocation(l,"occlusionMap"),opacity:p.getUniformLocation(l,"opacity"),color:p.getUniformLocation(l,"color"),scale:p.getUniformLocation(l,"scale"),rotation:p.getUniformLocation(l,"rotation"),screenPosition:p.getUniformLocation(l,"screenPosition")}}function r(e){var i=p.createProgram(),n=p.createShader(p.FRAGMENT_SHADER),r=p.createShader(p.VERTEX_SHADER),a="precision "+t.getPrecision()+" float;\n";return p.shaderSource(n,a+e.fragmentShader),p.shaderSource(r,a+e.vertexShader),p.compileShader(n),p.compileShader(r),p.attachShader(i,n),p.attachShader(i,r),p.linkProgram(i),i}var a,o,c,l,h,u,f,d,p=t.context,m=t.state;this.render=function(r,c,g){if(0!==e.length){var v=new s,x=g.w/g.z,y=.5*g.z,_=.5*g.w,M=16/g.w,b=new i(M*x,M),w=new s(1,1,0),S=new i(1,1),E=new j;E.min.set(g.x,g.y),E.max.set(g.x+(g.z-16),g.y+(g.w-16)),void 0===l&&n(),p.useProgram(l),m.initAttributes(),m.enableAttribute(h.vertex),m.enableAttribute(h.uv),m.disableUnusedAttributes(),p.uniform1i(u.occlusionMap,0),p.uniform1i(u.map,1),p.bindBuffer(p.ARRAY_BUFFER,a),p.vertexAttribPointer(h.vertex,2,p.FLOAT,!1,16,0),p.vertexAttribPointer(h.uv,2,p.FLOAT,!1,16,8),p.bindBuffer(p.ELEMENT_ARRAY_BUFFER,o),m.disable(p.CULL_FACE),m.setDepthWrite(!1);for(var T=0,L=e.length;T<L;T++){M=16/g.w,b.set(M*x,M);var A=e[T];if(v.set(A.matrixWorld.elements[12],A.matrixWorld.elements[13],A.matrixWorld.elements[14]),v.applyMatrix4(c.matrixWorldInverse),v.applyMatrix4(c.projectionMatrix),w.copy(v),S.x=g.x+w.x*y+y-8,S.y=g.y+w.y*_+_-8,!0===E.containsPoint(S)){m.activeTexture(p.TEXTURE0),m.bindTexture(p.TEXTURE_2D,null),m.activeTexture(p.TEXTURE1),m.bindTexture(p.TEXTURE_2D,f),p.copyTexImage2D(p.TEXTURE_2D,0,p.RGB,S.x,S.y,16,16,0),p.uniform1i(u.renderType,0),p.uniform2f(u.scale,b.x,b.y),p.uniform3f(u.screenPosition,w.x,w.y,w.z),m.disable(p.BLEND),m.enable(p.DEPTH_TEST),p.drawElements(p.TRIANGLES,6,p.UNSIGNED_SHORT,0),m.activeTexture(p.TEXTURE0),m.bindTexture(p.TEXTURE_2D,d),p.copyTexImage2D(p.TEXTURE_2D,0,p.RGBA,S.x,S.y,16,16,0),p.uniform1i(u.renderType,1),m.disable(p.DEPTH_TEST),m.activeTexture(p.TEXTURE1),m.bindTexture(p.TEXTURE_2D,f),p.drawElements(p.TRIANGLES,6,p.UNSIGNED_SHORT,0),A.positionScreen.copy(w),A.customUpdateCallback?A.customUpdateCallback(A):A.updateLensFlares(),p.uniform1i(u.renderType,2),m.enable(p.BLEND);for(var P=0,C=A.lensFlares.length;P<C;P++){var R=A.lensFlares[P];R.opacity>.001&&R.scale>.001&&(w.x=R.x,w.y=R.y,w.z=R.z,M=R.size*R.scale/g.w,b.x=M*x,b.y=M,p.uniform3f(u.screenPosition,w.x,w.y,w.z),p.uniform2f(u.scale,b.x,b.y),p.uniform1f(u.rotation,R.rotation),p.uniform1f(u.opacity,R.opacity),p.uniform3f(u.color,R.color.r,R.color.g,R.color.b),m.setBlending(R.blending,R.blendEquation,R.blendSrc,R.blendDst),t.setTexture2D(R.texture,1),p.drawElements(p.TRIANGLES,6,p.UNSIGNED_SHORT,0))}}}m.enable(p.CULL_FACE),m.enable(p.DEPTH_TEST),m.setDepthWrite(!0),t.resetGLState()}}}function Y(t,e){function i(){var t=new Float32Array([-.5,-.5,0,0,.5,-.5,1,0,.5,.5,1,1,-.5,.5,0,1]),e=new Uint16Array([0,1,2,0,2,3]);c=p.createBuffer(),l=p.createBuffer(),p.bindBuffer(p.ARRAY_BUFFER,c),p.bufferData(p.ARRAY_BUFFER,t,p.STATIC_DRAW),p.bindBuffer(p.ELEMENT_ARRAY_BUFFER,l),p.bufferData(p.ELEMENT_ARRAY_BUFFER,e,p.STATIC_DRAW),h=r(),u={position:p.getAttribLocation(h,"position"),uv:p.getAttribLocation(h,"uv")},f={uvOffset:p.getUniformLocation(h,"uvOffset"),uvScale:p.getUniformLocation(h,"uvScale"),rotation:p.getUniformLocation(h,"rotation"),scale:p.getUniformLocation(h,"scale"),color:p.getUniformLocation(h,"color"),map:p.getUniformLocation(h,"map"),opacity:p.getUniformLocation(h,"opacity"),modelViewMatrix:p.getUniformLocation(h,"modelViewMatrix"),projectionMatrix:p.getUniformLocation(h,"projectionMatrix"),fogType:p.getUniformLocation(h,"fogType"),fogDensity:p.getUniformLocation(h,"fogDensity"),fogNear:p.getUniformLocation(h,"fogNear"),fogFar:p.getUniformLocation(h,"fogFar"),fogColor:p.getUniformLocation(h,"fogColor"),alphaTest:p.getUniformLocation(h,"alphaTest")};var i=document.createElementNS("http://www.w3.org/1999/xhtml","canvas");i.width=8,i.height=8;var a=i.getContext("2d");a.fillStyle="white",a.fillRect(0,0,8,8),d=new n(i),d.needsUpdate=!0}function r(){var e=p.createProgram(),i=p.createShader(p.VERTEX_SHADER),n=p.createShader(p.FRAGMENT_SHADER);return p.shaderSource(i,["precision "+t.getPrecision()+" float;","uniform mat4 modelViewMatrix;","uniform mat4 projectionMatrix;","uniform float rotation;","uniform vec2 scale;","uniform vec2 uvOffset;","uniform vec2 uvScale;","attribute vec2 position;","attribute vec2 uv;","varying vec2 vUV;","void main() {","vUV = uvOffset + uv * uvScale;","vec2 alignedPosition = position * scale;","vec2 rotatedPosition;","rotatedPosition.x = cos( rotation ) * alignedPosition.x - sin( rotation ) * alignedPosition.y;","rotatedPosition.y = sin( rotation ) * alignedPosition.x + cos( rotation ) * alignedPosition.y;","vec4 finalPosition;","finalPosition = modelViewMatrix * vec4( 0.0, 0.0, 0.0, 1.0 );","finalPosition.xy += rotatedPosition;","finalPosition = projectionMatrix * finalPosition;","gl_Position = finalPosition;","}"].join("\n")),p.shaderSource(n,["precision "+t.getPrecision()+" float;","uniform vec3 color;","uniform sampler2D map;","uniform float opacity;","uniform int fogType;","uniform vec3 fogColor;","uniform float fogDensity;","uniform float fogNear;","uniform float fogFar;","uniform float alphaTest;","varying vec2 vUV;","void main() {","vec4 texture = texture2D( map, vUV );","if ( texture.a < alphaTest ) discard;","gl_FragColor = vec4( color * texture.xyz, texture.a * opacity );","if ( fogType > 0 ) {","float depth = gl_FragCoord.z / gl_FragCoord.w;","float fogFactor = 0.0;","if ( fogType == 1 ) {","fogFactor = smoothstep( fogNear, fogFar, depth );","} else {","const float LOG2 = 1.442695;","fogFactor = exp2( - fogDensity * fogDensity * depth * depth * LOG2 );","fogFactor = 1.0 - clamp( fogFactor, 0.0, 1.0 );","}","gl_FragColor = mix( gl_FragColor, vec4( fogColor, gl_FragColor.w ), fogFactor );","}","}"].join("\n")),p.compileShader(i),p.compileShader(n),p.attachShader(e,i),p.attachShader(e,n),p.linkProgram(e),e}function a(t,e){return t.renderOrder!==e.renderOrder?t.renderOrder-e.renderOrder:t.z!==e.z?e.z-t.z:e.id-t.id}var c,l,h,u,f,d,p=t.context,m=t.state,g=new s,v=new o,x=new s;this.render=function(n,r){if(0!==e.length){void 0===h&&i(),p.useProgram(h),m.initAttributes(),m.enableAttribute(u.position),m.enableAttribute(u.uv),m.disableUnusedAttributes(),m.disable(p.CULL_FACE),m.enable(p.BLEND),p.bindBuffer(p.ARRAY_BUFFER,c),p.vertexAttribPointer(u.position,2,p.FLOAT,!1,16,0),p.vertexAttribPointer(u.uv,2,p.FLOAT,!1,16,8),p.bindBuffer(p.ELEMENT_ARRAY_BUFFER,l),p.uniformMatrix4fv(f.projectionMatrix,!1,r.projectionMatrix.elements),m.activeTexture(p.TEXTURE0),p.uniform1i(f.map,0);var o=0,s=0,y=n.fog;y?(p.uniform3f(f.fogColor,y.color.r,y.color.g,y.color.b),y.isFog?(p.uniform1f(f.fogNear,y.near),p.uniform1f(f.fogFar,y.far),p.uniform1i(f.fogType,1),o=1,s=1):y.isFogExp2&&(p.uniform1f(f.fogDensity,y.density),p.uniform1i(f.fogType,2),o=2,s=2)):(p.uniform1i(f.fogType,0),o=0,s=0);for(var _=0,M=e.length;_<M;_++){var b=e[_];b.modelViewMatrix.multiplyMatrices(r.matrixWorldInverse,b.matrixWorld),b.z=-b.modelViewMatrix.elements[14]}e.sort(a);for(var w=[],_=0,M=e.length;_<M;_++){var b=e[_],S=b.material;if(!1!==S.visible){p.uniform1f(f.alphaTest,S.alphaTest),p.uniformMatrix4fv(f.modelViewMatrix,!1,b.modelViewMatrix.elements),b.matrixWorld.decompose(g,v,x),w[0]=x.x,w[1]=x.y;var E=0;n.fog&&S.fog&&(E=s),o!==E&&(p.uniform1i(f.fogType,E),o=E),null!==S.map?(p.uniform2f(f.uvOffset,S.map.offset.x,S.map.offset.y),p.uniform2f(f.uvScale,S.map.repeat.x,S.map.repeat.y)):(p.uniform2f(f.uvOffset,0,0),p.uniform2f(f.uvScale,1,1)),p.uniform1f(f.opacity,S.opacity),p.uniform3f(f.color,S.color.r,S.color.g,S.color.b),p.uniform1f(f.rotation,S.rotation),p.uniform2fv(f.scale,w),m.setBlending(S.blending,S.blendEquation,S.blendSrc,S.blendDst),m.setDepthTest(S.depthTest),m.setDepthWrite(S.depthWrite),S.map?t.setTexture2D(S.map,0):t.setTexture2D(d,0),p.drawElements(p.TRIANGLES,6,p.UNSIGNED_SHORT,0)}}m.enable(p.CULL_FACE),t.resetGLState()}}}function q(){Object.defineProperty(this,"id",{value:Ir++}),this.uuid=wr.generateUUID(),this.name="",this.type="Material",this.fog=!0,this.lights=!0,this.blending=Oi,this.side=Ai,this.shading=Ni,this.vertexColors=Di,this.opacity=1,this.transparent=!1,this.blendSrc=Ji,this.blendDst=Qi,this.blendEquation=Vi,this.blendSrcAlpha=null,this.blendDstAlpha=null,this.blendEquationAlpha=null,this.depthFunc=sn,this.depthTest=!0,this.depthWrite=!0,this.clippingPlanes=null,this.clipIntersection=!1,this.clipShadows=!1,this.colorWrite=!0,this.precision=null,this.polygonOffset=!1,this.polygonOffsetFactor=0,this.polygonOffsetUnits=0,this.alphaTest=0,this.premultipliedAlpha=!1,this.overdraw=0,this.visible=!0,this._needsUpdate=!0}function Z(t){q.call(this),this.type="ShaderMaterial",this.defines={},this.uniforms={},this.vertexShader="void main() {\n\tgl_Position = projectionMatrix * modelViewMatrix * vec4( position, 1.0 );\n}",this.fragmentShader="void main() {\n\tgl_FragColor = vec4( 1.0, 0.0, 0.0, 1.0 );\n}",this.linewidth=1,this.wireframe=!1,this.wireframeLinewidth=1,this.fog=!1,this.lights=!1,this.clipping=!1,this.skinning=!1,this.morphTargets=!1,this.morphNormals=!1,this.extensions={derivatives:!1,fragDepth:!1,drawBuffers:!1,shaderTextureLOD:!1},this.defaultAttributeValues={color:[1,1,1],uv:[0,0],uv2:[0,0]},this.index0AttributeName=void 0,void 0!==t&&(t.attributes,this.setValues(t))}function J(t){q.call(this),this.type="MeshDepthMaterial",this.depthPacking=Mr,this.skinning=!1,this.morphTargets=!1,this.map=null,this.alphaMap=null,this.displacementMap=null,this.displacementScale=1,this.displacementBias=0,this.wireframe=!1,this.wireframeLinewidth=1,this.fog=!1,this.lights=!1,this.setValues(t)}function Q(t,e){this.min=void 0!==t?t:new s(1/0,1/0,1/0),this.max=void 0!==e?e:new s(-1/0,-1/0,-1/0)}function K(t,e){this.center=void 0!==t?t:new s,this.radius=void 0!==e?e:0}function $(){this.elements=new Float32Array([1,0,0,0,1,0,0,0,1]),arguments.length}function tt(t,e){this.normal=void 0!==t?t:new s(1,0,0),this.constant=void 0!==e?e:0}function et(t,e,i,n,r,a){this.planes=[void 0!==t?t:new tt,void 0!==e?e:new tt,void 0!==i?i:new tt,void 0!==n?n:new tt,void 0!==r?r:new tt,void 0!==a?a:new tt]}function it(t,e,n,o){function l(e,i,n,r){var a=e.geometry,o=null,s=S,c=e.customDepthMaterial;if(n&&(s=E,c=e.customDistanceMaterial),c)o=c;else{var l=!1;i.morphTargets&&(a&&a.isBufferGeometry?l=a.morphAttributes&&a.morphAttributes.position&&a.morphAttributes.position.length>0:a&&a.isGeometry&&(l=a.morphTargets&&a.morphTargets.length>0));var h=e.isSkinnedMesh&&i.skinning,u=0;l&&(u|=M),h&&(u|=b),o=s[u]}if(t.localClippingEnabled&&!0===i.clipShadows&&0!==i.clippingPlanes.length){var f=o.uuid,d=i.uuid,p=T[f];void 0===p&&(p={},T[f]=p);var m=p[d];void 0===m&&(m=o.clone(),p[d]=m),o=m}o.visible=i.visible,o.wireframe=i.wireframe;var g=i.side;return F.renderSingleSided&&g==Ci&&(g=Ai),F.renderReverseSided&&(g===Ai?g=Pi:g===Pi&&(g=Ai)),o.side=g,o.clipShadows=i.clipShadows,o.clippingPlanes=i.clippingPlanes,o.wireframeLinewidth=i.wireframeLinewidth,o.linewidth=i.linewidth,n&&void 0!==o.uniforms.lightPos&&o.uniforms.lightPos.value.copy(r),o}function h(t,e,i){if(!1!==t.visible){if(0!=(t.layers.mask&e.layers.mask)&&(t.isMesh||t.isLine||t.isPoints)&&t.castShadow&&(!1===t.frustumCulled||!0===d.intersectsObject(t))){!0===t.material.visible&&(t.modelViewMatrix.multiplyMatrices(i.matrixWorldInverse,t.matrixWorld),_.push(t))}for(var n=t.children,r=0,a=n.length;r<a;r++)h(n[r],e,i)}}var u=t.context,f=t.state,d=new et,p=new c,m=e.shadows,g=new i,v=new i(o.maxTextureSize,o.maxTextureSize),x=new s,y=new s,_=[],M=1,b=2,w=1+(M|b),S=new Array(w),E=new Array(w),T={},L=[new s(1,0,0),new s(-1,0,0),new s(0,0,1),new s(0,0,-1),new s(0,1,0),new s(0,-1,0)],A=[new s(0,1,0),new s(0,1,0),new s(0,1,0),new s(0,1,0),new s(0,0,1),new s(0,0,-1)],P=[new r,new r,new r,new r,new r,new r],C=new J;C.depthPacking=br,C.clipping=!0;for(var R=Ur.distanceRGBA,N=Cr.clone(R.uniforms),D=0;D!==w;++D){var U=0!=(D&M),I=0!=(D&b),O=C.clone();O.morphTargets=U,O.skinning=I,S[D]=O;var z=new Z({defines:{USE_SHADOWMAP:""},uniforms:N,vertexShader:R.vertexShader,fragmentShader:R.fragmentShader,morphTargets:U,skinning:I,clipping:!0});E[D]=z}var F=this;this.enabled=!1,this.autoUpdate=!0,this.needsUpdate=!1,this.type=Ti,this.renderReverseSided=!0,this.renderSingleSided=!0,this.render=function(e,i){if(!1!==F.enabled&&(!1!==F.autoUpdate||!1!==F.needsUpdate)&&0!==m.length){f.buffers.color.setClear(1,1,1,1),f.disable(u.BLEND),f.setDepthTest(!0),f.setScissorTest(!1);for(var r,o,s=0,c=m.length;s<c;s++){var M=m[s],b=M.shadow;if(void 0!==b){var w=b.camera;if(g.copy(b.mapSize),g.min(v),M&&M.isPointLight){r=6,o=!0;var S=g.x,E=g.y;P[0].set(2*S,E,S,E),P[1].set(0,E,S,E),P[2].set(3*S,E,S,E),P[3].set(S,E,S,E),P[4].set(3*S,0,S,E),P[5].set(S,0,S,E),g.x*=4,g.y*=2}else r=1,o=!1;if(null===b.map){var T={minFilter:Cn,magFilter:Cn,format:Jn};b.map=new a(g.x,g.y,T),w.updateProjectionMatrix()}b.isSpotLightShadow&&b.update(M),b&&b.isRectAreaLightShadow&&b.update(M);var C=b.map,R=b.matrix;y.setFromMatrixPosition(M.matrixWorld),w.position.copy(y),t.setRenderTarget(C),t.clear();for(var N=0;N<r;N++){if(o){x.copy(w.position),x.add(L[N]),w.up.copy(A[N]),w.lookAt(x);var D=P[N];f.viewport(D)}else x.setFromMatrixPosition(M.target.matrixWorld),w.lookAt(x);w.updateMatrixWorld(),w.matrixWorldInverse.getInverse(w.matrixWorld),R.set(.5,0,0,.5,0,.5,0,.5,0,0,.5,.5,0,0,0,1),R.multiply(w.projectionMatrix),R.multiply(w.matrixWorldInverse),p.multiplyMatrices(w.projectionMatrix,w.matrixWorldInverse),d.setFromMatrix(p),_.length=0,h(e,i,w);for(var U=0,I=_.length;U<I;U++){var O=_[U],z=n.update(O),B=O.material;if(B&&B.isMultiMaterial)for(var G=z.groups,V=B.materials,k=0,H=G.length;k<H;k++){var W=G[k],j=V[W.materialIndex];if(!0===j.visible){var X=l(O,j,o,y);t.renderBufferDirect(w,null,z,X,O,W)}}else{var X=l(O,B,o,y);t.renderBufferDirect(w,null,z,X,O,null)}}}}}var Y=t.getClearColor(),q=t.getClearAlpha();t.setClearColor(Y,q),F.needsUpdate=!1}}}function nt(t,e){this.origin=void 0!==t?t:new s,this.direction=void 0!==e?e:new s}function rt(t,e,i,n){this._x=t||0,this._y=e||0,this._z=i||0,this._order=n||rt.DefaultOrder}function at(){this.mask=1}function ot(){function t(){r.setFromEuler(n,!1)}function e(){n.setFromQuaternion(r,void 0,!1)}Object.defineProperty(this,"id",{value:Or++}),this.uuid=wr.generateUUID(),this.name="",this.type="Object3D",this.parent=null,this.children=[],this.up=ot.DefaultUp.clone();var i=new s,n=new rt,r=new o,a=new s(1,1,1);n.onChange(t),r.onChange(e),Object.defineProperties(this,{position:{enumerable:!0,value:i},rotation:{enumerable:!0,value:n},quaternion:{enumerable:!0,value:r},scale:{enumerable:!0,value:a},modelViewMatrix:{value:new c},normalMatrix:{value:new $}}),this.matrix=new c,this.matrixWorld=new c,this.matrixAutoUpdate=ot.DefaultMatrixAutoUpdate,this.matrixWorldNeedsUpdate=!1,this.layers=new at,this.visible=!0,this.castShadow=!1,this.receiveShadow=!1,this.frustumCulled=!0,this.renderOrder=0,this.userData={},this.onBeforeRender=function(){},this.onAfterRender=function(){}}function st(t,e){this.start=void 0!==t?t:new s,this.end=void 0!==e?e:new s}function ct(t,e,i){this.a=void 0!==t?t:new s,this.b=void 0!==e?e:new s,this.c=void 0!==i?i:new s}function lt(t,e,i,n,r,a){this.a=t,this.b=e,this.c=i,this.normal=n&&n.isVector3?n:new s,this.vertexNormals=Array.isArray(n)?n:[],this.color=r&&r.isColor?r:new W,this.vertexColors=Array.isArray(r)?r:[],this.materialIndex=void 0!==a?a:0}function ht(t){q.call(this),this.type="MeshBasicMaterial",this.color=new W(16777215),this.map=null,this.lightMap=null,this.lightMapIntensity=1,this.aoMap=null,this.aoMapIntensity=1,this.specularMap=null,this.alphaMap=null,this.envMap=null,this.combine=fn,this.reflectivity=1,this.refractionRatio=.98,this.wireframe=!1,this.wireframeLinewidth=1,this.wireframeLinecap="round",this.wireframeLinejoin="round",this.skinning=!1,this.morphTargets=!1,this.lights=!1,this.setValues(t)}function ut(t,e,i){if(Array.isArray(t))throw new TypeError("THREE.BufferAttribute: array should be a Typed Array.");this.uuid=wr.generateUUID(),this.array=t,this.itemSize=e,this.count=void 0!==t?t.length/e:0,this.normalized=!0===i,this.dynamic=!1,this.updateRange={offset:0,count:-1},this.onUploadCallback=function(){},this.version=0}function ft(t,e){ut.call(this,new Uint16Array(t),e)}function dt(t,e){ut.call(this,new Uint32Array(t),e)}function pt(t,e){ut.call(this,new Float32Array(t),e)}function mt(){this.indices=[],this.vertices=[],this.normals=[],this.colors=[],this.uvs=[],this.uvs2=[],this.groups=[],this.morphTargets={},this.skinWeights=[],this.skinIndices=[],this.boundingBox=null,this.boundingSphere=null,this.verticesNeedUpdate=!1,this.normalsNeedUpdate=!1,this.colorsNeedUpdate=!1,this.uvsNeedUpdate=!1,this.groupsNeedUpdate=!1}function gt(t){for(var e=t.length,i=-1/0;e--;)t[e]>i&&(i=t[e]);return i}function vt(){return zr++}function xt(){Object.defineProperty(this,"id",{value:vt()}),this.uuid=wr.generateUUID(),this.name="",this.type="Geometry",this.vertices=[],this.colors=[],this.faces=[],this.faceVertexUvs=[[]],this.morphTargets=[],this.morphNormals=[],this.skinWeights=[],this.skinIndices=[],this.lineDistances=[],this.boundingBox=null,this.boundingSphere=null,this.elementsNeedUpdate=!1,this.verticesNeedUpdate=!1,this.uvsNeedUpdate=!1,this.normalsNeedUpdate=!1,this.colorsNeedUpdate=!1,this.lineDistancesNeedUpdate=!1,this.groupsNeedUpdate=!1}function yt(){Object.defineProperty(this,"id",{value:vt()}),this.uuid=wr.generateUUID(),this.name="",this.type="BufferGeometry",this.index=null,this.attributes={},this.morphAttributes={},this.groups=[],this.boundingBox=null,this.boundingSphere=null,this.drawRange={start:0,count:1/0}}function _t(t,e){ot.call(this),this.type="Mesh",this.geometry=void 0!==t?t:new yt,this.material=void 0!==e?e:new ht({color:16777215*Math.random()}),this.drawMode=ur,this.updateMorphTargets()}function Mt(t,e,i,n,r,a){xt.call(this),this.type="BoxGeometry",this.parameters={width:t,height:e,depth:i,widthSegments:n,heightSegments:r,depthSegments:a},this.fromBufferGeometry(new bt(t,e,i,n,r,a)),this.mergeVertices()}function bt(t,e,i,n,r,a){function o(t,e,i,n,r,a,o,m,g,v,x){var y,_,M=a/g,b=o/v,w=a/2,S=o/2,E=m/2,T=g+1,L=v+1,A=0,P=0,C=new s;for(_=0;_<L;_++){var R=_*b-S;for(y=0;y<T;y++){var N=y*M-w;C[t]=N*n,C[e]=R*r,C[i]=E,h.push(C.x,C.y,C.z),C[t]=0,C[e]=0,C[i]=m>0?1:-1,u.push(C.x,C.y,C.z),f.push(y/g),f.push(1-_/v),A+=1}}for(_=0;_<v;_++)for(y=0;y<g;y++){var D=d+y+T*_,U=d+y+T*(_+1),I=d+(y+1)+T*(_+1),O=d+(y+1)+T*_;l.push(D,U,O),l.push(U,I,O),P+=6}c.addGroup(p,P,x),p+=P,d+=A}yt.call(this),this.type="BoxBufferGeometry",this.parameters={width:t,height:e,depth:i,widthSegments:n,heightSegments:r,depthSegments:a};var c=this;n=Math.floor(n)||1,r=Math.floor(r)||1,a=Math.floor(a)||1;var l=[],h=[],u=[],f=[],d=0,p=0;o("z","y","x",-1,-1,i,e,t,a,r,0),o("z","y","x",1,-1,i,e,-t,a,r,1),o("x","z","y",1,1,t,i,e,n,a,2),o("x","z","y",1,-1,t,i,-e,n,a,3),o("x","y","z",1,-1,t,e,i,n,r,4),o("x","y","z",-1,-1,t,e,-i,n,r,5),this.setIndex(l),this.addAttribute("position",new pt(h,3)),this.addAttribute("normal",new pt(u,3)),this.addAttribute("uv",new pt(f,2))}function wt(t,e,i,n){xt.call(this),this.type="PlaneGeometry",this.parameters={width:t,height:e,widthSegments:i,heightSegments:n},this.fromBufferGeometry(new St(t,e,i,n))}function St(t,e,i,n){yt.call(this),this.type="PlaneBufferGeometry",this.parameters={width:t,height:e,widthSegments:i,heightSegments:n};var r,a,o=t/2,s=e/2,c=Math.floor(i)||1,l=Math.floor(n)||1,h=c+1,u=l+1,f=t/c,d=e/l,p=[],m=[],g=[],v=[];for(a=0;a<u;a++){var x=a*d-s;for(r=0;r<h;r++){var y=r*f-o;m.push(y,-x,0),g.push(0,0,1),v.push(r/c),v.push(1-a/l)}}for(a=0;a<l;a++)for(r=0;r<c;r++){var _=r+h*a,M=r+h*(a+1),b=r+1+h*(a+1),w=r+1+h*a;p.push(_,M,w),p.push(M,b,w)}this.setIndex(p),this.addAttribute("position",new pt(m,3)),this.addAttribute("normal",new pt(g,3)),this.addAttribute("uv",new pt(v,2))}function Et(){ot.call(this),this.type="Camera",this.matrixWorldInverse=new c,this.projectionMatrix=new c}function Tt(t,e,i,n){Et.call(this),this.type="PerspectiveCamera",this.fov=void 0!==t?t:50,this.zoom=1,this.near=void 0!==i?i:.1,this.far=void 0!==n?n:2e3,this.focus=10,this.aspect=void 0!==e?e:1,this.view=null,this.filmGauge=35,this.filmOffset=0,this.updateProjectionMatrix()}function Lt(t,e,i,n,r,a){Et.call(this),this.type="OrthographicCamera",this.zoom=1,this.view=null,this.left=t,this.right=e,this.top=i,this.bottom=n,this.near=void 0!==r?r:.1,this.far=void 0!==a?a:2e3,this.updateProjectionMatrix()}function At(t,e,i){function n(t){s=t}function r(i){i.array instanceof Uint32Array&&e.get("OES_element_index_uint")?(c=t.UNSIGNED_INT,l=4):i.array instanceof Uint16Array?(c=t.UNSIGNED_SHORT,l=2):(c=t.UNSIGNED_BYTE,l=1)}function a(e,n){t.drawElements(s,n,c,e*l),i.calls++,i.vertices+=n,s===t.TRIANGLES&&(i.faces+=n/3)}function o(n,r,a){var o=e.get("ANGLE_instanced_arrays");null!==o&&(o.drawElementsInstancedANGLE(s,a,c,r*l,n.maxInstancedCount),i.calls++,i.vertices+=a*n.maxInstancedCount,s===t.TRIANGLES&&(i.faces+=n.maxInstancedCount*a/3))}var s,c,l;return{setMode:n,setIndex:r,render:a,renderInstances:o}}function Pt(t,e,i){function n(t){o=t}function r(e,n){t.drawArrays(o,e,n),i.calls++,i.vertices+=n,o===t.TRIANGLES&&(i.faces+=n/3)}function a(n){var r=e.get("ANGLE_instanced_arrays");if(null!==r){var a=n.attributes.position,s=0;a.isInterleavedBufferAttribute?(s=a.data.count,r.drawArraysInstancedANGLE(o,0,s,n.maxInstancedCount)):(s=a.count,r.drawArraysInstancedANGLE(o,0,s,n.maxInstancedCount)),i.calls++,i.vertices+=s*n.maxInstancedCount,o===t.TRIANGLES&&(i.faces+=n.maxInstancedCount*s/3)}}var o;return{setMode:n,render:r,renderInstances:a}}function Ct(){var t={};return{get:function(e){if(void 0!==t[e.id])return t[e.id];var n;switch(e.type){case"DirectionalLight":n={direction:new s,color:new W,shadow:!1,shadowBias:0,shadowRadius:1,shadowMapSize:new i};break;case"SpotLight":n={position:new s,direction:new s,color:new W,distance:0,coneCos:0,penumbraCos:0,decay:0,shadow:!1,shadowBias:0,shadowRadius:1,shadowMapSize:new i};break;case"PointLight":n={position:new s,color:new W,distance:0,decay:0,shadow:!1,shadowBias:0,shadowRadius:1,shadowMapSize:new i};break;case"HemisphereLight":n={direction:new s,skyColor:new W,groundColor:new W};break;case"RectAreaLight":n={color:new W,position:new s,halfWidth:new s,halfHeight:new s}}return t[e.id]=n,n}}}function Rt(t,e,i){var n=t.createShader(e);return t.shaderSource(n,i),t.compileShader(n),t.getShaderParameter(n,t.COMPILE_STATUS),t.getShaderInfoLog(n),n}function Nt(t){switch(t){case pr:return["Linear","( value )"];case mr:return["sRGB","( value )"];case vr:return["RGBE","( value )"];case xr:return["RGBM","( value, 7.0 )"];case yr:return["RGBM","( value, 16.0 )"];case _r:return["RGBD","( value, 256.0 )"];case gr:return["Gamma","( value, float( GAMMA_FACTOR ) )"];default:throw new Error("unsupported encoding: "+t)}}function Dt(t,e){var i=Nt(e);return"vec4 "+t+"( vec4 value ) { return "+i[0]+"ToLinear"+i[1]+"; }"}function Ut(t,e){var i=Nt(e);return"vec4 "+t+"( vec4 value ) { return LinearTo"+i[0]+i[1]+"; }"}function It(t,e){var i;switch(e){case gn:i="Linear";break;case vn:i="Reinhard";break;case xn:i="Uncharted2";break;case yn:i="OptimizedCineon";break;default:throw new Error("unsupported toneMapping: "+e)}return"vec3 "+t+"( vec3 color ) { return "+i+"ToneMapping( color ); }"}function Ot(t,e,i){return t=t||{},
[t.derivatives||e.envMapCubeUV||e.bumpMap||e.normalMap||e.flatShading?"#extension GL_OES_standard_derivatives : enable":"",(t.fragDepth||e.logarithmicDepthBuffer)&&i.get("EXT_frag_depth")?"#extension GL_EXT_frag_depth : enable":"",t.drawBuffers&&i.get("WEBGL_draw_buffers")?"#extension GL_EXT_draw_buffers : require":"",(t.shaderTextureLOD||e.envMap)&&i.get("EXT_shader_texture_lod")?"#extension GL_EXT_shader_texture_lod : enable":""].filter(Bt).join("\n")}function zt(t){var e=[];for(var i in t){var n=t[i];!1!==n&&e.push("#define "+i+" "+n)}return e.join("\n")}function Ft(t,e,i){for(var n={},r=t.getProgramParameter(e,t.ACTIVE_ATTRIBUTES),a=0;a<r;a++){var o=t.getActiveAttrib(e,a),s=o.name;n[s]=t.getAttribLocation(e,s)}return n}function Bt(t){return""!==t}function Gt(t,e){return t.replace(/NUM_DIR_LIGHTS/g,e.numDirLights).replace(/NUM_SPOT_LIGHTS/g,e.numSpotLights).replace(/NUM_RECT_AREA_LIGHTS/g,e.numRectAreaLights).replace(/NUM_POINT_LIGHTS/g,e.numPointLights).replace(/NUM_HEMI_LIGHTS/g,e.numHemiLights)}function Vt(t){function e(t,e){var i=Rr[e];if(void 0===i)throw new Error("Can not resolve #include <"+e+">");return Vt(i)}var i=/#include +<([\w\d.]+)>/g;return t.replace(i,e)}function kt(t){function e(t,e,i,n){for(var r="",a=parseInt(e);a<parseInt(i);a++)r+=n.replace(/\[ i \]/g,"[ "+a+" ]");return r}var i=/for \( int i \= (\d+)\; i < (\d+)\; i \+\+ \) \{([\s\S]+?)(?=\})\}/g;return t.replace(i,e)}function Ht(t,e,i,n){var r=t.context,a=i.extensions,o=i.defines,s=i.__webglShader.vertexShader,c=i.__webglShader.fragmentShader,l="SHADOWMAP_TYPE_BASIC";n.shadowMapType===Ti?l="SHADOWMAP_TYPE_PCF":n.shadowMapType===Li&&(l="SHADOWMAP_TYPE_PCF_SOFT");var h="ENVMAP_TYPE_CUBE",u="ENVMAP_MODE_REFLECTION",f="ENVMAP_BLENDING_MULTIPLY";if(n.envMap){switch(i.envMap.mapping){case _n:case Mn:h="ENVMAP_TYPE_CUBE";break;case En:case Tn:h="ENVMAP_TYPE_CUBE_UV";break;case bn:case wn:h="ENVMAP_TYPE_EQUIREC";break;case Sn:h="ENVMAP_TYPE_SPHERE"}switch(i.envMap.mapping){case Mn:case wn:u="ENVMAP_MODE_REFRACTION"}switch(i.combine){case fn:f="ENVMAP_BLENDING_MULTIPLY";break;case dn:f="ENVMAP_BLENDING_MIX";break;case pn:f="ENVMAP_BLENDING_ADD"}}var d,p,m=t.gammaFactor>0?t.gammaFactor:1,g=Ot(a,n,t.extensions),v=zt(o),x=r.createProgram();i.isRawShaderMaterial?(d=[v,"\n"].filter(Bt).join("\n"),p=[g,v,"\n"].filter(Bt).join("\n")):(d=["precision "+n.precision+" float;","precision "+n.precision+" int;","#define SHADER_NAME "+i.__webglShader.name,v,n.supportsVertexTextures?"#define VERTEX_TEXTURES":"","#define GAMMA_FACTOR "+m,"#define MAX_BONES "+n.maxBones,n.useFog&&n.fog?"#define USE_FOG":"",n.useFog&&n.fogExp?"#define FOG_EXP2":"",n.map?"#define USE_MAP":"",n.envMap?"#define USE_ENVMAP":"",n.envMap?"#define "+u:"",n.lightMap?"#define USE_LIGHTMAP":"",n.aoMap?"#define USE_AOMAP":"",n.emissiveMap?"#define USE_EMISSIVEMAP":"",n.bumpMap?"#define USE_BUMPMAP":"",n.normalMap?"#define USE_NORMALMAP":"",n.displacementMap&&n.supportsVertexTextures?"#define USE_DISPLACEMENTMAP":"",n.specularMap?"#define USE_SPECULARMAP":"",n.roughnessMap?"#define USE_ROUGHNESSMAP":"",n.metalnessMap?"#define USE_METALNESSMAP":"",n.alphaMap?"#define USE_ALPHAMAP":"",n.vertexColors?"#define USE_COLOR":"",n.flatShading?"#define FLAT_SHADED":"",n.skinning?"#define USE_SKINNING":"",n.useVertexTexture?"#define BONE_TEXTURE":"",n.morphTargets?"#define USE_MORPHTARGETS":"",n.morphNormals&&!1===n.flatShading?"#define USE_MORPHNORMALS":"",n.doubleSided?"#define DOUBLE_SIDED":"",n.flipSided?"#define FLIP_SIDED":"","#define NUM_CLIPPING_PLANES "+n.numClippingPlanes,n.shadowMapEnabled?"#define USE_SHADOWMAP":"",n.shadowMapEnabled?"#define "+l:"",n.sizeAttenuation?"#define USE_SIZEATTENUATION":"",n.logarithmicDepthBuffer?"#define USE_LOGDEPTHBUF":"",n.logarithmicDepthBuffer&&t.extensions.get("EXT_frag_depth")?"#define USE_LOGDEPTHBUF_EXT":"","uniform mat4 modelMatrix;","uniform mat4 modelViewMatrix;","uniform mat4 projectionMatrix;","uniform mat4 viewMatrix;","uniform mat3 normalMatrix;","uniform vec3 cameraPosition;","attribute vec3 position;","attribute vec3 normal;","attribute vec2 uv;","#ifdef USE_COLOR","\tattribute vec3 color;","#endif","#ifdef USE_MORPHTARGETS","\tattribute vec3 morphTarget0;","\tattribute vec3 morphTarget1;","\tattribute vec3 morphTarget2;","\tattribute vec3 morphTarget3;","\t#ifdef USE_MORPHNORMALS","\t\tattribute vec3 morphNormal0;","\t\tattribute vec3 morphNormal1;","\t\tattribute vec3 morphNormal2;","\t\tattribute vec3 morphNormal3;","\t#else","\t\tattribute vec3 morphTarget4;","\t\tattribute vec3 morphTarget5;","\t\tattribute vec3 morphTarget6;","\t\tattribute vec3 morphTarget7;","\t#endif","#endif","#ifdef USE_SKINNING","\tattribute vec4 skinIndex;","\tattribute vec4 skinWeight;","#endif","\n"].filter(Bt).join("\n"),p=[g,"precision "+n.precision+" float;","precision "+n.precision+" int;","#define SHADER_NAME "+i.__webglShader.name,v,n.alphaTest?"#define ALPHATEST "+n.alphaTest:"","#define GAMMA_FACTOR "+m,n.useFog&&n.fog?"#define USE_FOG":"",n.useFog&&n.fogExp?"#define FOG_EXP2":"",n.map?"#define USE_MAP":"",n.envMap?"#define USE_ENVMAP":"",n.envMap?"#define "+h:"",n.envMap?"#define "+u:"",n.envMap?"#define "+f:"",n.lightMap?"#define USE_LIGHTMAP":"",n.aoMap?"#define USE_AOMAP":"",n.emissiveMap?"#define USE_EMISSIVEMAP":"",n.bumpMap?"#define USE_BUMPMAP":"",n.normalMap?"#define USE_NORMALMAP":"",n.specularMap?"#define USE_SPECULARMAP":"",n.roughnessMap?"#define USE_ROUGHNESSMAP":"",n.metalnessMap?"#define USE_METALNESSMAP":"",n.alphaMap?"#define USE_ALPHAMAP":"",n.vertexColors?"#define USE_COLOR":"",n.gradientMap?"#define USE_GRADIENTMAP":"",n.flatShading?"#define FLAT_SHADED":"",n.doubleSided?"#define DOUBLE_SIDED":"",n.flipSided?"#define FLIP_SIDED":"","#define NUM_CLIPPING_PLANES "+n.numClippingPlanes,"#define UNION_CLIPPING_PLANES "+(n.numClippingPlanes-n.numClipIntersection),n.shadowMapEnabled?"#define USE_SHADOWMAP":"",n.shadowMapEnabled?"#define "+l:"",n.premultipliedAlpha?"#define PREMULTIPLIED_ALPHA":"",n.physicallyCorrectLights?"#define PHYSICALLY_CORRECT_LIGHTS":"",n.logarithmicDepthBuffer?"#define USE_LOGDEPTHBUF":"",n.logarithmicDepthBuffer&&t.extensions.get("EXT_frag_depth")?"#define USE_LOGDEPTHBUF_EXT":"",n.envMap&&t.extensions.get("EXT_shader_texture_lod")?"#define TEXTURE_LOD_EXT":"","uniform mat4 viewMatrix;","uniform vec3 cameraPosition;",n.toneMapping!==mn?"#define TONE_MAPPING":"",n.toneMapping!==mn?Rr.tonemapping_pars_fragment:"",n.toneMapping!==mn?It("toneMapping",n.toneMapping):"",n.outputEncoding||n.mapEncoding||n.envMapEncoding||n.emissiveMapEncoding?Rr.encodings_pars_fragment:"",n.mapEncoding?Dt("mapTexelToLinear",n.mapEncoding):"",n.envMapEncoding?Dt("envMapTexelToLinear",n.envMapEncoding):"",n.emissiveMapEncoding?Dt("emissiveMapTexelToLinear",n.emissiveMapEncoding):"",n.outputEncoding?Ut("linearToOutputTexel",n.outputEncoding):"",n.depthPacking?"#define DEPTH_PACKING "+i.depthPacking:"","\n"].filter(Bt).join("\n")),s=Vt(s,n),s=Gt(s,n),c=Vt(c,n),c=Gt(c,n),i.isShaderMaterial||(s=kt(s),c=kt(c));var y=d+s,_=p+c,M=Rt(r,r.VERTEX_SHADER,y),b=Rt(r,r.FRAGMENT_SHADER,_);r.attachShader(x,M),r.attachShader(x,b),void 0!==i.index0AttributeName?r.bindAttribLocation(x,0,i.index0AttributeName):!0===n.morphTargets&&r.bindAttribLocation(x,0,"position"),r.linkProgram(x);var w=r.getProgramInfoLog(x),S=r.getShaderInfoLog(M),E=r.getShaderInfoLog(b),T=!0,L=!0;!1===r.getProgramParameter(x,r.LINK_STATUS)?T=!1:""!==w||""!==S&&""!==E||(L=!1),L&&(this.diagnostics={runnable:T,material:i,programLog:w,vertexShader:{log:S,prefix:d},fragmentShader:{log:E,prefix:p}}),r.deleteShader(M),r.deleteShader(b);var A;this.getUniforms=function(){return void 0===A&&(A=new H(r,x,t)),A};var P;return this.getAttributes=function(){return void 0===P&&(P=Ft(r,x)),P},this.destroy=function(){r.deleteProgram(x),this.program=void 0},Object.defineProperties(this,{uniforms:{get:function(){return this.getUniforms()}},attributes:{get:function(){return this.getAttributes()}}}),this.id=Fr++,this.code=e,this.usedTimes=1,this.program=x,this.vertexShader=M,this.fragmentShader=b,this}function Wt(t,e){function i(t){if(e.floatVertexTextures&&t&&t.skeleton&&t.skeleton.useVertexTexture)return 1024;var i=e.maxVertexUniforms,n=Math.floor((i-20)/4),r=n;return void 0!==t&&t&&t.isSkinnedMesh&&(r=Math.min(t.skeleton.bones.length,r),t.skeleton.bones.length),r}function n(t,e){var i;return t?t.isTexture?i=t.encoding:t.isWebGLRenderTarget&&(i=t.texture.encoding):i=pr,i===pr&&e&&(i=gr),i}var r=[],a={MeshDepthMaterial:"depth",MeshNormalMaterial:"normal",MeshBasicMaterial:"basic",MeshLambertMaterial:"lambert",MeshPhongMaterial:"phong",MeshToonMaterial:"phong",MeshStandardMaterial:"physical",MeshPhysicalMaterial:"physical",LineBasicMaterial:"basic",LineDashedMaterial:"dashed",PointsMaterial:"points"},o=["precision","supportsVertexTextures","map","mapEncoding","envMap","envMapMode","envMapEncoding","lightMap","aoMap","emissiveMap","emissiveMapEncoding","bumpMap","normalMap","displacementMap","specularMap","roughnessMap","metalnessMap","gradientMap","alphaMap","combine","vertexColors","fog","useFog","fogExp","flatShading","sizeAttenuation","logarithmicDepthBuffer","skinning","maxBones","useVertexTexture","morphTargets","morphNormals","maxMorphTargets","maxMorphNormals","premultipliedAlpha","numDirLights","numPointLights","numSpotLights","numHemiLights","numRectAreaLights","shadowMapEnabled","shadowMapType","toneMapping","physicallyCorrectLights","alphaTest","doubleSided","flipSided","numClippingPlanes","numClipIntersection","depthPacking"];this.getParameters=function(r,o,s,c,l,h){var u=a[r.type],f=i(h),d=t.getPrecision();null!==r.precision&&(d=e.getMaxPrecision(r.precision),r.precision);var p=t.getCurrentRenderTarget();return{shaderID:u,precision:d,supportsVertexTextures:e.vertexTextures,outputEncoding:n(p?p.texture:null,t.gammaOutput),map:!!r.map,mapEncoding:n(r.map,t.gammaInput),envMap:!!r.envMap,envMapMode:r.envMap&&r.envMap.mapping,envMapEncoding:n(r.envMap,t.gammaInput),envMapCubeUV:!!r.envMap&&(r.envMap.mapping===En||r.envMap.mapping===Tn),lightMap:!!r.lightMap,aoMap:!!r.aoMap,emissiveMap:!!r.emissiveMap,emissiveMapEncoding:n(r.emissiveMap,t.gammaInput),bumpMap:!!r.bumpMap,normalMap:!!r.normalMap,displacementMap:!!r.displacementMap,roughnessMap:!!r.roughnessMap,metalnessMap:!!r.metalnessMap,specularMap:!!r.specularMap,alphaMap:!!r.alphaMap,gradientMap:!!r.gradientMap,combine:r.combine,vertexColors:r.vertexColors,fog:!!s,useFog:r.fog,fogExp:s&&s.isFogExp2,flatShading:r.shading===Ri,sizeAttenuation:r.sizeAttenuation,logarithmicDepthBuffer:e.logarithmicDepthBuffer,skinning:r.skinning,maxBones:f,useVertexTexture:e.floatVertexTextures&&h&&h.skeleton&&h.skeleton.useVertexTexture,morphTargets:r.morphTargets,morphNormals:r.morphNormals,maxMorphTargets:t.maxMorphTargets,maxMorphNormals:t.maxMorphNormals,numDirLights:o.directional.length,numPointLights:o.point.length,numSpotLights:o.spot.length,numRectAreaLights:o.rectArea.length,numHemiLights:o.hemi.length,numClippingPlanes:c,numClipIntersection:l,shadowMapEnabled:t.shadowMap.enabled&&h.receiveShadow&&o.shadows.length>0,shadowMapType:t.shadowMap.type,toneMapping:t.toneMapping,physicallyCorrectLights:t.physicallyCorrectLights,premultipliedAlpha:r.premultipliedAlpha,alphaTest:r.alphaTest,doubleSided:r.side===Ci,flipSided:r.side===Pi,depthPacking:void 0!==r.depthPacking&&r.depthPacking}},this.getProgramCode=function(t,e){var i=[];if(e.shaderID?i.push(e.shaderID):(i.push(t.fragmentShader),i.push(t.vertexShader)),void 0!==t.defines)for(var n in t.defines)i.push(n),i.push(t.defines[n]);for(var r=0;r<o.length;r++)i.push(e[o[r]]);return i.join()},this.acquireProgram=function(e,i,n){for(var a,o=0,s=r.length;o<s;o++){var c=r[o];if(c.code===n){a=c,++a.usedTimes;break}}return void 0===a&&(a=new Ht(t,n,e,i),r.push(a)),a},this.releaseProgram=function(t){if(0==--t.usedTimes){var e=r.indexOf(t);r[e]=r[r.length-1],r.pop(),t.destroy()}},this.programs=r}function jt(t,e,i){function n(t){var r=t.target,s=c[r.id];null!==s.index&&a(s.index),o(s.attributes),r.removeEventListener("dispose",n),delete c[r.id];var l=e.get(r);l.wireframe&&a(l.wireframe),e.delete(r);var h=e.get(s);h.wireframe&&a(h.wireframe),e.delete(s),i.memory.geometries--}function r(t){return t.isInterleavedBufferAttribute?e.get(t.data).__webglBuffer:e.get(t).__webglBuffer}function a(e){var i=r(e);void 0!==i&&(t.deleteBuffer(i),s(e))}function o(t){for(var e in t)a(t[e])}function s(t){t.isInterleavedBufferAttribute?e.delete(t.data):e.delete(t)}var c={};return{get:function(t){var e=t.geometry;if(void 0!==c[e.id])return c[e.id];e.addEventListener("dispose",n);var r;return e.isBufferGeometry?r=e:e.isGeometry&&(void 0===e._bufferGeometry&&(e._bufferGeometry=(new yt).setFromObject(t)),r=e._bufferGeometry),c[e.id]=r,i.memory.geometries++,r}}}function Xt(t,e,i){function n(e){var i=h.get(e);e.geometry.isGeometry&&i.updateFromObject(e);var n=i.index,a=i.attributes;null!==n&&r(n,t.ELEMENT_ARRAY_BUFFER);for(var o in a)r(a[o],t.ARRAY_BUFFER);var s=i.morphAttributes;for(var o in s)for(var c=s[o],l=0,u=c.length;l<u;l++)r(c[l],t.ARRAY_BUFFER);return i}function r(t,i){var n=t.isInterleavedBufferAttribute?t.data:t,r=e.get(n);void 0===r.__webglBuffer?a(r,n,i):r.version!==n.version&&o(r,n,i)}function a(e,i,n){e.__webglBuffer=t.createBuffer(),t.bindBuffer(n,e.__webglBuffer);var r=i.dynamic?t.DYNAMIC_DRAW:t.STATIC_DRAW;t.bufferData(n,i.array,r);var a=t.FLOAT,o=i.array;o instanceof Float32Array?a=t.FLOAT:o instanceof Float64Array||(o instanceof Uint16Array?a=t.UNSIGNED_SHORT:o instanceof Int16Array?a=t.SHORT:o instanceof Uint32Array?a=t.UNSIGNED_INT:o instanceof Int32Array?a=t.INT:o instanceof Int8Array?a=t.BYTE:o instanceof Uint8Array&&(a=t.UNSIGNED_BYTE)),e.bytesPerElement=o.BYTES_PER_ELEMENT,e.type=a,e.version=i.version,i.onUploadCallback()}function o(e,i,n){t.bindBuffer(n,e.__webglBuffer),!1===i.dynamic?t.bufferData(n,i.array,t.STATIC_DRAW):-1===i.updateRange.count?t.bufferSubData(n,0,i.array):0===i.updateRange.count||(t.bufferSubData(n,i.updateRange.offset*i.array.BYTES_PER_ELEMENT,i.array.subarray(i.updateRange.offset,i.updateRange.offset+i.updateRange.count)),i.updateRange.count=0),e.version=i.version}function s(t){return t.isInterleavedBufferAttribute?e.get(t.data).__webglBuffer:e.get(t).__webglBuffer}function c(t){return t.isInterleavedBufferAttribute?e.get(t.data):e.get(t)}function l(i){var n=e.get(i);if(void 0!==n.wireframe)return n.wireframe;var a=[],o=i.index,s=i.attributes;if(null!==o)for(var c=o.array,l=0,h=c.length;l<h;l+=3){var u=c[l+0],f=c[l+1],d=c[l+2];a.push(u,f,f,d,d,u)}else for(var c=s.position.array,l=0,h=c.length/3-1;l<h;l+=3){var u=l+0,f=l+1,d=l+2;a.push(u,f,f,d,d,u)}var p=new(gt(a)>65535?dt:ft)(a,1);return r(p,t.ELEMENT_ARRAY_BUFFER),n.wireframe=p,p}var h=new jt(t,e,i);return{getAttributeBuffer:s,getAttributeProperties:c,getWireframeAttribute:l,update:n}}function Yt(t,e,i,n,r,a,o){function s(t,e){if(t.width>e||t.height>e){var i=e/Math.max(t.width,t.height),n=document.createElementNS("http://www.w3.org/1999/xhtml","canvas");n.width=Math.floor(t.width*i),n.height=Math.floor(t.height*i);return n.getContext("2d").drawImage(t,0,0,t.width,t.height,0,0,n.width,n.height),n}return t}function c(t){return wr.isPowerOfTwo(t.width)&&wr.isPowerOfTwo(t.height)}function l(t){if(t instanceof HTMLImageElement||t instanceof HTMLCanvasElement){var e=document.createElementNS("http://www.w3.org/1999/xhtml","canvas");e.width=wr.nearestPowerOfTwo(t.width),e.height=wr.nearestPowerOfTwo(t.height);return e.getContext("2d").drawImage(t,0,0,e.width,e.height),e}return t}function h(t){return t.wrapS!==An||t.wrapT!==An||t.minFilter!==Cn&&t.minFilter!==Dn}function u(e){return e===Cn||e===Rn||e===Nn?t.NEAREST:t.LINEAR}function f(t){var e=t.target;e.removeEventListener("dispose",f),p(e),L.textures--}function d(t){var e=t.target;e.removeEventListener("dispose",d),m(e),L.textures--}function p(e){var i=n.get(e);if(e.image&&i.__image__webglTextureCube)t.deleteTexture(i.__image__webglTextureCube);else{if(void 0===i.__webglInit)return;t.deleteTexture(i.__webglTexture)}n.delete(e)}function m(e){var i=n.get(e),r=n.get(e.texture);if(e){if(void 0!==r.__webglTexture&&t.deleteTexture(r.__webglTexture),e.depthTexture&&e.depthTexture.dispose(),e.isWebGLRenderTargetCube)for(var a=0;a<6;a++)t.deleteFramebuffer(i.__webglFramebuffer[a]),i.__webglDepthbuffer&&t.deleteRenderbuffer(i.__webglDepthbuffer[a]);else t.deleteFramebuffer(i.__webglFramebuffer),i.__webglDepthbuffer&&t.deleteRenderbuffer(i.__webglDepthbuffer);n.delete(e.texture),n.delete(e)}}function g(e,r){var a=n.get(e);if(e.version>0&&a.__version!==e.version){var o=e.image;if(void 0===o);else if(!1!==o.complete)return void _(a,e,r)}i.activeTexture(t.TEXTURE0+r),i.bindTexture(t.TEXTURE_2D,a.__webglTexture)}function v(e,o){var l=n.get(e);if(6===e.image.length)if(e.version>0&&l.__version!==e.version){l.__image__webglTextureCube||(e.addEventListener("dispose",f),l.__image__webglTextureCube=t.createTexture(),L.textures++),i.activeTexture(t.TEXTURE0+o),i.bindTexture(t.TEXTURE_CUBE_MAP,l.__image__webglTextureCube),t.pixelStorei(t.UNPACK_FLIP_Y_WEBGL,e.flipY);for(var h=e&&e.isCompressedTexture,u=e.image[0]&&e.image[0].isDataTexture,d=[],p=0;p<6;p++)d[p]=h||u?u?e.image[p].image:e.image[p]:s(e.image[p],r.maxCubemapSize);var m=d[0],g=c(m),v=a(e.format),x=a(e.type);y(t.TEXTURE_CUBE_MAP,e,g);for(var p=0;p<6;p++)if(h)for(var _,M=d[p].mipmaps,b=0,w=M.length;b<w;b++)_=M[b],e.format!==Jn&&e.format!==Zn?i.getCompressedTextureFormats().indexOf(v)>-1&&i.compressedTexImage2D(t.TEXTURE_CUBE_MAP_POSITIVE_X+p,b,v,_.width,_.height,0,_.data):i.texImage2D(t.TEXTURE_CUBE_MAP_POSITIVE_X+p,b,v,_.width,_.height,0,v,x,_.data);else u?i.texImage2D(t.TEXTURE_CUBE_MAP_POSITIVE_X+p,0,v,d[p].width,d[p].height,0,v,x,d[p].data):i.texImage2D(t.TEXTURE_CUBE_MAP_POSITIVE_X+p,0,v,v,x,d[p]);e.generateMipmaps&&g&&t.generateMipmap(t.TEXTURE_CUBE_MAP),l.__version=e.version,e.onUpdate&&e.onUpdate(e)}else i.activeTexture(t.TEXTURE0+o),i.bindTexture(t.TEXTURE_CUBE_MAP,l.__image__webglTextureCube)}function x(e,r){i.activeTexture(t.TEXTURE0+r),i.bindTexture(t.TEXTURE_CUBE_MAP,n.get(e).__webglTexture)}function y(i,o,s){var c;if(s?(t.texParameteri(i,t.TEXTURE_WRAP_S,a(o.wrapS)),t.texParameteri(i,t.TEXTURE_WRAP_T,a(o.wrapT)),t.texParameteri(i,t.TEXTURE_MAG_FILTER,a(o.magFilter)),t.texParameteri(i,t.TEXTURE_MIN_FILTER,a(o.minFilter))):(t.texParameteri(i,t.TEXTURE_WRAP_S,t.CLAMP_TO_EDGE),t.texParameteri(i,t.TEXTURE_WRAP_T,t.CLAMP_TO_EDGE),o.wrapS!==An||o.wrapT,t.texParameteri(i,t.TEXTURE_MAG_FILTER,u(o.magFilter)),t.texParameteri(i,t.TEXTURE_MIN_FILTER,u(o.minFilter)),o.minFilter!==Cn&&o.minFilter),c=e.get("EXT_texture_filter_anisotropic")){if(o.type===kn&&null===e.get("OES_texture_float_linear"))return;if(o.type===Hn&&null===e.get("OES_texture_half_float_linear"))return;(o.anisotropy>1||n.get(o).__currentAnisotropy)&&(t.texParameterf(i,c.TEXTURE_MAX_ANISOTROPY_EXT,Math.min(o.anisotropy,r.getMaxAnisotropy())),n.get(o).__currentAnisotropy=o.anisotropy)}}function _(e,n,o){void 0===e.__webglInit&&(e.__webglInit=!0,n.addEventListener("dispose",f),e.__webglTexture=t.createTexture(),L.textures++),i.activeTexture(t.TEXTURE0+o),i.bindTexture(t.TEXTURE_2D,e.__webglTexture),t.pixelStorei(t.UNPACK_FLIP_Y_WEBGL,n.flipY),t.pixelStorei(t.UNPACK_PREMULTIPLY_ALPHA_WEBGL,n.premultiplyAlpha),t.pixelStorei(t.UNPACK_ALIGNMENT,n.unpackAlignment);var u=s(n.image,r.maxTextureSize);h(n)&&!1===c(u)&&(u=l(u));var d=c(u),p=a(n.format),m=a(n.type);y(t.TEXTURE_2D,n,d);var g,v=n.mipmaps;if(n.isDepthTexture){var x=t.DEPTH_COMPONENT;if(n.type===kn){if(!A)throw new Error("Float Depth Texture only supported in WebGL2.0");x=t.DEPTH_COMPONENT32F}else A&&(x=t.DEPTH_COMPONENT16);n.format===tr&&x===t.DEPTH_COMPONENT&&n.type!==Bn&&n.type!==Vn&&(n.type=Bn,m=a(n.type)),n.format===er&&(x=t.DEPTH_STENCIL,n.type!==Yn&&(n.type=Yn,m=a(n.type))),i.texImage2D(t.TEXTURE_2D,0,x,u.width,u.height,0,p,m,null)}else if(n.isDataTexture)if(v.length>0&&d){for(var _=0,M=v.length;_<M;_++)g=v[_],i.texImage2D(t.TEXTURE_2D,_,p,g.width,g.height,0,p,m,g.data);n.generateMipmaps=!1}else i.texImage2D(t.TEXTURE_2D,0,p,u.width,u.height,0,p,m,u.data);else if(n.isCompressedTexture)for(var _=0,M=v.length;_<M;_++)g=v[_],n.format!==Jn&&n.format!==Zn?i.getCompressedTextureFormats().indexOf(p)>-1&&i.compressedTexImage2D(t.TEXTURE_2D,_,p,g.width,g.height,0,g.data):i.texImage2D(t.TEXTURE_2D,_,p,g.width,g.height,0,p,m,g.data);else if(v.length>0&&d){for(var _=0,M=v.length;_<M;_++)g=v[_],i.texImage2D(t.TEXTURE_2D,_,p,p,m,g);n.generateMipmaps=!1}else i.texImage2D(t.TEXTURE_2D,0,p,p,m,u);n.generateMipmaps&&d&&t.generateMipmap(t.TEXTURE_2D),e.__version=n.version,n.onUpdate&&n.onUpdate(n)}function M(e,r,o,s){var c=a(r.texture.format),l=a(r.texture.type);i.texImage2D(s,0,c,r.width,r.height,0,c,l,null),t.bindFramebuffer(t.FRAMEBUFFER,e),t.framebufferTexture2D(t.FRAMEBUFFER,o,s,n.get(r.texture).__webglTexture,0),t.bindFramebuffer(t.FRAMEBUFFER,null)}function b(e,i){t.bindRenderbuffer(t.RENDERBUFFER,e),i.depthBuffer&&!i.stencilBuffer?(t.renderbufferStorage(t.RENDERBUFFER,t.DEPTH_COMPONENT16,i.width,i.height),t.framebufferRenderbuffer(t.FRAMEBUFFER,t.DEPTH_ATTACHMENT,t.RENDERBUFFER,e)):i.depthBuffer&&i.stencilBuffer?(t.renderbufferStorage(t.RENDERBUFFER,t.DEPTH_STENCIL,i.width,i.height),t.framebufferRenderbuffer(t.FRAMEBUFFER,t.DEPTH_STENCIL_ATTACHMENT,t.RENDERBUFFER,e)):t.renderbufferStorage(t.RENDERBUFFER,t.RGBA4,i.width,i.height),t.bindRenderbuffer(t.RENDERBUFFER,null)}function w(e,i){if(i&&i.isWebGLRenderTargetCube)throw new Error("Depth Texture with cube render targets is not supported!");if(t.bindFramebuffer(t.FRAMEBUFFER,e),!i.depthTexture||!i.depthTexture.isDepthTexture)throw new Error("renderTarget.depthTexture must be an instance of THREE.DepthTexture");n.get(i.depthTexture).__webglTexture&&i.depthTexture.image.width===i.width&&i.depthTexture.image.height===i.height||(i.depthTexture.image.width=i.width,i.depthTexture.image.height=i.height,i.depthTexture.needsUpdate=!0),g(i.depthTexture,0);var r=n.get(i.depthTexture).__webglTexture;if(i.depthTexture.format===tr)t.framebufferTexture2D(t.FRAMEBUFFER,t.DEPTH_ATTACHMENT,t.TEXTURE_2D,r,0);else{if(i.depthTexture.format!==er)throw new Error("Unknown depthTexture format");t.framebufferTexture2D(t.FRAMEBUFFER,t.DEPTH_STENCIL_ATTACHMENT,t.TEXTURE_2D,r,0)}}function S(e){var i=n.get(e),r=!0===e.isWebGLRenderTargetCube;if(e.depthTexture){if(r)throw new Error("target.depthTexture not supported in Cube render targets");w(i.__webglFramebuffer,e)}else if(r){i.__webglDepthbuffer=[];for(var a=0;a<6;a++)t.bindFramebuffer(t.FRAMEBUFFER,i.__webglFramebuffer[a]),i.__webglDepthbuffer[a]=t.createRenderbuffer(),b(i.__webglDepthbuffer[a],e)}else t.bindFramebuffer(t.FRAMEBUFFER,i.__webglFramebuffer),i.__webglDepthbuffer=t.createRenderbuffer(),b(i.__webglDepthbuffer,e);t.bindFramebuffer(t.FRAMEBUFFER,null)}function E(e){var r=n.get(e),a=n.get(e.texture);e.addEventListener("dispose",d),a.__webglTexture=t.createTexture(),L.textures++;var o=!0===e.isWebGLRenderTargetCube,s=c(e);if(o){r.__webglFramebuffer=[];for(var l=0;l<6;l++)r.__webglFramebuffer[l]=t.createFramebuffer()}else r.__webglFramebuffer=t.createFramebuffer();if(o){i.bindTexture(t.TEXTURE_CUBE_MAP,a.__webglTexture),y(t.TEXTURE_CUBE_MAP,e.texture,s);for(var l=0;l<6;l++)M(r.__webglFramebuffer[l],e,t.COLOR_ATTACHMENT0,t.TEXTURE_CUBE_MAP_POSITIVE_X+l);e.texture.generateMipmaps&&s&&t.generateMipmap(t.TEXTURE_CUBE_MAP),i.bindTexture(t.TEXTURE_CUBE_MAP,null)}else i.bindTexture(t.TEXTURE_2D,a.__webglTexture),y(t.TEXTURE_2D,e.texture,s),M(r.__webglFramebuffer,e,t.COLOR_ATTACHMENT0,t.TEXTURE_2D),e.texture.generateMipmaps&&s&&t.generateMipmap(t.TEXTURE_2D),i.bindTexture(t.TEXTURE_2D,null);e.depthBuffer&&S(e)}function T(e){var r=e.texture;if(r.generateMipmaps&&c(e)&&r.minFilter!==Cn&&r.minFilter!==Dn){var a=e&&e.isWebGLRenderTargetCube?t.TEXTURE_CUBE_MAP:t.TEXTURE_2D,o=n.get(r).__webglTexture;i.bindTexture(a,o),t.generateMipmap(a),i.bindTexture(a,null)}}var L=o.memory,A="undefined"!=typeof WebGL2RenderingContext&&t instanceof WebGL2RenderingContext;this.setTexture2D=g,this.setTextureCube=v,this.setTextureCubeDynamic=x,this.setupRenderTarget=E,this.updateRenderTargetMipmap=T}function qt(){var t={};return{get:function(e){var i=e.uuid,n=t[i];return void 0===n&&(n={},t[i]=n),n},delete:function(e){delete t[e.uuid]},clear:function(){t={}}}}function Zt(t,e,i){function n(){var e=!1,i=new r,n=null,a=new r;return{setMask:function(i){n===i||e||(t.colorMask(i,i,i,i),n=i)},setLocked:function(t){e=t},setClear:function(e,n,r,o,s){!0===s&&(e*=o,n*=o,r*=o),i.set(e,n,r,o),!1===a.equals(i)&&(t.clearColor(e,n,r,o),a.copy(i))},reset:function(){e=!1,n=null,a.set(0,0,0,1)}}}function a(){var e=!1,i=null,n=null,r=null;return{setTest:function(e){e?d(t.DEPTH_TEST):p(t.DEPTH_TEST)},setMask:function(n){i===n||e||(t.depthMask(n),i=n)},setFunc:function(e){if(n!==e){if(e)switch(e){case rn:t.depthFunc(t.NEVER);break;case an:t.depthFunc(t.ALWAYS);break;case on:t.depthFunc(t.LESS);break;case sn:t.depthFunc(t.LEQUAL);break;case cn:t.depthFunc(t.EQUAL);break;case ln:t.depthFunc(t.GEQUAL);break;case hn:t.depthFunc(t.GREATER);break;case un:t.depthFunc(t.NOTEQUAL);break;default:t.depthFunc(t.LEQUAL)}else t.depthFunc(t.LEQUAL);n=e}},setLocked:function(t){e=t},setClear:function(e){r!==e&&(t.clearDepth(e),r=e)},reset:function(){e=!1,i=null,n=null,r=null}}}function o(){var e=!1,i=null,n=null,r=null,a=null,o=null,s=null,c=null,l=null;return{setTest:function(e){e?d(t.STENCIL_TEST):p(t.STENCIL_TEST)},setMask:function(n){i===n||e||(t.stencilMask(n),i=n)},setFunc:function(e,i,o){n===e&&r===i&&a===o||(t.stencilFunc(e,i,o),n=e,r=i,a=o)},setOp:function(e,i,n){o===e&&s===i&&c===n||(t.stencilOp(e,i,n),o=e,s=i,c=n)},setLocked:function(t){e=t},setClear:function(e){l!==e&&(t.clearStencil(e),l=e)},reset:function(){e=!1,i=null,n=null,r=null,a=null,o=null,s=null,c=null,l=null}}}function s(e,i,n){var r=new Uint8Array(4),a=t.createTexture();t.bindTexture(e,a),t.texParameteri(e,t.TEXTURE_MIN_FILTER,t.NEAREST),t.texParameteri(e,t.TEXTURE_MAG_FILTER,t.NEAREST);for(var o=0;o<n;o++)t.texImage2D(i+o,0,t.RGBA,1,1,0,t.RGBA,t.UNSIGNED_BYTE,r);return a}function c(){F.setClear(0,0,0,1),B.setClear(1),G.setClear(0),d(t.DEPTH_TEST),_(sn),E(!1),T(wi),d(t.CULL_FACE),d(t.BLEND),g(Oi)}function l(){for(var t=0,e=k.length;t<e;t++)k[t]=0}function h(i){if(k[i]=1,0===H[i]&&(t.enableVertexAttribArray(i),H[i]=1),0!==W[i]){e.get("ANGLE_instanced_arrays").vertexAttribDivisorANGLE(i,0),W[i]=0}}function u(e,i,n){k[e]=1,0===H[e]&&(t.enableVertexAttribArray(e),H[e]=1),W[e]!==i&&(n.vertexAttribDivisorANGLE(e,i),W[e]=i)}function f(){for(var e=0,i=H.length;e!==i;++e)H[e]!==k[e]&&(t.disableVertexAttribArray(e),H[e]=0)}function d(e){!0!==j[e]&&(t.enable(e),j[e]=!0)}function p(e){!1!==j[e]&&(t.disable(e),j[e]=!1)}function m(){if(null===X&&(X=[],e.get("WEBGL_compressed_texture_pvrtc")||e.get("WEBGL_compressed_texture_s3tc")||e.get("WEBGL_compressed_texture_etc1")))for(var i=t.getParameter(t.COMPRESSED_TEXTURE_FORMATS),n=0;n<i.length;n++)X.push(i[n]);return X}function g(e,n,r,a,o,s,c,l){e!==Ii?d(t.BLEND):p(t.BLEND),e===Y&&l===tt||(e===zi?l?(t.blendEquationSeparate(t.FUNC_ADD,t.FUNC_ADD),t.blendFuncSeparate(t.ONE,t.ONE,t.ONE,t.ONE)):(t.blendEquation(t.FUNC_ADD),t.blendFunc(t.SRC_ALPHA,t.ONE)):e===Fi?l?(t.blendEquationSeparate(t.FUNC_ADD,t.FUNC_ADD),t.blendFuncSeparate(t.ZERO,t.ZERO,t.ONE_MINUS_SRC_COLOR,t.ONE_MINUS_SRC_ALPHA)):(t.blendEquation(t.FUNC_ADD),t.blendFunc(t.ZERO,t.ONE_MINUS_SRC_COLOR)):e===Bi?l?(t.blendEquationSeparate(t.FUNC_ADD,t.FUNC_ADD),t.blendFuncSeparate(t.ZERO,t.SRC_COLOR,t.ZERO,t.SRC_ALPHA)):(t.blendEquation(t.FUNC_ADD),t.blendFunc(t.ZERO,t.SRC_COLOR)):l?(t.blendEquationSeparate(t.FUNC_ADD,t.FUNC_ADD),t.blendFuncSeparate(t.ONE,t.ONE_MINUS_SRC_ALPHA,t.ONE,t.ONE_MINUS_SRC_ALPHA)):(t.blendEquationSeparate(t.FUNC_ADD,t.FUNC_ADD),t.blendFuncSeparate(t.SRC_ALPHA,t.ONE_MINUS_SRC_ALPHA,t.ONE,t.ONE_MINUS_SRC_ALPHA)),Y=e,tt=l),e===Gi?(o=o||n,s=s||r,c=c||a,n===q&&o===Q||(t.blendEquationSeparate(i(n),i(o)),q=n,Q=o),r===Z&&a===J&&s===K&&c===$||(t.blendFuncSeparate(i(r),i(a),i(s),i(c)),Z=r,J=a,K=s,$=c)):(q=null,Z=null,J=null,Q=null,K=null,$=null)}function v(t){F.setMask(t)}function x(t){B.setTest(t)}function y(t){B.setMask(t)}function _(t){B.setFunc(t)}function M(t){G.setTest(t)}function b(t){G.setMask(t)}function w(t,e,i){G.setFunc(t,e,i)}function S(t,e,i){G.setOp(t,e,i)}function E(e){et!==e&&(e?t.frontFace(t.CW):t.frontFace(t.CCW),et=e)}function T(e){e!==bi?(d(t.CULL_FACE),e!==it&&(e===wi?t.cullFace(t.BACK):e===Si?t.cullFace(t.FRONT):t.cullFace(t.FRONT_AND_BACK))):p(t.CULL_FACE),it=e}function L(e){e!==nt&&(lt&&t.lineWidth(e),nt=e)}function A(e,i,n){e?(d(t.POLYGON_OFFSET_FILL),rt===i&&at===n||(t.polygonOffset(i,n),rt=i,at=n)):p(t.POLYGON_OFFSET_FILL)}function P(){return ot}function C(e){ot=e,e?d(t.SCISSOR_TEST):p(t.SCISSOR_TEST)}function R(e){void 0===e&&(e=t.TEXTURE0+st-1),ht!==e&&(t.activeTexture(e),ht=e)}function N(e,i){null===ht&&R();var n=ut[ht];void 0===n&&(n={type:void 0,texture:void 0},ut[ht]=n),n.type===e&&n.texture===i||(t.bindTexture(e,i||pt[e]),n.type=e,n.texture=i)}function D(){try{t.compressedTexImage2D.apply(t,arguments)}catch(t){}}function U(){try{t.texImage2D.apply(t,arguments)}catch(t){}}function I(e){!1===ft.equals(e)&&(t.scissor(e.x,e.y,e.z,e.w),ft.copy(e))}function O(e){!1===dt.equals(e)&&(t.viewport(e.x,e.y,e.z,e.w),dt.copy(e))}function z(){for(var e=0;e<H.length;e++)1===H[e]&&(t.disableVertexAttribArray(e),H[e]=0);j={},X=null,ht=null,ut={},Y=null,et=null,it=null,F.reset(),B.reset(),G.reset()}var F=new n,B=new a,G=new o,V=t.getParameter(t.MAX_VERTEX_ATTRIBS),k=new Uint8Array(V),H=new Uint8Array(V),W=new Uint8Array(V),j={},X=null,Y=null,q=null,Z=null,J=null,Q=null,K=null,$=null,tt=!1,et=null,it=null,nt=null,rt=null,at=null,ot=null,st=t.getParameter(t.MAX_TEXTURE_IMAGE_UNITS),ct=parseFloat(/^WebGL\ ([0-9])/.exec(t.getParameter(t.VERSION))[1]),lt=parseFloat(ct)>=1,ht=null,ut={},ft=new r,dt=new r,pt={};return pt[t.TEXTURE_2D]=s(t.TEXTURE_2D,t.TEXTURE_2D,1),pt[t.TEXTURE_CUBE_MAP]=s(t.TEXTURE_CUBE_MAP,t.TEXTURE_CUBE_MAP_POSITIVE_X,6),{buffers:{color:F,depth:B,stencil:G},init:c,initAttributes:l,enableAttribute:h,enableAttributeAndDivisor:u,disableUnusedAttributes:f,enable:d,disable:p,getCompressedTextureFormats:m,setBlending:g,setColorWrite:v,setDepthTest:x,setDepthWrite:y,setDepthFunc:_,setStencilTest:M,setStencilWrite:b,setStencilFunc:w,setStencilOp:S,setFlipSided:E,setCullFace:T,setLineWidth:L,setPolygonOffset:A,getScissorTest:P,setScissorTest:C,activeTexture:R,bindTexture:N,compressedTexImage2D:D,texImage2D:U,scissor:I,viewport:O,reset:z}}function Jt(t,e,i){function n(){if(void 0!==a)return a;var i=e.get("EXT_texture_filter_anisotropic");return a=null!==i?t.getParameter(i.MAX_TEXTURE_MAX_ANISOTROPY_EXT):0}function r(e){if("highp"===e){if(t.getShaderPrecisionFormat(t.VERTEX_SHADER,t.HIGH_FLOAT).precision>0&&t.getShaderPrecisionFormat(t.FRAGMENT_SHADER,t.HIGH_FLOAT).precision>0)return"highp";e="mediump"}return"mediump"===e&&t.getShaderPrecisionFormat(t.VERTEX_SHADER,t.MEDIUM_FLOAT).precision>0&&t.getShaderPrecisionFormat(t.FRAGMENT_SHADER,t.MEDIUM_FLOAT).precision>0?"mediump":"lowp"}var a,o=void 0!==i.precision?i.precision:"highp",s=r(o);s!==o&&(o=s);var c=!0===i.logarithmicDepthBuffer&&!!e.get("EXT_frag_depth"),l=t.getParameter(t.MAX_TEXTURE_IMAGE_UNITS),h=t.getParameter(t.MAX_VERTEX_TEXTURE_IMAGE_UNITS),u=t.getParameter(t.MAX_TEXTURE_SIZE),f=t.getParameter(t.MAX_CUBE_MAP_TEXTURE_SIZE),d=t.getParameter(t.MAX_VERTEX_ATTRIBS),p=t.getParameter(t.MAX_VERTEX_UNIFORM_VECTORS),m=t.getParameter(t.MAX_VARYING_VECTORS),g=t.getParameter(t.MAX_FRAGMENT_UNIFORM_VECTORS),v=h>0,x=!!e.get("OES_texture_float");return{getMaxAnisotropy:n,getMaxPrecision:r,precision:o,logarithmicDepthBuffer:c,maxTextures:l,maxVertexTextures:h,maxTextureSize:u,maxCubemapSize:f,maxAttributes:d,maxVertexUniforms:p,maxVaryings:m,maxFragmentUniforms:g,vertexTextures:v,floatFragmentTextures:x,floatVertexTextures:v&&x}}function Qt(t){var e={};return{get:function(i){
if(void 0!==e[i])return e[i];var n;switch(i){case"WEBGL_depth_texture":n=t.getExtension("WEBGL_depth_texture")||t.getExtension("MOZ_WEBGL_depth_texture")||t.getExtension("WEBKIT_WEBGL_depth_texture");break;case"EXT_texture_filter_anisotropic":n=t.getExtension("EXT_texture_filter_anisotropic")||t.getExtension("MOZ_EXT_texture_filter_anisotropic")||t.getExtension("WEBKIT_EXT_texture_filter_anisotropic");break;case"WEBGL_compressed_texture_s3tc":n=t.getExtension("WEBGL_compressed_texture_s3tc")||t.getExtension("MOZ_WEBGL_compressed_texture_s3tc")||t.getExtension("WEBKIT_WEBGL_compressed_texture_s3tc");break;case"WEBGL_compressed_texture_pvrtc":n=t.getExtension("WEBGL_compressed_texture_pvrtc")||t.getExtension("WEBKIT_WEBGL_compressed_texture_pvrtc");break;case"WEBGL_compressed_texture_etc1":n=t.getExtension("WEBGL_compressed_texture_etc1");break;default:n=t.getExtension(i)}return e[i]=n,n}}}function Kt(){function t(){l.value!==n&&(l.value=n,l.needsUpdate=r>0),i.numPlanes=r,i.numIntersection=0}function e(t,e,n,r){var a=null!==t?t.length:0,o=null;if(0!==a){if(o=l.value,!0!==r||null===o){var h=n+4*a,u=e.matrixWorldInverse;c.getNormalMatrix(u),(null===o||o.length<h)&&(o=new Float32Array(h));for(var f=0,d=n;f!==a;++f,d+=4)s.copy(t[f]).applyMatrix4(u,c),s.normal.toArray(o,d),o[d+3]=s.constant}l.value=o,l.needsUpdate=!0}return i.numPlanes=a,o}var i=this,n=null,r=0,a=!1,o=!1,s=new tt,c=new $,l={value:null,needsUpdate:!1};this.uniform=l,this.numPlanes=0,this.numIntersection=0,this.init=function(t,i,o){var s=0!==t.length||i||0!==r||a;return a=i,n=e(t,o,0),r=t.length,s},this.beginShadows=function(){o=!0,e(null)},this.endShadows=function(){o=!1,t()},this.setState=function(i,s,c,h,u,f){if(!a||null===i||0===i.length||o&&!c)o?e(null):t();else{var d=o?0:r,p=4*d,m=u.clippingState||null;l.value=m,m=e(i,h,p,f);for(var g=0;g!==p;++g)m[g]=n[g];u.clippingState=m,this.numIntersection=s?this.numPlanes:0,this.numPlanes+=d}}}function $t(t){function e(){return null===dt?It:1}function i(){ce.init(),ce.scissor(xt.copy(Ot).multiplyScalar(It)),ce.viewport(wt.copy(Ft).multiplyScalar(It)),ce.buffers.color.setClear(Rt.r,Rt.g,Rt.b,Nt,Q)}function n(){ft=null,vt=null,gt="",mt=-1,ce.reset()}function a(t){t.preventDefault(),n(),i(),le.clear()}function o(t){var e=t.target;e.removeEventListener("dispose",o),l(e)}function l(t){h(t),le.delete(t)}function h(t){var e=le.get(t).program;t.program=void 0,void 0!==e&&fe.releaseProgram(e)}function u(t,e,i,n){var r;if(!i||!i.isInstancedBufferGeometry||null!==(r=oe.get("ANGLE_instanced_arrays"))){void 0===n&&(n=0),ce.initAttributes();var a=i.attributes,o=e.getAttributes(),s=t.defaultAttributeValues;for(var c in o){var l=o[c];if(l>=0){var h=a[c];if(void 0!==h){var u=h.normalized,f=h.itemSize,d=ue.getAttributeProperties(h),p=d.__webglBuffer,m=d.type,g=d.bytesPerElement;if(h.isInterleavedBufferAttribute){var v=h.data,x=v.stride,y=h.offset;v&&v.isInstancedInterleavedBuffer?(ce.enableAttributeAndDivisor(l,v.meshPerAttribute,r),void 0===i.maxInstancedCount&&(i.maxInstancedCount=v.meshPerAttribute*v.count)):ce.enableAttribute(l),re.bindBuffer(re.ARRAY_BUFFER,p),re.vertexAttribPointer(l,f,m,u,x*g,(n*x+y)*g)}else h.isInstancedBufferAttribute?(ce.enableAttributeAndDivisor(l,h.meshPerAttribute,r),void 0===i.maxInstancedCount&&(i.maxInstancedCount=h.meshPerAttribute*h.count)):ce.enableAttribute(l),re.bindBuffer(re.ARRAY_BUFFER,p),re.vertexAttribPointer(l,f,m,u,0,n*f*g)}else if(void 0!==s){var _=s[c];if(void 0!==_)switch(_.length){case 2:re.vertexAttrib2fv(l,_);break;case 3:re.vertexAttrib3fv(l,_);break;case 4:re.vertexAttrib4fv(l,_);break;default:re.vertexAttrib1fv(l,_)}}}}ce.disableUnusedAttributes()}}function f(t,e){return Math.abs(e[0])-Math.abs(t[0])}function d(t,e){return t.object.renderOrder!==e.object.renderOrder?t.object.renderOrder-e.object.renderOrder:t.material.program&&e.material.program&&t.material.program!==e.material.program?t.material.program.id-e.material.program.id:t.material.id!==e.material.id?t.material.id-e.material.id:t.z!==e.z?t.z-e.z:t.id-e.id}function p(t,e){return t.object.renderOrder!==e.object.renderOrder?t.object.renderOrder-e.object.renderOrder:t.z!==e.z?e.z-t.z:t.id-e.id}function m(t,e,i,n,r){var a,o;i.transparent?(a=at,o=++ot):(a=nt,o=++rt);var s=a[o];void 0!==s?(s.id=t.id,s.object=t,s.geometry=e,s.material=i,s.z=$t.z,s.group=r):(s={id:t.id,object:t,geometry:e,material:i,z:$t.z,group:r},a.push(s))}function g(t){var e=t.geometry;return null===e.boundingSphere&&e.computeBoundingSphere(),Ht.copy(e.boundingSphere).applyMatrix4(t.matrixWorld),x(Ht)}function v(t){return Ht.center.set(0,0,0),Ht.radius=.7071067811865476,Ht.applyMatrix4(t.matrixWorld),x(Ht)}function x(t){if(!Bt.intersectsSphere(t))return!1;var e=Gt.numPlanes;if(0===e)return!0;var i=ut.clippingPlanes,n=t.center,r=-t.radius,a=0;do{if(i[a].distanceToPoint(n)<r)return!1}while(++a!==e);return!0}function y(t,e){if(!1!==t.visible){if(0!=(t.layers.mask&e.layers.mask))if(t.isLight)tt.push(t);else if(t.isSprite)!1!==t.frustumCulled&&!0!==v(t)||ct.push(t);else if(t.isLensFlare)lt.push(t);else if(t.isImmediateRenderObject)!0===ut.sortObjects&&($t.setFromMatrixPosition(t.matrixWorld),$t.applyMatrix4(jt)),m(t,null,t.material,$t.z,null);else if((t.isMesh||t.isLine||t.isPoints)&&(t.isSkinnedMesh&&t.skeleton.update(),!1===t.frustumCulled||!0===g(t))){var i=t.material;if(!0===i.visible){!0===ut.sortObjects&&($t.setFromMatrixPosition(t.matrixWorld),$t.applyMatrix4(jt));var n=ue.update(t);if(i.isMultiMaterial)for(var r=n.groups,a=i.materials,o=0,s=r.length;o<s;o++){var c=r[o],l=a[c.materialIndex];!0===l.visible&&m(t,n,l,$t.z,c)}else m(t,n,i,$t.z,null)}}for(var h=t.children,o=0,s=h.length;o<s;o++)y(h[o],e)}}function _(t,e,i,n){for(var r=0,a=t.length;r<a;r++){var o=t[r],s=o.object,c=o.geometry,l=void 0===n?o.material:n,h=o.group;if(s.modelViewMatrix.multiplyMatrices(i.matrixWorldInverse,s.matrixWorld),s.normalMatrix.getNormalMatrix(s.modelViewMatrix),s.onBeforeRender(ut,e,i,c,l,h),s.isImmediateRenderObject){b(l);var u=w(i,e.fog,l,s);gt="",s.render(function(t){ut.renderBufferImmediate(t,u,l)})}else ut.renderBufferDirect(i,e.fog,c,l,s,h);s.onAfterRender(ut,e,i,c,l,h)}}function M(t,e,i){var n=le.get(t),r=fe.getParameters(t,ie,e,Gt.numPlanes,Gt.numIntersection,i),a=fe.getProgramCode(t,r),s=n.program,c=!0;if(void 0===s)t.addEventListener("dispose",o);else if(s.code!==a)h(t);else{if(void 0!==r.shaderID)return;c=!1}if(c){if(r.shaderID){var l=Ur[r.shaderID];n.__webglShader={name:t.type,uniforms:Cr.clone(l.uniforms),vertexShader:l.vertexShader,fragmentShader:l.fragmentShader}}else n.__webglShader={name:t.type,uniforms:t.uniforms,vertexShader:t.vertexShader,fragmentShader:t.fragmentShader};t.__webglShader=n.__webglShader,s=fe.acquireProgram(t,r,a),n.program=s,t.program=s}var u=s.getAttributes();if(t.morphTargets){t.numSupportedMorphTargets=0;for(var f=0;f<ut.maxMorphTargets;f++)u["morphTarget"+f]>=0&&t.numSupportedMorphTargets++}if(t.morphNormals){t.numSupportedMorphNormals=0;for(var f=0;f<ut.maxMorphNormals;f++)u["morphNormal"+f]>=0&&t.numSupportedMorphNormals++}var d=n.__webglShader.uniforms;(t.isShaderMaterial||t.isRawShaderMaterial)&&!0!==t.clipping||(n.numClippingPlanes=Gt.numPlanes,n.numIntersection=Gt.numIntersection,d.clippingPlanes=Gt.uniform),n.fog=e,n.lightsHash=ie.hash,t.lights&&(d.ambientLightColor.value=ie.ambient,d.directionalLights.value=ie.directional,d.spotLights.value=ie.spot,d.rectAreaLights.value=ie.rectArea,d.pointLights.value=ie.point,d.hemisphereLights.value=ie.hemi,d.directionalShadowMap.value=ie.directionalShadowMap,d.directionalShadowMatrix.value=ie.directionalShadowMatrix,d.spotShadowMap.value=ie.spotShadowMap,d.spotShadowMatrix.value=ie.spotShadowMatrix,d.pointShadowMap.value=ie.pointShadowMap,d.pointShadowMatrix.value=ie.pointShadowMatrix);var p=n.program.getUniforms(),m=H.seqWithValue(p.seq,d);n.uniformsList=m}function b(t){t.side===Ci?ce.disable(re.CULL_FACE):ce.enable(re.CULL_FACE),ce.setFlipSided(t.side===Pi),!0===t.transparent?ce.setBlending(t.blending,t.blendEquation,t.blendSrc,t.blendDst,t.blendEquationAlpha,t.blendSrcAlpha,t.blendDstAlpha,t.premultipliedAlpha):ce.setBlending(Ii),ce.setDepthFunc(t.depthFunc),ce.setDepthTest(t.depthTest),ce.setDepthWrite(t.depthWrite),ce.setColorWrite(t.colorWrite),ce.setPolygonOffset(t.polygonOffset,t.polygonOffsetFactor,t.polygonOffsetUnits)}function w(t,e,i,n){Et=0;var r=le.get(i);if(Vt&&(kt||t!==vt)){var a=t===vt&&i.id===mt;Gt.setState(i.clippingPlanes,i.clipIntersection,i.clipShadows,t,r,a)}!1===i.needsUpdate&&(void 0===r.program?i.needsUpdate=!0:i.fog&&r.fog!==e?i.needsUpdate=!0:i.lights&&r.lightsHash!==ie.hash?i.needsUpdate=!0:void 0===r.numClippingPlanes||r.numClippingPlanes===Gt.numPlanes&&r.numIntersection===Gt.numIntersection||(i.needsUpdate=!0)),i.needsUpdate&&(M(i,e,n),i.needsUpdate=!1);var o=!1,s=!1,c=!1,l=r.program,h=l.getUniforms(),u=r.__webglShader.uniforms;if(l.id!==ft&&(re.useProgram(l.program),ft=l.id,o=!0,s=!0,c=!0),i.id!==mt&&(mt=i.id,s=!0),o||t!==vt){if(h.set(re,t,"projectionMatrix"),se.logarithmicDepthBuffer&&h.setValue(re,"logDepthBufFC",2/(Math.log(t.far+1)/Math.LN2)),t!==vt&&(vt=t,s=!0,c=!0),i.isShaderMaterial||i.isMeshPhongMaterial||i.isMeshStandardMaterial||i.envMap){var f=h.map.cameraPosition;void 0!==f&&f.setValue(re,$t.setFromMatrixPosition(t.matrixWorld))}(i.isMeshPhongMaterial||i.isMeshLambertMaterial||i.isMeshBasicMaterial||i.isMeshStandardMaterial||i.isShaderMaterial||i.skinning)&&h.setValue(re,"viewMatrix",t.matrixWorldInverse),h.set(re,ut,"toneMappingExposure"),h.set(re,ut,"toneMappingWhitePoint")}if(i.skinning){h.setOptional(re,n,"bindMatrix"),h.setOptional(re,n,"bindMatrixInverse");var d=n.skeleton;d&&(se.floatVertexTextures&&d.useVertexTexture?(h.set(re,d,"boneTexture"),h.set(re,d,"boneTextureWidth"),h.set(re,d,"boneTextureHeight")):h.setOptional(re,d,"boneMatrices"))}return s&&(i.lights&&I(u,c),e&&i.fog&&A(u,e),(i.isMeshBasicMaterial||i.isMeshLambertMaterial||i.isMeshPhongMaterial||i.isMeshStandardMaterial||i.isMeshNormalMaterial||i.isMeshDepthMaterial)&&S(u,i),i.isLineBasicMaterial?E(u,i):i.isLineDashedMaterial?(E(u,i),T(u,i)):i.isPointsMaterial?L(u,i):i.isMeshLambertMaterial?P(u,i):i.isMeshToonMaterial?R(u,i):i.isMeshPhongMaterial?C(u,i):i.isMeshPhysicalMaterial?D(u,i):i.isMeshStandardMaterial?N(u,i):i.isMeshDepthMaterial?i.displacementMap&&(u.displacementMap.value=i.displacementMap,u.displacementScale.value=i.displacementScale,u.displacementBias.value=i.displacementBias):i.isMeshNormalMaterial&&U(u,i),void 0!==u.ltcMat&&(u.ltcMat.value=THREE.UniformsLib.LTC_MAT_TEXTURE),void 0!==u.ltcMag&&(u.ltcMag.value=THREE.UniformsLib.LTC_MAG_TEXTURE),H.upload(re,r.uniformsList,u,ut)),h.set(re,n,"modelViewMatrix"),h.set(re,n,"normalMatrix"),h.setValue(re,"modelMatrix",n.matrixWorld),l}function S(t,e){t.opacity.value=e.opacity,t.diffuse.value=e.color,e.emissive&&t.emissive.value.copy(e.emissive).multiplyScalar(e.emissiveIntensity),t.map.value=e.map,t.specularMap.value=e.specularMap,t.alphaMap.value=e.alphaMap,e.lightMap&&(t.lightMap.value=e.lightMap,t.lightMapIntensity.value=e.lightMapIntensity),e.aoMap&&(t.aoMap.value=e.aoMap,t.aoMapIntensity.value=e.aoMapIntensity);var i;if(e.map?i=e.map:e.specularMap?i=e.specularMap:e.displacementMap?i=e.displacementMap:e.normalMap?i=e.normalMap:e.bumpMap?i=e.bumpMap:e.roughnessMap?i=e.roughnessMap:e.metalnessMap?i=e.metalnessMap:e.alphaMap?i=e.alphaMap:e.emissiveMap&&(i=e.emissiveMap),void 0!==i){i.isWebGLRenderTarget&&(i=i.texture);var n=i.offset,r=i.repeat;t.offsetRepeat.value.set(n.x,n.y,r.x,r.y)}t.envMap.value=e.envMap,t.flipEnvMap.value=e.envMap&&e.envMap.isCubeTexture?-1:1,t.reflectivity.value=e.reflectivity,t.refractionRatio.value=e.refractionRatio}function E(t,e){t.diffuse.value=e.color,t.opacity.value=e.opacity}function T(t,e){t.dashSize.value=e.dashSize,t.totalSize.value=e.dashSize+e.gapSize,t.scale.value=e.scale}function L(t,e){if(t.diffuse.value=e.color,t.opacity.value=e.opacity,t.size.value=e.size*It,t.scale.value=.5*Ut,t.map.value=e.map,null!==e.map){var i=e.map.offset,n=e.map.repeat;t.offsetRepeat.value.set(i.x,i.y,n.x,n.y)}}function A(t,e){t.fogColor.value=e.color,e.isFog?(t.fogNear.value=e.near,t.fogFar.value=e.far):e.isFogExp2&&(t.fogDensity.value=e.density)}function P(t,e){e.emissiveMap&&(t.emissiveMap.value=e.emissiveMap)}function C(t,e){t.specular.value=e.specular,t.shininess.value=Math.max(e.shininess,1e-4),e.emissiveMap&&(t.emissiveMap.value=e.emissiveMap),e.bumpMap&&(t.bumpMap.value=e.bumpMap,t.bumpScale.value=e.bumpScale),e.normalMap&&(t.normalMap.value=e.normalMap,t.normalScale.value.copy(e.normalScale)),e.displacementMap&&(t.displacementMap.value=e.displacementMap,t.displacementScale.value=e.displacementScale,t.displacementBias.value=e.displacementBias)}function R(t,e){C(t,e),e.gradientMap&&(t.gradientMap.value=e.gradientMap)}function N(t,e){t.roughness.value=e.roughness,t.metalness.value=e.metalness,e.roughnessMap&&(t.roughnessMap.value=e.roughnessMap),e.metalnessMap&&(t.metalnessMap.value=e.metalnessMap),e.emissiveMap&&(t.emissiveMap.value=e.emissiveMap),e.bumpMap&&(t.bumpMap.value=e.bumpMap,t.bumpScale.value=e.bumpScale),e.normalMap&&(t.normalMap.value=e.normalMap,t.normalScale.value.copy(e.normalScale)),e.displacementMap&&(t.displacementMap.value=e.displacementMap,t.displacementScale.value=e.displacementScale,t.displacementBias.value=e.displacementBias),e.envMap&&(t.envMapIntensity.value=e.envMapIntensity)}function D(t,e){t.clearCoat.value=e.clearCoat,t.clearCoatRoughness.value=e.clearCoatRoughness,N(t,e)}function U(t,e){e.bumpMap&&(t.bumpMap.value=e.bumpMap,t.bumpScale.value=e.bumpScale),e.normalMap&&(t.normalMap.value=e.normalMap,t.normalScale.value.copy(e.normalScale)),e.displacementMap&&(t.displacementMap.value=e.displacementMap,t.displacementScale.value=e.displacementScale,t.displacementBias.value=e.displacementBias)}function I(t,e){t.ambientLightColor.needsUpdate=e,t.directionalLights.needsUpdate=e,t.pointLights.needsUpdate=e,t.spotLights.needsUpdate=e,t.rectAreaLights.needsUpdate=e,t.hemisphereLights.needsUpdate=e}function O(t){for(var e=0,i=0,n=t.length;i<n;i++){var r=t[i];r.castShadow&&(ie.shadows[e++]=r)}ie.shadows.length=e}function z(t,e){var i,n,r,a,o,s,l,h=0,u=0,f=0,d=e.matrixWorldInverse,p=0,m=0,g=0,v=0,x=0;for(i=0,n=t.length;i<n;i++)if(r=t[i],a=r.color,o=r.intensity,s=r.distance,l=r.shadow&&r.shadow.map?r.shadow.map.texture:null,r.isAmbientLight)h+=a.r*o,u+=a.g*o,f+=a.b*o;else if(r.isDirectionalLight){var y=de.get(r);y.color.copy(r.color).multiplyScalar(r.intensity),y.direction.setFromMatrixPosition(r.matrixWorld),$t.setFromMatrixPosition(r.target.matrixWorld),y.direction.sub($t),y.direction.transformDirection(d),y.shadow=r.castShadow,r.castShadow&&(y.shadowBias=r.shadow.bias,y.shadowRadius=r.shadow.radius,y.shadowMapSize=r.shadow.mapSize),ie.directionalShadowMap[p]=l,ie.directionalShadowMatrix[p]=r.shadow.matrix,ie.directional[p++]=y}else if(r.isSpotLight){var y=de.get(r);y.position.setFromMatrixPosition(r.matrixWorld),y.position.applyMatrix4(d),y.color.copy(a).multiplyScalar(o),y.distance=s,y.direction.setFromMatrixPosition(r.matrixWorld),$t.setFromMatrixPosition(r.target.matrixWorld),y.direction.sub($t),y.direction.transformDirection(d),y.coneCos=Math.cos(r.angle),y.penumbraCos=Math.cos(r.angle*(1-r.penumbra)),y.decay=0===r.distance?0:r.decay,y.shadow=r.castShadow,r.castShadow&&(y.shadowBias=r.shadow.bias,y.shadowRadius=r.shadow.radius,y.shadowMapSize=r.shadow.mapSize),ie.spotShadowMap[g]=l,ie.spotShadowMatrix[g]=r.shadow.matrix,ie.spot[g++]=y}else if(r.isRectAreaLight){var y=de.get(r);y.color.copy(a).multiplyScalar(o/(r.width*r.height)),y.position.setFromMatrixPosition(r.matrixWorld),y.position.applyMatrix4(d),ee.identity(),te.copy(r.matrixWorld),te.premultiply(d),ee.extractRotation(te),y.halfWidth.set(.5*r.width,0,0),y.halfHeight.set(0,.5*r.height,0),y.halfWidth.applyMatrix4(ee),y.halfHeight.applyMatrix4(ee),ie.rectArea[v++]=y}else if(r.isPointLight){var y=de.get(r);y.position.setFromMatrixPosition(r.matrixWorld),y.position.applyMatrix4(d),y.color.copy(r.color).multiplyScalar(r.intensity),y.distance=r.distance,y.decay=0===r.distance?0:r.decay,y.shadow=r.castShadow,r.castShadow&&(y.shadowBias=r.shadow.bias,y.shadowRadius=r.shadow.radius,y.shadowMapSize=r.shadow.mapSize),ie.pointShadowMap[m]=l,void 0===ie.pointShadowMatrix[m]&&(ie.pointShadowMatrix[m]=new c),$t.setFromMatrixPosition(r.matrixWorld).negate(),ie.pointShadowMatrix[m].identity().setPosition($t),ie.point[m++]=y}else if(r.isHemisphereLight){var y=de.get(r);y.direction.setFromMatrixPosition(r.matrixWorld),y.direction.transformDirection(d),y.direction.normalize(),y.skyColor.copy(r.color).multiplyScalar(o),y.groundColor.copy(r.groundColor).multiplyScalar(o),ie.hemi[x++]=y}ie.ambient[0]=h,ie.ambient[1]=u,ie.ambient[2]=f,ie.directional.length=p,ie.spot.length=g,ie.rectArea.length=v,ie.point.length=m,ie.hemi.length=x,ie.hash=p+","+m+","+g+","+v+","+x+","+ie.shadows.length}function F(){var t=Et;return se.maxTextures,Et+=1,t}function B(t){var e;if(t===Ln)return re.REPEAT;if(t===An)return re.CLAMP_TO_EDGE;if(t===Pn)return re.MIRRORED_REPEAT;if(t===Cn)return re.NEAREST;if(t===Rn)return re.NEAREST_MIPMAP_NEAREST;if(t===Nn)return re.NEAREST_MIPMAP_LINEAR;if(t===Dn)return re.LINEAR;if(t===Un)return re.LINEAR_MIPMAP_NEAREST;if(t===In)return re.LINEAR_MIPMAP_LINEAR;if(t===On)return re.UNSIGNED_BYTE;if(t===Wn)return re.UNSIGNED_SHORT_4_4_4_4;if(t===jn)return re.UNSIGNED_SHORT_5_5_5_1;if(t===Xn)return re.UNSIGNED_SHORT_5_6_5;if(t===zn)return re.BYTE;if(t===Fn)return re.SHORT;if(t===Bn)return re.UNSIGNED_SHORT;if(t===Gn)return re.INT;if(t===Vn)return re.UNSIGNED_INT;if(t===kn)return re.FLOAT;if(t===Hn&&null!==(e=oe.get("OES_texture_half_float")))return e.HALF_FLOAT_OES;if(t===qn)return re.ALPHA;if(t===Zn)return re.RGB;if(t===Jn)return re.RGBA;if(t===Qn)return re.LUMINANCE;if(t===Kn)return re.LUMINANCE_ALPHA;if(t===tr)return re.DEPTH_COMPONENT;if(t===er)return re.DEPTH_STENCIL;if(t===Vi)return re.FUNC_ADD;if(t===ki)return re.FUNC_SUBTRACT;if(t===Hi)return re.FUNC_REVERSE_SUBTRACT;if(t===Xi)return re.ZERO;if(t===Yi)return re.ONE;if(t===qi)return re.SRC_COLOR;if(t===Zi)return re.ONE_MINUS_SRC_COLOR;if(t===Ji)return re.SRC_ALPHA;if(t===Qi)return re.ONE_MINUS_SRC_ALPHA;if(t===Ki)return re.DST_ALPHA;if(t===$i)return re.ONE_MINUS_DST_ALPHA;if(t===tn)return re.DST_COLOR;if(t===en)return re.ONE_MINUS_DST_COLOR;if(t===nn)return re.SRC_ALPHA_SATURATE;if((t===ir||t===nr||t===rr||t===ar)&&null!==(e=oe.get("WEBGL_compressed_texture_s3tc"))){if(t===ir)return e.COMPRESSED_RGB_S3TC_DXT1_EXT;if(t===nr)return e.COMPRESSED_RGBA_S3TC_DXT1_EXT;if(t===rr)return e.COMPRESSED_RGBA_S3TC_DXT3_EXT;if(t===ar)return e.COMPRESSED_RGBA_S3TC_DXT5_EXT}if((t===or||t===sr||t===cr||t===lr)&&null!==(e=oe.get("WEBGL_compressed_texture_pvrtc"))){if(t===or)return e.COMPRESSED_RGB_PVRTC_4BPPV1_IMG;if(t===sr)return e.COMPRESSED_RGB_PVRTC_2BPPV1_IMG;if(t===cr)return e.COMPRESSED_RGBA_PVRTC_4BPPV1_IMG;if(t===lr)return e.COMPRESSED_RGBA_PVRTC_2BPPV1_IMG}if(t===hr&&null!==(e=oe.get("WEBGL_compressed_texture_etc1")))return e.COMPRESSED_RGB_ETC1_WEBGL;if((t===Wi||t===ji)&&null!==(e=oe.get("EXT_blend_minmax"))){if(t===Wi)return e.MIN_EXT;if(t===ji)return e.MAX_EXT}return t===Yn&&null!==(e=oe.get("WEBGL_depth_texture"))?e.UNSIGNED_INT_24_8_WEBGL:0}t=t||{};var G=void 0!==t.canvas?t.canvas:document.createElementNS("http://www.w3.org/1999/xhtml","canvas"),V=void 0!==t.context?t.context:null,k=void 0!==t.alpha&&t.alpha,j=void 0===t.depth||t.depth,q=void 0===t.stencil||t.stencil,J=void 0!==t.antialias&&t.antialias,Q=void 0===t.premultipliedAlpha||t.premultipliedAlpha,$=void 0!==t.preserveDrawingBuffer&&t.preserveDrawingBuffer,tt=[],nt=[],rt=-1,at=[],ot=-1,st=new Float32Array(8),ct=[],lt=[];this.domElement=G,this.context=null,this.autoClear=!0,this.autoClearColor=!0,this.autoClearDepth=!0,this.autoClearStencil=!0,this.sortObjects=!0,this.clippingPlanes=[],this.localClippingEnabled=!1,this.gammaFactor=2,this.gammaInput=!1,this.gammaOutput=!1,this.physicallyCorrectLights=!1,this.toneMapping=gn,this.toneMappingExposure=1,this.toneMappingWhitePoint=1,this.maxMorphTargets=8,this.maxMorphNormals=4;var ut=this,ft=null,dt=null,pt=null,mt=-1,gt="",vt=null,xt=new r,Mt=null,wt=new r,Et=0,Rt=new W(0),Nt=0,Dt=G.width,Ut=G.height,It=1,Ot=new r(0,0,Dt,Ut),zt=!1,Ft=new r(0,0,Dt,Ut),Bt=new et,Gt=new Kt,Vt=!1,kt=!1,Ht=new K,jt=new c,$t=new s,te=new c,ee=new c,ie={hash:"",ambient:[0,0,0],directional:[],directionalShadowMap:[],directionalShadowMatrix:[],spot:[],spotShadowMap:[],spotShadowMatrix:[],rectArea:[],point:[],pointShadowMap:[],pointShadowMatrix:[],hemi:[],shadows:[]},ne={calls:0,vertices:0,faces:0,points:0};this.info={render:ne,memory:{geometries:0,textures:0},programs:null};var re;try{var ae={alpha:k,depth:j,stencil:q,antialias:J,premultipliedAlpha:Q,preserveDrawingBuffer:$};if(null===(re=V||G.getContext("webgl",ae)||G.getContext("experimental-webgl",ae)))throw null!==G.getContext("webgl")?"Error creating WebGL context with your selected attributes.":"Error creating WebGL context.";void 0===re.getShaderPrecisionFormat&&(re.getShaderPrecisionFormat=function(){return{rangeMin:1,rangeMax:1,precision:1}}),G.addEventListener("webglcontextlost",a,!1)}catch(t){}var oe=new Qt(re);oe.get("WEBGL_depth_texture"),oe.get("OES_texture_float"),oe.get("OES_texture_float_linear"),oe.get("OES_texture_half_float"),oe.get("OES_texture_half_float_linear"),oe.get("OES_standard_derivatives"),oe.get("ANGLE_instanced_arrays"),oe.get("OES_element_index_uint")&&(yt.MaxIndex=4294967296);var se=new Jt(re,oe,t),ce=new Zt(re,oe,B),le=new qt,he=new Yt(re,oe,ce,le,se,B,this.info),ue=new Xt(re,le,this.info),fe=new Wt(this,se),de=new Ct;this.info.programs=fe.programs;var pe,me,ge,ve,xe=new Pt(re,oe,ne),ye=new At(re,oe,ne);i(),this.context=re,this.capabilities=se,this.extensions=oe,this.properties=le,this.state=ce;var _e=new it(this,ie,ue,se);this.shadowMap=_e;var Me=new Y(this,ct),be=new X(this,lt);this.getContext=function(){return re},this.getContextAttributes=function(){return re.getContextAttributes()},this.forceContextLoss=function(){oe.get("WEBGL_lose_context").loseContext()},this.getMaxAnisotropy=function(){return se.getMaxAnisotropy()},this.getPrecision=function(){return se.precision},this.getPixelRatio=function(){return It},this.setPixelRatio=function(t){void 0!==t&&(It=t,this.setSize(Ft.z,Ft.w,!1))},this.getSize=function(){return{width:Dt,height:Ut}},this.setSize=function(t,e,i){Dt=t,Ut=e,G.width=t*It,G.height=e*It,!1!==i&&(G.style.width=t+"px",G.style.height=e+"px"),this.setViewport(0,0,t,e)},this.setViewport=function(t,e,i,n){ce.viewport(Ft.set(t,e,i,n))},this.setScissor=function(t,e,i,n){ce.scissor(Ot.set(t,e,i,n))},this.setScissorTest=function(t){ce.setScissorTest(zt=t)},this.getClearColor=function(){return Rt},this.setClearColor=function(t,e){Rt.set(t),Nt=void 0!==e?e:1,ce.buffers.color.setClear(Rt.r,Rt.g,Rt.b,Nt,Q)},this.getClearAlpha=function(){return Nt},this.setClearAlpha=function(t){Nt=t,ce.buffers.color.setClear(Rt.r,Rt.g,Rt.b,Nt,Q)},this.clear=function(t,e,i){var n=0;(void 0===t||t)&&(n|=re.COLOR_BUFFER_BIT),(void 0===e||e)&&(n|=re.DEPTH_BUFFER_BIT),(void 0===i||i)&&(n|=re.STENCIL_BUFFER_BIT),re.clear(n)},this.clearColor=function(){this.clear(!0,!1,!1)},this.clearDepth=function(){this.clear(!1,!0,!1)},this.clearStencil=function(){this.clear(!1,!1,!0)},this.clearTarget=function(t,e,i,n){this.setRenderTarget(t),this.clear(e,i,n)},this.resetGLState=n,this.dispose=function(){at=[],ot=-1,nt=[],rt=-1,G.removeEventListener("webglcontextlost",a,!1)},this.renderBufferImmediate=function(t,e,i){ce.initAttributes();var n=le.get(t);t.hasPositions&&!n.position&&(n.position=re.createBuffer()),t.hasNormals&&!n.normal&&(n.normal=re.createBuffer()),t.hasUvs&&!n.uv&&(n.uv=re.createBuffer()),t.hasColors&&!n.color&&(n.color=re.createBuffer());var r=e.getAttributes();if(t.hasPositions&&(re.bindBuffer(re.ARRAY_BUFFER,n.position),re.bufferData(re.ARRAY_BUFFER,t.positionArray,re.DYNAMIC_DRAW),ce.enableAttribute(r.position),re.vertexAttribPointer(r.position,3,re.FLOAT,!1,0,0)),t.hasNormals){if(re.bindBuffer(re.ARRAY_BUFFER,n.normal),!i.isMeshPhongMaterial&&!i.isMeshStandardMaterial&&!i.isMeshNormalMaterial&&i.shading===Ri)for(var a=0,o=3*t.count;a<o;a+=9){var s=t.normalArray,c=(s[a+0]+s[a+3]+s[a+6])/3,l=(s[a+1]+s[a+4]+s[a+7])/3,h=(s[a+2]+s[a+5]+s[a+8])/3;s[a+0]=c,s[a+1]=l,s[a+2]=h,s[a+3]=c,s[a+4]=l,s[a+5]=h,s[a+6]=c,s[a+7]=l,s[a+8]=h}re.bufferData(re.ARRAY_BUFFER,t.normalArray,re.DYNAMIC_DRAW),ce.enableAttribute(r.normal),re.vertexAttribPointer(r.normal,3,re.FLOAT,!1,0,0)}t.hasUvs&&i.map&&(re.bindBuffer(re.ARRAY_BUFFER,n.uv),re.bufferData(re.ARRAY_BUFFER,t.uvArray,re.DYNAMIC_DRAW),ce.enableAttribute(r.uv),re.vertexAttribPointer(r.uv,2,re.FLOAT,!1,0,0)),t.hasColors&&i.vertexColors!==Di&&(re.bindBuffer(re.ARRAY_BUFFER,n.color),re.bufferData(re.ARRAY_BUFFER,t.colorArray,re.DYNAMIC_DRAW),ce.enableAttribute(r.color),re.vertexAttribPointer(r.color,3,re.FLOAT,!1,0,0)),ce.disableUnusedAttributes(),re.drawArrays(re.TRIANGLES,0,t.count),t.count=0},this.renderBufferDirect=function(t,i,n,r,a,o){b(r);var s=w(t,i,r,a),c=!1,l=n.id+"_"+s.id+"_"+r.wireframe;l!==gt&&(gt=l,c=!0);var h=a.morphTargetInfluences;if(void 0!==h){for(var d=[],p=0,m=h.length;p<m;p++){var g=h[p];d.push([g,p])}d.sort(f),d.length>8&&(d.length=8);for(var v=n.morphAttributes,p=0,m=d.length;p<m;p++){var g=d[p];if(st[p]=g[0],0!==g[0]){var x=g[1];!0===r.morphTargets&&v.position&&n.addAttribute("morphTarget"+p,v.position[x]),!0===r.morphNormals&&v.normal&&n.addAttribute("morphNormal"+p,v.normal[x])}else!0===r.morphTargets&&n.removeAttribute("morphTarget"+p),!0===r.morphNormals&&n.removeAttribute("morphNormal"+p)}for(var p=d.length,y=st.length;p<y;p++)st[p]=0;s.getUniforms().setValue(re,"morphTargetInfluences",st),c=!0}var x=n.index,_=n.attributes.position,M=1;!0===r.wireframe&&(x=ue.getWireframeAttribute(n),M=2);var S;null!==x?(S=ye,S.setIndex(x)):S=xe,c&&(u(r,s,n),null!==x&&re.bindBuffer(re.ELEMENT_ARRAY_BUFFER,ue.getAttributeBuffer(x)));var E=0;null!==x?E=x.count:void 0!==_&&(E=_.count);var T=n.drawRange.start*M,L=n.drawRange.count*M,A=null!==o?o.start*M:0,P=null!==o?o.count*M:1/0,C=Math.max(T,A),R=Math.min(E,T+L,A+P)-1,N=Math.max(0,R-C+1);if(0!==N){if(a.isMesh)if(!0===r.wireframe)ce.setLineWidth(r.wireframeLinewidth*e()),S.setMode(re.LINES);else switch(a.drawMode){case ur:S.setMode(re.TRIANGLES);break;case fr:S.setMode(re.TRIANGLE_STRIP);break;case dr:S.setMode(re.TRIANGLE_FAN)}else if(a.isLine){var D=r.linewidth;void 0===D&&(D=1),ce.setLineWidth(D*e()),a.isLineSegments?S.setMode(re.LINES):S.setMode(re.LINE_STRIP)}else a.isPoints&&S.setMode(re.POINTS);n&&n.isInstancedBufferGeometry?n.maxInstancedCount>0&&S.renderInstances(n,C,N):S.render(C,N)}},this.render=function(t,e,i,n){if(void 0===e||!0===e.isCamera){gt="",mt=-1,vt=null,!0===t.autoUpdate&&t.updateMatrixWorld(),null===e.parent&&e.updateMatrixWorld(),e.matrixWorldInverse.getInverse(e.matrixWorld),jt.multiplyMatrices(e.projectionMatrix,e.matrixWorldInverse),Bt.setFromMatrix(jt),tt.length=0,rt=-1,ot=-1,ct.length=0,lt.length=0,kt=this.localClippingEnabled,Vt=Gt.init(this.clippingPlanes,kt,e),y(t,e),nt.length=rt+1,at.length=ot+1,!0===ut.sortObjects&&(nt.sort(d),at.sort(p)),Vt&&Gt.beginShadows(),O(tt),_e.render(t,e),z(tt,e),Vt&&Gt.endShadows(),ne.calls=0,ne.vertices=0,ne.faces=0,ne.points=0,void 0===i&&(i=null),this.setRenderTarget(i);var r=t.background;if(null===r?ce.buffers.color.setClear(Rt.r,Rt.g,Rt.b,Nt,Q):r&&r.isColor&&(ce.buffers.color.setClear(r.r,r.g,r.b,1,Q),n=!0),(this.autoClear||n)&&this.clear(this.autoClearColor,this.autoClearDepth,this.autoClearStencil),r&&r.isCubeTexture?(void 0===ge&&(ge=new Tt,ve=new _t(new bt(5,5,5),new Z({uniforms:Ur.cube.uniforms,vertexShader:Ur.cube.vertexShader,fragmentShader:Ur.cube.fragmentShader,side:Pi,depthTest:!1,depthWrite:!1,fog:!1}))),ge.projectionMatrix.copy(e.projectionMatrix),ge.matrixWorld.extractRotation(e.matrixWorld),ge.matrixWorldInverse.getInverse(ge.matrixWorld),ve.material.uniforms.tCube.value=r,ve.modelViewMatrix.multiplyMatrices(ge.matrixWorldInverse,ve.matrixWorld),ue.update(ve),ut.renderBufferDirect(ge,null,ve.geometry,ve.material,ve,null)):r&&r.isTexture&&(void 0===pe&&(pe=new Lt(-1,1,1,-1,0,1),me=new _t(new St(2,2),new ht({depthTest:!1,depthWrite:!1,fog:!1}))),me.material.map=r,ue.update(me),ut.renderBufferDirect(pe,null,me.geometry,me.material,me,null)),t.overrideMaterial){var a=t.overrideMaterial;_(nt,t,e,a),_(at,t,e,a)}else ce.setBlending(Ii),_(nt,t,e),_(at,t,e);Me.render(t,e),be.render(t,e,wt),i&&he.updateRenderTargetMipmap(i),ce.setDepthTest(!0),ce.setDepthWrite(!0),ce.setColorWrite(!0)}},this.setFaceCulling=function(t,e){ce.setCullFace(t),ce.setFlipSided(e===Ei)},this.allocTextureUnit=F,this.setTexture2D=function(){var t=!1;return function(e,i){e&&e.isWebGLRenderTarget&&(t||(t=!0),e=e.texture),he.setTexture2D(e,i)}}(),this.setTexture=function(){var t=!1;return function(e,i){t||(t=!0),he.setTexture2D(e,i)}}(),this.setTextureCube=function(){var t=!1;return function(e,i){e&&e.isWebGLRenderTargetCube&&(t||(t=!0),e=e.texture),e&&e.isCubeTexture||Array.isArray(e.image)&&6===e.image.length?he.setTextureCube(e,i):he.setTextureCubeDynamic(e,i)}}(),this.getCurrentRenderTarget=function(){return dt},this.setRenderTarget=function(t){dt=t,t&&void 0===le.get(t).__webglFramebuffer&&he.setupRenderTarget(t);var e,i=t&&t.isWebGLRenderTargetCube;if(t){var n=le.get(t);e=i?n.__webglFramebuffer[t.activeCubeFace]:n.__webglFramebuffer,xt.copy(t.scissor),Mt=t.scissorTest,wt.copy(t.viewport)}else e=null,xt.copy(Ot).multiplyScalar(It),Mt=zt,wt.copy(Ft).multiplyScalar(It);if(pt!==e&&(re.bindFramebuffer(re.FRAMEBUFFER,e),pt=e),ce.scissor(xt),ce.setScissorTest(Mt),ce.viewport(wt),i){var r=le.get(t.texture);re.framebufferTexture2D(re.FRAMEBUFFER,re.COLOR_ATTACHMENT0,re.TEXTURE_CUBE_MAP_POSITIVE_X+t.activeCubeFace,r.__webglTexture,t.activeMipMapLevel)}},this.readRenderTargetPixels=function(t,e,i,n,r,a){if(!1!==(t&&t.isWebGLRenderTarget)){var o=le.get(t).__webglFramebuffer;if(o){var s=!1;o!==pt&&(re.bindFramebuffer(re.FRAMEBUFFER,o),s=!0);try{var c=t.texture,l=c.format,h=c.type;if(l!==Jn&&B(l)!==re.getParameter(re.IMPLEMENTATION_COLOR_READ_FORMAT))return;if(!(h===On||B(h)===re.getParameter(re.IMPLEMENTATION_COLOR_READ_TYPE)||h===kn&&(oe.get("OES_texture_float")||oe.get("WEBGL_color_buffer_float"))||h===Hn&&oe.get("EXT_color_buffer_half_float")))return;re.checkFramebufferStatus(re.FRAMEBUFFER)===re.FRAMEBUFFER_COMPLETE&&e>=0&&e<=t.width-n&&i>=0&&i<=t.height-r&&re.readPixels(e,i,n,r,B(l),B(h),a)}finally{s&&re.bindFramebuffer(re.FRAMEBUFFER,pt)}}}}}function te(){ot.call(this),this.type="Scene",this.background=null,this.fog=null,this.overrideMaterial=null,this.autoUpdate=!0}function ee(t){q.call(this),this.type="SpriteMaterial",this.color=new W(16777215),this.map=null,this.rotation=0,this.fog=!1,this.lights=!1,this.setValues(t)}function ie(t){ot.call(this),this.type="Sprite",this.material=void 0!==t?t:new ee}function ne(t){q.call(this),this.type="LineBasicMaterial",this.color=new W(16777215),this.linewidth=1,this.linecap="round",this.linejoin="round",this.lights=!1,this.setValues(t)}function re(t,e,i){if(1===i)return new ae(t,e);ot.call(this),this.type="Line",this.geometry=void 0!==t?t:new yt,this.material=void 0!==e?e:new ne({color:16777215*Math.random()})}function ae(t,e){re.call(this,t,e),this.type="LineSegments"}function oe(t,e,i,r,a,o,s,c,l){function h(){requestAnimationFrame(h),t.readyState>=t.HAVE_CURRENT_DATA&&(u.needsUpdate=!0)}n.call(this,t,e,i,r,a,o,s,c,l),this.generateMipmaps=!1;var u=this;h()}function se(t,e,i,n,r,a,o){xt.call(this),this.type="SphereGeometry",this.parameters={radius:t,widthSegments:e,heightSegments:i,phiStart:n,phiLength:r,thetaStart:a,thetaLength:o},this.fromBufferGeometry(new ce(t,e,i,n,r,a,o))}function ce(t,e,i,n,r,a,o){yt.call(this),this.type="SphereBufferGeometry",this.parameters={radius:t,widthSegments:e,heightSegments:i,phiStart:n,phiLength:r,thetaStart:a,thetaLength:o},t=t||50,e=Math.max(3,Math.floor(e)||8),i=Math.max(2,Math.floor(i)||6),
n=void 0!==n?n:0,r=void 0!==r?r:2*Math.PI,a=void 0!==a?a:0,o=void 0!==o?o:Math.PI;var c,l,h=a+o,u=0,f=[],d=new s,p=new s,m=[],g=[],v=[],x=[];for(l=0;l<=i;l++){var y=[],_=l/i;for(c=0;c<=e;c++){var M=c/e;d.x=-t*Math.cos(n+M*r)*Math.sin(a+_*o),d.y=t*Math.cos(a+_*o),d.z=t*Math.sin(n+M*r)*Math.sin(a+_*o),g.push(d.x,d.y,d.z),p.set(d.x,d.y,d.z).normalize(),v.push(p.x,p.y,p.z),x.push(M,1-_),y.push(u++)}f.push(y)}for(l=0;l<i;l++)for(c=0;c<e;c++){var b=f[l][c+1],w=f[l][c],S=f[l+1][c],E=f[l+1][c+1];(0!==l||a>0)&&m.push(b,w,E),(l!==i-1||h<Math.PI)&&m.push(w,S,E)}this.setIndex(m),this.addAttribute("position",new pt(g,3)),this.addAttribute("normal",new pt(v,3)),this.addAttribute("uv",new pt(x,2))}function le(t,e){xt.call(this),this.type="ShapeGeometry","object"==typeof e&&(e=e.curveSegments),this.parameters={shapes:t,curveSegments:e},this.fromBufferGeometry(new he(t,e)),this.mergeVertices()}function he(t,e){function i(t){var i,s,l,h=r.length/3,u=t.extractPoints(e),f=u.shape,d=u.holes;if(!1===Br.isClockWise(f))for(f=f.reverse(),i=0,s=d.length;i<s;i++)l=d[i],!0===Br.isClockWise(l)&&(d[i]=l.reverse());var p=Br.triangulateShape(f,d);for(i=0,s=d.length;i<s;i++)l=d[i],f=f.concat(l);for(i=0,s=f.length;i<s;i++){var m=f[i];r.push(m.x,m.y,0),a.push(0,0,1),o.push(m.x,m.y)}for(i=0,s=p.length;i<s;i++){var g=p[i],v=g[0]+h,x=g[1]+h,y=g[2]+h;n.push(v,x,y),c+=3}}yt.call(this),this.type="ShapeBufferGeometry",this.parameters={shapes:t,curveSegments:e},e=e||12;var n=[],r=[],a=[],o=[],s=0,c=0;if(!1===Array.isArray(t))i(t);else for(var l=0;l<t.length;l++)i(t[l]),this.addGroup(s,c,l),s+=c,c=0;this.setIndex(n),this.addAttribute("position",new pt(r,3)),this.addAttribute("normal",new pt(a,3)),this.addAttribute("uv",new pt(o,2))}function ue(t,e){if(void 0===t)return void(t=[]);xt.call(this),this.type="ExtrudeGeometry",t=Array.isArray(t)?t:[t],this.addShapeList(t,e),this.computeFaceNormals()}function fe(t,e,i,n,r,a,o,s){xt.call(this),this.type="CylinderGeometry",this.parameters={radiusTop:t,radiusBottom:e,height:i,radialSegments:n,heightSegments:r,openEnded:a,thetaStart:o,thetaLength:s},this.fromBufferGeometry(new de(t,e,i,n,r,a,o,s)),this.mergeVertices()}function de(t,e,n,r,a,o,c,l){function h(n){var a,o,h,v=new i,_=new s,M=0,b=!0===n?t:e,w=!0===n?1:-1;for(o=g,a=1;a<=r;a++)d.push(0,x*w,0),p.push(0,w,0),m.push(.5,.5),g++;for(h=g,a=0;a<=r;a++){var S=a/r,E=S*l+c,T=Math.cos(E),L=Math.sin(E);_.x=b*L,_.y=x*w,_.z=b*T,d.push(_.x,_.y,_.z),p.push(0,w,0),v.x=.5*T+.5,v.y=.5*L*w+.5,m.push(v.x,v.y),g++}for(a=0;a<r;a++){var A=o+a,P=h+a;!0===n?f.push(P,P+1,A):f.push(P+1,P,A),M+=3}u.addGroup(y,M,!0===n?1:2),y+=M}yt.call(this),this.type="CylinderBufferGeometry",this.parameters={radiusTop:t,radiusBottom:e,height:n,radialSegments:r,heightSegments:a,openEnded:o,thetaStart:c,thetaLength:l};var u=this;t=void 0!==t?t:20,e=void 0!==e?e:20,n=void 0!==n?n:100,r=Math.floor(r)||8,a=Math.floor(a)||1,o=void 0!==o&&o,c=void 0!==c?c:0,l=void 0!==l?l:2*Math.PI;var f=[],d=[],p=[],m=[],g=0,v=[],x=n/2,y=0;!function(){var i,o,h=new s,_=new s,M=0,b=(e-t)/n;for(o=0;o<=a;o++){var w=[],S=o/a,E=S*(e-t)+t;for(i=0;i<=r;i++){var T=i/r,L=T*l+c,A=Math.sin(L),P=Math.cos(L);_.x=E*A,_.y=-S*n+x,_.z=E*P,d.push(_.x,_.y,_.z),h.set(A,b,P).normalize(),p.push(h.x,h.y,h.z),m.push(T,1-S),w.push(g++)}v.push(w)}for(i=0;i<r;i++)for(o=0;o<a;o++){var C=v[o][i],R=v[o+1][i],N=v[o+1][i+1],D=v[o][i+1];f.push(C,R,D),f.push(R,N,D),M+=6}u.addGroup(y,M,0),y+=M}(),!1===o&&(t>0&&h(!0),e>0&&h(!1)),this.setIndex(f),this.addAttribute("position",new pt(d,3)),this.addAttribute("normal",new pt(p,3)),this.addAttribute("uv",new pt(m,2))}function pe(t,e,i,n){xt.call(this),this.type="CircleGeometry",this.parameters={radius:t,segments:e,thetaStart:i,thetaLength:n},this.fromBufferGeometry(new me(t,e,i,n))}function me(t,e,n,r){yt.call(this),this.type="CircleBufferGeometry",this.parameters={radius:t,segments:e,thetaStart:n,thetaLength:r},t=t||50,e=void 0!==e?Math.max(3,e):8,n=void 0!==n?n:0,r=void 0!==r?r:2*Math.PI;var a,o,c=[],l=[],h=[],u=[],f=new s,d=new i;for(l.push(0,0,0),h.push(0,0,1),u.push(.5,.5),o=0,a=3;o<=e;o++,a+=3){var p=n+o/e*r;f.x=t*Math.cos(p),f.y=t*Math.sin(p),l.push(f.x,f.y,f.z),h.push(0,0,1),d.x=(l[a]/t+1)/2,d.y=(l[a+1]/t+1)/2,u.push(d.x,d.y)}for(a=1;a<=e;a++)c.push(a,a+1,0);this.setIndex(c),this.addAttribute("position",new pt(l,3)),this.addAttribute("normal",new pt(h,3)),this.addAttribute("uv",new pt(u,2))}function ge(t){this.uuid=wr.generateUUID(),this.type="MultiMaterial",this.materials=Array.isArray(t)?t:[],this.visible=!0}function ve(t){q.call(this),this.type="MeshLambertMaterial",this.color=new W(16777215),this.map=null,this.lightMap=null,this.lightMapIntensity=1,this.aoMap=null,this.aoMapIntensity=1,this.emissive=new W(0),this.emissiveIntensity=1,this.emissiveMap=null,this.specularMap=null,this.alphaMap=null,this.envMap=null,this.combine=fn,this.reflectivity=1,this.refractionRatio=.98,this.wireframe=!1,this.wireframeLinewidth=1,this.wireframeLinecap="round",this.wireframeLinejoin="round",this.skinning=!1,this.morphTargets=!1,this.morphNormals=!1,this.setValues(t)}function xe(t,e,i){var n=this,r=!1,a=0,o=0;this.onStart=void 0,this.onLoad=t,this.onProgress=e,this.onError=i,this.itemStart=function(t){o++,!1===r&&void 0!==n.onStart&&n.onStart(t,a,o),r=!0},this.itemEnd=function(t){a++,void 0!==n.onProgress&&n.onProgress(t,a,o),a===o&&(r=!1,void 0!==n.onLoad&&n.onLoad())},this.itemError=function(t){void 0!==n.onError&&n.onError(t)}}function ye(t){this.manager=void 0!==t?t:kr}function _e(t){this.manager=void 0!==t?t:kr}function Me(t){this.manager=void 0!==t?t:kr}function be(t){this.manager=void 0!==t?t:kr}function we(t){this.manager=void 0!==t?t:kr,this.textures={}}function Se(){this.onLoadStart=function(){},this.onLoadProgress=function(){},this.onLoadComplete=function(){}}function Ee(t,e,i,n){this.parameterPositions=t,this._cachedIndex=0,this.resultBuffer=void 0!==n?n:new e.constructor(i),this.sampleValues=e,this.valueSize=i}function Te(t,e,i,n){Ee.call(this,t,e,i,n),this._weightPrev=-0,this._offsetPrev=-0,this._weightNext=-0,this._offsetNext=-0}function Le(t,e,i,n){Ee.call(this,t,e,i,n)}function Ae(t,e,i,n){Ee.call(this,t,e,i,n)}function Pe(t,e,i,n){if(void 0===t)throw new Error("track name is undefined");if(void 0===e||0===e.length)throw new Error("no keyframes in track named "+t);this.name=t,this.times=Hr.convertArray(e,this.TimeBufferType),this.values=Hr.convertArray(i,this.ValueBufferType),this.setInterpolation(n||this.DefaultInterpolation),this.validate(),this.optimize()}function Ce(t,e,i,n){Pe.call(this,t,e,i,n)}function Re(t,e,i,n){Ee.call(this,t,e,i,n)}function Ne(t,e,i,n){Pe.call(this,t,e,i,n)}function De(t,e,i,n){Pe.call(this,t,e,i,n)}function Ue(t,e,i,n){Pe.call(this,t,e,i,n)}function Ie(t,e,i){Pe.call(this,t,e,i)}function Oe(t,e,i,n){Pe.call(this,t,e,i,n)}function ze(t,e,i,n){Pe.apply(this,arguments)}function Fe(t,e,i){this.name=t,this.tracks=i,this.duration=void 0!==e?e:-1,this.uuid=wr.generateUUID(),this.duration<0&&this.resetDuration(),this.optimize()}function Be(t){"boolean"==typeof t&&(t=void 0),this.manager=void 0!==t?t:kr,this.withCredentials=!1}function Ge(t,e){ot.call(this),this.type="Light",this.color=new W(t),this.intensity=void 0!==e?e:1,this.receiveShadow=void 0}function Ve(t){this.camera=t,this.bias=0,this.radius=1,this.mapSize=new i(512,512),this.map=null,this.matrix=new c}function ke(){Ve.call(this,new Lt(-5,5,5,-5,.5,500))}function He(t,e){Ge.call(this,t,e),this.type="DirectionalLight",this.position.copy(ot.DefaultUp),this.updateMatrix(),this.target=new ot,this.shadow=new ke}function We(t,e){Ge.call(this,t,e),this.type="AmbientLight",this.castShadow=void 0}function je(t){"string"==typeof t&&(t=arguments[1]),this.value=t}function Xe(t,e,i,n){this.ray=new nt(t,e),this.near=i||0,this.far=n||1/0,this.params={Mesh:{},Line:{},LOD:{},Points:{threshold:1},Sprite:{}},Object.defineProperties(this.params,{PointCloud:{get:function(){return this.Points}}})}function Ye(t,e){return t.distance-e.distance}function qe(t,e,i,n){if(!1!==t.visible&&(t.raycast(e,i),!0===n))for(var r=t.children,a=0,o=r.length;a<o;a++)qe(r[a],e,i,!0)}function Ze(t){this.autoStart=void 0===t||t,this.startTime=0,this.oldTime=0,this.elapsedTime=0,this.running=!1}function Je(t){t=t||1;var e=[0,0,0,t,0,0,0,0,0,0,t,0,0,0,0,0,0,t],i=[1,0,0,1,.6,0,0,1,0,.6,1,0,0,0,1,0,.6,1],n=new yt;n.addAttribute("position",new pt(e,3)),n.addAttribute("color",new pt(i,3));var r=new ne({vertexColors:Ui});ae.call(this,n,r)}function Qe(){}function Ke(t,e){this.v1=t,this.v2=e}function $e(){this.curves=[],this.autoClose=!1}function ti(t,e,i,n,r,a,o,s){this.aX=t,this.aY=e,this.xRadius=i,this.yRadius=n,this.aStartAngle=r,this.aEndAngle=a,this.aClockwise=o,this.aRotation=s||0}function ei(t,e,i,n,r){var a=.5*(n-e),o=.5*(r-i),s=t*t;return(2*i-2*n+a+o)*(t*s)+(-3*i+3*n-2*a-o)*s+a*t+i}function ii(t,e){var i=1-t;return i*i*e}function ni(t,e){return 2*(1-t)*t*e}function ri(t,e){return t*t*e}function ai(t,e,i,n){return ii(t,e)+ni(t,i)+ri(t,n)}function oi(t,e){var i=1-t;return i*i*i*e}function si(t,e){var i=1-t;return 3*i*i*t*e}function ci(t,e){return 3*(1-t)*t*t*e}function li(t,e){return t*t*t*e}function hi(t,e,i,n,r){return oi(t,e)+si(t,i)+ci(t,n)+li(t,r)}function ui(t){this.points=void 0===t?[]:t}function fi(t,e,i,n){this.v0=t,this.v1=e,this.v2=i,this.v3=n}function di(t,e,i){this.v0=t,this.v1=e,this.v2=i}function pi(t){$e.call(this),this.currentPoint=new i,t&&this.fromPoints(t)}function mi(){pi.apply(this,arguments),this.holes=[]}function gi(t,e,i,n,r,a,o){return new lt(t,e,i,r,a,o)}function vi(t){return new ge(t)}function xi(t){return new ie(t)}function yi(t,e,i){return new s(t,e,i)}void 0===Number.EPSILON&&(Number.EPSILON=Math.pow(2,-52)),void 0===Math.sign&&(Math.sign=function(t){return t<0?-1:t>0?1:+t}),void 0===Function.prototype.name&&Object.defineProperty(Function.prototype,"name",{get:function(){return this.toString().match(/^\s*function\s*([^\(\s]*)/)[1]}}),void 0===Object.assign&&function(){Object.assign=function(t){if(void 0===t||null===t)throw new TypeError("Cannot convert undefined or null to object");for(var e=Object(t),i=1;i<arguments.length;i++){var n=arguments[i];if(void 0!==n&&null!==n)for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e}}(),e.prototype={addEventListener:function(t,e){void 0===this._listeners&&(this._listeners={});var i=this._listeners;void 0===i[t]&&(i[t]=[]),-1===i[t].indexOf(e)&&i[t].push(e)},hasEventListener:function(t,e){if(void 0===this._listeners)return!1;var i=this._listeners;return void 0!==i[t]&&-1!==i[t].indexOf(e)},removeEventListener:function(t,e){if(void 0!==this._listeners){var i=this._listeners,n=i[t];if(void 0!==n){var r=n.indexOf(e);-1!==r&&n.splice(r,1)}}},dispatchEvent:function(t){if(void 0!==this._listeners){var e=this._listeners,i=e[t.type];if(void 0!==i){t.target=this;var n=[],r=0,a=i.length;for(r=0;r<a;r++)n[r]=i[r];for(r=0;r<a;r++)n[r].call(this,t)}}}};var _i="84",Mi={LEFT:0,MIDDLE:1,RIGHT:2},bi=0,wi=1,Si=2,Ei=0,Ti=1,Li=2,Ai=0,Pi=1,Ci=2,Ri=1,Ni=2,Di=0,Ui=2,Ii=0,Oi=1,zi=2,Fi=3,Bi=4,Gi=5,Vi=100,ki=101,Hi=102,Wi=103,ji=104,Xi=200,Yi=201,qi=202,Zi=203,Ji=204,Qi=205,Ki=206,$i=207,tn=208,en=209,nn=210,rn=0,an=1,on=2,sn=3,cn=4,ln=5,hn=6,un=7,fn=0,dn=1,pn=2,mn=0,gn=1,vn=2,xn=3,yn=4,_n=301,Mn=302,bn=303,wn=304,Sn=305,En=306,Tn=307,Ln=1e3,An=1001,Pn=1002,Cn=1003,Rn=1004,Nn=1005,Dn=1006,Un=1007,In=1008,On=1009,zn=1010,Fn=1011,Bn=1012,Gn=1013,Vn=1014,kn=1015,Hn=1016,Wn=1017,jn=1018,Xn=1019,Yn=1020,qn=1021,Zn=1022,Jn=1023,Qn=1024,Kn=1025,$n=Jn,tr=1026,er=1027,ir=2001,nr=2002,rr=2003,ar=2004,or=2100,sr=2101,cr=2102,lr=2103,hr=2151,ur=0,fr=1,dr=2,pr=3e3,mr=3001,gr=3007,vr=3002,xr=3004,yr=3005,_r=3006,Mr=3200,br=3201,wr={DEG2RAD:Math.PI/180,RAD2DEG:180/Math.PI,generateUUID:function(){var t,e="0123456789ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz".split(""),i=new Array(36),n=0;return function(){for(var r=0;r<36;r++)8===r||13===r||18===r||23===r?i[r]="-":14===r?i[r]="4":(n<=2&&(n=33554432+16777216*Math.random()|0),t=15&n,n>>=4,i[r]=e[19===r?3&t|8:t]);return i.join("")}}(),clamp:function(t,e,i){return Math.max(e,Math.min(i,t))},euclideanModulo:function(t,e){return(t%e+e)%e},mapLinear:function(t,e,i,n,r){return n+(t-e)*(r-n)/(i-e)},lerp:function(t,e,i){return(1-i)*t+i*e},smoothstep:function(t,e,i){return t<=e?0:t>=i?1:(t=(t-e)/(i-e))*t*(3-2*t)},smootherstep:function(t,e,i){return t<=e?0:t>=i?1:(t=(t-e)/(i-e))*t*t*(t*(6*t-15)+10)},randInt:function(t,e){return t+Math.floor(Math.random()*(e-t+1))},randFloat:function(t,e){return t+Math.random()*(e-t)},randFloatSpread:function(t){return t*(.5-Math.random())},degToRad:function(t){return t*wr.DEG2RAD},radToDeg:function(t){return t*wr.RAD2DEG},isPowerOfTwo:function(t){return 0==(t&t-1)&&0!==t},nearestPowerOfTwo:function(t){return Math.pow(2,Math.round(Math.log(t)/Math.LN2))},nextPowerOfTwo:function(t){return t--,t|=t>>1,t|=t>>2,t|=t>>4,t|=t>>8,t|=t>>16,++t}};i.prototype={constructor:i,isVector2:!0,get width(){return this.x},set width(t){this.x=t},get height(){return this.y},set height(t){this.y=t},set:function(t,e){return this.x=t,this.y=e,this},setScalar:function(t){return this.x=t,this.y=t,this},setX:function(t){return this.x=t,this},setY:function(t){return this.y=t,this},setComponent:function(t,e){switch(t){case 0:this.x=e;break;case 1:this.y=e;break;default:throw new Error("index is out of range: "+t)}return this},getComponent:function(t){switch(t){case 0:return this.x;case 1:return this.y;default:throw new Error("index is out of range: "+t)}},clone:function(){return new this.constructor(this.x,this.y)},copy:function(t){return this.x=t.x,this.y=t.y,this},add:function(t,e){return void 0!==e?this.addVectors(t,e):(this.x+=t.x,this.y+=t.y,this)},addScalar:function(t){return this.x+=t,this.y+=t,this},addVectors:function(t,e){return this.x=t.x+e.x,this.y=t.y+e.y,this},addScaledVector:function(t,e){return this.x+=t.x*e,this.y+=t.y*e,this},sub:function(t,e){return void 0!==e?this.subVectors(t,e):(this.x-=t.x,this.y-=t.y,this)},subScalar:function(t){return this.x-=t,this.y-=t,this},subVectors:function(t,e){return this.x=t.x-e.x,this.y=t.y-e.y,this},multiply:function(t){return this.x*=t.x,this.y*=t.y,this},multiplyScalar:function(t){return isFinite(t)?(this.x*=t,this.y*=t):(this.x=0,this.y=0),this},divide:function(t){return this.x/=t.x,this.y/=t.y,this},divideScalar:function(t){return this.multiplyScalar(1/t)},min:function(t){return this.x=Math.min(this.x,t.x),this.y=Math.min(this.y,t.y),this},max:function(t){return this.x=Math.max(this.x,t.x),this.y=Math.max(this.y,t.y),this},clamp:function(t,e){return this.x=Math.max(t.x,Math.min(e.x,this.x)),this.y=Math.max(t.y,Math.min(e.y,this.y)),this},clampScalar:function(){var t,e;return function(n,r){return void 0===t&&(t=new i,e=new i),t.set(n,n),e.set(r,r),this.clamp(t,e)}}(),clampLength:function(t,e){var i=this.length();return this.multiplyScalar(Math.max(t,Math.min(e,i))/i)},floor:function(){return this.x=Math.floor(this.x),this.y=Math.floor(this.y),this},ceil:function(){return this.x=Math.ceil(this.x),this.y=Math.ceil(this.y),this},round:function(){return this.x=Math.round(this.x),this.y=Math.round(this.y),this},roundToZero:function(){return this.x=this.x<0?Math.ceil(this.x):Math.floor(this.x),this.y=this.y<0?Math.ceil(this.y):Math.floor(this.y),this},negate:function(){return this.x=-this.x,this.y=-this.y,this},dot:function(t){return this.x*t.x+this.y*t.y},lengthSq:function(){return this.x*this.x+this.y*this.y},length:function(){return Math.sqrt(this.x*this.x+this.y*this.y)},lengthManhattan:function(){return Math.abs(this.x)+Math.abs(this.y)},normalize:function(){return this.divideScalar(this.length())},angle:function(){var t=Math.atan2(this.y,this.x);return t<0&&(t+=2*Math.PI),t},distanceTo:function(t){return Math.sqrt(this.distanceToSquared(t))},distanceToSquared:function(t){var e=this.x-t.x,i=this.y-t.y;return e*e+i*i},distanceToManhattan:function(t){return Math.abs(this.x-t.x)+Math.abs(this.y-t.y)},setLength:function(t){return this.multiplyScalar(t/this.length())},lerp:function(t,e){return this.x+=(t.x-this.x)*e,this.y+=(t.y-this.y)*e,this},lerpVectors:function(t,e,i){return this.subVectors(e,t).multiplyScalar(i).add(t)},equals:function(t){return t.x===this.x&&t.y===this.y},fromArray:function(t,e){return void 0===e&&(e=0),this.x=t[e],this.y=t[e+1],this},toArray:function(t,e){return void 0===t&&(t=[]),void 0===e&&(e=0),t[e]=this.x,t[e+1]=this.y,t},fromBufferAttribute:function(t,e,i){return this.x=t.getX(e),this.y=t.getY(e),this},rotateAround:function(t,e){var i=Math.cos(e),n=Math.sin(e),r=this.x-t.x,a=this.y-t.y;return this.x=r*i-a*n+t.x,this.y=r*n+a*i+t.y,this}};var Sr=0;n.DEFAULT_IMAGE=void 0,n.DEFAULT_MAPPING=300,n.prototype={constructor:n,isTexture:!0,set needsUpdate(t){!0===t&&this.version++},clone:function(){return(new this.constructor).copy(this)},copy:function(t){return this.image=t.image,this.mipmaps=t.mipmaps.slice(0),this.mapping=t.mapping,this.wrapS=t.wrapS,this.wrapT=t.wrapT,this.magFilter=t.magFilter,this.minFilter=t.minFilter,this.anisotropy=t.anisotropy,this.format=t.format,this.type=t.type,this.offset.copy(t.offset),this.repeat.copy(t.repeat),this.generateMipmaps=t.generateMipmaps,this.premultiplyAlpha=t.premultiplyAlpha,this.flipY=t.flipY,this.unpackAlignment=t.unpackAlignment,this.encoding=t.encoding,this},toJSON:function(t){if(void 0!==t.textures[this.uuid])return t.textures[this.uuid];var e={metadata:{version:4.4,type:"Texture",generator:"Texture.toJSON"},uuid:this.uuid,name:this.name,mapping:this.mapping,repeat:[this.repeat.x,this.repeat.y],offset:[this.offset.x,this.offset.y],wrap:[this.wrapS,this.wrapT],minFilter:this.minFilter,magFilter:this.magFilter,anisotropy:this.anisotropy,flipY:this.flipY};if(void 0!==this.image){var i=this.image;void 0===i.uuid&&(i.uuid=wr.generateUUID()),void 0===t.images[i.uuid]&&(t.images[i.uuid]={uuid:i.uuid,url:function(t){var e;return void 0!==t.toDataURL?e=t:(e=document.createElementNS("http://www.w3.org/1999/xhtml","canvas"),e.width=t.width,e.height=t.height,e.getContext("2d").drawImage(t,0,0,t.width,t.height)),e.width>2048||e.height>2048?e.toDataURL("image/jpeg",.6):e.toDataURL("image/png")}(i)}),e.image=i.uuid}return t.textures[this.uuid]=e,e},dispose:function(){this.dispatchEvent({type:"dispose"})},transformUv:function(t){if(300===this.mapping){if(t.multiply(this.repeat),t.add(this.offset),t.x<0||t.x>1)switch(this.wrapS){case Ln:t.x=t.x-Math.floor(t.x);break;case An:t.x=t.x<0?0:1;break;case Pn:1===Math.abs(Math.floor(t.x)%2)?t.x=Math.ceil(t.x)-t.x:t.x=t.x-Math.floor(t.x)}if(t.y<0||t.y>1)switch(this.wrapT){case Ln:t.y=t.y-Math.floor(t.y);break;case An:t.y=t.y<0?0:1;break;case Pn:1===Math.abs(Math.floor(t.y)%2)?t.y=Math.ceil(t.y)-t.y:t.y=t.y-Math.floor(t.y)}this.flipY&&(t.y=1-t.y)}}},Object.assign(n.prototype,e.prototype),r.prototype={constructor:r,isVector4:!0,set:function(t,e,i,n){return this.x=t,this.y=e,this.z=i,this.w=n,this},setScalar:function(t){return this.x=t,this.y=t,this.z=t,this.w=t,this},setX:function(t){return this.x=t,this},setY:function(t){return this.y=t,this},setZ:function(t){return this.z=t,this},setW:function(t){return this.w=t,this},setComponent:function(t,e){switch(t){case 0:this.x=e;break;case 1:this.y=e;break;case 2:this.z=e;break;case 3:this.w=e;break;default:throw new Error("index is out of range: "+t)}return this},getComponent:function(t){switch(t){case 0:return this.x;case 1:return this.y;case 2:return this.z;case 3:return this.w;default:throw new Error("index is out of range: "+t)}},clone:function(){return new this.constructor(this.x,this.y,this.z,this.w)},copy:function(t){return this.x=t.x,this.y=t.y,this.z=t.z,this.w=void 0!==t.w?t.w:1,this},add:function(t,e){return void 0!==e?this.addVectors(t,e):(this.x+=t.x,this.y+=t.y,this.z+=t.z,this.w+=t.w,this)},addScalar:function(t){return this.x+=t,this.y+=t,this.z+=t,this.w+=t,this},addVectors:function(t,e){return this.x=t.x+e.x,this.y=t.y+e.y,this.z=t.z+e.z,this.w=t.w+e.w,this},addScaledVector:function(t,e){return this.x+=t.x*e,this.y+=t.y*e,this.z+=t.z*e,this.w+=t.w*e,this},sub:function(t,e){return void 0!==e?this.subVectors(t,e):(this.x-=t.x,this.y-=t.y,this.z-=t.z,this.w-=t.w,this)},subScalar:function(t){return this.x-=t,this.y-=t,this.z-=t,this.w-=t,this},subVectors:function(t,e){return this.x=t.x-e.x,this.y=t.y-e.y,this.z=t.z-e.z,this.w=t.w-e.w,this},multiplyScalar:function(t){return isFinite(t)?(this.x*=t,this.y*=t,this.z*=t,this.w*=t):(this.x=0,this.y=0,this.z=0,this.w=0),this},applyMatrix4:function(t){var e=this.x,i=this.y,n=this.z,r=this.w,a=t.elements;return this.x=a[0]*e+a[4]*i+a[8]*n+a[12]*r,this.y=a[1]*e+a[5]*i+a[9]*n+a[13]*r,this.z=a[2]*e+a[6]*i+a[10]*n+a[14]*r,this.w=a[3]*e+a[7]*i+a[11]*n+a[15]*r,this},divideScalar:function(t){return this.multiplyScalar(1/t)},setAxisAngleFromQuaternion:function(t){this.w=2*Math.acos(t.w);var e=Math.sqrt(1-t.w*t.w);return e<1e-4?(this.x=1,this.y=0,this.z=0):(this.x=t.x/e,this.y=t.y/e,this.z=t.z/e),this},setAxisAngleFromRotationMatrix:function(t){var e,i,n,r,a=t.elements,o=a[0],s=a[4],c=a[8],l=a[1],h=a[5],u=a[9],f=a[2],d=a[6],p=a[10];if(Math.abs(s-l)<.01&&Math.abs(c-f)<.01&&Math.abs(u-d)<.01){if(Math.abs(s+l)<.1&&Math.abs(c+f)<.1&&Math.abs(u+d)<.1&&Math.abs(o+h+p-3)<.1)return this.set(1,0,0,0),this;e=Math.PI;var m=(o+1)/2,g=(h+1)/2,v=(p+1)/2,x=(s+l)/4,y=(c+f)/4,_=(u+d)/4;return m>g&&m>v?m<.01?(i=0,n=.707106781,r=.707106781):(i=Math.sqrt(m),n=x/i,r=y/i):g>v?g<.01?(i=.707106781,n=0,r=.707106781):(n=Math.sqrt(g),i=x/n,r=_/n):v<.01?(i=.707106781,n=.707106781,r=0):(r=Math.sqrt(v),i=y/r,n=_/r),this.set(i,n,r,e),this}var M=Math.sqrt((d-u)*(d-u)+(c-f)*(c-f)+(l-s)*(l-s));return Math.abs(M)<.001&&(M=1),this.x=(d-u)/M,this.y=(c-f)/M,this.z=(l-s)/M,this.w=Math.acos((o+h+p-1)/2),this},min:function(t){return this.x=Math.min(this.x,t.x),this.y=Math.min(this.y,t.y),this.z=Math.min(this.z,t.z),this.w=Math.min(this.w,t.w),this},max:function(t){return this.x=Math.max(this.x,t.x),this.y=Math.max(this.y,t.y),this.z=Math.max(this.z,t.z),this.w=Math.max(this.w,t.w),this},clamp:function(t,e){return this.x=Math.max(t.x,Math.min(e.x,this.x)),this.y=Math.max(t.y,Math.min(e.y,this.y)),this.z=Math.max(t.z,Math.min(e.z,this.z)),this.w=Math.max(t.w,Math.min(e.w,this.w)),this},clampScalar:function(){var t,e;return function(i,n){return void 0===t&&(t=new r,e=new r),t.set(i,i,i,i),e.set(n,n,n,n),this.clamp(t,e)}}(),floor:function(){return this.x=Math.floor(this.x),this.y=Math.floor(this.y),this.z=Math.floor(this.z),this.w=Math.floor(this.w),this},ceil:function(){return this.x=Math.ceil(this.x),this.y=Math.ceil(this.y),this.z=Math.ceil(this.z),this.w=Math.ceil(this.w),this},round:function(){return this.x=Math.round(this.x),this.y=Math.round(this.y),this.z=Math.round(this.z),this.w=Math.round(this.w),this},roundToZero:function(){return this.x=this.x<0?Math.ceil(this.x):Math.floor(this.x),this.y=this.y<0?Math.ceil(this.y):Math.floor(this.y),this.z=this.z<0?Math.ceil(this.z):Math.floor(this.z),this.w=this.w<0?Math.ceil(this.w):Math.floor(this.w),this},negate:function(){return this.x=-this.x,this.y=-this.y,this.z=-this.z,this.w=-this.w,this},dot:function(t){return this.x*t.x+this.y*t.y+this.z*t.z+this.w*t.w},lengthSq:function(){return this.x*this.x+this.y*this.y+this.z*this.z+this.w*this.w},length:function(){return Math.sqrt(this.x*this.x+this.y*this.y+this.z*this.z+this.w*this.w)},lengthManhattan:function(){return Math.abs(this.x)+Math.abs(this.y)+Math.abs(this.z)+Math.abs(this.w)},normalize:function(){return this.divideScalar(this.length())},setLength:function(t){return this.multiplyScalar(t/this.length())},lerp:function(t,e){return this.x+=(t.x-this.x)*e,this.y+=(t.y-this.y)*e,this.z+=(t.z-this.z)*e,this.w+=(t.w-this.w)*e,this},lerpVectors:function(t,e,i){return this.subVectors(e,t).multiplyScalar(i).add(t)},equals:function(t){return t.x===this.x&&t.y===this.y&&t.z===this.z&&t.w===this.w},fromArray:function(t,e){return void 0===e&&(e=0),this.x=t[e],this.y=t[e+1],this.z=t[e+2],this.w=t[e+3],this},toArray:function(t,e){return void 0===t&&(t=[]),void 0===e&&(e=0),t[e]=this.x,t[e+1]=this.y,t[e+2]=this.z,t[e+3]=this.w,t},fromBufferAttribute:function(t,e,i){return this.x=t.getX(e),this.y=t.getY(e),this.z=t.getZ(e),this.w=t.getW(e),this}},a.prototype={constructor:a,isWebGLRenderTarget:!0,setSize:function(t,e){this.width===t&&this.height===e||(this.width=t,this.height=e,this.dispose()),this.viewport.set(0,0,t,e),this.scissor.set(0,0,t,e)},clone:function(){return(new this.constructor).copy(this)},copy:function(t){return this.width=t.width,this.height=t.height,this.viewport.copy(t.viewport),this.texture=t.texture.clone(),this.depthBuffer=t.depthBuffer,this.stencilBuffer=t.stencilBuffer,this.depthTexture=t.depthTexture,this},dispose:function(){this.dispatchEvent({type:"dispose"})}},Object.assign(a.prototype,e.prototype),o.prototype={constructor:o,get x(){return this._x},set x(t){this._x=t,this.onChangeCallback()},get y(){return this._y},set y(t){this._y=t,this.onChangeCallback()},get z(){return this._z},set z(t){this._z=t,this.onChangeCallback()},get w(){return this._w},set w(t){this._w=t,this.onChangeCallback()},set:function(t,e,i,n){return this._x=t,this._y=e,this._z=i,this._w=n,this.onChangeCallback(),this},clone:function(){return new this.constructor(this._x,this._y,this._z,this._w)},copy:function(t){return this._x=t.x,this._y=t.y,this._z=t.z,this._w=t.w,this.onChangeCallback(),this},setFromEuler:function(t,e){if(!1===(t&&t.isEuler))throw new Error("THREE.Quaternion: .setFromEuler() now expects an Euler rotation rather than a Vector3 and order.");var i=Math.cos(t._x/2),n=Math.cos(t._y/2),r=Math.cos(t._z/2),a=Math.sin(t._x/2),o=Math.sin(t._y/2),s=Math.sin(t._z/2),c=t.order;return"XYZ"===c?(this._x=a*n*r+i*o*s,this._y=i*o*r-a*n*s,this._z=i*n*s+a*o*r,this._w=i*n*r-a*o*s):"YXZ"===c?(this._x=a*n*r+i*o*s,this._y=i*o*r-a*n*s,this._z=i*n*s-a*o*r,this._w=i*n*r+a*o*s):"ZXY"===c?(this._x=a*n*r-i*o*s,this._y=i*o*r+a*n*s,this._z=i*n*s+a*o*r,this._w=i*n*r-a*o*s):"ZYX"===c?(this._x=a*n*r-i*o*s,this._y=i*o*r+a*n*s,this._z=i*n*s-a*o*r,this._w=i*n*r+a*o*s):"YZX"===c?(this._x=a*n*r+i*o*s,this._y=i*o*r+a*n*s,this._z=i*n*s-a*o*r,this._w=i*n*r-a*o*s):"XZY"===c&&(this._x=a*n*r-i*o*s,this._y=i*o*r-a*n*s,this._z=i*n*s+a*o*r,this._w=i*n*r+a*o*s),!1!==e&&this.onChangeCallback(),this},setFromAxisAngle:function(t,e){var i=e/2,n=Math.sin(i);return this._x=t.x*n,this._y=t.y*n,this._z=t.z*n,this._w=Math.cos(i),this.onChangeCallback(),this},setFromRotationMatrix:function(t){var e,i=t.elements,n=i[0],r=i[4],a=i[8],o=i[1],s=i[5],c=i[9],l=i[2],h=i[6],u=i[10],f=n+s+u;return f>0?(e=.5/Math.sqrt(f+1),this._w=.25/e,this._x=(h-c)*e,this._y=(a-l)*e,this._z=(o-r)*e):n>s&&n>u?(e=2*Math.sqrt(1+n-s-u),this._w=(h-c)/e,this._x=.25*e,this._y=(r+o)/e,this._z=(a+l)/e):s>u?(e=2*Math.sqrt(1+s-n-u),this._w=(a-l)/e,this._x=(r+o)/e,this._y=.25*e,this._z=(c+h)/e):(e=2*Math.sqrt(1+u-n-s),this._w=(o-r)/e,this._x=(a+l)/e,this._y=(c+h)/e,this._z=.25*e),this.onChangeCallback(),this},setFromUnitVectors:function(){var t,e;return function(i,n){return void 0===t&&(t=new s),e=i.dot(n)+1,e<1e-6?(e=0,Math.abs(i.x)>Math.abs(i.z)?t.set(-i.y,i.x,0):t.set(0,-i.z,i.y)):t.crossVectors(i,n),this._x=t.x,this._y=t.y,this._z=t.z,this._w=e,this.normalize()}}(),inverse:function(){return this.conjugate().normalize()},conjugate:function(){return this._x*=-1,this._y*=-1,this._z*=-1,this.onChangeCallback(),this},dot:function(t){return this._x*t._x+this._y*t._y+this._z*t._z+this._w*t._w},lengthSq:function(){return this._x*this._x+this._y*this._y+this._z*this._z+this._w*this._w},length:function(){return Math.sqrt(this._x*this._x+this._y*this._y+this._z*this._z+this._w*this._w)},normalize:function(){var t=this.length();return 0===t?(this._x=0,this._y=0,this._z=0,this._w=1):(t=1/t,this._x=this._x*t,this._y=this._y*t,this._z=this._z*t,this._w=this._w*t),this.onChangeCallback(),this},multiply:function(t,e){return void 0!==e?this.multiplyQuaternions(t,e):this.multiplyQuaternions(this,t)},premultiply:function(t){return this.multiplyQuaternions(t,this)},multiplyQuaternions:function(t,e){var i=t._x,n=t._y,r=t._z,a=t._w,o=e._x,s=e._y,c=e._z,l=e._w;return this._x=i*l+a*o+n*c-r*s,this._y=n*l+a*s+r*o-i*c,this._z=r*l+a*c+i*s-n*o,this._w=a*l-i*o-n*s-r*c,this.onChangeCallback(),this},slerp:function(t,e){if(0===e)return this;if(1===e)return this.copy(t);var i=this._x,n=this._y,r=this._z,a=this._w,o=a*t._w+i*t._x+n*t._y+r*t._z;if(o<0?(this._w=-t._w,this._x=-t._x,this._y=-t._y,this._z=-t._z,o=-o):this.copy(t),o>=1)return this._w=a,this._x=i,this._y=n,this._z=r,this;var s=Math.sqrt(1-o*o);if(Math.abs(s)<.001)return this._w=.5*(a+this._w),this._x=.5*(i+this._x),this._y=.5*(n+this._y),this._z=.5*(r+this._z),this;var c=Math.atan2(s,o),l=Math.sin((1-e)*c)/s,h=Math.sin(e*c)/s;return this._w=a*l+this._w*h,this._x=i*l+this._x*h,this._y=n*l+this._y*h,this._z=r*l+this._z*h,this.onChangeCallback(),this},equals:function(t){return t._x===this._x&&t._y===this._y&&t._z===this._z&&t._w===this._w},fromArray:function(t,e){return void 0===e&&(e=0),this._x=t[e],this._y=t[e+1],this._z=t[e+2],this._w=t[e+3],this.onChangeCallback(),this},toArray:function(t,e){return void 0===t&&(t=[]),void 0===e&&(e=0),t[e]=this._x,t[e+1]=this._y,t[e+2]=this._z,t[e+3]=this._w,t},onChange:function(t){return this.onChangeCallback=t,this},onChangeCallback:function(){}},Object.assign(o,{slerp:function(t,e,i,n){return i.copy(t).slerp(e,n)},slerpFlat:function(t,e,i,n,r,a,o){var s=i[n+0],c=i[n+1],l=i[n+2],h=i[n+3],u=r[a+0],f=r[a+1],d=r[a+2],p=r[a+3];if(h!==p||s!==u||c!==f||l!==d){var m=1-o,g=s*u+c*f+l*d+h*p,v=g>=0?1:-1,x=1-g*g;if(x>Number.EPSILON){var y=Math.sqrt(x),_=Math.atan2(y,g*v);m=Math.sin(m*_)/y,o=Math.sin(o*_)/y}var M=o*v;if(s=s*m+u*M,c=c*m+f*M,l=l*m+d*M,h=h*m+p*M,m===1-o){var b=1/Math.sqrt(s*s+c*c+l*l+h*h);s*=b,c*=b,l*=b,h*=b}}t[e]=s,t[e+1]=c,t[e+2]=l,t[e+3]=h}}),s.prototype={constructor:s,isVector3:!0,set:function(t,e,i){return this.x=t,this.y=e,this.z=i,this},setScalar:function(t){return this.x=t,this.y=t,this.z=t,this},setX:function(t){return this.x=t,this},setY:function(t){return this.y=t,this},setZ:function(t){return this.z=t,this},setComponent:function(t,e){switch(t){case 0:this.x=e;break;case 1:this.y=e;break;case 2:this.z=e;break;default:throw new Error("index is out of range: "+t)}return this},getComponent:function(t){switch(t){case 0:return this.x;case 1:return this.y;case 2:return this.z;default:throw new Error("index is out of range: "+t)}},clone:function(){return new this.constructor(this.x,this.y,this.z)},copy:function(t){return this.x=t.x,this.y=t.y,this.z=t.z,this},add:function(t,e){return void 0!==e?this.addVectors(t,e):(this.x+=t.x,this.y+=t.y,this.z+=t.z,this)},addScalar:function(t){return this.x+=t,this.y+=t,this.z+=t,this},addVectors:function(t,e){return this.x=t.x+e.x,this.y=t.y+e.y,this.z=t.z+e.z,this},addScaledVector:function(t,e){return this.x+=t.x*e,this.y+=t.y*e,this.z+=t.z*e,this},sub:function(t,e){return void 0!==e?this.subVectors(t,e):(this.x-=t.x,this.y-=t.y,this.z-=t.z,this)},subScalar:function(t){return this.x-=t,this.y-=t,this.z-=t,this},subVectors:function(t,e){return this.x=t.x-e.x,this.y=t.y-e.y,this.z=t.z-e.z,this},multiply:function(t,e){return void 0!==e?this.multiplyVectors(t,e):(this.x*=t.x,this.y*=t.y,this.z*=t.z,this)},multiplyScalar:function(t){return isFinite(t)?(this.x*=t,this.y*=t,this.z*=t):(this.x=0,this.y=0,this.z=0),this},multiplyVectors:function(t,e){return this.x=t.x*e.x,this.y=t.y*e.y,this.z=t.z*e.z,this},applyEuler:function(){var t;return function(e){return e&&e.isEuler,void 0===t&&(t=new o),this.applyQuaternion(t.setFromEuler(e))}}(),applyAxisAngle:function(){var t;return function(e,i){return void 0===t&&(t=new o),this.applyQuaternion(t.setFromAxisAngle(e,i))}}(),applyMatrix3:function(t){var e=this.x,i=this.y,n=this.z,r=t.elements;return this.x=r[0]*e+r[3]*i+r[6]*n,this.y=r[1]*e+r[4]*i+r[7]*n,this.z=r[2]*e+r[5]*i+r[8]*n,this},applyMatrix4:function(t){var e=this.x,i=this.y,n=this.z,r=t.elements;this.x=r[0]*e+r[4]*i+r[8]*n+r[12],this.y=r[1]*e+r[5]*i+r[9]*n+r[13],this.z=r[2]*e+r[6]*i+r[10]*n+r[14]
;var a=r[3]*e+r[7]*i+r[11]*n+r[15];return this.divideScalar(a)},applyQuaternion:function(t){var e=this.x,i=this.y,n=this.z,r=t.x,a=t.y,o=t.z,s=t.w,c=s*e+a*n-o*i,l=s*i+o*e-r*n,h=s*n+r*i-a*e,u=-r*e-a*i-o*n;return this.x=c*s+u*-r+l*-o-h*-a,this.y=l*s+u*-a+h*-r-c*-o,this.z=h*s+u*-o+c*-a-l*-r,this},project:function(){var t;return function(e){return void 0===t&&(t=new c),t.multiplyMatrices(e.projectionMatrix,t.getInverse(e.matrixWorld)),this.applyMatrix4(t)}}(),unproject:function(){var t;return function(e){return void 0===t&&(t=new c),t.multiplyMatrices(e.matrixWorld,t.getInverse(e.projectionMatrix)),this.applyMatrix4(t)}}(),transformDirection:function(t){var e=this.x,i=this.y,n=this.z,r=t.elements;return this.x=r[0]*e+r[4]*i+r[8]*n,this.y=r[1]*e+r[5]*i+r[9]*n,this.z=r[2]*e+r[6]*i+r[10]*n,this.normalize()},divide:function(t){return this.x/=t.x,this.y/=t.y,this.z/=t.z,this},divideScalar:function(t){return this.multiplyScalar(1/t)},min:function(t){return this.x=Math.min(this.x,t.x),this.y=Math.min(this.y,t.y),this.z=Math.min(this.z,t.z),this},max:function(t){return this.x=Math.max(this.x,t.x),this.y=Math.max(this.y,t.y),this.z=Math.max(this.z,t.z),this},clamp:function(t,e){return this.x=Math.max(t.x,Math.min(e.x,this.x)),this.y=Math.max(t.y,Math.min(e.y,this.y)),this.z=Math.max(t.z,Math.min(e.z,this.z)),this},clampScalar:function(){var t,e;return function(i,n){return void 0===t&&(t=new s,e=new s),t.set(i,i,i),e.set(n,n,n),this.clamp(t,e)}}(),clampLength:function(t,e){var i=this.length();return this.multiplyScalar(Math.max(t,Math.min(e,i))/i)},floor:function(){return this.x=Math.floor(this.x),this.y=Math.floor(this.y),this.z=Math.floor(this.z),this},ceil:function(){return this.x=Math.ceil(this.x),this.y=Math.ceil(this.y),this.z=Math.ceil(this.z),this},round:function(){return this.x=Math.round(this.x),this.y=Math.round(this.y),this.z=Math.round(this.z),this},roundToZero:function(){return this.x=this.x<0?Math.ceil(this.x):Math.floor(this.x),this.y=this.y<0?Math.ceil(this.y):Math.floor(this.y),this.z=this.z<0?Math.ceil(this.z):Math.floor(this.z),this},negate:function(){return this.x=-this.x,this.y=-this.y,this.z=-this.z,this},dot:function(t){return this.x*t.x+this.y*t.y+this.z*t.z},lengthSq:function(){return this.x*this.x+this.y*this.y+this.z*this.z},length:function(){return Math.sqrt(this.x*this.x+this.y*this.y+this.z*this.z)},lengthManhattan:function(){return Math.abs(this.x)+Math.abs(this.y)+Math.abs(this.z)},normalize:function(){return this.divideScalar(this.length())},setLength:function(t){return this.multiplyScalar(t/this.length())},lerp:function(t,e){return this.x+=(t.x-this.x)*e,this.y+=(t.y-this.y)*e,this.z+=(t.z-this.z)*e,this},lerpVectors:function(t,e,i){return this.subVectors(e,t).multiplyScalar(i).add(t)},cross:function(t,e){if(void 0!==e)return this.crossVectors(t,e);var i=this.x,n=this.y,r=this.z;return this.x=n*t.z-r*t.y,this.y=r*t.x-i*t.z,this.z=i*t.y-n*t.x,this},crossVectors:function(t,e){var i=t.x,n=t.y,r=t.z,a=e.x,o=e.y,s=e.z;return this.x=n*s-r*o,this.y=r*a-i*s,this.z=i*o-n*a,this},projectOnVector:function(t){var e=t.dot(this)/t.lengthSq();return this.copy(t).multiplyScalar(e)},projectOnPlane:function(){var t;return function(e){return void 0===t&&(t=new s),t.copy(this).projectOnVector(e),this.sub(t)}}(),reflect:function(){var t;return function(e){return void 0===t&&(t=new s),this.sub(t.copy(e).multiplyScalar(2*this.dot(e)))}}(),angleTo:function(t){var e=this.dot(t)/Math.sqrt(this.lengthSq()*t.lengthSq());return Math.acos(wr.clamp(e,-1,1))},distanceTo:function(t){return Math.sqrt(this.distanceToSquared(t))},distanceToSquared:function(t){var e=this.x-t.x,i=this.y-t.y,n=this.z-t.z;return e*e+i*i+n*n},distanceToManhattan:function(t){return Math.abs(this.x-t.x)+Math.abs(this.y-t.y)+Math.abs(this.z-t.z)},setFromSpherical:function(t){var e=Math.sin(t.phi)*t.radius;return this.x=e*Math.sin(t.theta),this.y=Math.cos(t.phi)*t.radius,this.z=e*Math.cos(t.theta),this},setFromCylindrical:function(t){return this.x=t.radius*Math.sin(t.theta),this.y=t.y,this.z=t.radius*Math.cos(t.theta),this},setFromMatrixPosition:function(t){return this.setFromMatrixColumn(t,3)},setFromMatrixScale:function(t){var e=this.setFromMatrixColumn(t,0).length(),i=this.setFromMatrixColumn(t,1).length(),n=this.setFromMatrixColumn(t,2).length();return this.x=e,this.y=i,this.z=n,this},setFromMatrixColumn:function(t,e){if("number"==typeof t){var i=t;t=e,e=i}return this.fromArray(t.elements,4*e)},equals:function(t){return t.x===this.x&&t.y===this.y&&t.z===this.z},fromArray:function(t,e){return void 0===e&&(e=0),this.x=t[e],this.y=t[e+1],this.z=t[e+2],this},toArray:function(t,e){return void 0===t&&(t=[]),void 0===e&&(e=0),t[e]=this.x,t[e+1]=this.y,t[e+2]=this.z,t},fromBufferAttribute:function(t,e,i){return this.x=t.getX(e),this.y=t.getY(e),this.z=t.getZ(e),this}},c.prototype={constructor:c,isMatrix4:!0,set:function(t,e,i,n,r,a,o,s,c,l,h,u,f,d,p,m){var g=this.elements;return g[0]=t,g[4]=e,g[8]=i,g[12]=n,g[1]=r,g[5]=a,g[9]=o,g[13]=s,g[2]=c,g[6]=l,g[10]=h,g[14]=u,g[3]=f,g[7]=d,g[11]=p,g[15]=m,this},identity:function(){return this.set(1,0,0,0,0,1,0,0,0,0,1,0,0,0,0,1),this},clone:function(){return(new c).fromArray(this.elements)},copy:function(t){return this.elements.set(t.elements),this},copyPosition:function(t){var e=this.elements,i=t.elements;return e[12]=i[12],e[13]=i[13],e[14]=i[14],this},extractBasis:function(t,e,i){return t.setFromMatrixColumn(this,0),e.setFromMatrixColumn(this,1),i.setFromMatrixColumn(this,2),this},makeBasis:function(t,e,i){return this.set(t.x,e.x,i.x,0,t.y,e.y,i.y,0,t.z,e.z,i.z,0,0,0,0,1),this},extractRotation:function(){var t;return function(e){void 0===t&&(t=new s);var i=this.elements,n=e.elements,r=1/t.setFromMatrixColumn(e,0).length(),a=1/t.setFromMatrixColumn(e,1).length(),o=1/t.setFromMatrixColumn(e,2).length();return i[0]=n[0]*r,i[1]=n[1]*r,i[2]=n[2]*r,i[4]=n[4]*a,i[5]=n[5]*a,i[6]=n[6]*a,i[8]=n[8]*o,i[9]=n[9]*o,i[10]=n[10]*o,this}}(),makeRotationFromEuler:function(t){t&&t.isEuler;var e=this.elements,i=t.x,n=t.y,r=t.z,a=Math.cos(i),o=Math.sin(i),s=Math.cos(n),c=Math.sin(n),l=Math.cos(r),h=Math.sin(r);if("XYZ"===t.order){var u=a*l,f=a*h,d=o*l,p=o*h;e[0]=s*l,e[4]=-s*h,e[8]=c,e[1]=f+d*c,e[5]=u-p*c,e[9]=-o*s,e[2]=p-u*c,e[6]=d+f*c,e[10]=a*s}else if("YXZ"===t.order){var m=s*l,g=s*h,v=c*l,x=c*h;e[0]=m+x*o,e[4]=v*o-g,e[8]=a*c,e[1]=a*h,e[5]=a*l,e[9]=-o,e[2]=g*o-v,e[6]=x+m*o,e[10]=a*s}else if("ZXY"===t.order){var m=s*l,g=s*h,v=c*l,x=c*h;e[0]=m-x*o,e[4]=-a*h,e[8]=v+g*o,e[1]=g+v*o,e[5]=a*l,e[9]=x-m*o,e[2]=-a*c,e[6]=o,e[10]=a*s}else if("ZYX"===t.order){var u=a*l,f=a*h,d=o*l,p=o*h;e[0]=s*l,e[4]=d*c-f,e[8]=u*c+p,e[1]=s*h,e[5]=p*c+u,e[9]=f*c-d,e[2]=-c,e[6]=o*s,e[10]=a*s}else if("YZX"===t.order){var y=a*s,_=a*c,M=o*s,b=o*c;e[0]=s*l,e[4]=b-y*h,e[8]=M*h+_,e[1]=h,e[5]=a*l,e[9]=-o*l,e[2]=-c*l,e[6]=_*h+M,e[10]=y-b*h}else if("XZY"===t.order){var y=a*s,_=a*c,M=o*s,b=o*c;e[0]=s*l,e[4]=-h,e[8]=c*l,e[1]=y*h+b,e[5]=a*l,e[9]=_*h-M,e[2]=M*h-_,e[6]=o*l,e[10]=b*h+y}return e[3]=0,e[7]=0,e[11]=0,e[12]=0,e[13]=0,e[14]=0,e[15]=1,this},makeRotationFromQuaternion:function(t){var e=this.elements,i=t.x,n=t.y,r=t.z,a=t.w,o=i+i,s=n+n,c=r+r,l=i*o,h=i*s,u=i*c,f=n*s,d=n*c,p=r*c,m=a*o,g=a*s,v=a*c;return e[0]=1-(f+p),e[4]=h-v,e[8]=u+g,e[1]=h+v,e[5]=1-(l+p),e[9]=d-m,e[2]=u-g,e[6]=d+m,e[10]=1-(l+f),e[3]=0,e[7]=0,e[11]=0,e[12]=0,e[13]=0,e[14]=0,e[15]=1,this},lookAt:function(){var t,e,i;return function(n,r,a){void 0===t&&(t=new s,e=new s,i=new s);var o=this.elements;return i.subVectors(n,r).normalize(),0===i.lengthSq()&&(i.z=1),t.crossVectors(a,i).normalize(),0===t.lengthSq()&&(i.z+=1e-4,t.crossVectors(a,i).normalize()),e.crossVectors(i,t),o[0]=t.x,o[4]=e.x,o[8]=i.x,o[1]=t.y,o[5]=e.y,o[9]=i.y,o[2]=t.z,o[6]=e.z,o[10]=i.z,this}}(),multiply:function(t,e){return void 0!==e?this.multiplyMatrices(t,e):this.multiplyMatrices(this,t)},premultiply:function(t){return this.multiplyMatrices(t,this)},multiplyMatrices:function(t,e){var i=t.elements,n=e.elements,r=this.elements,a=i[0],o=i[4],s=i[8],c=i[12],l=i[1],h=i[5],u=i[9],f=i[13],d=i[2],p=i[6],m=i[10],g=i[14],v=i[3],x=i[7],y=i[11],_=i[15],M=n[0],b=n[4],w=n[8],S=n[12],E=n[1],T=n[5],L=n[9],A=n[13],P=n[2],C=n[6],R=n[10],N=n[14],D=n[3],U=n[7],I=n[11],O=n[15];return r[0]=a*M+o*E+s*P+c*D,r[4]=a*b+o*T+s*C+c*U,r[8]=a*w+o*L+s*R+c*I,r[12]=a*S+o*A+s*N+c*O,r[1]=l*M+h*E+u*P+f*D,r[5]=l*b+h*T+u*C+f*U,r[9]=l*w+h*L+u*R+f*I,r[13]=l*S+h*A+u*N+f*O,r[2]=d*M+p*E+m*P+g*D,r[6]=d*b+p*T+m*C+g*U,r[10]=d*w+p*L+m*R+g*I,r[14]=d*S+p*A+m*N+g*O,r[3]=v*M+x*E+y*P+_*D,r[7]=v*b+x*T+y*C+_*U,r[11]=v*w+x*L+y*R+_*I,r[15]=v*S+x*A+y*N+_*O,this},multiplyToArray:function(t,e,i){var n=this.elements;return this.multiplyMatrices(t,e),i[0]=n[0],i[1]=n[1],i[2]=n[2],i[3]=n[3],i[4]=n[4],i[5]=n[5],i[6]=n[6],i[7]=n[7],i[8]=n[8],i[9]=n[9],i[10]=n[10],i[11]=n[11],i[12]=n[12],i[13]=n[13],i[14]=n[14],i[15]=n[15],this},multiplyScalar:function(t){var e=this.elements;return e[0]*=t,e[4]*=t,e[8]*=t,e[12]*=t,e[1]*=t,e[5]*=t,e[9]*=t,e[13]*=t,e[2]*=t,e[6]*=t,e[10]*=t,e[14]*=t,e[3]*=t,e[7]*=t,e[11]*=t,e[15]*=t,this},applyToBufferAttribute:function(){var t;return function(e){void 0===t&&(t=new s);for(var i=0,n=e.count;i<n;i++)t.x=e.getX(i),t.y=e.getY(i),t.z=e.getZ(i),t.applyMatrix4(this),e.setXYZ(i,t.x,t.y,t.z);return e}}(),determinant:function(){var t=this.elements,e=t[0],i=t[4],n=t[8],r=t[12],a=t[1],o=t[5],s=t[9],c=t[13],l=t[2],h=t[6],u=t[10],f=t[14];return t[3]*(+r*s*h-n*c*h-r*o*u+i*c*u+n*o*f-i*s*f)+t[7]*(+e*s*f-e*c*u+r*a*u-n*a*f+n*c*l-r*s*l)+t[11]*(+e*c*h-e*o*f-r*a*h+i*a*f+r*o*l-i*c*l)+t[15]*(-n*o*l-e*s*h+e*o*u+n*a*h-i*a*u+i*s*l)},transpose:function(){var t,e=this.elements;return t=e[1],e[1]=e[4],e[4]=t,t=e[2],e[2]=e[8],e[8]=t,t=e[6],e[6]=e[9],e[9]=t,t=e[3],e[3]=e[12],e[12]=t,t=e[7],e[7]=e[13],e[13]=t,t=e[11],e[11]=e[14],e[14]=t,this},setPosition:function(t){var e=this.elements;return e[12]=t.x,e[13]=t.y,e[14]=t.z,this},getInverse:function(t,e){var i=this.elements,n=t.elements,r=n[0],a=n[1],o=n[2],s=n[3],c=n[4],l=n[5],h=n[6],u=n[7],f=n[8],d=n[9],p=n[10],m=n[11],g=n[12],v=n[13],x=n[14],y=n[15],_=d*x*u-v*p*u+v*h*m-l*x*m-d*h*y+l*p*y,M=g*p*u-f*x*u-g*h*m+c*x*m+f*h*y-c*p*y,b=f*v*u-g*d*u+g*l*m-c*v*m-f*l*y+c*d*y,w=g*d*h-f*v*h-g*l*p+c*v*p+f*l*x-c*d*x,S=r*_+a*M+o*b+s*w;if(0===S){var E="THREE.Matrix4.getInverse(): can't invert matrix, determinant is 0";if(!0===e)throw new Error(E);return this.identity()}var T=1/S;return i[0]=_*T,i[1]=(v*p*s-d*x*s-v*o*m+a*x*m+d*o*y-a*p*y)*T,i[2]=(l*x*s-v*h*s+v*o*u-a*x*u-l*o*y+a*h*y)*T,i[3]=(d*h*s-l*p*s-d*o*u+a*p*u+l*o*m-a*h*m)*T,i[4]=M*T,i[5]=(f*x*s-g*p*s+g*o*m-r*x*m-f*o*y+r*p*y)*T,i[6]=(g*h*s-c*x*s-g*o*u+r*x*u+c*o*y-r*h*y)*T,i[7]=(c*p*s-f*h*s+f*o*u-r*p*u-c*o*m+r*h*m)*T,i[8]=b*T,i[9]=(g*d*s-f*v*s-g*a*m+r*v*m+f*a*y-r*d*y)*T,i[10]=(c*v*s-g*l*s+g*a*u-r*v*u-c*a*y+r*l*y)*T,i[11]=(f*l*s-c*d*s-f*a*u+r*d*u+c*a*m-r*l*m)*T,i[12]=w*T,i[13]=(f*v*o-g*d*o+g*a*p-r*v*p-f*a*x+r*d*x)*T,i[14]=(g*l*o-c*v*o-g*a*h+r*v*h+c*a*x-r*l*x)*T,i[15]=(c*d*o-f*l*o+f*a*h-r*d*h-c*a*p+r*l*p)*T,this},scale:function(t){var e=this.elements,i=t.x,n=t.y,r=t.z;return e[0]*=i,e[4]*=n,e[8]*=r,e[1]*=i,e[5]*=n,e[9]*=r,e[2]*=i,e[6]*=n,e[10]*=r,e[3]*=i,e[7]*=n,e[11]*=r,this},getMaxScaleOnAxis:function(){var t=this.elements,e=t[0]*t[0]+t[1]*t[1]+t[2]*t[2],i=t[4]*t[4]+t[5]*t[5]+t[6]*t[6],n=t[8]*t[8]+t[9]*t[9]+t[10]*t[10];return Math.sqrt(Math.max(e,i,n))},makeTranslation:function(t,e,i){return this.set(1,0,0,t,0,1,0,e,0,0,1,i,0,0,0,1),this},makeRotationX:function(t){var e=Math.cos(t),i=Math.sin(t);return this.set(1,0,0,0,0,e,-i,0,0,i,e,0,0,0,0,1),this},makeRotationY:function(t){var e=Math.cos(t),i=Math.sin(t);return this.set(e,0,i,0,0,1,0,0,-i,0,e,0,0,0,0,1),this},makeRotationZ:function(t){var e=Math.cos(t),i=Math.sin(t);return this.set(e,-i,0,0,i,e,0,0,0,0,1,0,0,0,0,1),this},makeRotationAxis:function(t,e){var i=Math.cos(e),n=Math.sin(e),r=1-i,a=t.x,o=t.y,s=t.z,c=r*a,l=r*o;return this.set(c*a+i,c*o-n*s,c*s+n*o,0,c*o+n*s,l*o+i,l*s-n*a,0,c*s-n*o,l*s+n*a,r*s*s+i,0,0,0,0,1),this},makeScale:function(t,e,i){return this.set(t,0,0,0,0,e,0,0,0,0,i,0,0,0,0,1),this},makeShear:function(t,e,i){return this.set(1,e,i,0,t,1,i,0,t,e,1,0,0,0,0,1),this},compose:function(t,e,i){return this.makeRotationFromQuaternion(e),this.scale(i),this.setPosition(t),this},decompose:function(){var t,e;return function(i,n,r){void 0===t&&(t=new s,e=new c);var a=this.elements,o=t.set(a[0],a[1],a[2]).length(),l=t.set(a[4],a[5],a[6]).length(),h=t.set(a[8],a[9],a[10]).length();this.determinant()<0&&(o=-o),i.x=a[12],i.y=a[13],i.z=a[14],e.elements.set(this.elements);var u=1/o,f=1/l,d=1/h;return e.elements[0]*=u,e.elements[1]*=u,e.elements[2]*=u,e.elements[4]*=f,e.elements[5]*=f,e.elements[6]*=f,e.elements[8]*=d,e.elements[9]*=d,e.elements[10]*=d,n.setFromRotationMatrix(e),r.x=o,r.y=l,r.z=h,this}}(),makePerspective:function(t,e,i,n,r,a){var o=this.elements,s=2*r/(e-t),c=2*r/(i-n),l=(e+t)/(e-t),h=(i+n)/(i-n),u=-(a+r)/(a-r),f=-2*a*r/(a-r);return o[0]=s,o[4]=0,o[8]=l,o[12]=0,o[1]=0,o[5]=c,o[9]=h,o[13]=0,o[2]=0,o[6]=0,o[10]=u,o[14]=f,o[3]=0,o[7]=0,o[11]=-1,o[15]=0,this},makeOrthographic:function(t,e,i,n,r,a){var o=this.elements,s=1/(e-t),c=1/(i-n),l=1/(a-r),h=(e+t)*s,u=(i+n)*c,f=(a+r)*l;return o[0]=2*s,o[4]=0,o[8]=0,o[12]=-h,o[1]=0,o[5]=2*c,o[9]=0,o[13]=-u,o[2]=0,o[6]=0,o[10]=-2*l,o[14]=-f,o[3]=0,o[7]=0,o[11]=0,o[15]=1,this},equals:function(t){for(var e=this.elements,i=t.elements,n=0;n<16;n++)if(e[n]!==i[n])return!1;return!0},fromArray:function(t,e){void 0===e&&(e=0);for(var i=0;i<16;i++)this.elements[i]=t[i+e];return this},toArray:function(t,e){void 0===t&&(t=[]),void 0===e&&(e=0);var i=this.elements;return t[e]=i[0],t[e+1]=i[1],t[e+2]=i[2],t[e+3]=i[3],t[e+4]=i[4],t[e+5]=i[5],t[e+6]=i[6],t[e+7]=i[7],t[e+8]=i[8],t[e+9]=i[9],t[e+10]=i[10],t[e+11]=i[11],t[e+12]=i[12],t[e+13]=i[13],t[e+14]=i[14],t[e+15]=i[15],t}},l.prototype=Object.create(n.prototype),l.prototype.constructor=l,l.prototype.isCubeTexture=!0,Object.defineProperty(l.prototype,"images",{get:function(){return this.image},set:function(t){this.image=t}});var Er=new n,Tr=new l,Lr=[],Ar=[];G.prototype.setValue=function(t,e){for(var i=this.seq,n=0,r=i.length;n!==r;++n){var a=i[n];a.setValue(t,e[a.id])}};var Pr=/([\w\d_]+)(\])?(\[|\.)?/g;H.prototype.setValue=function(t,e,i){var n=this.map[e];void 0!==n&&n.setValue(t,i,this.renderer)},H.prototype.set=function(t,e,i){var n=this.map[i];void 0!==n&&n.setValue(t,e[i],this.renderer)},H.prototype.setOptional=function(t,e,i){var n=e[i];void 0!==n&&this.setValue(t,i,n)},H.upload=function(t,e,i,n){for(var r=0,a=e.length;r!==a;++r){var o=e[r],s=i[o.id];!1!==s.needsUpdate&&o.setValue(t,s.value,n)}},H.seqWithValue=function(t,e){for(var i=[],n=0,r=t.length;n!==r;++n){var a=t[n];a.id in e&&i.push(a)}return i};var Cr={merge:function(t){for(var e={},i=0;i<t.length;i++){var n=this.clone(t[i]);for(var r in n)e[r]=n[r]}return e},clone:function(t){var e={};for(var i in t){e[i]={};for(var n in t[i]){var r=t[i][n];r&&(r.isColor||r.isMatrix3||r.isMatrix4||r.isVector2||r.isVector3||r.isVector4||r.isTexture)?e[i][n]=r.clone():Array.isArray(r)?e[i][n]=r.slice():e[i][n]=r}}return e}},Rr={alphamap_fragment:"#ifdef USE_ALPHAMAP\n\tdiffuseColor.a *= texture2D( alphaMap, vUv ).g;\n#endif\n",alphamap_pars_fragment:"#ifdef USE_ALPHAMAP\n\tuniform sampler2D alphaMap;\n#endif\n",alphatest_fragment:"#ifdef ALPHATEST\n\tif ( diffuseColor.a < ALPHATEST ) discard;\n#endif\n",aomap_fragment:"#ifdef USE_AOMAP\n\tfloat ambientOcclusion = ( texture2D( aoMap, vUv2 ).r - 1.0 ) * aoMapIntensity + 1.0;\n\treflectedLight.indirectDiffuse *= ambientOcclusion;\n\t#if defined( USE_ENVMAP ) && defined( PHYSICAL )\n\t\tfloat dotNV = saturate( dot( geometry.normal, geometry.viewDir ) );\n\t\treflectedLight.indirectSpecular *= computeSpecularOcclusion( dotNV, ambientOcclusion, material.specularRoughness );\n\t#endif\n#endif\n",aomap_pars_fragment:"#ifdef USE_AOMAP\n\tuniform sampler2D aoMap;\n\tuniform float aoMapIntensity;\n#endif",begin_vertex:"\nvec3 transformed = vec3( position );\n",beginnormal_vertex:"\nvec3 objectNormal = vec3( normal );\n",bsdfs:"float punctualLightIntensityToIrradianceFactor( const in float lightDistance, const in float cutoffDistance, const in float decayExponent ) {\n\t\tif( decayExponent > 0.0 ) {\n#if defined ( PHYSICALLY_CORRECT_LIGHTS )\n\t\t\tfloat distanceFalloff = 1.0 / max( pow( lightDistance, decayExponent ), 0.01 );\n\t\t\tfloat maxDistanceCutoffFactor = pow2( saturate( 1.0 - pow4( lightDistance / cutoffDistance ) ) );\n\t\t\treturn distanceFalloff * maxDistanceCutoffFactor;\n#else\n\t\t\treturn pow( saturate( -lightDistance / cutoffDistance + 1.0 ), decayExponent );\n#endif\n\t\t}\n\t\treturn 1.0;\n}\nvec3 BRDF_Diffuse_Lambert( const in vec3 diffuseColor ) {\n\treturn RECIPROCAL_PI * diffuseColor;\n}\nvec3 F_Schlick( const in vec3 specularColor, const in float dotLH ) {\n\tfloat fresnel = exp2( ( -5.55473 * dotLH - 6.98316 ) * dotLH );\n\treturn ( 1.0 - specularColor ) * fresnel + specularColor;\n}\nfloat G_GGX_Smith( const in float alpha, const in float dotNL, const in float dotNV ) {\n\tfloat a2 = pow2( alpha );\n\tfloat gl = dotNL + sqrt( a2 + ( 1.0 - a2 ) * pow2( dotNL ) );\n\tfloat gv = dotNV + sqrt( a2 + ( 1.0 - a2 ) * pow2( dotNV ) );\n\treturn 1.0 / ( gl * gv );\n}\nfloat G_GGX_SmithCorrelated( const in float alpha, const in float dotNL, const in float dotNV ) {\n\tfloat a2 = pow2( alpha );\n\tfloat gv = dotNL * sqrt( a2 + ( 1.0 - a2 ) * pow2( dotNV ) );\n\tfloat gl = dotNV * sqrt( a2 + ( 1.0 - a2 ) * pow2( dotNL ) );\n\treturn 0.5 / max( gv + gl, EPSILON );\n}\nfloat D_GGX( const in float alpha, const in float dotNH ) {\n\tfloat a2 = pow2( alpha );\n\tfloat denom = pow2( dotNH ) * ( a2 - 1.0 ) + 1.0;\n\treturn RECIPROCAL_PI * a2 / pow2( denom );\n}\nvec3 BRDF_Specular_GGX( const in IncidentLight incidentLight, const in GeometricContext geometry, const in vec3 specularColor, const in float roughness ) {\n\tfloat alpha = pow2( roughness );\n\tvec3 halfDir = normalize( incidentLight.direction + geometry.viewDir );\n\tfloat dotNL = saturate( dot( geometry.normal, incidentLight.direction ) );\n\tfloat dotNV = saturate( dot( geometry.normal, geometry.viewDir ) );\n\tfloat dotNH = saturate( dot( geometry.normal, halfDir ) );\n\tfloat dotLH = saturate( dot( incidentLight.direction, halfDir ) );\n\tvec3 F = F_Schlick( specularColor, dotLH );\n\tfloat G = G_GGX_SmithCorrelated( alpha, dotNL, dotNV );\n\tfloat D = D_GGX( alpha, dotNH );\n\treturn F * ( G * D );\n}\nvec2 ltcTextureCoords( const in GeometricContext geometry, const in float roughness ) {\n\tconst float LUT_SIZE  = 64.0;\n\tconst float LUT_SCALE = (LUT_SIZE - 1.0)/LUT_SIZE;\n\tconst float LUT_BIAS  = 0.5/LUT_SIZE;\n\tvec3 N = geometry.normal;\n\tvec3 V = geometry.viewDir;\n\tvec3 P = geometry.position;\n\tfloat theta = acos( dot( N, V ) );\n\tvec2 uv = vec2(\n\t\tsqrt( saturate( roughness ) ),\n\t\tsaturate( theta / ( 0.5 * PI ) ) );\n\tuv = uv * LUT_SCALE + LUT_BIAS;\n\treturn uv;\n}\nvoid clipQuadToHorizon( inout vec3 L[5], out int n ) {\n\tint config = 0;\n\tif ( L[0].z > 0.0 ) config += 1;\n\tif ( L[1].z > 0.0 ) config += 2;\n\tif ( L[2].z > 0.0 ) config += 4;\n\tif ( L[3].z > 0.0 ) config += 8;\n\tn = 0;\n\tif ( config == 0 ) {\n\t} else if ( config == 1 ) {\n\t\tn = 3;\n\t\tL[1] = -L[1].z * L[0] + L[0].z * L[1];\n\t\tL[2] = -L[3].z * L[0] + L[0].z * L[3];\n\t} else if ( config == 2 ) {\n\t\tn = 3;\n\t\tL[0] = -L[0].z * L[1] + L[1].z * L[0];\n\t\tL[2] = -L[2].z * L[1] + L[1].z * L[2];\n\t} else if ( config == 3 ) {\n\t\tn = 4;\n\t\tL[2] = -L[2].z * L[1] + L[1].z * L[2];\n\t\tL[3] = -L[3].z * L[0] + L[0].z * L[3];\n\t} else if ( config == 4 ) {\n\t\tn = 3;\n\t\tL[0] = -L[3].z * L[2] + L[2].z * L[3];\n\t\tL[1] = -L[1].z * L[2] + L[2].z * L[1];\n\t} else if ( config == 5 ) {\n\t\tn = 0;\n\t} else if ( config == 6 ) {\n\t\tn = 4;\n\t\tL[0] = -L[0].z * L[1] + L[1].z * L[0];\n\t\tL[3] = -L[3].z * L[2] + L[2].z * L[3];\n\t} else if ( config == 7 ) {\n\t\tn = 5;\n\t\tL[4] = -L[3].z * L[0] + L[0].z * L[3];\n\t\tL[3] = -L[3].z * L[2] + L[2].z * L[3];\n\t} else if ( config == 8 ) {\n\t\tn = 3;\n\t\tL[0] = -L[0].z * L[3] + L[3].z * L[0];\n\t\tL[1] = -L[2].z * L[3] + L[3].z * L[2];\n\t\tL[2] =  L[3];\n\t} else if ( config == 9 ) {\n\t\tn = 4;\n\t\tL[1] = -L[1].z * L[0] + L[0].z * L[1];\n\t\tL[2] = -L[2].z * L[3] + L[3].z * L[2];\n\t} else if ( config == 10 ) {\n\t\tn = 0;\n\t} else if ( config == 11 ) {\n\t\tn = 5;\n\t\tL[4] = L[3];\n\t\tL[3] = -L[2].z * L[3] + L[3].z * L[2];\n\t\tL[2] = -L[2].z * L[1] + L[1].z * L[2];\n\t} else if ( config == 12 ) {\n\t\tn = 4;\n\t\tL[1] = -L[1].z * L[2] + L[2].z * L[1];\n\t\tL[0] = -L[0].z * L[3] + L[3].z * L[0];\n\t} else if ( config == 13 ) {\n\t\tn = 5;\n\t\tL[4] = L[3];\n\t\tL[3] = L[2];\n\t\tL[2] = -L[1].z * L[2] + L[2].z * L[1];\n\t\tL[1] = -L[1].z * L[0] + L[0].z * L[1];\n\t} else if ( config == 14 ) {\n\t\tn = 5;\n\t\tL[4] = -L[0].z * L[3] + L[3].z * L[0];\n\t\tL[0] = -L[0].z * L[1] + L[1].z * L[0];\n\t} else if ( config == 15 ) {\n\t\tn = 4;\n\t}\n\tif ( n == 3 )\n\t\tL[3] = L[0];\n\tif ( n == 4 )\n\t\tL[4] = L[0];\n}\nfloat integrateLtcBrdfOverRectEdge( vec3 v1, vec3 v2 ) {\n\tfloat cosTheta = dot( v1, v2 );\n\tfloat theta = acos( cosTheta );\n\tfloat res = cross( v1, v2 ).z * ( ( theta > 0.001 ) ? theta / sin( theta ) : 1.0 );\n\treturn res;\n}\nvoid initRectPoints( const in vec3 pos, const in vec3 halfWidth, const in vec3 halfHeight, out vec3 rectPoints[4] ) {\n\trectPoints[0] = pos - halfWidth - halfHeight;\n\trectPoints[1] = pos + halfWidth - halfHeight;\n\trectPoints[2] = pos + halfWidth + halfHeight;\n\trectPoints[3] = pos - halfWidth + halfHeight;\n}\nvec3 integrateLtcBrdfOverRect( const in GeometricContext geometry, const in mat3 brdfMat, const in vec3 rectPoints[4] ) {\n\tvec3 N = geometry.normal;\n\tvec3 V = geometry.viewDir;\n\tvec3 P = geometry.position;\n\tvec3 T1, T2;\n\tT1 = normalize(V - N * dot( V, N ));\n\tT2 = - cross( N, T1 );\n\tmat3 brdfWrtSurface = brdfMat * transpose( mat3( T1, T2, N ) );\n\tvec3 clippedRect[5];\n\tclippedRect[0] = brdfWrtSurface * ( rectPoints[0] - P );\n\tclippedRect[1] = brdfWrtSurface * ( rectPoints[1] - P );\n\tclippedRect[2] = brdfWrtSurface * ( rectPoints[2] - P );\n\tclippedRect[3] = brdfWrtSurface * ( rectPoints[3] - P );\n\tint n;\n\tclipQuadToHorizon(clippedRect, n);\n\tif ( n == 0 )\n\t\treturn vec3( 0, 0, 0 );\n\tclippedRect[0] = normalize( clippedRect[0] );\n\tclippedRect[1] = normalize( clippedRect[1] );\n\tclippedRect[2] = normalize( clippedRect[2] );\n\tclippedRect[3] = normalize( clippedRect[3] );\n\tclippedRect[4] = normalize( clippedRect[4] );\n\tfloat sum = 0.0;\n\tsum += integrateLtcBrdfOverRectEdge( clippedRect[0], clippedRect[1] );\n\tsum += integrateLtcBrdfOverRectEdge( clippedRect[1], clippedRect[2] );\n\tsum += integrateLtcBrdfOverRectEdge( clippedRect[2], clippedRect[3] );\n\tif (n >= 4)\n\t\tsum += integrateLtcBrdfOverRectEdge( clippedRect[3], clippedRect[4] );\n\tif (n == 5)\n\t\tsum += integrateLtcBrdfOverRectEdge( clippedRect[4], clippedRect[0] );\n\tsum = max( 0.0, sum );\n\tvec3 Lo_i = vec3( sum, sum, sum );\n\treturn Lo_i;\n}\nvec3 Rect_Area_Light_Specular_Reflectance(\n\t\tconst in GeometricContext geometry,\n\t\tconst in vec3 lightPos, const in vec3 lightHalfWidth, const in vec3 lightHalfHeight,\n\t\tconst in float roughness,\n\t\tconst in sampler2D ltcMat, const in sampler2D ltcMag ) {\n\tvec3 rectPoints[4];\n\tinitRectPoints( lightPos, lightHalfWidth, lightHalfHeight, rectPoints );\n\tvec2 uv = ltcTextureCoords( geometry, roughness );\n\tvec4 brdfLtcApproxParams, t;\n\tbrdfLtcApproxParams = texture2D( ltcMat, uv );\n\tt = texture2D( ltcMat, uv );\n\tfloat brdfLtcScalar = texture2D( ltcMag, uv ).a;\n\tmat3 brdfLtcApproxMat = mat3(\n\t\tvec3(   1,   0, t.y ),\n\t\tvec3(   0, t.z,   0 ),\n\t\tvec3( t.w,   0, t.x )\n\t);\n\tvec3 specularReflectance = integrateLtcBrdfOverRect( geometry, brdfLtcApproxMat, rectPoints );\n\tspecularReflectance *= brdfLtcScalar;\n\treturn specularReflectance;\n}\nvec3 Rect_Area_Light_Diffuse_Reflectance(\n\t\tconst in GeometricContext geometry,\n\t\tconst in vec3 lightPos, const in vec3 lightHalfWidth, const in vec3 lightHalfHeight ) {\n\tvec3 rectPoints[4];\n\tinitRectPoints( lightPos, lightHalfWidth, lightHalfHeight, rectPoints );\n\tmat3 diffuseBrdfMat = mat3(1);\n\tvec3 diffuseReflectance = integrateLtcBrdfOverRect( geometry, diffuseBrdfMat, rectPoints );\n\treturn diffuseReflectance;\n}\nvec3 BRDF_Specular_GGX_Environment( const in GeometricContext geometry, const in vec3 specularColor, const in float roughness ) {\n\tfloat dotNV = saturate( dot( geometry.normal, geometry.viewDir ) );\n\tconst vec4 c0 = vec4( - 1, - 0.0275, - 0.572, 0.022 );\n\tconst vec4 c1 = vec4( 1, 0.0425, 1.04, - 0.04 );\n\tvec4 r = roughness * c0 + c1;\n\tfloat a004 = min( r.x * r.x, exp2( - 9.28 * dotNV ) ) * r.x + r.y;\n\tvec2 AB = vec2( -1.04, 1.04 ) * a004 + r.zw;\n\treturn specularColor * AB.x + AB.y;\n}\nfloat G_BlinnPhong_Implicit( ) {\n\treturn 0.25;\n}\nfloat D_BlinnPhong( const in float shininess, const in float dotNH ) {\n\treturn RECIPROCAL_PI * ( shininess * 0.5 + 1.0 ) * pow( dotNH, shininess );\n}\nvec3 BRDF_Specular_BlinnPhong( const in IncidentLight incidentLight, const in GeometricContext geometry, const in vec3 specularColor, const in float shininess ) {\n\tvec3 halfDir = normalize( incidentLight.direction + geometry.viewDir );\n\tfloat dotNH = saturate( dot( geometry.normal, halfDir ) );\n\tfloat dotLH = saturate( dot( incidentLight.direction, halfDir ) );\n\tvec3 F = F_Schlick( specularColor, dotLH );\n\tfloat G = G_BlinnPhong_Implicit( );\n\tfloat D = D_BlinnPhong( shininess, dotNH );\n\treturn F * ( G * D );\n}\nfloat GGXRoughnessToBlinnExponent( const in float ggxRoughness ) {\n\treturn ( 2.0 / pow2( ggxRoughness + 0.0001 ) - 2.0 );\n}\nfloat BlinnExponentToGGXRoughness( const in float blinnExponent ) {\n\treturn sqrt( 2.0 / ( blinnExponent + 2.0 ) );\n}\n",bumpmap_pars_fragment:"#ifdef USE_BUMPMAP\n\tuniform sampler2D bumpMap;\n\tuniform float bumpScale;\n\tvec2 dHdxy_fwd() {\n\t\tvec2 dSTdx = dFdx( vUv );\n\t\tvec2 dSTdy = dFdy( vUv );\n\t\tfloat Hll = bumpScale * texture2D( bumpMap, vUv ).x;\n\t\tfloat dBx = bumpScale * texture2D( bumpMap, vUv + dSTdx ).x - Hll;\n\t\tfloat dBy = bumpScale * texture2D( bumpMap, vUv + dSTdy ).x - Hll;\n\t\treturn vec2( dBx, dBy );\n\t}\n\tvec3 perturbNormalArb( vec3 surf_pos, vec3 surf_norm, vec2 dHdxy ) {\n\t\tvec3 vSigmaX = dFdx( surf_pos );\n\t\tvec3 vSigmaY = dFdy( surf_pos );\n\t\tvec3 vN = surf_norm;\n\t\tvec3 R1 = cross( vSigmaY, vN );\n\t\tvec3 R2 = cross( vN, vSigmaX );\n\t\tfloat fDet = dot( vSigmaX, R1 );\n\t\tvec3 vGrad = sign( fDet ) * ( dHdxy.x * R1 + dHdxy.y * R2 );\n\t\treturn normalize( abs( fDet ) * surf_norm - vGrad );\n\t}\n#endif\n",clipping_planes_fragment:"#if NUM_CLIPPING_PLANES > 0\n\tfor ( int i = 0; i < UNION_CLIPPING_PLANES; ++ i ) {\n\t\tvec4 plane = clippingPlanes[ i ];\n\t\tif ( dot( vViewPosition, plane.xyz ) > plane.w ) discard;\n\t}\n\t\t\n\t#if UNION_CLIPPING_PLANES < NUM_CLIPPING_PLANES\n\t\tbool clipped = true;\n\t\tfor ( int i = UNION_CLIPPING_PLANES; i < NUM_CLIPPING_PLANES; ++ i ) {\n\t\t\tvec4 plane = clippingPlanes[ i ];\n\t\t\tclipped = ( dot( vViewPosition, plane.xyz ) > plane.w ) && clipped;\n\t\t}\n\t\tif ( clipped ) discard;\n\t\n\t#endif\n#endif\n",clipping_planes_pars_fragment:"#if NUM_CLIPPING_PLANES > 0\n\t#if ! defined( PHYSICAL ) && ! defined( PHONG )\n\t\tvarying vec3 vViewPosition;\n\t#endif\n\tuniform vec4 clippingPlanes[ NUM_CLIPPING_PLANES ];\n#endif\n",clipping_planes_pars_vertex:"#if NUM_CLIPPING_PLANES > 0 && ! defined( PHYSICAL ) && ! defined( PHONG )\n\tvarying vec3 vViewPosition;\n#endif\n",clipping_planes_vertex:"#if NUM_CLIPPING_PLANES > 0 && ! defined( PHYSICAL ) && ! defined( PHONG )\n\tvViewPosition = - mvPosition.xyz;\n#endif\n",color_fragment:"#ifdef USE_COLOR\n\tdiffuseColor.rgb *= vColor;\n#endif",color_pars_fragment:"#ifdef USE_COLOR\n\tvarying vec3 vColor;\n#endif\n",color_pars_vertex:"#ifdef USE_COLOR\n\tvarying vec3 vColor;\n#endif",color_vertex:"#ifdef USE_COLOR\n\tvColor.xyz = color.xyz;\n#endif",common:"#define PI 3.14159265359\n#define PI2 6.28318530718\n#define PI_HALF 1.5707963267949\n#define RECIPROCAL_PI 0.31830988618\n#define RECIPROCAL_PI2 0.15915494\n#define LOG2 1.442695\n#define EPSILON 1e-6\n#define saturate(a) clamp( a, 0.0, 1.0 )\n#define whiteCompliment(a) ( 1.0 - saturate( a ) )\nfloat pow2( const in float x ) { return x*x; }\nfloat pow3( const in float x ) { return x*x*x; }\nfloat pow4( const in float x ) { float x2 = x*x; return x2*x2; }\nfloat average( const in vec3 color ) { return dot( color, vec3( 0.3333 ) ); }\nhighp float rand( const in vec2 uv ) {\n\tconst highp float a = 12.9898, b = 78.233, c = 43758.5453;\n\thighp float dt = dot( uv.xy, vec2( a,b ) ), sn = mod( dt, PI );\n\treturn fract(sin(sn) * c);\n}\nstruct IncidentLight {\n\tvec3 color;\n\tvec3 direction;\n\tbool visible;\n};\nstruct ReflectedLight {\n\tvec3 directDiffuse;\n\tvec3 directSpecular;\n\tvec3 indirectDiffuse;\n\tvec3 indirectSpecular;\n};\nstruct GeometricContext {\n\tvec3 position;\n\tvec3 normal;\n\tvec3 viewDir;\n};\nvec3 transformDirection( in vec3 dir, in mat4 matrix ) {\n\treturn normalize( ( matrix * vec4( dir, 0.0 ) ).xyz );\n}\nvec3 inverseTransformDirection( in vec3 dir, in mat4 matrix ) {\n\treturn normalize( ( vec4( dir, 0.0 ) * matrix ).xyz );\n}\nvec3 projectOnPlane(in vec3 point, in vec3 pointOnPlane, in vec3 planeNormal ) {\n\tfloat distance = dot( planeNormal, point - pointOnPlane );\n\treturn - distance * planeNormal + point;\n}\nfloat sideOfPlane( in vec3 point, in vec3 pointOnPlane, in vec3 planeNormal ) {\n\treturn sign( dot( point - pointOnPlane, planeNormal ) );\n}\nvec3 linePlaneIntersect( in vec3 pointOnLine, in vec3 lineDirection, in vec3 pointOnPlane, in vec3 planeNormal ) {\n\treturn lineDirection * ( dot( planeNormal, pointOnPlane - pointOnLine ) / dot( planeNormal, lineDirection ) ) + pointOnLine;\n}\nmat3 transpose( const in mat3 v ) {\n\tmat3 tmp;\n\ttmp[0] = vec3(v[0].x, v[1].x, v[2].x);\n\ttmp[1] = vec3(v[0].y, v[1].y, v[2].y);\n\ttmp[2] = vec3(v[0].z, v[1].z, v[2].z);\n\treturn tmp;\n}\n",
cube_uv_reflection_fragment:"#ifdef ENVMAP_TYPE_CUBE_UV\n#define cubeUV_textureSize (1024.0)\nint getFaceFromDirection(vec3 direction) {\n\tvec3 absDirection = abs(direction);\n\tint face = -1;\n\tif( absDirection.x > absDirection.z ) {\n\t\tif(absDirection.x > absDirection.y )\n\t\t\tface = direction.x > 0.0 ? 0 : 3;\n\t\telse\n\t\t\tface = direction.y > 0.0 ? 1 : 4;\n\t}\n\telse {\n\t\tif(absDirection.z > absDirection.y )\n\t\t\tface = direction.z > 0.0 ? 2 : 5;\n\t\telse\n\t\t\tface = direction.y > 0.0 ? 1 : 4;\n\t}\n\treturn face;\n}\n#define cubeUV_maxLods1  (log2(cubeUV_textureSize*0.25) - 1.0)\n#define cubeUV_rangeClamp (exp2((6.0 - 1.0) * 2.0))\nvec2 MipLevelInfo( vec3 vec, float roughnessLevel, float roughness ) {\n\tfloat scale = exp2(cubeUV_maxLods1 - roughnessLevel);\n\tfloat dxRoughness = dFdx(roughness);\n\tfloat dyRoughness = dFdy(roughness);\n\tvec3 dx = dFdx( vec * scale * dxRoughness );\n\tvec3 dy = dFdy( vec * scale * dyRoughness );\n\tfloat d = max( dot( dx, dx ), dot( dy, dy ) );\n\td = clamp(d, 1.0, cubeUV_rangeClamp);\n\tfloat mipLevel = 0.5 * log2(d);\n\treturn vec2(floor(mipLevel), fract(mipLevel));\n}\n#define cubeUV_maxLods2 (log2(cubeUV_textureSize*0.25) - 2.0)\n#define cubeUV_rcpTextureSize (1.0 / cubeUV_textureSize)\nvec2 getCubeUV(vec3 direction, float roughnessLevel, float mipLevel) {\n\tmipLevel = roughnessLevel > cubeUV_maxLods2 - 3.0 ? 0.0 : mipLevel;\n\tfloat a = 16.0 * cubeUV_rcpTextureSize;\n\tvec2 exp2_packed = exp2( vec2( roughnessLevel, mipLevel ) );\n\tvec2 rcp_exp2_packed = vec2( 1.0 ) / exp2_packed;\n\tfloat powScale = exp2_packed.x * exp2_packed.y;\n\tfloat scale = rcp_exp2_packed.x * rcp_exp2_packed.y * 0.25;\n\tfloat mipOffset = 0.75*(1.0 - rcp_exp2_packed.y) * rcp_exp2_packed.x;\n\tbool bRes = mipLevel == 0.0;\n\tscale =  bRes && (scale < a) ? a : scale;\n\tvec3 r;\n\tvec2 offset;\n\tint face = getFaceFromDirection(direction);\n\tfloat rcpPowScale = 1.0 / powScale;\n\tif( face == 0) {\n\t\tr = vec3(direction.x, -direction.z, direction.y);\n\t\toffset = vec2(0.0+mipOffset,0.75 * rcpPowScale);\n\t\toffset.y = bRes && (offset.y < 2.0*a) ? a : offset.y;\n\t}\n\telse if( face == 1) {\n\t\tr = vec3(direction.y, direction.x, direction.z);\n\t\toffset = vec2(scale+mipOffset, 0.75 * rcpPowScale);\n\t\toffset.y = bRes && (offset.y < 2.0*a) ? a : offset.y;\n\t}\n\telse if( face == 2) {\n\t\tr = vec3(direction.z, direction.x, direction.y);\n\t\toffset = vec2(2.0*scale+mipOffset, 0.75 * rcpPowScale);\n\t\toffset.y = bRes && (offset.y < 2.0*a) ? a : offset.y;\n\t}\n\telse if( face == 3) {\n\t\tr = vec3(direction.x, direction.z, direction.y);\n\t\toffset = vec2(0.0+mipOffset,0.5 * rcpPowScale);\n\t\toffset.y = bRes && (offset.y < 2.0*a) ? 0.0 : offset.y;\n\t}\n\telse if( face == 4) {\n\t\tr = vec3(direction.y, direction.x, -direction.z);\n\t\toffset = vec2(scale+mipOffset, 0.5 * rcpPowScale);\n\t\toffset.y = bRes && (offset.y < 2.0*a) ? 0.0 : offset.y;\n\t}\n\telse {\n\t\tr = vec3(direction.z, -direction.x, direction.y);\n\t\toffset = vec2(2.0*scale+mipOffset, 0.5 * rcpPowScale);\n\t\toffset.y = bRes && (offset.y < 2.0*a) ? 0.0 : offset.y;\n\t}\n\tr = normalize(r);\n\tfloat texelOffset = 0.5 * cubeUV_rcpTextureSize;\n\tvec2 s = ( r.yz / abs( r.x ) + vec2( 1.0 ) ) * 0.5;\n\tvec2 base = offset + vec2( texelOffset );\n\treturn base + s * ( scale - 2.0 * texelOffset );\n}\n#define cubeUV_maxLods3 (log2(cubeUV_textureSize*0.25) - 3.0)\nvec4 textureCubeUV(vec3 reflectedDirection, float roughness ) {\n\tfloat roughnessVal = roughness* cubeUV_maxLods3;\n\tfloat r1 = floor(roughnessVal);\n\tfloat r2 = r1 + 1.0;\n\tfloat t = fract(roughnessVal);\n\tvec2 mipInfo = MipLevelInfo(reflectedDirection, r1, roughness);\n\tfloat s = mipInfo.y;\n\tfloat level0 = mipInfo.x;\n\tfloat level1 = level0 + 1.0;\n\tlevel1 = level1 > 5.0 ? 5.0 : level1;\n\tlevel0 += min( floor( s + 0.5 ), 5.0 );\n\tvec2 uv_10 = getCubeUV(reflectedDirection, r1, level0);\n\tvec4 color10 = envMapTexelToLinear(texture2D(envMap, uv_10));\n\tvec2 uv_20 = getCubeUV(reflectedDirection, r2, level0);\n\tvec4 color20 = envMapTexelToLinear(texture2D(envMap, uv_20));\n\tvec4 result = mix(color10, color20, t);\n\treturn vec4(result.rgb, 1.0);\n}\n#endif\n",defaultnormal_vertex:"#ifdef FLIP_SIDED\n\tobjectNormal = -objectNormal;\n#endif\nvec3 transformedNormal = normalMatrix * objectNormal;\n",displacementmap_pars_vertex:"#ifdef USE_DISPLACEMENTMAP\n\tuniform sampler2D displacementMap;\n\tuniform float displacementScale;\n\tuniform float displacementBias;\n#endif\n",displacementmap_vertex:"#ifdef USE_DISPLACEMENTMAP\n\ttransformed += normal * ( texture2D( displacementMap, uv ).x * displacementScale + displacementBias );\n#endif\n",emissivemap_fragment:"#ifdef USE_EMISSIVEMAP\n\tvec4 emissiveColor = texture2D( emissiveMap, vUv );\n\temissiveColor.rgb = emissiveMapTexelToLinear( emissiveColor ).rgb;\n\ttotalEmissiveRadiance *= emissiveColor.rgb;\n#endif\n",emissivemap_pars_fragment:"#ifdef USE_EMISSIVEMAP\n\tuniform sampler2D emissiveMap;\n#endif\n",encodings_fragment:"  gl_FragColor = linearToOutputTexel( gl_FragColor );\n",encodings_pars_fragment:"\nvec4 LinearToLinear( in vec4 value ) {\n\treturn value;\n}\nvec4 GammaToLinear( in vec4 value, in float gammaFactor ) {\n\treturn vec4( pow( value.xyz, vec3( gammaFactor ) ), value.w );\n}\nvec4 LinearToGamma( in vec4 value, in float gammaFactor ) {\n\treturn vec4( pow( value.xyz, vec3( 1.0 / gammaFactor ) ), value.w );\n}\nvec4 sRGBToLinear( in vec4 value ) {\n\treturn vec4( mix( pow( value.rgb * 0.9478672986 + vec3( 0.0521327014 ), vec3( 2.4 ) ), value.rgb * 0.0773993808, vec3( lessThanEqual( value.rgb, vec3( 0.04045 ) ) ) ), value.w );\n}\nvec4 LinearTosRGB( in vec4 value ) {\n\treturn vec4( mix( pow( value.rgb, vec3( 0.41666 ) ) * 1.055 - vec3( 0.055 ), value.rgb * 12.92, vec3( lessThanEqual( value.rgb, vec3( 0.0031308 ) ) ) ), value.w );\n}\nvec4 RGBEToLinear( in vec4 value ) {\n\treturn vec4( value.rgb * exp2( value.a * 255.0 - 128.0 ), 1.0 );\n}\nvec4 LinearToRGBE( in vec4 value ) {\n\tfloat maxComponent = max( max( value.r, value.g ), value.b );\n\tfloat fExp = clamp( ceil( log2( maxComponent ) ), -128.0, 127.0 );\n\treturn vec4( value.rgb / exp2( fExp ), ( fExp + 128.0 ) / 255.0 );\n}\nvec4 RGBMToLinear( in vec4 value, in float maxRange ) {\n\treturn vec4( value.xyz * value.w * maxRange, 1.0 );\n}\nvec4 LinearToRGBM( in vec4 value, in float maxRange ) {\n\tfloat maxRGB = max( value.x, max( value.g, value.b ) );\n\tfloat M      = clamp( maxRGB / maxRange, 0.0, 1.0 );\n\tM            = ceil( M * 255.0 ) / 255.0;\n\treturn vec4( value.rgb / ( M * maxRange ), M );\n}\nvec4 RGBDToLinear( in vec4 value, in float maxRange ) {\n\treturn vec4( value.rgb * ( ( maxRange / 255.0 ) / value.a ), 1.0 );\n}\nvec4 LinearToRGBD( in vec4 value, in float maxRange ) {\n\tfloat maxRGB = max( value.x, max( value.g, value.b ) );\n\tfloat D      = max( maxRange / maxRGB, 1.0 );\n\tD            = min( floor( D ) / 255.0, 1.0 );\n\treturn vec4( value.rgb * ( D * ( 255.0 / maxRange ) ), D );\n}\nconst mat3 cLogLuvM = mat3( 0.2209, 0.3390, 0.4184, 0.1138, 0.6780, 0.7319, 0.0102, 0.1130, 0.2969 );\nvec4 LinearToLogLuv( in vec4 value )  {\n\tvec3 Xp_Y_XYZp = value.rgb * cLogLuvM;\n\tXp_Y_XYZp = max(Xp_Y_XYZp, vec3(1e-6, 1e-6, 1e-6));\n\tvec4 vResult;\n\tvResult.xy = Xp_Y_XYZp.xy / Xp_Y_XYZp.z;\n\tfloat Le = 2.0 * log2(Xp_Y_XYZp.y) + 127.0;\n\tvResult.w = fract(Le);\n\tvResult.z = (Le - (floor(vResult.w*255.0))/255.0)/255.0;\n\treturn vResult;\n}\nconst mat3 cLogLuvInverseM = mat3( 6.0014, -2.7008, -1.7996, -1.3320, 3.1029, -5.7721, 0.3008, -1.0882, 5.6268 );\nvec4 LogLuvToLinear( in vec4 value ) {\n\tfloat Le = value.z * 255.0 + value.w;\n\tvec3 Xp_Y_XYZp;\n\tXp_Y_XYZp.y = exp2((Le - 127.0) / 2.0);\n\tXp_Y_XYZp.z = Xp_Y_XYZp.y / value.y;\n\tXp_Y_XYZp.x = value.x * Xp_Y_XYZp.z;\n\tvec3 vRGB = Xp_Y_XYZp.rgb * cLogLuvInverseM;\n\treturn vec4( max(vRGB, 0.0), 1.0 );\n}\n",envmap_fragment:"#ifdef USE_ENVMAP\n\t#if defined( USE_BUMPMAP ) || defined( USE_NORMALMAP ) || defined( PHONG )\n\t\tvec3 cameraToVertex = normalize( vWorldPosition - cameraPosition );\n\t\tvec3 worldNormal = inverseTransformDirection( normal, viewMatrix );\n\t\t#ifdef ENVMAP_MODE_REFLECTION\n\t\t\tvec3 reflectVec = reflect( cameraToVertex, worldNormal );\n\t\t#else\n\t\t\tvec3 reflectVec = refract( cameraToVertex, worldNormal, refractionRatio );\n\t\t#endif\n\t#else\n\t\tvec3 reflectVec = vReflect;\n\t#endif\n\t#ifdef ENVMAP_TYPE_CUBE\n\t\tvec4 envColor = textureCube( envMap, flipNormal * vec3( flipEnvMap * reflectVec.x, reflectVec.yz ) );\n\t#elif defined( ENVMAP_TYPE_EQUIREC )\n\t\tvec2 sampleUV;\n\t\tsampleUV.y = saturate( flipNormal * reflectVec.y * 0.5 + 0.5 );\n\t\tsampleUV.x = atan( flipNormal * reflectVec.z, flipNormal * reflectVec.x ) * RECIPROCAL_PI2 + 0.5;\n\t\tvec4 envColor = texture2D( envMap, sampleUV );\n\t#elif defined( ENVMAP_TYPE_SPHERE )\n\t\tvec3 reflectView = flipNormal * normalize( ( viewMatrix * vec4( reflectVec, 0.0 ) ).xyz + vec3( 0.0, 0.0, 1.0 ) );\n\t\tvec4 envColor = texture2D( envMap, reflectView.xy * 0.5 + 0.5 );\n\t#else\n\t\tvec4 envColor = vec4( 0.0 );\n\t#endif\n\tenvColor = envMapTexelToLinear( envColor );\n\t#ifdef ENVMAP_BLENDING_MULTIPLY\n\t\toutgoingLight = mix( outgoingLight, outgoingLight * envColor.xyz, specularStrength * reflectivity );\n\t#elif defined( ENVMAP_BLENDING_MIX )\n\t\toutgoingLight = mix( outgoingLight, envColor.xyz, specularStrength * reflectivity );\n\t#elif defined( ENVMAP_BLENDING_ADD )\n\t\toutgoingLight += envColor.xyz * specularStrength * reflectivity;\n\t#endif\n#endif\n",envmap_pars_fragment:"#if defined( USE_ENVMAP ) || defined( PHYSICAL )\n\tuniform float reflectivity;\n\tuniform float envMapIntensity;\n#endif\n#ifdef USE_ENVMAP\n\t#if ! defined( PHYSICAL ) && ( defined( USE_BUMPMAP ) || defined( USE_NORMALMAP ) || defined( PHONG ) )\n\t\tvarying vec3 vWorldPosition;\n\t#endif\n\t#ifdef ENVMAP_TYPE_CUBE\n\t\tuniform samplerCube envMap;\n\t#else\n\t\tuniform sampler2D envMap;\n\t#endif\n\tuniform float flipEnvMap;\n\t#if defined( USE_BUMPMAP ) || defined( USE_NORMALMAP ) || defined( PHONG ) || defined( PHYSICAL )\n\t\tuniform float refractionRatio;\n\t#else\n\t\tvarying vec3 vReflect;\n\t#endif\n#endif\n",envmap_pars_vertex:"#ifdef USE_ENVMAP\n\t#if defined( USE_BUMPMAP ) || defined( USE_NORMALMAP ) || defined( PHONG )\n\t\tvarying vec3 vWorldPosition;\n\t#else\n\t\tvarying vec3 vReflect;\n\t\tuniform float refractionRatio;\n\t#endif\n#endif\n",envmap_vertex:"#ifdef USE_ENVMAP\n\t#if defined( USE_BUMPMAP ) || defined( USE_NORMALMAP ) || defined( PHONG )\n\t\tvWorldPosition = worldPosition.xyz;\n\t#else\n\t\tvec3 cameraToVertex = normalize( worldPosition.xyz - cameraPosition );\n\t\tvec3 worldNormal = inverseTransformDirection( transformedNormal, viewMatrix );\n\t\t#ifdef ENVMAP_MODE_REFLECTION\n\t\t\tvReflect = reflect( cameraToVertex, worldNormal );\n\t\t#else\n\t\t\tvReflect = refract( cameraToVertex, worldNormal, refractionRatio );\n\t\t#endif\n\t#endif\n#endif\n",fog_vertex:"\n#ifdef USE_FOG\nfogDepth = -mvPosition.z;\n#endif",fog_pars_vertex:"#ifdef USE_FOG\n  varying float fogDepth;\n#endif\n",fog_fragment:"#ifdef USE_FOG\n\t#ifdef FOG_EXP2\n\t\tfloat fogFactor = whiteCompliment( exp2( - fogDensity * fogDensity * fogDepth * fogDepth * LOG2 ) );\n\t#else\n\t\tfloat fogFactor = smoothstep( fogNear, fogFar, fogDepth );\n\t#endif\n\tgl_FragColor.rgb = mix( gl_FragColor.rgb, fogColor, fogFactor );\n#endif\n",fog_pars_fragment:"#ifdef USE_FOG\n\tuniform vec3 fogColor;\n\tvarying float fogDepth;\n\t#ifdef FOG_EXP2\n\t\tuniform float fogDensity;\n\t#else\n\t\tuniform float fogNear;\n\t\tuniform float fogFar;\n\t#endif\n#endif\n",gradientmap_pars_fragment:"#ifdef TOON\n\tuniform sampler2D gradientMap;\n\tvec3 getGradientIrradiance( vec3 normal, vec3 lightDirection ) {\n\t\tfloat dotNL = dot( normal, lightDirection );\n\t\tvec2 coord = vec2( dotNL * 0.5 + 0.5, 0.0 );\n\t\t#ifdef USE_GRADIENTMAP\n\t\t\treturn texture2D( gradientMap, coord ).rgb;\n\t\t#else\n\t\t\treturn ( coord.x < 0.7 ) ? vec3( 0.7 ) : vec3( 1.0 );\n\t\t#endif\n\t}\n#endif\n",lightmap_fragment:"#ifdef USE_LIGHTMAP\n\treflectedLight.indirectDiffuse += PI * texture2D( lightMap, vUv2 ).xyz * lightMapIntensity;\n#endif\n",lightmap_pars_fragment:"#ifdef USE_LIGHTMAP\n\tuniform sampler2D lightMap;\n\tuniform float lightMapIntensity;\n#endif",lights_lambert_vertex:"vec3 diffuse = vec3( 1.0 );\nGeometricContext geometry;\ngeometry.position = mvPosition.xyz;\ngeometry.normal = normalize( transformedNormal );\ngeometry.viewDir = normalize( -mvPosition.xyz );\nGeometricContext backGeometry;\nbackGeometry.position = geometry.position;\nbackGeometry.normal = -geometry.normal;\nbackGeometry.viewDir = geometry.viewDir;\nvLightFront = vec3( 0.0 );\n#ifdef DOUBLE_SIDED\n\tvLightBack = vec3( 0.0 );\n#endif\nIncidentLight directLight;\nfloat dotNL;\nvec3 directLightColor_Diffuse;\n#if NUM_POINT_LIGHTS > 0\n\tfor ( int i = 0; i < NUM_POINT_LIGHTS; i ++ ) {\n\t\tgetPointDirectLightIrradiance( pointLights[ i ], geometry, directLight );\n\t\tdotNL = dot( geometry.normal, directLight.direction );\n\t\tdirectLightColor_Diffuse = PI * directLight.color;\n\t\tvLightFront += saturate( dotNL ) * directLightColor_Diffuse;\n\t\t#ifdef DOUBLE_SIDED\n\t\t\tvLightBack += saturate( -dotNL ) * directLightColor_Diffuse;\n\t\t#endif\n\t}\n#endif\n#if NUM_SPOT_LIGHTS > 0\n\tfor ( int i = 0; i < NUM_SPOT_LIGHTS; i ++ ) {\n\t\tgetSpotDirectLightIrradiance( spotLights[ i ], geometry, directLight );\n\t\tdotNL = dot( geometry.normal, directLight.direction );\n\t\tdirectLightColor_Diffuse = PI * directLight.color;\n\t\tvLightFront += saturate( dotNL ) * directLightColor_Diffuse;\n\t\t#ifdef DOUBLE_SIDED\n\t\t\tvLightBack += saturate( -dotNL ) * directLightColor_Diffuse;\n\t\t#endif\n\t}\n#endif\n#if NUM_DIR_LIGHTS > 0\n\tfor ( int i = 0; i < NUM_DIR_LIGHTS; i ++ ) {\n\t\tgetDirectionalDirectLightIrradiance( directionalLights[ i ], geometry, directLight );\n\t\tdotNL = dot( geometry.normal, directLight.direction );\n\t\tdirectLightColor_Diffuse = PI * directLight.color;\n\t\tvLightFront += saturate( dotNL ) * directLightColor_Diffuse;\n\t\t#ifdef DOUBLE_SIDED\n\t\t\tvLightBack += saturate( -dotNL ) * directLightColor_Diffuse;\n\t\t#endif\n\t}\n#endif\n#if NUM_HEMI_LIGHTS > 0\n\tfor ( int i = 0; i < NUM_HEMI_LIGHTS; i ++ ) {\n\t\tvLightFront += getHemisphereLightIrradiance( hemisphereLights[ i ], geometry );\n\t\t#ifdef DOUBLE_SIDED\n\t\t\tvLightBack += getHemisphereLightIrradiance( hemisphereLights[ i ], backGeometry );\n\t\t#endif\n\t}\n#endif\n",lights_pars:"uniform vec3 ambientLightColor;\nvec3 getAmbientLightIrradiance( const in vec3 ambientLightColor ) {\n\tvec3 irradiance = ambientLightColor;\n\t#ifndef PHYSICALLY_CORRECT_LIGHTS\n\t\tirradiance *= PI;\n\t#endif\n\treturn irradiance;\n}\n#if NUM_DIR_LIGHTS > 0\n\tstruct DirectionalLight {\n\t\tvec3 direction;\n\t\tvec3 color;\n\t\tint shadow;\n\t\tfloat shadowBias;\n\t\tfloat shadowRadius;\n\t\tvec2 shadowMapSize;\n\t};\n\tuniform DirectionalLight directionalLights[ NUM_DIR_LIGHTS ];\n\tvoid getDirectionalDirectLightIrradiance( const in DirectionalLight directionalLight, const in GeometricContext geometry, out IncidentLight directLight ) {\n\t\tdirectLight.color = directionalLight.color;\n\t\tdirectLight.direction = directionalLight.direction;\n\t\tdirectLight.visible = true;\n\t}\n#endif\n#if NUM_POINT_LIGHTS > 0\n\tstruct PointLight {\n\t\tvec3 position;\n\t\tvec3 color;\n\t\tfloat distance;\n\t\tfloat decay;\n\t\tint shadow;\n\t\tfloat shadowBias;\n\t\tfloat shadowRadius;\n\t\tvec2 shadowMapSize;\n\t};\n\tuniform PointLight pointLights[ NUM_POINT_LIGHTS ];\n\tvoid getPointDirectLightIrradiance( const in PointLight pointLight, const in GeometricContext geometry, out IncidentLight directLight ) {\n\t\tvec3 lVector = pointLight.position - geometry.position;\n\t\tdirectLight.direction = normalize( lVector );\n\t\tfloat lightDistance = length( lVector );\n\t\tdirectLight.color = pointLight.color;\n\t\tdirectLight.color *= punctualLightIntensityToIrradianceFactor( lightDistance, pointLight.distance, pointLight.decay );\n\t\tdirectLight.visible = ( directLight.color != vec3( 0.0 ) );\n\t}\n#endif\n#if NUM_SPOT_LIGHTS > 0\n\tstruct SpotLight {\n\t\tvec3 position;\n\t\tvec3 direction;\n\t\tvec3 color;\n\t\tfloat distance;\n\t\tfloat decay;\n\t\tfloat coneCos;\n\t\tfloat penumbraCos;\n\t\tint shadow;\n\t\tfloat shadowBias;\n\t\tfloat shadowRadius;\n\t\tvec2 shadowMapSize;\n\t};\n\tuniform SpotLight spotLights[ NUM_SPOT_LIGHTS ];\n\tvoid getSpotDirectLightIrradiance( const in SpotLight spotLight, const in GeometricContext geometry, out IncidentLight directLight  ) {\n\t\tvec3 lVector = spotLight.position - geometry.position;\n\t\tdirectLight.direction = normalize( lVector );\n\t\tfloat lightDistance = length( lVector );\n\t\tfloat angleCos = dot( directLight.direction, spotLight.direction );\n\t\tif ( angleCos > spotLight.coneCos ) {\n\t\t\tfloat spotEffect = smoothstep( spotLight.coneCos, spotLight.penumbraCos, angleCos );\n\t\t\tdirectLight.color = spotLight.color;\n\t\t\tdirectLight.color *= spotEffect * punctualLightIntensityToIrradianceFactor( lightDistance, spotLight.distance, spotLight.decay );\n\t\t\tdirectLight.visible = true;\n\t\t} else {\n\t\t\tdirectLight.color = vec3( 0.0 );\n\t\t\tdirectLight.visible = false;\n\t\t}\n\t}\n#endif\n#if NUM_RECT_AREA_LIGHTS > 0\n\tstruct RectAreaLight {\n\t\tvec3 color;\n\t\tvec3 position;\n\t\tvec3 halfWidth;\n\t\tvec3 halfHeight;\n\t};\n\tuniform sampler2D ltcMat;\tuniform sampler2D ltcMag;\n\tuniform RectAreaLight rectAreaLights[ NUM_RECT_AREA_LIGHTS ];\n#endif\n#if NUM_HEMI_LIGHTS > 0\n\tstruct HemisphereLight {\n\t\tvec3 direction;\n\t\tvec3 skyColor;\n\t\tvec3 groundColor;\n\t};\n\tuniform HemisphereLight hemisphereLights[ NUM_HEMI_LIGHTS ];\n\tvec3 getHemisphereLightIrradiance( const in HemisphereLight hemiLight, const in GeometricContext geometry ) {\n\t\tfloat dotNL = dot( geometry.normal, hemiLight.direction );\n\t\tfloat hemiDiffuseWeight = 0.5 * dotNL + 0.5;\n\t\tvec3 irradiance = mix( hemiLight.groundColor, hemiLight.skyColor, hemiDiffuseWeight );\n\t\t#ifndef PHYSICALLY_CORRECT_LIGHTS\n\t\t\tirradiance *= PI;\n\t\t#endif\n\t\treturn irradiance;\n\t}\n#endif\n#if defined( USE_ENVMAP ) && defined( PHYSICAL )\n\tvec3 getLightProbeIndirectIrradiance( const in GeometricContext geometry, const in int maxMIPLevel ) {\n\t\tvec3 worldNormal = inverseTransformDirection( geometry.normal, viewMatrix );\n\t\t#ifdef ENVMAP_TYPE_CUBE\n\t\t\tvec3 queryVec = vec3( flipEnvMap * worldNormal.x, worldNormal.yz );\n\t\t\t#ifdef TEXTURE_LOD_EXT\n\t\t\t\tvec4 envMapColor = textureCubeLodEXT( envMap, queryVec, float( maxMIPLevel ) );\n\t\t\t#else\n\t\t\t\tvec4 envMapColor = textureCube( envMap, queryVec, float( maxMIPLevel ) );\n\t\t\t#endif\n\t\t\tenvMapColor.rgb = envMapTexelToLinear( envMapColor ).rgb;\n\t\t#elif defined( ENVMAP_TYPE_CUBE_UV )\n\t\t\tvec3 queryVec = vec3( flipEnvMap * worldNormal.x, worldNormal.yz );\n\t\t\tvec4 envMapColor = textureCubeUV( queryVec, 1.0 );\n\t\t#else\n\t\t\tvec4 envMapColor = vec4( 0.0 );\n\t\t#endif\n\t\treturn PI * envMapColor.rgb * envMapIntensity;\n\t}\n\tfloat getSpecularMIPLevel( const in float blinnShininessExponent, const in int maxMIPLevel ) {\n\t\tfloat maxMIPLevelScalar = float( maxMIPLevel );\n\t\tfloat desiredMIPLevel = maxMIPLevelScalar - 0.79248 - 0.5 * log2( pow2( blinnShininessExponent ) + 1.0 );\n\t\treturn clamp( desiredMIPLevel, 0.0, maxMIPLevelScalar );\n\t}\n\tvec3 getLightProbeIndirectRadiance( const in GeometricContext geometry, const in float blinnShininessExponent, const in int maxMIPLevel ) {\n\t\t#ifdef ENVMAP_MODE_REFLECTION\n\t\t\tvec3 reflectVec = reflect( -geometry.viewDir, geometry.normal );\n\t\t#else\n\t\t\tvec3 reflectVec = refract( -geometry.viewDir, geometry.normal, refractionRatio );\n\t\t#endif\n\t\treflectVec = inverseTransformDirection( reflectVec, viewMatrix );\n\t\tfloat specularMIPLevel = getSpecularMIPLevel( blinnShininessExponent, maxMIPLevel );\n\t\t#ifdef ENVMAP_TYPE_CUBE\n\t\t\tvec3 queryReflectVec = vec3( flipEnvMap * reflectVec.x, reflectVec.yz );\n\t\t\t#ifdef TEXTURE_LOD_EXT\n\t\t\t\tvec4 envMapColor = textureCubeLodEXT( envMap, queryReflectVec, specularMIPLevel );\n\t\t\t#else\n\t\t\t\tvec4 envMapColor = textureCube( envMap, queryReflectVec, specularMIPLevel );\n\t\t\t#endif\n\t\t\tenvMapColor.rgb = envMapTexelToLinear( envMapColor ).rgb;\n\t\t#elif defined( ENVMAP_TYPE_CUBE_UV )\n\t\t\tvec3 queryReflectVec = vec3( flipEnvMap * reflectVec.x, reflectVec.yz );\n\t\t\tvec4 envMapColor = textureCubeUV(queryReflectVec, BlinnExponentToGGXRoughness(blinnShininessExponent));\n\t\t#elif defined( ENVMAP_TYPE_EQUIREC )\n\t\t\tvec2 sampleUV;\n\t\t\tsampleUV.y = saturate( reflectVec.y * 0.5 + 0.5 );\n\t\t\tsampleUV.x = atan( reflectVec.z, reflectVec.x ) * RECIPROCAL_PI2 + 0.5;\n\t\t\t#ifdef TEXTURE_LOD_EXT\n\t\t\t\tvec4 envMapColor = texture2DLodEXT( envMap, sampleUV, specularMIPLevel );\n\t\t\t#else\n\t\t\t\tvec4 envMapColor = texture2D( envMap, sampleUV, specularMIPLevel );\n\t\t\t#endif\n\t\t\tenvMapColor.rgb = envMapTexelToLinear( envMapColor ).rgb;\n\t\t#elif defined( ENVMAP_TYPE_SPHERE )\n\t\t\tvec3 reflectView = normalize( ( viewMatrix * vec4( reflectVec, 0.0 ) ).xyz + vec3( 0.0,0.0,1.0 ) );\n\t\t\t#ifdef TEXTURE_LOD_EXT\n\t\t\t\tvec4 envMapColor = texture2DLodEXT( envMap, reflectView.xy * 0.5 + 0.5, specularMIPLevel );\n\t\t\t#else\n\t\t\t\tvec4 envMapColor = texture2D( envMap, reflectView.xy * 0.5 + 0.5, specularMIPLevel );\n\t\t\t#endif\n\t\t\tenvMapColor.rgb = envMapTexelToLinear( envMapColor ).rgb;\n\t\t#endif\n\t\treturn envMapColor.rgb * envMapIntensity;\n\t}\n#endif\n",lights_phong_fragment:"BlinnPhongMaterial material;\nmaterial.diffuseColor = diffuseColor.rgb;\nmaterial.specularColor = specular;\nmaterial.specularShininess = shininess;\nmaterial.specularStrength = specularStrength;\n",lights_phong_pars_fragment:"varying vec3 vViewPosition;\n#ifndef FLAT_SHADED\n\tvarying vec3 vNormal;\n#endif\nstruct BlinnPhongMaterial {\n\tvec3\tdiffuseColor;\n\tvec3\tspecularColor;\n\tfloat\tspecularShininess;\n\tfloat\tspecularStrength;\n};\n#if NUM_RECT_AREA_LIGHTS > 0\n\tvoid RE_Direct_RectArea_BlinnPhong( const in RectAreaLight rectAreaLight, const in GeometricContext geometry, const in BlinnPhongMaterial material, inout ReflectedLight reflectedLight ) {\n\t\tvec3 matDiffColor = material.diffuseColor;\n\t\tvec3 matSpecColor = material.specularColor;\n\t\tvec3 lightColor   = rectAreaLight.color;\n\t\tfloat roughness = BlinnExponentToGGXRoughness( material.specularShininess );\n\t\tvec3 spec = Rect_Area_Light_Specular_Reflectance(\n\t\t\t\tgeometry,\n\t\t\t\trectAreaLight.position, rectAreaLight.halfWidth, rectAreaLight.halfHeight,\n\t\t\t\troughness,\n\t\t\t\tltcMat, ltcMag );\n\t\tvec3 diff = Rect_Area_Light_Diffuse_Reflectance(\n\t\t\t\tgeometry,\n\t\t\t\trectAreaLight.position, rectAreaLight.halfWidth, rectAreaLight.halfHeight );\n\t\treflectedLight.directSpecular += lightColor * matSpecColor * spec / PI2;\n\t\treflectedLight.directDiffuse  += lightColor * matDiffColor * diff / PI2;\n\t}\n#endif\nvoid RE_Direct_BlinnPhong( const in IncidentLight directLight, const in GeometricContext geometry, const in BlinnPhongMaterial material, inout ReflectedLight reflectedLight ) {\n\t#ifdef TOON\n\t\tvec3 irradiance = getGradientIrradiance( geometry.normal, directLight.direction ) * directLight.color;\n\t#else\n\t\tfloat dotNL = saturate( dot( geometry.normal, directLight.direction ) );\n\t\tvec3 irradiance = dotNL * directLight.color;\n\t#endif\n\t#ifndef PHYSICALLY_CORRECT_LIGHTS\n\t\tirradiance *= PI;\n\t#endif\n\treflectedLight.directDiffuse += irradiance * BRDF_Diffuse_Lambert( material.diffuseColor );\n\treflectedLight.directSpecular += irradiance * BRDF_Specular_BlinnPhong( directLight, geometry, material.specularColor, material.specularShininess ) * material.specularStrength;\n}\nvoid RE_IndirectDiffuse_BlinnPhong( const in vec3 irradiance, const in GeometricContext geometry, const in BlinnPhongMaterial material, inout ReflectedLight reflectedLight ) {\n\treflectedLight.indirectDiffuse += irradiance * BRDF_Diffuse_Lambert( material.diffuseColor );\n}\n#define RE_Direct\t\t\t\tRE_Direct_BlinnPhong\n#define RE_Direct_RectArea\t\tRE_Direct_RectArea_BlinnPhong\n#define RE_IndirectDiffuse\t\tRE_IndirectDiffuse_BlinnPhong\n#define Material_LightProbeLOD( material )\t(0)\n",lights_physical_fragment:"PhysicalMaterial material;\nmaterial.diffuseColor = diffuseColor.rgb * ( 1.0 - metalnessFactor );\nmaterial.specularRoughness = clamp( roughnessFactor, 0.04, 1.0 );\n#ifdef STANDARD\n\tmaterial.specularColor = mix( vec3( DEFAULT_SPECULAR_COEFFICIENT ), diffuseColor.rgb, metalnessFactor );\n#else\n\tmaterial.specularColor = mix( vec3( MAXIMUM_SPECULAR_COEFFICIENT * pow2( reflectivity ) ), diffuseColor.rgb, metalnessFactor );\n\tmaterial.clearCoat = saturate( clearCoat );\tmaterial.clearCoatRoughness = clamp( clearCoatRoughness, 0.04, 1.0 );\n#endif\n",lights_physical_pars_fragment:"struct PhysicalMaterial {\n\tvec3\tdiffuseColor;\n\tfloat\tspecularRoughness;\n\tvec3\tspecularColor;\n\t#ifndef STANDARD\n\t\tfloat clearCoat;\n\t\tfloat clearCoatRoughness;\n\t#endif\n};\n#define MAXIMUM_SPECULAR_COEFFICIENT 0.16\n#define DEFAULT_SPECULAR_COEFFICIENT 0.04\nfloat clearCoatDHRApprox( const in float roughness, const in float dotNL ) {\n\treturn DEFAULT_SPECULAR_COEFFICIENT + ( 1.0 - DEFAULT_SPECULAR_COEFFICIENT ) * ( pow( 1.0 - dotNL, 5.0 ) * pow( 1.0 - roughness, 2.0 ) );\n}\n#if NUM_RECT_AREA_LIGHTS > 0\n\tvoid RE_Direct_RectArea_Physical( const in RectAreaLight rectAreaLight, const in GeometricContext geometry, const in PhysicalMaterial material, inout ReflectedLight reflectedLight ) {\n\t\tvec3 matDiffColor = material.diffuseColor;\n\t\tvec3 matSpecColor = material.specularColor;\n\t\tvec3 lightColor   = rectAreaLight.color;\n\t\tfloat roughness = material.specularRoughness;\n\t\tvec3 spec = Rect_Area_Light_Specular_Reflectance(\n\t\t\t\tgeometry,\n\t\t\t\trectAreaLight.position, rectAreaLight.halfWidth, rectAreaLight.halfHeight,\n\t\t\t\troughness,\n\t\t\t\tltcMat, ltcMag );\n\t\tvec3 diff = Rect_Area_Light_Diffuse_Reflectance(\n\t\t\t\tgeometry,\n\t\t\t\trectAreaLight.position, rectAreaLight.halfWidth, rectAreaLight.halfHeight );\n\t\treflectedLight.directSpecular += lightColor * matSpecColor * spec;\n\t\treflectedLight.directDiffuse  += lightColor * matDiffColor * diff;\n\t}\n#endif\nvoid RE_Direct_Physical( const in IncidentLight directLight, const in GeometricContext geometry, const in PhysicalMaterial material, inout ReflectedLight reflectedLight ) {\n\tfloat dotNL = saturate( dot( geometry.normal, directLight.direction ) );\n\tvec3 irradiance = dotNL * directLight.color;\n\t#ifndef PHYSICALLY_CORRECT_LIGHTS\n\t\tirradiance *= PI;\n\t#endif\n\t#ifndef STANDARD\n\t\tfloat clearCoatDHR = material.clearCoat * clearCoatDHRApprox( material.clearCoatRoughness, dotNL );\n\t#else\n\t\tfloat clearCoatDHR = 0.0;\n\t#endif\n\treflectedLight.directSpecular += ( 1.0 - clearCoatDHR ) * irradiance * BRDF_Specular_GGX( directLight, geometry, material.specularColor, material.specularRoughness );\n\treflectedLight.directDiffuse += ( 1.0 - clearCoatDHR ) * irradiance * BRDF_Diffuse_Lambert( material.diffuseColor );\n\t#ifndef STANDARD\n\t\treflectedLight.directSpecular += irradiance * material.clearCoat * BRDF_Specular_GGX( directLight, geometry, vec3( DEFAULT_SPECULAR_COEFFICIENT ), material.clearCoatRoughness );\n\t#endif\n}\nvoid RE_IndirectDiffuse_Physical( const in vec3 irradiance, const in GeometricContext geometry, const in PhysicalMaterial material, inout ReflectedLight reflectedLight ) {\n\treflectedLight.indirectDiffuse += irradiance * BRDF_Diffuse_Lambert( material.diffuseColor );\n}\nvoid RE_IndirectSpecular_Physical( const in vec3 radiance, const in vec3 clearCoatRadiance, const in GeometricContext geometry, const in PhysicalMaterial material, inout ReflectedLight reflectedLight ) {\n\t#ifndef STANDARD\n\t\tfloat dotNV = saturate( dot( geometry.normal, geometry.viewDir ) );\n\t\tfloat dotNL = dotNV;\n\t\tfloat clearCoatDHR = material.clearCoat * clearCoatDHRApprox( material.clearCoatRoughness, dotNL );\n\t#else\n\t\tfloat clearCoatDHR = 0.0;\n\t#endif\n\treflectedLight.indirectSpecular += ( 1.0 - clearCoatDHR ) * radiance * BRDF_Specular_GGX_Environment( geometry, material.specularColor, material.specularRoughness );\n\t#ifndef STANDARD\n\t\treflectedLight.indirectSpecular += clearCoatRadiance * material.clearCoat * BRDF_Specular_GGX_Environment( geometry, vec3( DEFAULT_SPECULAR_COEFFICIENT ), material.clearCoatRoughness );\n\t#endif\n}\n#define RE_Direct\t\t\t\tRE_Direct_Physical\n#define RE_Direct_RectArea\t\tRE_Direct_RectArea_Physical\n#define RE_IndirectDiffuse\t\tRE_IndirectDiffuse_Physical\n#define RE_IndirectSpecular\t\tRE_IndirectSpecular_Physical\n#define Material_BlinnShininessExponent( material )   GGXRoughnessToBlinnExponent( material.specularRoughness )\n#define Material_ClearCoat_BlinnShininessExponent( material )   GGXRoughnessToBlinnExponent( material.clearCoatRoughness )\nfloat computeSpecularOcclusion( const in float dotNV, const in float ambientOcclusion, const in float roughness ) {\n\treturn saturate( pow( dotNV + ambientOcclusion, exp2( - 16.0 * roughness - 1.0 ) ) - 1.0 + ambientOcclusion );\n}\n",
lights_template:"\nGeometricContext geometry;\ngeometry.position = - vViewPosition;\ngeometry.normal = normal;\ngeometry.viewDir = normalize( vViewPosition );\nIncidentLight directLight;\n#if ( NUM_POINT_LIGHTS > 0 ) && defined( RE_Direct )\n\tPointLight pointLight;\n\tfor ( int i = 0; i < NUM_POINT_LIGHTS; i ++ ) {\n\t\tpointLight = pointLights[ i ];\n\t\tgetPointDirectLightIrradiance( pointLight, geometry, directLight );\n\t\t#ifdef USE_SHADOWMAP\n\t\tdirectLight.color *= all( bvec2( pointLight.shadow, directLight.visible ) ) ? getPointShadow( pointShadowMap[ i ], pointLight.shadowMapSize, pointLight.shadowBias, pointLight.shadowRadius, vPointShadowCoord[ i ] ) : 1.0;\n\t\t#endif\n\t\tRE_Direct( directLight, geometry, material, reflectedLight );\n\t}\n#endif\n#if ( NUM_SPOT_LIGHTS > 0 ) && defined( RE_Direct )\n\tSpotLight spotLight;\n\tfor ( int i = 0; i < NUM_SPOT_LIGHTS; i ++ ) {\n\t\tspotLight = spotLights[ i ];\n\t\tgetSpotDirectLightIrradiance( spotLight, geometry, directLight );\n\t\t#ifdef USE_SHADOWMAP\n\t\tdirectLight.color *= all( bvec2( spotLight.shadow, directLight.visible ) ) ? getShadow( spotShadowMap[ i ], spotLight.shadowMapSize, spotLight.shadowBias, spotLight.shadowRadius, vSpotShadowCoord[ i ] ) : 1.0;\n\t\t#endif\n\t\tRE_Direct( directLight, geometry, material, reflectedLight );\n\t}\n#endif\n#if ( NUM_DIR_LIGHTS > 0 ) && defined( RE_Direct )\n\tDirectionalLight directionalLight;\n\tfor ( int i = 0; i < NUM_DIR_LIGHTS; i ++ ) {\n\t\tdirectionalLight = directionalLights[ i ];\n\t\tgetDirectionalDirectLightIrradiance( directionalLight, geometry, directLight );\n\t\t#ifdef USE_SHADOWMAP\n\t\tdirectLight.color *= all( bvec2( directionalLight.shadow, directLight.visible ) ) ? getShadow( directionalShadowMap[ i ], directionalLight.shadowMapSize, directionalLight.shadowBias, directionalLight.shadowRadius, vDirectionalShadowCoord[ i ] ) : 1.0;\n\t\t#endif\n\t\tRE_Direct( directLight, geometry, material, reflectedLight );\n\t}\n#endif\n#if ( NUM_RECT_AREA_LIGHTS > 0 ) && defined( RE_Direct_RectArea )\n\tRectAreaLight rectAreaLight;\n\tfor ( int i = 0; i < NUM_RECT_AREA_LIGHTS; i ++ ) {\n\t\trectAreaLight = rectAreaLights[ i ];\n\t\tRE_Direct_RectArea( rectAreaLight, geometry, material, reflectedLight );\n\t}\n#endif\n#if defined( RE_IndirectDiffuse )\n\tvec3 irradiance = getAmbientLightIrradiance( ambientLightColor );\n\t#ifdef USE_LIGHTMAP\n\t\tvec3 lightMapIrradiance = texture2D( lightMap, vUv2 ).xyz * lightMapIntensity;\n\t\t#ifndef PHYSICALLY_CORRECT_LIGHTS\n\t\t\tlightMapIrradiance *= PI;\n\t\t#endif\n\t\tirradiance += lightMapIrradiance;\n\t#endif\n\t#if ( NUM_HEMI_LIGHTS > 0 )\n\t\tfor ( int i = 0; i < NUM_HEMI_LIGHTS; i ++ ) {\n\t\t\tirradiance += getHemisphereLightIrradiance( hemisphereLights[ i ], geometry );\n\t\t}\n\t#endif\n\t#if defined( USE_ENVMAP ) && defined( PHYSICAL ) && defined( ENVMAP_TYPE_CUBE_UV )\n\t\tirradiance += getLightProbeIndirectIrradiance( geometry, 8 );\n\t#endif\n\tRE_IndirectDiffuse( irradiance, geometry, material, reflectedLight );\n#endif\n#if defined( USE_ENVMAP ) && defined( RE_IndirectSpecular )\n\tvec3 radiance = getLightProbeIndirectRadiance( geometry, Material_BlinnShininessExponent( material ), 8 );\n\t#ifndef STANDARD\n\t\tvec3 clearCoatRadiance = getLightProbeIndirectRadiance( geometry, Material_ClearCoat_BlinnShininessExponent( material ), 8 );\n\t#else\n\t\tvec3 clearCoatRadiance = vec3( 0.0 );\n\t#endif\n\tRE_IndirectSpecular( radiance, clearCoatRadiance, geometry, material, reflectedLight );\n#endif\n",logdepthbuf_fragment:"#if defined(USE_LOGDEPTHBUF) && defined(USE_LOGDEPTHBUF_EXT)\n\tgl_FragDepthEXT = log2(vFragDepth) * logDepthBufFC * 0.5;\n#endif",logdepthbuf_pars_fragment:"#ifdef USE_LOGDEPTHBUF\n\tuniform float logDepthBufFC;\n\t#ifdef USE_LOGDEPTHBUF_EXT\n\t\tvarying float vFragDepth;\n\t#endif\n#endif\n",logdepthbuf_pars_vertex:"#ifdef USE_LOGDEPTHBUF\n\t#ifdef USE_LOGDEPTHBUF_EXT\n\t\tvarying float vFragDepth;\n\t#endif\n\tuniform float logDepthBufFC;\n#endif",logdepthbuf_vertex:"#ifdef USE_LOGDEPTHBUF\n\tgl_Position.z = log2(max( EPSILON, gl_Position.w + 1.0 )) * logDepthBufFC;\n\t#ifdef USE_LOGDEPTHBUF_EXT\n\t\tvFragDepth = 1.0 + gl_Position.w;\n\t#else\n\t\tgl_Position.z = (gl_Position.z - 1.0) * gl_Position.w;\n\t#endif\n#endif\n",map_fragment:"#ifdef USE_MAP\n\tvec4 texelColor = texture2D( map, vUv );\n\ttexelColor = mapTexelToLinear( texelColor );\n\tdiffuseColor *= texelColor;\n#endif\n",map_pars_fragment:"#ifdef USE_MAP\n\tuniform sampler2D map;\n#endif\n",map_particle_fragment:"#ifdef USE_MAP\n\tvec4 mapTexel = texture2D( map, vec2( gl_PointCoord.x, 1.0 - gl_PointCoord.y ) * offsetRepeat.zw + offsetRepeat.xy );\n\tdiffuseColor *= mapTexelToLinear( mapTexel );\n#endif\n",map_particle_pars_fragment:"#ifdef USE_MAP\n\tuniform vec4 offsetRepeat;\n\tuniform sampler2D map;\n#endif\n",metalnessmap_fragment:"float metalnessFactor = metalness;\n#ifdef USE_METALNESSMAP\n\tvec4 texelMetalness = texture2D( metalnessMap, vUv );\n\tmetalnessFactor *= texelMetalness.r;\n#endif\n",metalnessmap_pars_fragment:"#ifdef USE_METALNESSMAP\n\tuniform sampler2D metalnessMap;\n#endif",morphnormal_vertex:"#ifdef USE_MORPHNORMALS\n\tobjectNormal += ( morphNormal0 - normal ) * morphTargetInfluences[ 0 ];\n\tobjectNormal += ( morphNormal1 - normal ) * morphTargetInfluences[ 1 ];\n\tobjectNormal += ( morphNormal2 - normal ) * morphTargetInfluences[ 2 ];\n\tobjectNormal += ( morphNormal3 - normal ) * morphTargetInfluences[ 3 ];\n#endif\n",morphtarget_pars_vertex:"#ifdef USE_MORPHTARGETS\n\t#ifndef USE_MORPHNORMALS\n\tuniform float morphTargetInfluences[ 8 ];\n\t#else\n\tuniform float morphTargetInfluences[ 4 ];\n\t#endif\n#endif",morphtarget_vertex:"#ifdef USE_MORPHTARGETS\n\ttransformed += ( morphTarget0 - position ) * morphTargetInfluences[ 0 ];\n\ttransformed += ( morphTarget1 - position ) * morphTargetInfluences[ 1 ];\n\ttransformed += ( morphTarget2 - position ) * morphTargetInfluences[ 2 ];\n\ttransformed += ( morphTarget3 - position ) * morphTargetInfluences[ 3 ];\n\t#ifndef USE_MORPHNORMALS\n\ttransformed += ( morphTarget4 - position ) * morphTargetInfluences[ 4 ];\n\ttransformed += ( morphTarget5 - position ) * morphTargetInfluences[ 5 ];\n\ttransformed += ( morphTarget6 - position ) * morphTargetInfluences[ 6 ];\n\ttransformed += ( morphTarget7 - position ) * morphTargetInfluences[ 7 ];\n\t#endif\n#endif\n",normal_flip:"#ifdef DOUBLE_SIDED\n\tfloat flipNormal = ( float( gl_FrontFacing ) * 2.0 - 1.0 );\n#else\n\tfloat flipNormal = 1.0;\n#endif\n",normal_fragment:"#ifdef FLAT_SHADED\n\tvec3 fdx = vec3( dFdx( vViewPosition.x ), dFdx( vViewPosition.y ), dFdx( vViewPosition.z ) );\n\tvec3 fdy = vec3( dFdy( vViewPosition.x ), dFdy( vViewPosition.y ), dFdy( vViewPosition.z ) );\n\tvec3 normal = normalize( cross( fdx, fdy ) );\n#else\n\tvec3 normal = normalize( vNormal ) * flipNormal;\n#endif\n#ifdef USE_NORMALMAP\n\tnormal = perturbNormal2Arb( -vViewPosition, normal );\n#elif defined( USE_BUMPMAP )\n\tnormal = perturbNormalArb( -vViewPosition, normal, dHdxy_fwd() );\n#endif\n",normalmap_pars_fragment:"#ifdef USE_NORMALMAP\n\tuniform sampler2D normalMap;\n\tuniform vec2 normalScale;\n\tvec3 perturbNormal2Arb( vec3 eye_pos, vec3 surf_norm ) {\n\t\tvec3 q0 = dFdx( eye_pos.xyz );\n\t\tvec3 q1 = dFdy( eye_pos.xyz );\n\t\tvec2 st0 = dFdx( vUv.st );\n\t\tvec2 st1 = dFdy( vUv.st );\n\t\tvec3 S = normalize( q0 * st1.t - q1 * st0.t );\n\t\tvec3 T = normalize( -q0 * st1.s + q1 * st0.s );\n\t\tvec3 N = normalize( surf_norm );\n\t\tvec3 mapN = texture2D( normalMap, vUv ).xyz * 2.0 - 1.0;\n\t\tmapN.xy = normalScale * mapN.xy;\n\t\tmat3 tsn = mat3( S, T, N );\n\t\treturn normalize( tsn * mapN );\n\t}\n#endif\n",packing:"vec3 packNormalToRGB( const in vec3 normal ) {\n\treturn normalize( normal ) * 0.5 + 0.5;\n}\nvec3 unpackRGBToNormal( const in vec3 rgb ) {\n\treturn 1.0 - 2.0 * rgb.xyz;\n}\nconst float PackUpscale = 256. / 255.;const float UnpackDownscale = 255. / 256.;\nconst vec3 PackFactors = vec3( 256. * 256. * 256., 256. * 256.,  256. );\nconst vec4 UnpackFactors = UnpackDownscale / vec4( PackFactors, 1. );\nconst float ShiftRight8 = 1. / 256.;\nvec4 packDepthToRGBA( const in float v ) {\n\tvec4 r = vec4( fract( v * PackFactors ), v );\n\tr.yzw -= r.xyz * ShiftRight8;\treturn r * PackUpscale;\n}\nfloat unpackRGBAToDepth( const in vec4 v ) {\n\treturn dot( v, UnpackFactors );\n}\nfloat viewZToOrthographicDepth( const in float viewZ, const in float near, const in float far ) {\n\treturn ( viewZ + near ) / ( near - far );\n}\nfloat orthographicDepthToViewZ( const in float linearClipZ, const in float near, const in float far ) {\n\treturn linearClipZ * ( near - far ) - near;\n}\nfloat viewZToPerspectiveDepth( const in float viewZ, const in float near, const in float far ) {\n\treturn (( near + viewZ ) * far ) / (( far - near ) * viewZ );\n}\nfloat perspectiveDepthToViewZ( const in float invClipZ, const in float near, const in float far ) {\n\treturn ( near * far ) / ( ( far - near ) * invClipZ - far );\n}\n",premultiplied_alpha_fragment:"#ifdef PREMULTIPLIED_ALPHA\n\tgl_FragColor.rgb *= gl_FragColor.a;\n#endif\n",project_vertex:"#ifdef USE_SKINNING\n\tvec4 mvPosition = modelViewMatrix * skinned;\n#else\n\tvec4 mvPosition = modelViewMatrix * vec4( transformed, 1.0 );\n#endif\ngl_Position = projectionMatrix * mvPosition;\n",roughnessmap_fragment:"float roughnessFactor = roughness;\n#ifdef USE_ROUGHNESSMAP\n\tvec4 texelRoughness = texture2D( roughnessMap, vUv );\n\troughnessFactor *= texelRoughness.r;\n#endif\n",roughnessmap_pars_fragment:"#ifdef USE_ROUGHNESSMAP\n\tuniform sampler2D roughnessMap;\n#endif",shadowmap_pars_fragment:"#ifdef USE_SHADOWMAP\n\t#if NUM_DIR_LIGHTS > 0\n\t\tuniform sampler2D directionalShadowMap[ NUM_DIR_LIGHTS ];\n\t\tvarying vec4 vDirectionalShadowCoord[ NUM_DIR_LIGHTS ];\n\t#endif\n\t#if NUM_SPOT_LIGHTS > 0\n\t\tuniform sampler2D spotShadowMap[ NUM_SPOT_LIGHTS ];\n\t\tvarying vec4 vSpotShadowCoord[ NUM_SPOT_LIGHTS ];\n\t#endif\n\t#if NUM_POINT_LIGHTS > 0\n\t\tuniform sampler2D pointShadowMap[ NUM_POINT_LIGHTS ];\n\t\tvarying vec4 vPointShadowCoord[ NUM_POINT_LIGHTS ];\n\t#endif\n\tfloat texture2DCompare( sampler2D depths, vec2 uv, float compare ) {\n\t\treturn step( compare, unpackRGBAToDepth( texture2D( depths, uv ) ) );\n\t}\n\tfloat texture2DShadowLerp( sampler2D depths, vec2 size, vec2 uv, float compare ) {\n\t\tconst vec2 offset = vec2( 0.0, 1.0 );\n\t\tvec2 texelSize = vec2( 1.0 ) / size;\n\t\tvec2 centroidUV = floor( uv * size + 0.5 ) / size;\n\t\tfloat lb = texture2DCompare( depths, centroidUV + texelSize * offset.xx, compare );\n\t\tfloat lt = texture2DCompare( depths, centroidUV + texelSize * offset.xy, compare );\n\t\tfloat rb = texture2DCompare( depths, centroidUV + texelSize * offset.yx, compare );\n\t\tfloat rt = texture2DCompare( depths, centroidUV + texelSize * offset.yy, compare );\n\t\tvec2 f = fract( uv * size + 0.5 );\n\t\tfloat a = mix( lb, lt, f.y );\n\t\tfloat b = mix( rb, rt, f.y );\n\t\tfloat c = mix( a, b, f.x );\n\t\treturn c;\n\t}\n\tfloat getShadow( sampler2D shadowMap, vec2 shadowMapSize, float shadowBias, float shadowRadius, vec4 shadowCoord ) {\n\t\tshadowCoord.xyz /= shadowCoord.w;\n\t\tshadowCoord.z += shadowBias;\n\t\tbvec4 inFrustumVec = bvec4 ( shadowCoord.x >= 0.0, shadowCoord.x <= 1.0, shadowCoord.y >= 0.0, shadowCoord.y <= 1.0 );\n\t\tbool inFrustum = all( inFrustumVec );\n\t\tbvec2 frustumTestVec = bvec2( inFrustum, shadowCoord.z <= 1.0 );\n\t\tbool frustumTest = all( frustumTestVec );\n\t\tif ( frustumTest ) {\n\t\t#if defined( SHADOWMAP_TYPE_PCF )\n\t\t\tvec2 texelSize = vec2( 1.0 ) / shadowMapSize;\n\t\t\tfloat dx0 = - texelSize.x * shadowRadius;\n\t\t\tfloat dy0 = - texelSize.y * shadowRadius;\n\t\t\tfloat dx1 = + texelSize.x * shadowRadius;\n\t\t\tfloat dy1 = + texelSize.y * shadowRadius;\n\t\t\treturn (\n\t\t\t\ttexture2DCompare( shadowMap, shadowCoord.xy + vec2( dx0, dy0 ), shadowCoord.z ) +\n\t\t\t\ttexture2DCompare( shadowMap, shadowCoord.xy + vec2( 0.0, dy0 ), shadowCoord.z ) +\n\t\t\t\ttexture2DCompare( shadowMap, shadowCoord.xy + vec2( dx1, dy0 ), shadowCoord.z ) +\n\t\t\t\ttexture2DCompare( shadowMap, shadowCoord.xy + vec2( dx0, 0.0 ), shadowCoord.z ) +\n\t\t\t\ttexture2DCompare( shadowMap, shadowCoord.xy, shadowCoord.z ) +\n\t\t\t\ttexture2DCompare( shadowMap, shadowCoord.xy + vec2( dx1, 0.0 ), shadowCoord.z ) +\n\t\t\t\ttexture2DCompare( shadowMap, shadowCoord.xy + vec2( dx0, dy1 ), shadowCoord.z ) +\n\t\t\t\ttexture2DCompare( shadowMap, shadowCoord.xy + vec2( 0.0, dy1 ), shadowCoord.z ) +\n\t\t\t\ttexture2DCompare( shadowMap, shadowCoord.xy + vec2( dx1, dy1 ), shadowCoord.z )\n\t\t\t) * ( 1.0 / 9.0 );\n\t\t#elif defined( SHADOWMAP_TYPE_PCF_SOFT )\n\t\t\tvec2 texelSize = vec2( 1.0 ) / shadowMapSize;\n\t\t\tfloat dx0 = - texelSize.x * shadowRadius;\n\t\t\tfloat dy0 = - texelSize.y * shadowRadius;\n\t\t\tfloat dx1 = + texelSize.x * shadowRadius;\n\t\t\tfloat dy1 = + texelSize.y * shadowRadius;\n\t\t\treturn (\n\t\t\t\ttexture2DShadowLerp( shadowMap, shadowMapSize, shadowCoord.xy + vec2( dx0, dy0 ), shadowCoord.z ) +\n\t\t\t\ttexture2DShadowLerp( shadowMap, shadowMapSize, shadowCoord.xy + vec2( 0.0, dy0 ), shadowCoord.z ) +\n\t\t\t\ttexture2DShadowLerp( shadowMap, shadowMapSize, shadowCoord.xy + vec2( dx1, dy0 ), shadowCoord.z ) +\n\t\t\t\ttexture2DShadowLerp( shadowMap, shadowMapSize, shadowCoord.xy + vec2( dx0, 0.0 ), shadowCoord.z ) +\n\t\t\t\ttexture2DShadowLerp( shadowMap, shadowMapSize, shadowCoord.xy, shadowCoord.z ) +\n\t\t\t\ttexture2DShadowLerp( shadowMap, shadowMapSize, shadowCoord.xy + vec2( dx1, 0.0 ), shadowCoord.z ) +\n\t\t\t\ttexture2DShadowLerp( shadowMap, shadowMapSize, shadowCoord.xy + vec2( dx0, dy1 ), shadowCoord.z ) +\n\t\t\t\ttexture2DShadowLerp( shadowMap, shadowMapSize, shadowCoord.xy + vec2( 0.0, dy1 ), shadowCoord.z ) +\n\t\t\t\ttexture2DShadowLerp( shadowMap, shadowMapSize, shadowCoord.xy + vec2( dx1, dy1 ), shadowCoord.z )\n\t\t\t) * ( 1.0 / 9.0 );\n\t\t#else\n\t\t\treturn texture2DCompare( shadowMap, shadowCoord.xy, shadowCoord.z );\n\t\t#endif\n\t\t}\n\t\treturn 1.0;\n\t}\n\tvec2 cubeToUV( vec3 v, float texelSizeY ) {\n\t\tvec3 absV = abs( v );\n\t\tfloat scaleToCube = 1.0 / max( absV.x, max( absV.y, absV.z ) );\n\t\tabsV *= scaleToCube;\n\t\tv *= scaleToCube * ( 1.0 - 2.0 * texelSizeY );\n\t\tvec2 planar = v.xy;\n\t\tfloat almostATexel = 1.5 * texelSizeY;\n\t\tfloat almostOne = 1.0 - almostATexel;\n\t\tif ( absV.z >= almostOne ) {\n\t\t\tif ( v.z > 0.0 )\n\t\t\t\tplanar.x = 4.0 - v.x;\n\t\t} else if ( absV.x >= almostOne ) {\n\t\t\tfloat signX = sign( v.x );\n\t\t\tplanar.x = v.z * signX + 2.0 * signX;\n\t\t} else if ( absV.y >= almostOne ) {\n\t\t\tfloat signY = sign( v.y );\n\t\t\tplanar.x = v.x + 2.0 * signY + 2.0;\n\t\t\tplanar.y = v.z * signY - 2.0;\n\t\t}\n\t\treturn vec2( 0.125, 0.25 ) * planar + vec2( 0.375, 0.75 );\n\t}\n\tfloat getPointShadow( sampler2D shadowMap, vec2 shadowMapSize, float shadowBias, float shadowRadius, vec4 shadowCoord ) {\n\t\tvec2 texelSize = vec2( 1.0 ) / ( shadowMapSize * vec2( 4.0, 2.0 ) );\n\t\tvec3 lightToPosition = shadowCoord.xyz;\n\t\tvec3 bd3D = normalize( lightToPosition );\n\t\tfloat dp = ( length( lightToPosition ) - shadowBias ) / 1000.0;\n\t\t#if defined( SHADOWMAP_TYPE_PCF ) || defined( SHADOWMAP_TYPE_PCF_SOFT )\n\t\t\tvec2 offset = vec2( - 1, 1 ) * shadowRadius * texelSize.y;\n\t\t\treturn (\n\t\t\t\ttexture2DCompare( shadowMap, cubeToUV( bd3D + offset.xyy, texelSize.y ), dp ) +\n\t\t\t\ttexture2DCompare( shadowMap, cubeToUV( bd3D + offset.yyy, texelSize.y ), dp ) +\n\t\t\t\ttexture2DCompare( shadowMap, cubeToUV( bd3D + offset.xyx, texelSize.y ), dp ) +\n\t\t\t\ttexture2DCompare( shadowMap, cubeToUV( bd3D + offset.yyx, texelSize.y ), dp ) +\n\t\t\t\ttexture2DCompare( shadowMap, cubeToUV( bd3D, texelSize.y ), dp ) +\n\t\t\t\ttexture2DCompare( shadowMap, cubeToUV( bd3D + offset.xxy, texelSize.y ), dp ) +\n\t\t\t\ttexture2DCompare( shadowMap, cubeToUV( bd3D + offset.yxy, texelSize.y ), dp ) +\n\t\t\t\ttexture2DCompare( shadowMap, cubeToUV( bd3D + offset.xxx, texelSize.y ), dp ) +\n\t\t\t\ttexture2DCompare( shadowMap, cubeToUV( bd3D + offset.yxx, texelSize.y ), dp )\n\t\t\t) * ( 1.0 / 9.0 );\n\t\t#else\n\t\t\treturn texture2DCompare( shadowMap, cubeToUV( bd3D, texelSize.y ), dp );\n\t\t#endif\n\t}\n#endif\n",shadowmap_pars_vertex:"#ifdef USE_SHADOWMAP\n\t#if NUM_DIR_LIGHTS > 0\n\t\tuniform mat4 directionalShadowMatrix[ NUM_DIR_LIGHTS ];\n\t\tvarying vec4 vDirectionalShadowCoord[ NUM_DIR_LIGHTS ];\n\t#endif\n\t#if NUM_SPOT_LIGHTS > 0\n\t\tuniform mat4 spotShadowMatrix[ NUM_SPOT_LIGHTS ];\n\t\tvarying vec4 vSpotShadowCoord[ NUM_SPOT_LIGHTS ];\n\t#endif\n\t#if NUM_POINT_LIGHTS > 0\n\t\tuniform mat4 pointShadowMatrix[ NUM_POINT_LIGHTS ];\n\t\tvarying vec4 vPointShadowCoord[ NUM_POINT_LIGHTS ];\n\t#endif\n#endif\n",shadowmap_vertex:"#ifdef USE_SHADOWMAP\n\t#if NUM_DIR_LIGHTS > 0\n\tfor ( int i = 0; i < NUM_DIR_LIGHTS; i ++ ) {\n\t\tvDirectionalShadowCoord[ i ] = directionalShadowMatrix[ i ] * worldPosition;\n\t}\n\t#endif\n\t#if NUM_SPOT_LIGHTS > 0\n\tfor ( int i = 0; i < NUM_SPOT_LIGHTS; i ++ ) {\n\t\tvSpotShadowCoord[ i ] = spotShadowMatrix[ i ] * worldPosition;\n\t}\n\t#endif\n\t#if NUM_POINT_LIGHTS > 0\n\tfor ( int i = 0; i < NUM_POINT_LIGHTS; i ++ ) {\n\t\tvPointShadowCoord[ i ] = pointShadowMatrix[ i ] * worldPosition;\n\t}\n\t#endif\n#endif\n",shadowmask_pars_fragment:"float getShadowMask() {\n\tfloat shadow = 1.0;\n\t#ifdef USE_SHADOWMAP\n\t#if NUM_DIR_LIGHTS > 0\n\tDirectionalLight directionalLight;\n\tfor ( int i = 0; i < NUM_DIR_LIGHTS; i ++ ) {\n\t\tdirectionalLight = directionalLights[ i ];\n\t\tshadow *= bool( directionalLight.shadow ) ? getShadow( directionalShadowMap[ i ], directionalLight.shadowMapSize, directionalLight.shadowBias, directionalLight.shadowRadius, vDirectionalShadowCoord[ i ] ) : 1.0;\n\t}\n\t#endif\n\t#if NUM_SPOT_LIGHTS > 0\n\tSpotLight spotLight;\n\tfor ( int i = 0; i < NUM_SPOT_LIGHTS; i ++ ) {\n\t\tspotLight = spotLights[ i ];\n\t\tshadow *= bool( spotLight.shadow ) ? getShadow( spotShadowMap[ i ], spotLight.shadowMapSize, spotLight.shadowBias, spotLight.shadowRadius, vSpotShadowCoord[ i ] ) : 1.0;\n\t}\n\t#endif\n\t#if NUM_POINT_LIGHTS > 0\n\tPointLight pointLight;\n\tfor ( int i = 0; i < NUM_POINT_LIGHTS; i ++ ) {\n\t\tpointLight = pointLights[ i ];\n\t\tshadow *= bool( pointLight.shadow ) ? getPointShadow( pointShadowMap[ i ], pointLight.shadowMapSize, pointLight.shadowBias, pointLight.shadowRadius, vPointShadowCoord[ i ] ) : 1.0;\n\t}\n\t#endif\n\t#endif\n\treturn shadow;\n}\n",skinbase_vertex:"#ifdef USE_SKINNING\n\tmat4 boneMatX = getBoneMatrix( skinIndex.x );\n\tmat4 boneMatY = getBoneMatrix( skinIndex.y );\n\tmat4 boneMatZ = getBoneMatrix( skinIndex.z );\n\tmat4 boneMatW = getBoneMatrix( skinIndex.w );\n#endif",skinning_pars_vertex:"#ifdef USE_SKINNING\n\tuniform mat4 bindMatrix;\n\tuniform mat4 bindMatrixInverse;\n\t#ifdef BONE_TEXTURE\n\t\tuniform sampler2D boneTexture;\n\t\tuniform int boneTextureWidth;\n\t\tuniform int boneTextureHeight;\n\t\tmat4 getBoneMatrix( const in float i ) {\n\t\t\tfloat j = i * 4.0;\n\t\t\tfloat x = mod( j, float( boneTextureWidth ) );\n\t\t\tfloat y = floor( j / float( boneTextureWidth ) );\n\t\t\tfloat dx = 1.0 / float( boneTextureWidth );\n\t\t\tfloat dy = 1.0 / float( boneTextureHeight );\n\t\t\ty = dy * ( y + 0.5 );\n\t\t\tvec4 v1 = texture2D( boneTexture, vec2( dx * ( x + 0.5 ), y ) );\n\t\t\tvec4 v2 = texture2D( boneTexture, vec2( dx * ( x + 1.5 ), y ) );\n\t\t\tvec4 v3 = texture2D( boneTexture, vec2( dx * ( x + 2.5 ), y ) );\n\t\t\tvec4 v4 = texture2D( boneTexture, vec2( dx * ( x + 3.5 ), y ) );\n\t\t\tmat4 bone = mat4( v1, v2, v3, v4 );\n\t\t\treturn bone;\n\t\t}\n\t#else\n\t\tuniform mat4 boneMatrices[ MAX_BONES ];\n\t\tmat4 getBoneMatrix( const in float i ) {\n\t\t\tmat4 bone = boneMatrices[ int(i) ];\n\t\t\treturn bone;\n\t\t}\n\t#endif\n#endif\n",skinning_vertex:"#ifdef USE_SKINNING\n\tvec4 skinVertex = bindMatrix * vec4( transformed, 1.0 );\n\tvec4 skinned = vec4( 0.0 );\n\tskinned += boneMatX * skinVertex * skinWeight.x;\n\tskinned += boneMatY * skinVertex * skinWeight.y;\n\tskinned += boneMatZ * skinVertex * skinWeight.z;\n\tskinned += boneMatW * skinVertex * skinWeight.w;\n\tskinned  = bindMatrixInverse * skinned;\n#endif\n",skinnormal_vertex:"#ifdef USE_SKINNING\n\tmat4 skinMatrix = mat4( 0.0 );\n\tskinMatrix += skinWeight.x * boneMatX;\n\tskinMatrix += skinWeight.y * boneMatY;\n\tskinMatrix += skinWeight.z * boneMatZ;\n\tskinMatrix += skinWeight.w * boneMatW;\n\tskinMatrix  = bindMatrixInverse * skinMatrix * bindMatrix;\n\tobjectNormal = vec4( skinMatrix * vec4( objectNormal, 0.0 ) ).xyz;\n#endif\n",specularmap_fragment:"float specularStrength;\n#ifdef USE_SPECULARMAP\n\tvec4 texelSpecular = texture2D( specularMap, vUv );\n\tspecularStrength = texelSpecular.r;\n#else\n\tspecularStrength = 1.0;\n#endif",specularmap_pars_fragment:"#ifdef USE_SPECULARMAP\n\tuniform sampler2D specularMap;\n#endif",tonemapping_fragment:"#if defined( TONE_MAPPING )\n  gl_FragColor.rgb = toneMapping( gl_FragColor.rgb );\n#endif\n",tonemapping_pars_fragment:"#define saturate(a) clamp( a, 0.0, 1.0 )\nuniform float toneMappingExposure;\nuniform float toneMappingWhitePoint;\nvec3 LinearToneMapping( vec3 color ) {\n\treturn toneMappingExposure * color;\n}\nvec3 ReinhardToneMapping( vec3 color ) {\n\tcolor *= toneMappingExposure;\n\treturn saturate( color / ( vec3( 1.0 ) + color ) );\n}\n#define Uncharted2Helper( x ) max( ( ( x * ( 0.15 * x + 0.10 * 0.50 ) + 0.20 * 0.02 ) / ( x * ( 0.15 * x + 0.50 ) + 0.20 * 0.30 ) ) - 0.02 / 0.30, vec3( 0.0 ) )\nvec3 Uncharted2ToneMapping( vec3 color ) {\n\tcolor *= toneMappingExposure;\n\treturn saturate( Uncharted2Helper( color ) / Uncharted2Helper( vec3( toneMappingWhitePoint ) ) );\n}\nvec3 OptimizedCineonToneMapping( vec3 color ) {\n\tcolor *= toneMappingExposure;\n\tcolor = max( vec3( 0.0 ), color - 0.004 );\n\treturn pow( ( color * ( 6.2 * color + 0.5 ) ) / ( color * ( 6.2 * color + 1.7 ) + 0.06 ), vec3( 2.2 ) );\n}\n",uv_pars_fragment:"#if defined( USE_MAP ) || defined( USE_BUMPMAP ) || defined( USE_NORMALMAP ) || defined( USE_SPECULARMAP ) || defined( USE_ALPHAMAP ) || defined( USE_EMISSIVEMAP ) || defined( USE_ROUGHNESSMAP ) || defined( USE_METALNESSMAP )\n\tvarying vec2 vUv;\n#endif",uv_pars_vertex:"#if defined( USE_MAP ) || defined( USE_BUMPMAP ) || defined( USE_NORMALMAP ) || defined( USE_SPECULARMAP ) || defined( USE_ALPHAMAP ) || defined( USE_EMISSIVEMAP ) || defined( USE_ROUGHNESSMAP ) || defined( USE_METALNESSMAP )\n\tvarying vec2 vUv;\n\tuniform vec4 offsetRepeat;\n#endif\n",uv_vertex:"#if defined( USE_MAP ) || defined( USE_BUMPMAP ) || defined( USE_NORMALMAP ) || defined( USE_SPECULARMAP ) || defined( USE_ALPHAMAP ) || defined( USE_EMISSIVEMAP ) || defined( USE_ROUGHNESSMAP ) || defined( USE_METALNESSMAP )\n\tvUv = uv * offsetRepeat.zw + offsetRepeat.xy;\n#endif",uv2_pars_fragment:"#if defined( USE_LIGHTMAP ) || defined( USE_AOMAP )\n\tvarying vec2 vUv2;\n#endif",uv2_pars_vertex:"#if defined( USE_LIGHTMAP ) || defined( USE_AOMAP )\n\tattribute vec2 uv2;\n\tvarying vec2 vUv2;\n#endif",uv2_vertex:"#if defined( USE_LIGHTMAP ) || defined( USE_AOMAP )\n\tvUv2 = uv2;\n#endif",worldpos_vertex:"#if defined( USE_ENVMAP ) || defined( PHONG ) || defined( PHYSICAL ) || defined( LAMBERT ) || defined ( USE_SHADOWMAP )\n\t#ifdef USE_SKINNING\n\t\tvec4 worldPosition = modelMatrix * skinned;\n\t#else\n\t\tvec4 worldPosition = modelMatrix * vec4( transformed, 1.0 );\n\t#endif\n#endif\n",cube_frag:"uniform samplerCube tCube;\nuniform float tFlip;\nuniform float opacity;\nvarying vec3 vWorldPosition;\n#include <common>\nvoid main() {\n\tgl_FragColor = textureCube( tCube, vec3( tFlip * vWorldPosition.x, vWorldPosition.yz ) );\n\tgl_FragColor.a *= opacity;\n}\n",cube_vert:"varying vec3 vWorldPosition;\n#include <common>\nvoid main() {\n\tvWorldPosition = transformDirection( position, modelMatrix );\n\t#include <begin_vertex>\n\t#include <project_vertex>\n}\n",depth_frag:"#if DEPTH_PACKING == 3200\n\tuniform float opacity;\n#endif\n#include <common>\n#include <packing>\n#include <uv_pars_fragment>\n#include <map_pars_fragment>\n#include <alphamap_pars_fragment>\n#include <logdepthbuf_pars_fragment>\n#include <clipping_planes_pars_fragment>\nvoid main() {\n\t#include <clipping_planes_fragment>\n\tvec4 diffuseColor = vec4( 1.0 );\n\t#if DEPTH_PACKING == 3200\n\t\tdiffuseColor.a = opacity;\n\t#endif\n\t#include <map_fragment>\n\t#include <alphamap_fragment>\n\t#include <alphatest_fragment>\n\t#include <logdepthbuf_fragment>\n\t#if DEPTH_PACKING == 3200\n\t\tgl_FragColor = vec4( vec3( gl_FragCoord.z ), opacity );\n\t#elif DEPTH_PACKING == 3201\n\t\tgl_FragColor = packDepthToRGBA( gl_FragCoord.z );\n\t#endif\n}\n",depth_vert:"#include <common>\n#include <uv_pars_vertex>\n#include <displacementmap_pars_vertex>\n#include <morphtarget_pars_vertex>\n#include <skinning_pars_vertex>\n#include <logdepthbuf_pars_vertex>\n#include <clipping_planes_pars_vertex>\nvoid main() {\n\t#include <uv_vertex>\n\t#include <skinbase_vertex>\n\t#include <begin_vertex>\n\t#include <displacementmap_vertex>\n\t#include <morphtarget_vertex>\n\t#include <skinning_vertex>\n\t#include <project_vertex>\n\t#include <logdepthbuf_vertex>\n\t#include <clipping_planes_vertex>\n}\n",distanceRGBA_frag:"uniform vec3 lightPos;\nvarying vec4 vWorldPosition;\n#include <common>\n#include <packing>\n#include <clipping_planes_pars_fragment>\nvoid main () {\n\t#include <clipping_planes_fragment>\n\tgl_FragColor = packDepthToRGBA( length( vWorldPosition.xyz - lightPos.xyz ) / 1000.0 );\n}\n",distanceRGBA_vert:"varying vec4 vWorldPosition;\n#include <common>\n#include <morphtarget_pars_vertex>\n#include <skinning_pars_vertex>\n#include <clipping_planes_pars_vertex>\nvoid main() {\n\t#include <skinbase_vertex>\n\t#include <begin_vertex>\n\t#include <morphtarget_vertex>\n\t#include <skinning_vertex>\n\t#include <project_vertex>\n\t#include <worldpos_vertex>\n\t#include <clipping_planes_vertex>\n\tvWorldPosition = worldPosition;\n}\n",equirect_frag:"uniform sampler2D tEquirect;\nuniform float tFlip;\nvarying vec3 vWorldPosition;\n#include <common>\nvoid main() {\n\tvec3 direction = normalize( vWorldPosition );\n\tvec2 sampleUV;\n\tsampleUV.y = saturate( tFlip * direction.y * -0.5 + 0.5 );\n\tsampleUV.x = atan( direction.z, direction.x ) * RECIPROCAL_PI2 + 0.5;\n\tgl_FragColor = texture2D( tEquirect, sampleUV );\n}\n",equirect_vert:"varying vec3 vWorldPosition;\n#include <common>\nvoid main() {\n\tvWorldPosition = transformDirection( position, modelMatrix );\n\t#include <begin_vertex>\n\t#include <project_vertex>\n}\n",linedashed_frag:"uniform vec3 diffuse;\nuniform float opacity;\nuniform float dashSize;\nuniform float totalSize;\nvarying float vLineDistance;\n#include <common>\n#include <color_pars_fragment>\n#include <fog_pars_fragment>\n#include <logdepthbuf_pars_fragment>\n#include <clipping_planes_pars_fragment>\nvoid main() {\n\t#include <clipping_planes_fragment>\n\tif ( mod( vLineDistance, totalSize ) > dashSize ) {\n\t\tdiscard;\n\t}\n\tvec3 outgoingLight = vec3( 0.0 );\n\tvec4 diffuseColor = vec4( diffuse, opacity );\n\t#include <logdepthbuf_fragment>\n\t#include <color_fragment>\n\toutgoingLight = diffuseColor.rgb;\n\tgl_FragColor = vec4( outgoingLight, diffuseColor.a );\n\t#include <premultiplied_alpha_fragment>\n\t#include <tonemapping_fragment>\n\t#include <encodings_fragment>\n\t#include <fog_fragment>\n}\n",linedashed_vert:"uniform float scale;\nattribute float lineDistance;\nvarying float vLineDistance;\n#include <common>\n#include <color_pars_vertex>\n#include <fog_pars_vertex>\n#include <logdepthbuf_pars_vertex>\n#include <clipping_planes_pars_vertex>\nvoid main() {\n\t#include <color_vertex>\n\tvLineDistance = scale * lineDistance;\n\tvec4 mvPosition = modelViewMatrix * vec4( position, 1.0 );\n\tgl_Position = projectionMatrix * mvPosition;\n\t#include <logdepthbuf_vertex>\n\t#include <clipping_planes_vertex>\n\t#include <fog_vertex>\n}\n",meshbasic_frag:"uniform vec3 diffuse;\nuniform float opacity;\n#ifndef FLAT_SHADED\n\tvarying vec3 vNormal;\n#endif\n#include <common>\n#include <color_pars_fragment>\n#include <uv_pars_fragment>\n#include <uv2_pars_fragment>\n#include <map_pars_fragment>\n#include <alphamap_pars_fragment>\n#include <aomap_pars_fragment>\n#include <lightmap_pars_fragment>\n#include <envmap_pars_fragment>\n#include <fog_pars_fragment>\n#include <specularmap_pars_fragment>\n#include <logdepthbuf_pars_fragment>\n#include <clipping_planes_pars_fragment>\nvoid main() {\n\t#include <clipping_planes_fragment>\n\tvec4 diffuseColor = vec4( diffuse, opacity );\n\t#include <logdepthbuf_fragment>\n\t#include <map_fragment>\n\t#include <color_fragment>\n\t#include <alphamap_fragment>\n\t#include <alphatest_fragment>\n\t#include <specularmap_fragment>\n\tReflectedLight reflectedLight = ReflectedLight( vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ) );\n\t#ifdef USE_LIGHTMAP\n\t\treflectedLight.indirectDiffuse += texture2D( lightMap, vUv2 ).xyz * lightMapIntensity;\n\t#else\n\t\treflectedLight.indirectDiffuse += vec3( 1.0 );\n\t#endif\n\t#include <aomap_fragment>\n\treflectedLight.indirectDiffuse *= diffuseColor.rgb;\n\tvec3 outgoingLight = reflectedLight.indirectDiffuse;\n\t#include <normal_flip>\n\t#include <envmap_fragment>\n\tgl_FragColor = vec4( outgoingLight, diffuseColor.a );\n\t#include <premultiplied_alpha_fragment>\n\t#include <tonemapping_fragment>\n\t#include <encodings_fragment>\n\t#include <fog_fragment>\n}\n",meshbasic_vert:"#include <common>\n#include <uv_pars_vertex>\n#include <uv2_pars_vertex>\n#include <envmap_pars_vertex>\n#include <color_pars_vertex>\n#include <fog_pars_vertex>\n#include <morphtarget_pars_vertex>\n#include <skinning_pars_vertex>\n#include <logdepthbuf_pars_vertex>\n#include <clipping_planes_pars_vertex>\nvoid main() {\n\t#include <uv_vertex>\n\t#include <uv2_vertex>\n\t#include <color_vertex>\n\t#include <skinbase_vertex>\n\t#ifdef USE_ENVMAP\n\t#include <beginnormal_vertex>\n\t#include <morphnormal_vertex>\n\t#include <skinnormal_vertex>\n\t#include <defaultnormal_vertex>\n\t#endif\n\t#include <begin_vertex>\n\t#include <morphtarget_vertex>\n\t#include <skinning_vertex>\n\t#include <project_vertex>\n\t#include <logdepthbuf_vertex>\n\t#include <worldpos_vertex>\n\t#include <clipping_planes_vertex>\n\t#include <envmap_vertex>\n\t#include <fog_vertex>\n}\n",
meshlambert_frag:"uniform vec3 diffuse;\nuniform vec3 emissive;\nuniform float opacity;\nvarying vec3 vLightFront;\n#ifdef DOUBLE_SIDED\n\tvarying vec3 vLightBack;\n#endif\n#include <common>\n#include <packing>\n#include <color_pars_fragment>\n#include <uv_pars_fragment>\n#include <uv2_pars_fragment>\n#include <map_pars_fragment>\n#include <alphamap_pars_fragment>\n#include <aomap_pars_fragment>\n#include <lightmap_pars_fragment>\n#include <emissivemap_pars_fragment>\n#include <envmap_pars_fragment>\n#include <bsdfs>\n#include <lights_pars>\n#include <fog_pars_fragment>\n#include <shadowmap_pars_fragment>\n#include <shadowmask_pars_fragment>\n#include <specularmap_pars_fragment>\n#include <logdepthbuf_pars_fragment>\n#include <clipping_planes_pars_fragment>\nvoid main() {\n\t#include <clipping_planes_fragment>\n\tvec4 diffuseColor = vec4( diffuse, opacity );\n\tReflectedLight reflectedLight = ReflectedLight( vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ) );\n\tvec3 totalEmissiveRadiance = emissive;\n\t#include <logdepthbuf_fragment>\n\t#include <map_fragment>\n\t#include <color_fragment>\n\t#include <alphamap_fragment>\n\t#include <alphatest_fragment>\n\t#include <specularmap_fragment>\n\t#include <emissivemap_fragment>\n\treflectedLight.indirectDiffuse = getAmbientLightIrradiance( ambientLightColor );\n\t#include <lightmap_fragment>\n\treflectedLight.indirectDiffuse *= BRDF_Diffuse_Lambert( diffuseColor.rgb );\n\t#ifdef DOUBLE_SIDED\n\t\treflectedLight.directDiffuse = ( gl_FrontFacing ) ? vLightFront : vLightBack;\n\t#else\n\t\treflectedLight.directDiffuse = vLightFront;\n\t#endif\n\treflectedLight.directDiffuse *= BRDF_Diffuse_Lambert( diffuseColor.rgb ) * getShadowMask();\n\t#include <aomap_fragment>\n\tvec3 outgoingLight = reflectedLight.directDiffuse + reflectedLight.indirectDiffuse + totalEmissiveRadiance;\n\t#include <normal_flip>\n\t#include <envmap_fragment>\n\tgl_FragColor = vec4( outgoingLight, diffuseColor.a );\n\t#include <premultiplied_alpha_fragment>\n\t#include <tonemapping_fragment>\n\t#include <encodings_fragment>\n\t#include <fog_fragment>\n}\n",meshlambert_vert:"#define LAMBERT\nvarying vec3 vLightFront;\n#ifdef DOUBLE_SIDED\n\tvarying vec3 vLightBack;\n#endif\n#include <common>\n#include <uv_pars_vertex>\n#include <uv2_pars_vertex>\n#include <envmap_pars_vertex>\n#include <bsdfs>\n#include <lights_pars>\n#include <color_pars_vertex>\n#include <fog_pars_vertex>\n#include <morphtarget_pars_vertex>\n#include <skinning_pars_vertex>\n#include <shadowmap_pars_vertex>\n#include <logdepthbuf_pars_vertex>\n#include <clipping_planes_pars_vertex>\nvoid main() {\n\t#include <uv_vertex>\n\t#include <uv2_vertex>\n\t#include <color_vertex>\n\t#include <beginnormal_vertex>\n\t#include <morphnormal_vertex>\n\t#include <skinbase_vertex>\n\t#include <skinnormal_vertex>\n\t#include <defaultnormal_vertex>\n\t#include <begin_vertex>\n\t#include <morphtarget_vertex>\n\t#include <skinning_vertex>\n\t#include <project_vertex>\n\t#include <logdepthbuf_vertex>\n\t#include <clipping_planes_vertex>\n\t#include <worldpos_vertex>\n\t#include <envmap_vertex>\n\t#include <lights_lambert_vertex>\n\t#include <shadowmap_vertex>\n\t#include <fog_vertex>\n}\n",meshphong_frag:"#define PHONG\nuniform vec3 diffuse;\nuniform vec3 emissive;\nuniform vec3 specular;\nuniform float shininess;\nuniform float opacity;\n#include <common>\n#include <packing>\n#include <color_pars_fragment>\n#include <uv_pars_fragment>\n#include <uv2_pars_fragment>\n#include <map_pars_fragment>\n#include <alphamap_pars_fragment>\n#include <aomap_pars_fragment>\n#include <lightmap_pars_fragment>\n#include <emissivemap_pars_fragment>\n#include <envmap_pars_fragment>\n#include <gradientmap_pars_fragment>\n#include <fog_pars_fragment>\n#include <bsdfs>\n#include <lights_pars>\n#include <lights_phong_pars_fragment>\n#include <shadowmap_pars_fragment>\n#include <bumpmap_pars_fragment>\n#include <normalmap_pars_fragment>\n#include <specularmap_pars_fragment>\n#include <logdepthbuf_pars_fragment>\n#include <clipping_planes_pars_fragment>\nvoid main() {\n\t#include <clipping_planes_fragment>\n\tvec4 diffuseColor = vec4( diffuse, opacity );\n\tReflectedLight reflectedLight = ReflectedLight( vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ) );\n\tvec3 totalEmissiveRadiance = emissive;\n\t#include <logdepthbuf_fragment>\n\t#include <map_fragment>\n\t#include <color_fragment>\n\t#include <alphamap_fragment>\n\t#include <alphatest_fragment>\n\t#include <specularmap_fragment>\n\t#include <normal_flip>\n\t#include <normal_fragment>\n\t#include <emissivemap_fragment>\n\t#include <lights_phong_fragment>\n\t#include <lights_template>\n\t#include <aomap_fragment>\n\tvec3 outgoingLight = reflectedLight.directDiffuse + reflectedLight.indirectDiffuse + reflectedLight.directSpecular + reflectedLight.indirectSpecular + totalEmissiveRadiance;\n\t#include <envmap_fragment>\n\tgl_FragColor = vec4( outgoingLight, diffuseColor.a );\n\t#include <premultiplied_alpha_fragment>\n\t#include <tonemapping_fragment>\n\t#include <encodings_fragment>\n\t#include <fog_fragment>\n}\n",meshphong_vert:"#define PHONG\nvarying vec3 vViewPosition;\n#ifndef FLAT_SHADED\n\tvarying vec3 vNormal;\n#endif\n#include <common>\n#include <uv_pars_vertex>\n#include <uv2_pars_vertex>\n#include <displacementmap_pars_vertex>\n#include <envmap_pars_vertex>\n#include <color_pars_vertex>\n#include <fog_pars_vertex>\n#include <morphtarget_pars_vertex>\n#include <skinning_pars_vertex>\n#include <shadowmap_pars_vertex>\n#include <logdepthbuf_pars_vertex>\n#include <clipping_planes_pars_vertex>\nvoid main() {\n\t#include <uv_vertex>\n\t#include <uv2_vertex>\n\t#include <color_vertex>\n\t#include <beginnormal_vertex>\n\t#include <morphnormal_vertex>\n\t#include <skinbase_vertex>\n\t#include <skinnormal_vertex>\n\t#include <defaultnormal_vertex>\n#ifndef FLAT_SHADED\n\tvNormal = normalize( transformedNormal );\n#endif\n\t#include <begin_vertex>\n\t#include <displacementmap_vertex>\n\t#include <morphtarget_vertex>\n\t#include <skinning_vertex>\n\t#include <project_vertex>\n\t#include <logdepthbuf_vertex>\n\t#include <clipping_planes_vertex>\n\tvViewPosition = - mvPosition.xyz;\n\t#include <worldpos_vertex>\n\t#include <envmap_vertex>\n\t#include <shadowmap_vertex>\n\t#include <fog_vertex>\n}\n",meshphysical_frag:"#define PHYSICAL\nuniform vec3 diffuse;\nuniform vec3 emissive;\nuniform float roughness;\nuniform float metalness;\nuniform float opacity;\n#ifndef STANDARD\n\tuniform float clearCoat;\n\tuniform float clearCoatRoughness;\n#endif\nvarying vec3 vViewPosition;\n#ifndef FLAT_SHADED\n\tvarying vec3 vNormal;\n#endif\n#include <common>\n#include <packing>\n#include <color_pars_fragment>\n#include <uv_pars_fragment>\n#include <uv2_pars_fragment>\n#include <map_pars_fragment>\n#include <alphamap_pars_fragment>\n#include <aomap_pars_fragment>\n#include <lightmap_pars_fragment>\n#include <emissivemap_pars_fragment>\n#include <envmap_pars_fragment>\n#include <fog_pars_fragment>\n#include <bsdfs>\n#include <cube_uv_reflection_fragment>\n#include <lights_pars>\n#include <lights_physical_pars_fragment>\n#include <shadowmap_pars_fragment>\n#include <bumpmap_pars_fragment>\n#include <normalmap_pars_fragment>\n#include <roughnessmap_pars_fragment>\n#include <metalnessmap_pars_fragment>\n#include <logdepthbuf_pars_fragment>\n#include <clipping_planes_pars_fragment>\nvoid main() {\n\t#include <clipping_planes_fragment>\n\tvec4 diffuseColor = vec4( diffuse, opacity );\n\tReflectedLight reflectedLight = ReflectedLight( vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ) );\n\tvec3 totalEmissiveRadiance = emissive;\n\t#include <logdepthbuf_fragment>\n\t#include <map_fragment>\n\t#include <color_fragment>\n\t#include <alphamap_fragment>\n\t#include <alphatest_fragment>\n\t#include <specularmap_fragment>\n\t#include <roughnessmap_fragment>\n\t#include <metalnessmap_fragment>\n\t#include <normal_flip>\n\t#include <normal_fragment>\n\t#include <emissivemap_fragment>\n\t#include <lights_physical_fragment>\n\t#include <lights_template>\n\t#include <aomap_fragment>\n\tvec3 outgoingLight = reflectedLight.directDiffuse + reflectedLight.indirectDiffuse + reflectedLight.directSpecular + reflectedLight.indirectSpecular + totalEmissiveRadiance;\n\tgl_FragColor = vec4( outgoingLight, diffuseColor.a );\n\t#include <premultiplied_alpha_fragment>\n\t#include <tonemapping_fragment>\n\t#include <encodings_fragment>\n\t#include <fog_fragment>\n}\n",meshphysical_vert:"#define PHYSICAL\nvarying vec3 vViewPosition;\n#ifndef FLAT_SHADED\n\tvarying vec3 vNormal;\n#endif\n#include <common>\n#include <uv_pars_vertex>\n#include <uv2_pars_vertex>\n#include <displacementmap_pars_vertex>\n#include <color_pars_vertex>\n#include <fog_pars_vertex>\n#include <morphtarget_pars_vertex>\n#include <skinning_pars_vertex>\n#include <shadowmap_pars_vertex>\n#include <specularmap_pars_fragment>\n#include <logdepthbuf_pars_vertex>\n#include <clipping_planes_pars_vertex>\nvoid main() {\n\t#include <uv_vertex>\n\t#include <uv2_vertex>\n\t#include <color_vertex>\n\t#include <beginnormal_vertex>\n\t#include <morphnormal_vertex>\n\t#include <skinbase_vertex>\n\t#include <skinnormal_vertex>\n\t#include <defaultnormal_vertex>\n#ifndef FLAT_SHADED\n\tvNormal = normalize( transformedNormal );\n#endif\n\t#include <begin_vertex>\n\t#include <displacementmap_vertex>\n\t#include <morphtarget_vertex>\n\t#include <skinning_vertex>\n\t#include <project_vertex>\n\t#include <logdepthbuf_vertex>\n\t#include <clipping_planes_vertex>\n\tvViewPosition = - mvPosition.xyz;\n\t#include <worldpos_vertex>\n\t#include <shadowmap_vertex>\n\t#include <fog_vertex>\n}\n",normal_frag:"#define NORMAL\nuniform float opacity;\n#if defined( FLAT_SHADED ) || defined( USE_BUMPMAP ) || defined( USE_NORMALMAP )\n\tvarying vec3 vViewPosition;\n#endif\n#ifndef FLAT_SHADED\n\tvarying vec3 vNormal;\n#endif\n#include <packing>\n#include <uv_pars_fragment>\n#include <bumpmap_pars_fragment>\n#include <normalmap_pars_fragment>\n#include <logdepthbuf_pars_fragment>\nvoid main() {\n\t#include <logdepthbuf_fragment>\n\t#include <normal_flip>\n\t#include <normal_fragment>\n\tgl_FragColor = vec4( packNormalToRGB( normal ), opacity );\n}\n",normal_vert:"#define NORMAL\n#if defined( FLAT_SHADED ) || defined( USE_BUMPMAP ) || defined( USE_NORMALMAP )\n\tvarying vec3 vViewPosition;\n#endif\n#ifndef FLAT_SHADED\n\tvarying vec3 vNormal;\n#endif\n#include <uv_pars_vertex>\n#include <displacementmap_pars_vertex>\n#include <morphtarget_pars_vertex>\n#include <skinning_pars_vertex>\n#include <logdepthbuf_pars_vertex>\nvoid main() {\n\t#include <uv_vertex>\n\t#include <beginnormal_vertex>\n\t#include <morphnormal_vertex>\n\t#include <skinbase_vertex>\n\t#include <skinnormal_vertex>\n\t#include <defaultnormal_vertex>\n#ifndef FLAT_SHADED\n\tvNormal = normalize( transformedNormal );\n#endif\n\t#include <begin_vertex>\n\t#include <displacementmap_vertex>\n\t#include <morphtarget_vertex>\n\t#include <skinning_vertex>\n\t#include <project_vertex>\n\t#include <logdepthbuf_vertex>\n#if defined( FLAT_SHADED ) || defined( USE_BUMPMAP ) || defined( USE_NORMALMAP )\n\tvViewPosition = - mvPosition.xyz;\n#endif\n}\n",points_frag:"uniform vec3 diffuse;\nuniform float opacity;\n#include <common>\n#include <packing>\n#include <color_pars_fragment>\n#include <map_particle_pars_fragment>\n#include <fog_pars_fragment>\n#include <shadowmap_pars_fragment>\n#include <logdepthbuf_pars_fragment>\n#include <clipping_planes_pars_fragment>\nvoid main() {\n\t#include <clipping_planes_fragment>\n\tvec3 outgoingLight = vec3( 0.0 );\n\tvec4 diffuseColor = vec4( diffuse, opacity );\n\t#include <logdepthbuf_fragment>\n\t#include <map_particle_fragment>\n\t#include <color_fragment>\n\t#include <alphatest_fragment>\n\toutgoingLight = diffuseColor.rgb;\n\tgl_FragColor = vec4( outgoingLight, diffuseColor.a );\n\t#include <premultiplied_alpha_fragment>\n\t#include <tonemapping_fragment>\n\t#include <encodings_fragment>\n\t#include <fog_fragment>\n}\n",points_vert:"uniform float size;\nuniform float scale;\n#include <common>\n#include <color_pars_vertex>\n#include <fog_pars_vertex>\n#include <shadowmap_pars_vertex>\n#include <logdepthbuf_pars_vertex>\n#include <clipping_planes_pars_vertex>\nvoid main() {\n\t#include <color_vertex>\n\t#include <begin_vertex>\n\t#include <project_vertex>\n\t#ifdef USE_SIZEATTENUATION\n\t\tgl_PointSize = size * ( scale / - mvPosition.z );\n\t#else\n\t\tgl_PointSize = size;\n\t#endif\n\t#include <logdepthbuf_vertex>\n\t#include <clipping_planes_vertex>\n\t#include <worldpos_vertex>\n\t#include <shadowmap_vertex>\n\t#include <fog_vertex>\n}\n",shadow_frag:"uniform float opacity;\n#include <common>\n#include <packing>\n#include <bsdfs>\n#include <lights_pars>\n#include <shadowmap_pars_fragment>\n#include <shadowmask_pars_fragment>\nvoid main() {\n\tgl_FragColor = vec4( 0.0, 0.0, 0.0, opacity * ( 1.0 - getShadowMask() ) );\n}\n",shadow_vert:"#include <shadowmap_pars_vertex>\nvoid main() {\n\t#include <begin_vertex>\n\t#include <project_vertex>\n\t#include <worldpos_vertex>\n\t#include <shadowmap_vertex>\n}\n"};W.prototype={constructor:W,isColor:!0,r:1,g:1,b:1,set:function(t){return t&&t.isColor?this.copy(t):"number"==typeof t?this.setHex(t):"string"==typeof t&&this.setStyle(t),this},setScalar:function(t){return this.r=t,this.g=t,this.b=t,this},setHex:function(t){return t=Math.floor(t),this.r=(t>>16&255)/255,this.g=(t>>8&255)/255,this.b=(255&t)/255,this},setRGB:function(t,e,i){return this.r=t,this.g=e,this.b=i,this},setHSL:function(){function t(t,e,i){return i<0&&(i+=1),i>1&&(i-=1),i<1/6?t+6*(e-t)*i:i<.5?e:i<2/3?t+6*(e-t)*(2/3-i):t}return function(e,i,n){if(e=wr.euclideanModulo(e,1),i=wr.clamp(i,0,1),n=wr.clamp(n,0,1),0===i)this.r=this.g=this.b=n;else{var r=n<=.5?n*(1+i):n+i-n*i,a=2*n-r;this.r=t(a,r,e+1/3),this.g=t(a,r,e),this.b=t(a,r,e-1/3)}return this}}(),setStyle:function(t){function e(t){void 0!==t&&parseFloat(t)}var i;if(i=/^((?:rgb|hsl)a?)\(\s*([^\)]*)\)/.exec(t)){var n,r=i[1],a=i[2];switch(r){case"rgb":case"rgba":if(n=/^(\d+)\s*,\s*(\d+)\s*,\s*(\d+)\s*(,\s*([0-9]*\.?[0-9]+)\s*)?$/.exec(a))return this.r=Math.min(255,parseInt(n[1],10))/255,this.g=Math.min(255,parseInt(n[2],10))/255,this.b=Math.min(255,parseInt(n[3],10))/255,e(n[5]),this;if(n=/^(\d+)\%\s*,\s*(\d+)\%\s*,\s*(\d+)\%\s*(,\s*([0-9]*\.?[0-9]+)\s*)?$/.exec(a))return this.r=Math.min(100,parseInt(n[1],10))/100,this.g=Math.min(100,parseInt(n[2],10))/100,this.b=Math.min(100,parseInt(n[3],10))/100,e(n[5]),this;break;case"hsl":case"hsla":if(n=/^([0-9]*\.?[0-9]+)\s*,\s*(\d+)\%\s*,\s*(\d+)\%\s*(,\s*([0-9]*\.?[0-9]+)\s*)?$/.exec(a)){var o=parseFloat(n[1])/360,s=parseInt(n[2],10)/100,c=parseInt(n[3],10)/100;return e(n[5]),this.setHSL(o,s,c)}}}else if(i=/^\#([A-Fa-f0-9]+)$/.exec(t)){var l=i[1],h=l.length;if(3===h)return this.r=parseInt(l.charAt(0)+l.charAt(0),16)/255,this.g=parseInt(l.charAt(1)+l.charAt(1),16)/255,this.b=parseInt(l.charAt(2)+l.charAt(2),16)/255,this;if(6===h)return this.r=parseInt(l.charAt(0)+l.charAt(1),16)/255,this.g=parseInt(l.charAt(2)+l.charAt(3),16)/255,this.b=parseInt(l.charAt(4)+l.charAt(5),16)/255,this}if(t&&t.length>0){var l=Nr[t];void 0!==l&&this.setHex(l)}return this},clone:function(){return new this.constructor(this.r,this.g,this.b)},copy:function(t){return this.r=t.r,this.g=t.g,this.b=t.b,this},copyGammaToLinear:function(t,e){return void 0===e&&(e=2),this.r=Math.pow(t.r,e),this.g=Math.pow(t.g,e),this.b=Math.pow(t.b,e),this},copyLinearToGamma:function(t,e){void 0===e&&(e=2);var i=e>0?1/e:1;return this.r=Math.pow(t.r,i),this.g=Math.pow(t.g,i),this.b=Math.pow(t.b,i),this},convertGammaToLinear:function(){var t=this.r,e=this.g,i=this.b;return this.r=t*t,this.g=e*e,this.b=i*i,this},convertLinearToGamma:function(){return this.r=Math.sqrt(this.r),this.g=Math.sqrt(this.g),this.b=Math.sqrt(this.b),this},getHex:function(){return 255*this.r<<16^255*this.g<<8^255*this.b<<0},getHexString:function(){return("000000"+this.getHex().toString(16)).slice(-6)},getHSL:function(t){var e,i,n=t||{h:0,s:0,l:0},r=this.r,a=this.g,o=this.b,s=Math.max(r,a,o),c=Math.min(r,a,o),l=(c+s)/2;if(c===s)e=0,i=0;else{var h=s-c;switch(i=l<=.5?h/(s+c):h/(2-s-c),s){case r:e=(a-o)/h+(a<o?6:0);break;case a:e=(o-r)/h+2;break;case o:e=(r-a)/h+4}e/=6}return n.h=e,n.s=i,n.l=l,n},getStyle:function(){return"rgb("+(255*this.r|0)+","+(255*this.g|0)+","+(255*this.b|0)+")"},offsetHSL:function(t,e,i){var n=this.getHSL();return n.h+=t,n.s+=e,n.l+=i,this.setHSL(n.h,n.s,n.l),this},add:function(t){return this.r+=t.r,this.g+=t.g,this.b+=t.b,this},addColors:function(t,e){return this.r=t.r+e.r,this.g=t.g+e.g,this.b=t.b+e.b,this},addScalar:function(t){return this.r+=t,this.g+=t,this.b+=t,this},sub:function(t){return this.r=Math.max(0,this.r-t.r),this.g=Math.max(0,this.g-t.g),this.b=Math.max(0,this.b-t.b),this},multiply:function(t){return this.r*=t.r,this.g*=t.g,this.b*=t.b,this},multiplyScalar:function(t){return this.r*=t,this.g*=t,this.b*=t,this},lerp:function(t,e){return this.r+=(t.r-this.r)*e,this.g+=(t.g-this.g)*e,this.b+=(t.b-this.b)*e,this},equals:function(t){return t.r===this.r&&t.g===this.g&&t.b===this.b},fromArray:function(t,e){return void 0===e&&(e=0),this.r=t[e],this.g=t[e+1],this.b=t[e+2],this},toArray:function(t,e){return void 0===t&&(t=[]),void 0===e&&(e=0),t[e]=this.r,t[e+1]=this.g,t[e+2]=this.b,t},toJSON:function(){return this.getHex()}};var Nr={aliceblue:15792383,antiquewhite:16444375,aqua:65535,aquamarine:8388564,azure:15794175,beige:16119260,bisque:16770244,black:0,blanchedalmond:16772045,blue:255,blueviolet:9055202,brown:10824234,burlywood:14596231,cadetblue:6266528,chartreuse:8388352,chocolate:13789470,coral:16744272,cornflowerblue:6591981,cornsilk:16775388,crimson:14423100,cyan:65535,darkblue:139,darkcyan:35723,darkgoldenrod:12092939,darkgray:11119017,darkgreen:25600,darkgrey:11119017,darkkhaki:12433259,darkmagenta:9109643,darkolivegreen:5597999,darkorange:16747520,darkorchid:10040012,darkred:9109504,darksalmon:15308410,darkseagreen:9419919,darkslateblue:4734347,darkslategray:3100495,darkslategrey:3100495,darkturquoise:52945,darkviolet:9699539,deeppink:16716947,deepskyblue:49151,dimgray:6908265,dimgrey:6908265,dodgerblue:2003199,firebrick:11674146,floralwhite:16775920,forestgreen:2263842,fuchsia:16711935,gainsboro:14474460,ghostwhite:16316671,gold:16766720,goldenrod:14329120,gray:8421504,green:32768,greenyellow:11403055,grey:8421504,honeydew:15794160,hotpink:16738740,indianred:13458524,indigo:4915330,ivory:16777200,khaki:15787660,lavender:15132410,lavenderblush:16773365,lawngreen:8190976,lemonchiffon:16775885,lightblue:11393254,lightcoral:15761536,lightcyan:14745599,lightgoldenrodyellow:16448210,lightgray:13882323,lightgreen:9498256,lightgrey:13882323,lightpink:16758465,lightsalmon:16752762,lightseagreen:2142890,lightskyblue:8900346,lightslategray:7833753,lightslategrey:7833753,lightsteelblue:11584734,lightyellow:16777184,lime:65280,limegreen:3329330,linen:16445670,magenta:16711935,maroon:8388608,mediumaquamarine:6737322,mediumblue:205,mediumorchid:12211667,mediumpurple:9662683,mediumseagreen:3978097,mediumslateblue:8087790,mediumspringgreen:64154,mediumturquoise:4772300,mediumvioletred:13047173,midnightblue:1644912,mintcream:16121850,mistyrose:16770273,moccasin:16770229,navajowhite:16768685,navy:128,oldlace:16643558,olive:8421376,olivedrab:7048739,orange:16753920,orangered:16729344,orchid:14315734,palegoldenrod:15657130,palegreen:10025880,paleturquoise:11529966,palevioletred:14381203,papayawhip:16773077,peachpuff:16767673,peru:13468991,pink:16761035,plum:14524637,powderblue:11591910,purple:8388736,red:16711680,rosybrown:12357519,royalblue:4286945,saddlebrown:9127187,salmon:16416882,sandybrown:16032864,seagreen:3050327,seashell:16774638,sienna:10506797,silver:12632256,skyblue:8900331,slateblue:6970061,slategray:7372944,slategrey:7372944,snow:16775930,springgreen:65407,steelblue:4620980,tan:13808780,teal:32896,thistle:14204888,tomato:16737095,turquoise:4251856,violet:15631086,wheat:16113331,white:16777215,whitesmoke:16119285,yellow:16776960,yellowgreen:10145074},Dr={common:{diffuse:{value:new W(15658734)},opacity:{value:1},map:{value:null},offsetRepeat:{value:new r(0,0,1,1)},specularMap:{value:null},alphaMap:{value:null},envMap:{value:null},flipEnvMap:{value:-1},reflectivity:{value:1},refractionRatio:{value:.98}},aomap:{aoMap:{value:null},aoMapIntensity:{value:1}},lightmap:{lightMap:{value:null},lightMapIntensity:{value:1}},emissivemap:{emissiveMap:{value:null}},bumpmap:{bumpMap:{value:null},bumpScale:{value:1}},normalmap:{normalMap:{value:null},normalScale:{value:new i(1,1)}},displacementmap:{displacementMap:{value:null},displacementScale:{value:1},displacementBias:{value:0}},roughnessmap:{roughnessMap:{value:null}},metalnessmap:{metalnessMap:{value:null}},gradientmap:{gradientMap:{value:null}},fog:{fogDensity:{value:25e-5},fogNear:{value:1},fogFar:{value:2e3},fogColor:{value:new W(16777215)}},lights:{ambientLightColor:{value:[]},directionalLights:{value:[],properties:{direction:{},color:{},shadow:{},shadowBias:{},shadowRadius:{},shadowMapSize:{}}},directionalShadowMap:{value:[]},directionalShadowMatrix:{value:[]},spotLights:{value:[],properties:{color:{},position:{},direction:{},distance:{},coneCos:{},penumbraCos:{},decay:{},shadow:{},shadowBias:{},shadowRadius:{},shadowMapSize:{}}},spotShadowMap:{value:[]},spotShadowMatrix:{value:[]},pointLights:{value:[],properties:{color:{},position:{},decay:{},distance:{},shadow:{},shadowBias:{},shadowRadius:{},shadowMapSize:{}}},pointShadowMap:{value:[]},pointShadowMatrix:{value:[]},hemisphereLights:{value:[],properties:{direction:{},skyColor:{},groundColor:{}}},rectAreaLights:{value:[],properties:{color:{},position:{},width:{},height:{}}}},points:{diffuse:{value:new W(15658734)},opacity:{value:1},size:{value:1},scale:{value:1},map:{value:null},offsetRepeat:{value:new r(0,0,1,1)}}},Ur={basic:{uniforms:Cr.merge([Dr.common,Dr.aomap,Dr.lightmap,Dr.fog]),vertexShader:Rr.meshbasic_vert,fragmentShader:Rr.meshbasic_frag},lambert:{uniforms:Cr.merge([Dr.common,Dr.aomap,Dr.lightmap,Dr.emissivemap,Dr.fog,Dr.lights,{emissive:{value:new W(0)}}]),vertexShader:Rr.meshlambert_vert,fragmentShader:Rr.meshlambert_frag},phong:{uniforms:Cr.merge([Dr.common,Dr.aomap,Dr.lightmap,Dr.emissivemap,Dr.bumpmap,Dr.normalmap,Dr.displacementmap,Dr.gradientmap,Dr.fog,Dr.lights,{emissive:{value:new W(0)},specular:{value:new W(1118481)},shininess:{value:30}}]),vertexShader:Rr.meshphong_vert,fragmentShader:Rr.meshphong_frag},standard:{uniforms:Cr.merge([Dr.common,Dr.aomap,Dr.lightmap,Dr.emissivemap,Dr.bumpmap,Dr.normalmap,Dr.displacementmap,Dr.roughnessmap,Dr.metalnessmap,Dr.fog,Dr.lights,{emissive:{value:new W(0)},roughness:{value:.5},metalness:{value:0},envMapIntensity:{value:1}}]),vertexShader:Rr.meshphysical_vert,fragmentShader:Rr.meshphysical_frag},points:{uniforms:Cr.merge([Dr.points,Dr.fog]),vertexShader:Rr.points_vert,fragmentShader:Rr.points_frag},dashed:{uniforms:Cr.merge([Dr.common,Dr.fog,{scale:{value:1},dashSize:{value:1},totalSize:{value:2}}]),vertexShader:Rr.linedashed_vert,fragmentShader:Rr.linedashed_frag},depth:{uniforms:Cr.merge([Dr.common,Dr.displacementmap]),vertexShader:Rr.depth_vert,fragmentShader:Rr.depth_frag},normal:{uniforms:Cr.merge([Dr.common,Dr.bumpmap,Dr.normalmap,Dr.displacementmap,{opacity:{value:1}}]),vertexShader:Rr.normal_vert,fragmentShader:Rr.normal_frag},cube:{uniforms:{tCube:{value:null},tFlip:{value:-1},opacity:{value:1}},vertexShader:Rr.cube_vert,fragmentShader:Rr.cube_frag},equirect:{uniforms:{tEquirect:{value:null},tFlip:{value:-1}},vertexShader:Rr.equirect_vert,fragmentShader:Rr.equirect_frag},distanceRGBA:{uniforms:{lightPos:{value:new s}},vertexShader:Rr.distanceRGBA_vert,fragmentShader:Rr.distanceRGBA_frag}};Ur.physical={uniforms:Cr.merge([Ur.standard.uniforms,{clearCoat:{value:0},clearCoatRoughness:{value:0}}]),vertexShader:Rr.meshphysical_vert,fragmentShader:Rr.meshphysical_frag},j.prototype={constructor:j,set:function(t,e){return this.min.copy(t),this.max.copy(e),this},setFromPoints:function(t){this.makeEmpty();for(var e=0,i=t.length;e<i;e++)this.expandByPoint(t[e]);return this},setFromCenterAndSize:function(){var t=new i;return function(e,i){var n=t.copy(i).multiplyScalar(.5);return this.min.copy(e).sub(n),this.max.copy(e).add(n),this}}(),clone:function(){return(new this.constructor).copy(this)},copy:function(t){return this.min.copy(t.min),this.max.copy(t.max),this},makeEmpty:function(){return this.min.x=this.min.y=1/0,this.max.x=this.max.y=-1/0,this},isEmpty:function(){return this.max.x<this.min.x||this.max.y<this.min.y},getCenter:function(t){var e=t||new i;return this.isEmpty()?e.set(0,0):e.addVectors(this.min,this.max).multiplyScalar(.5)},getSize:function(t){var e=t||new i;return this.isEmpty()?e.set(0,0):e.subVectors(this.max,this.min)},expandByPoint:function(t){return this.min.min(t),this.max.max(t),this},expandByVector:function(t){return this.min.sub(t),this.max.add(t),this},expandByScalar:function(t){return this.min.addScalar(-t),this.max.addScalar(t),this},containsPoint:function(t){return!(t.x<this.min.x||t.x>this.max.x||t.y<this.min.y||t.y>this.max.y)},containsBox:function(t){return this.min.x<=t.min.x&&t.max.x<=this.max.x&&this.min.y<=t.min.y&&t.max.y<=this.max.y},getParameter:function(t,e){return(e||new i).set((t.x-this.min.x)/(this.max.x-this.min.x),(t.y-this.min.y)/(this.max.y-this.min.y))},intersectsBox:function(t){return!(t.max.x<this.min.x||t.min.x>this.max.x||t.max.y<this.min.y||t.min.y>this.max.y)},clampPoint:function(t,e){return(e||new i).copy(t).clamp(this.min,this.max)},distanceToPoint:function(){var t=new i;return function(e){return t.copy(e).clamp(this.min,this.max).sub(e).length()}}(),intersect:function(t){return this.min.max(t.min),this.max.min(t.max),this},union:function(t){return this.min.min(t.min),this.max.max(t.max),this},translate:function(t){return this.min.add(t),this.max.add(t),this},equals:function(t){return t.min.equals(this.min)&&t.max.equals(this.max)}};var Ir=0;q.prototype={constructor:q,isMaterial:!0,get needsUpdate(){return this._needsUpdate},set needsUpdate(t){!0===t&&this.update(),this._needsUpdate=t},setValues:function(t){if(void 0!==t)for(var e in t){var i=t[e];if(void 0!==i){var n=this[e];void 0!==n&&(n&&n.isColor?n.set(i):n&&n.isVector3&&i&&i.isVector3?n.copy(i):this[e]="overdraw"===e?Number(i):i)}}},toJSON:function(t){function e(t){var e=[];for(var i in t){var n=t[i];delete n.metadata,e.push(n)}return e}var i=void 0===t;i&&(t={textures:{},images:{}});var n={metadata:{version:4.4,type:"Material",generator:"Material.toJSON"}};if(n.uuid=this.uuid,n.type=this.type,""!==this.name&&(n.name=this.name),this.color&&this.color.isColor&&(n.color=this.color.getHex()),void 0!==this.roughness&&(n.roughness=this.roughness),void 0!==this.metalness&&(n.metalness=this.metalness),this.emissive&&this.emissive.isColor&&(n.emissive=this.emissive.getHex()),this.specular&&this.specular.isColor&&(n.specular=this.specular.getHex()),void 0!==this.shininess&&(n.shininess=this.shininess),void 0!==this.clearCoat&&(n.clearCoat=this.clearCoat),void 0!==this.clearCoatRoughness&&(n.clearCoatRoughness=this.clearCoatRoughness),this.map&&this.map.isTexture&&(n.map=this.map.toJSON(t).uuid),this.alphaMap&&this.alphaMap.isTexture&&(n.alphaMap=this.alphaMap.toJSON(t).uuid),this.lightMap&&this.lightMap.isTexture&&(n.lightMap=this.lightMap.toJSON(t).uuid),this.bumpMap&&this.bumpMap.isTexture&&(n.bumpMap=this.bumpMap.toJSON(t).uuid,n.bumpScale=this.bumpScale),this.normalMap&&this.normalMap.isTexture&&(n.normalMap=this.normalMap.toJSON(t).uuid,n.normalScale=this.normalScale.toArray()),this.displacementMap&&this.displacementMap.isTexture&&(n.displacementMap=this.displacementMap.toJSON(t).uuid,n.displacementScale=this.displacementScale,n.displacementBias=this.displacementBias),this.roughnessMap&&this.roughnessMap.isTexture&&(n.roughnessMap=this.roughnessMap.toJSON(t).uuid),this.metalnessMap&&this.metalnessMap.isTexture&&(n.metalnessMap=this.metalnessMap.toJSON(t).uuid),this.emissiveMap&&this.emissiveMap.isTexture&&(n.emissiveMap=this.emissiveMap.toJSON(t).uuid),this.specularMap&&this.specularMap.isTexture&&(n.specularMap=this.specularMap.toJSON(t).uuid),this.envMap&&this.envMap.isTexture&&(n.envMap=this.envMap.toJSON(t).uuid,n.reflectivity=this.reflectivity),this.gradientMap&&this.gradientMap.isTexture&&(n.gradientMap=this.gradientMap.toJSON(t).uuid),void 0!==this.size&&(n.size=this.size),void 0!==this.sizeAttenuation&&(n.sizeAttenuation=this.sizeAttenuation),this.blending!==Oi&&(n.blending=this.blending),this.shading!==Ni&&(n.shading=this.shading),this.side!==Ai&&(n.side=this.side),this.vertexColors!==Di&&(n.vertexColors=this.vertexColors),this.opacity<1&&(n.opacity=this.opacity),!0===this.transparent&&(n.transparent=this.transparent),n.depthFunc=this.depthFunc,n.depthTest=this.depthTest,n.depthWrite=this.depthWrite,this.alphaTest>0&&(n.alphaTest=this.alphaTest),!0===this.premultipliedAlpha&&(n.premultipliedAlpha=this.premultipliedAlpha),!0===this.wireframe&&(n.wireframe=this.wireframe),this.wireframeLinewidth>1&&(n.wireframeLinewidth=this.wireframeLinewidth),"round"!==this.wireframeLinecap&&(n.wireframeLinecap=this.wireframeLinecap),"round"!==this.wireframeLinejoin&&(n.wireframeLinejoin=this.wireframeLinejoin),n.skinning=this.skinning,n.morphTargets=this.morphTargets,i){var r=e(t.textures),a=e(t.images);r.length>0&&(n.textures=r),a.length>0&&(n.images=a)}return n},clone:function(){return(new this.constructor).copy(this)},copy:function(t){this.name=t.name,this.fog=t.fog,this.lights=t.lights,this.blending=t.blending,this.side=t.side,this.shading=t.shading,this.vertexColors=t.vertexColors,this.opacity=t.opacity,this.transparent=t.transparent,this.blendSrc=t.blendSrc,this.blendDst=t.blendDst,this.blendEquation=t.blendEquation,this.blendSrcAlpha=t.blendSrcAlpha,this.blendDstAlpha=t.blendDstAlpha,this.blendEquationAlpha=t.blendEquationAlpha,this.depthFunc=t.depthFunc,this.depthTest=t.depthTest,this.depthWrite=t.depthWrite,this.colorWrite=t.colorWrite,this.precision=t.precision,this.polygonOffset=t.polygonOffset,this.polygonOffsetFactor=t.polygonOffsetFactor,this.polygonOffsetUnits=t.polygonOffsetUnits,this.alphaTest=t.alphaTest,this.premultipliedAlpha=t.premultipliedAlpha,this.overdraw=t.overdraw,this.visible=t.visible,this.clipShadows=t.clipShadows,this.clipIntersection=t.clipIntersection;var e=t.clippingPlanes,i=null;if(null!==e){var n=e.length;i=new Array(n);for(var r=0;r!==n;++r)i[r]=e[r].clone()}return this.clippingPlanes=i,this},update:function(){this.dispatchEvent({type:"update"})},dispose:function(){this.dispatchEvent({type:"dispose"})}},Object.assign(q.prototype,e.prototype),Z.prototype=Object.create(q.prototype),Z.prototype.constructor=Z,Z.prototype.isShaderMaterial=!0,Z.prototype.copy=function(t){return q.prototype.copy.call(this,t),this.fragmentShader=t.fragmentShader,this.vertexShader=t.vertexShader,this.uniforms=Cr.clone(t.uniforms),this.defines=t.defines,this.wireframe=t.wireframe,this.wireframeLinewidth=t.wireframeLinewidth,this.lights=t.lights,this.clipping=t.clipping,this.skinning=t.skinning,this.morphTargets=t.morphTargets,this.morphNormals=t.morphNormals,this.extensions=t.extensions,this},Z.prototype.toJSON=function(t){var e=q.prototype.toJSON.call(this,t);return e.uniforms=this.uniforms,e.vertexShader=this.vertexShader,e.fragmentShader=this.fragmentShader,e},J.prototype=Object.create(q.prototype),J.prototype.constructor=J,J.prototype.isMeshDepthMaterial=!0,J.prototype.copy=function(t){return q.prototype.copy.call(this,t),this.depthPacking=t.depthPacking,this.skinning=t.skinning,this.morphTargets=t.morphTargets,this.map=t.map,this.alphaMap=t.alphaMap,this.displacementMap=t.displacementMap,this.displacementScale=t.displacementScale,this.displacementBias=t.displacementBias,this.wireframe=t.wireframe,this.wireframeLinewidth=t.wireframeLinewidth,this},Q.prototype={constructor:Q,isBox3:!0,set:function(t,e){return this.min.copy(t),this.max.copy(e),this},setFromArray:function(t){
for(var e=1/0,i=1/0,n=1/0,r=-1/0,a=-1/0,o=-1/0,s=0,c=t.length;s<c;s+=3){var l=t[s],h=t[s+1],u=t[s+2];l<e&&(e=l),h<i&&(i=h),u<n&&(n=u),l>r&&(r=l),h>a&&(a=h),u>o&&(o=u)}return this.min.set(e,i,n),this.max.set(r,a,o),this},setFromBufferAttribute:function(t){for(var e=1/0,i=1/0,n=1/0,r=-1/0,a=-1/0,o=-1/0,s=0,c=t.count;s<c;s++){var l=t.getX(s),h=t.getY(s),u=t.getZ(s);l<e&&(e=l),h<i&&(i=h),u<n&&(n=u),l>r&&(r=l),h>a&&(a=h),u>o&&(o=u)}return this.min.set(e,i,n),this.max.set(r,a,o),this},setFromPoints:function(t){this.makeEmpty();for(var e=0,i=t.length;e<i;e++)this.expandByPoint(t[e]);return this},setFromCenterAndSize:function(){var t=new s;return function(e,i){var n=t.copy(i).multiplyScalar(.5);return this.min.copy(e).sub(n),this.max.copy(e).add(n),this}}(),setFromObject:function(t){return this.makeEmpty(),this.expandByObject(t)},clone:function(){return(new this.constructor).copy(this)},copy:function(t){return this.min.copy(t.min),this.max.copy(t.max),this},makeEmpty:function(){return this.min.x=this.min.y=this.min.z=1/0,this.max.x=this.max.y=this.max.z=-1/0,this},isEmpty:function(){return this.max.x<this.min.x||this.max.y<this.min.y||this.max.z<this.min.z},getCenter:function(t){var e=t||new s;return this.isEmpty()?e.set(0,0,0):e.addVectors(this.min,this.max).multiplyScalar(.5)},getSize:function(t){var e=t||new s;return this.isEmpty()?e.set(0,0,0):e.subVectors(this.max,this.min)},expandByPoint:function(t){return this.min.min(t),this.max.max(t),this},expandByVector:function(t){return this.min.sub(t),this.max.add(t),this},expandByScalar:function(t){return this.min.addScalar(-t),this.max.addScalar(t),this},expandByObject:function(){var t=new s;return function(e){var i=this;return e.updateMatrixWorld(!0),e.traverse(function(e){var n,r,a=e.geometry;if(void 0!==a)if(a.isGeometry){var o=a.vertices;for(n=0,r=o.length;n<r;n++)t.copy(o[n]),t.applyMatrix4(e.matrixWorld),i.expandByPoint(t)}else if(a.isBufferGeometry){var s=a.attributes.position;if(void 0!==s)for(n=0,r=s.count;n<r;n++)t.fromBufferAttribute(s,n).applyMatrix4(e.matrixWorld),i.expandByPoint(t)}}),this}}(),containsPoint:function(t){return!(t.x<this.min.x||t.x>this.max.x||t.y<this.min.y||t.y>this.max.y||t.z<this.min.z||t.z>this.max.z)},containsBox:function(t){return this.min.x<=t.min.x&&t.max.x<=this.max.x&&this.min.y<=t.min.y&&t.max.y<=this.max.y&&this.min.z<=t.min.z&&t.max.z<=this.max.z},getParameter:function(t,e){return(e||new s).set((t.x-this.min.x)/(this.max.x-this.min.x),(t.y-this.min.y)/(this.max.y-this.min.y),(t.z-this.min.z)/(this.max.z-this.min.z))},intersectsBox:function(t){return!(t.max.x<this.min.x||t.min.x>this.max.x||t.max.y<this.min.y||t.min.y>this.max.y||t.max.z<this.min.z||t.min.z>this.max.z)},intersectsSphere:function(){var t;return function(e){return void 0===t&&(t=new s),this.clampPoint(e.center,t),t.distanceToSquared(e.center)<=e.radius*e.radius}}(),intersectsPlane:function(t){var e,i;return t.normal.x>0?(e=t.normal.x*this.min.x,i=t.normal.x*this.max.x):(e=t.normal.x*this.max.x,i=t.normal.x*this.min.x),t.normal.y>0?(e+=t.normal.y*this.min.y,i+=t.normal.y*this.max.y):(e+=t.normal.y*this.max.y,i+=t.normal.y*this.min.y),t.normal.z>0?(e+=t.normal.z*this.min.z,i+=t.normal.z*this.max.z):(e+=t.normal.z*this.max.z,i+=t.normal.z*this.min.z),e<=t.constant&&i>=t.constant},clampPoint:function(t,e){return(e||new s).copy(t).clamp(this.min,this.max)},distanceToPoint:function(){var t=new s;return function(e){return t.copy(e).clamp(this.min,this.max).sub(e).length()}}(),getBoundingSphere:function(){var t=new s;return function(e){var i=e||new K;return this.getCenter(i.center),i.radius=.5*this.getSize(t).length(),i}}(),intersect:function(t){return this.min.max(t.min),this.max.min(t.max),this.isEmpty()&&this.makeEmpty(),this},union:function(t){return this.min.min(t.min),this.max.max(t.max),this},applyMatrix4:function(){var t=[new s,new s,new s,new s,new s,new s,new s,new s];return function(e){return this.isEmpty()?this:(t[0].set(this.min.x,this.min.y,this.min.z).applyMatrix4(e),t[1].set(this.min.x,this.min.y,this.max.z).applyMatrix4(e),t[2].set(this.min.x,this.max.y,this.min.z).applyMatrix4(e),t[3].set(this.min.x,this.max.y,this.max.z).applyMatrix4(e),t[4].set(this.max.x,this.min.y,this.min.z).applyMatrix4(e),t[5].set(this.max.x,this.min.y,this.max.z).applyMatrix4(e),t[6].set(this.max.x,this.max.y,this.min.z).applyMatrix4(e),t[7].set(this.max.x,this.max.y,this.max.z).applyMatrix4(e),this.setFromPoints(t),this)}}(),translate:function(t){return this.min.add(t),this.max.add(t),this},equals:function(t){return t.min.equals(this.min)&&t.max.equals(this.max)}},K.prototype={constructor:K,set:function(t,e){return this.center.copy(t),this.radius=e,this},setFromPoints:function(){var t;return function(e,i){void 0===t&&(t=new Q);var n=this.center;void 0!==i?n.copy(i):t.setFromPoints(e).getCenter(n);for(var r=0,a=0,o=e.length;a<o;a++)r=Math.max(r,n.distanceToSquared(e[a]));return this.radius=Math.sqrt(r),this}}(),clone:function(){return(new this.constructor).copy(this)},copy:function(t){return this.center.copy(t.center),this.radius=t.radius,this},empty:function(){return this.radius<=0},containsPoint:function(t){return t.distanceToSquared(this.center)<=this.radius*this.radius},distanceToPoint:function(t){return t.distanceTo(this.center)-this.radius},intersectsSphere:function(t){var e=this.radius+t.radius;return t.center.distanceToSquared(this.center)<=e*e},intersectsBox:function(t){return t.intersectsSphere(this)},intersectsPlane:function(t){return Math.abs(this.center.dot(t.normal)-t.constant)<=this.radius},clampPoint:function(t,e){var i=this.center.distanceToSquared(t),n=e||new s;return n.copy(t),i>this.radius*this.radius&&(n.sub(this.center).normalize(),n.multiplyScalar(this.radius).add(this.center)),n},getBoundingBox:function(t){var e=t||new Q;return e.set(this.center,this.center),e.expandByScalar(this.radius),e},applyMatrix4:function(t){return this.center.applyMatrix4(t),this.radius=this.radius*t.getMaxScaleOnAxis(),this},translate:function(t){return this.center.add(t),this},equals:function(t){return t.center.equals(this.center)&&t.radius===this.radius}},$.prototype={constructor:$,isMatrix3:!0,set:function(t,e,i,n,r,a,o,s,c){var l=this.elements;return l[0]=t,l[1]=n,l[2]=o,l[3]=e,l[4]=r,l[5]=s,l[6]=i,l[7]=a,l[8]=c,this},identity:function(){return this.set(1,0,0,0,1,0,0,0,1),this},clone:function(){return(new this.constructor).fromArray(this.elements)},copy:function(t){var e=t.elements;return this.set(e[0],e[3],e[6],e[1],e[4],e[7],e[2],e[5],e[8]),this},setFromMatrix4:function(t){var e=t.elements;return this.set(e[0],e[4],e[8],e[1],e[5],e[9],e[2],e[6],e[10]),this},applyToBufferAttribute:function(){var t;return function(e){void 0===t&&(t=new s);for(var i=0,n=e.count;i<n;i++)t.x=e.getX(i),t.y=e.getY(i),t.z=e.getZ(i),t.applyMatrix3(this),e.setXYZ(i,t.x,t.y,t.z);return e}}(),multiplyScalar:function(t){var e=this.elements;return e[0]*=t,e[3]*=t,e[6]*=t,e[1]*=t,e[4]*=t,e[7]*=t,e[2]*=t,e[5]*=t,e[8]*=t,this},determinant:function(){var t=this.elements,e=t[0],i=t[1],n=t[2],r=t[3],a=t[4],o=t[5],s=t[6],c=t[7],l=t[8];return e*a*l-e*o*c-i*r*l+i*o*s+n*r*c-n*a*s},getInverse:function(t,e){t&&t.isMatrix4;var i=t.elements,n=this.elements,r=i[0],a=i[1],o=i[2],s=i[3],c=i[4],l=i[5],h=i[6],u=i[7],f=i[8],d=f*c-l*u,p=l*h-f*s,m=u*s-c*h,g=r*d+a*p+o*m;if(0===g){var v="THREE.Matrix3.getInverse(): can't invert matrix, determinant is 0";if(!0===e)throw new Error(v);return this.identity()}var x=1/g;return n[0]=d*x,n[1]=(o*u-f*a)*x,n[2]=(l*a-o*c)*x,n[3]=p*x,n[4]=(f*r-o*h)*x,n[5]=(o*s-l*r)*x,n[6]=m*x,n[7]=(a*h-u*r)*x,n[8]=(c*r-a*s)*x,this},transpose:function(){var t,e=this.elements;return t=e[1],e[1]=e[3],e[3]=t,t=e[2],e[2]=e[6],e[6]=t,t=e[5],e[5]=e[7],e[7]=t,this},getNormalMatrix:function(t){return this.setFromMatrix4(t).getInverse(this).transpose()},transposeIntoArray:function(t){var e=this.elements;return t[0]=e[0],t[1]=e[3],t[2]=e[6],t[3]=e[1],t[4]=e[4],t[5]=e[7],t[6]=e[2],t[7]=e[5],t[8]=e[8],this},fromArray:function(t,e){void 0===e&&(e=0);for(var i=0;i<9;i++)this.elements[i]=t[i+e];return this},toArray:function(t,e){void 0===t&&(t=[]),void 0===e&&(e=0);var i=this.elements;return t[e]=i[0],t[e+1]=i[1],t[e+2]=i[2],t[e+3]=i[3],t[e+4]=i[4],t[e+5]=i[5],t[e+6]=i[6],t[e+7]=i[7],t[e+8]=i[8],t}},tt.prototype={constructor:tt,set:function(t,e){return this.normal.copy(t),this.constant=e,this},setComponents:function(t,e,i,n){return this.normal.set(t,e,i),this.constant=n,this},setFromNormalAndCoplanarPoint:function(t,e){return this.normal.copy(t),this.constant=-e.dot(this.normal),this},setFromCoplanarPoints:function(){var t=new s,e=new s;return function(i,n,r){var a=t.subVectors(r,n).cross(e.subVectors(i,n)).normalize();return this.setFromNormalAndCoplanarPoint(a,i),this}}(),clone:function(){return(new this.constructor).copy(this)},copy:function(t){return this.normal.copy(t.normal),this.constant=t.constant,this},normalize:function(){var t=1/this.normal.length();return this.normal.multiplyScalar(t),this.constant*=t,this},negate:function(){return this.constant*=-1,this.normal.negate(),this},distanceToPoint:function(t){return this.normal.dot(t)+this.constant},distanceToSphere:function(t){return this.distanceToPoint(t.center)-t.radius},projectPoint:function(t,e){return this.orthoPoint(t,e).sub(t).negate()},orthoPoint:function(t,e){var i=this.distanceToPoint(t);return(e||new s).copy(this.normal).multiplyScalar(i)},intersectLine:function(){var t=new s;return function(e,i){var n=i||new s,r=e.delta(t),a=this.normal.dot(r);if(0!==a){var o=-(e.start.dot(this.normal)+this.constant)/a;if(!(o<0||o>1))return n.copy(r).multiplyScalar(o).add(e.start)}else if(0===this.distanceToPoint(e.start))return n.copy(e.start)}}(),intersectsLine:function(t){var e=this.distanceToPoint(t.start),i=this.distanceToPoint(t.end);return e<0&&i>0||i<0&&e>0},intersectsBox:function(t){return t.intersectsPlane(this)},intersectsSphere:function(t){return t.intersectsPlane(this)},coplanarPoint:function(t){return(t||new s).copy(this.normal).multiplyScalar(-this.constant)},applyMatrix4:function(){var t=new s,e=new $;return function(i,n){var r=this.coplanarPoint(t).applyMatrix4(i),a=n||e.getNormalMatrix(i),o=this.normal.applyMatrix3(a).normalize();return this.constant=-r.dot(o),this}}(),translate:function(t){return this.constant=this.constant-t.dot(this.normal),this},equals:function(t){return t.normal.equals(this.normal)&&t.constant===this.constant}},et.prototype={constructor:et,set:function(t,e,i,n,r,a){var o=this.planes;return o[0].copy(t),o[1].copy(e),o[2].copy(i),o[3].copy(n),o[4].copy(r),o[5].copy(a),this},clone:function(){return(new this.constructor).copy(this)},copy:function(t){for(var e=this.planes,i=0;i<6;i++)e[i].copy(t.planes[i]);return this},setFromMatrix:function(t){var e=this.planes,i=t.elements,n=i[0],r=i[1],a=i[2],o=i[3],s=i[4],c=i[5],l=i[6],h=i[7],u=i[8],f=i[9],d=i[10],p=i[11],m=i[12],g=i[13],v=i[14],x=i[15];return e[0].setComponents(o-n,h-s,p-u,x-m).normalize(),e[1].setComponents(o+n,h+s,p+u,x+m).normalize(),e[2].setComponents(o+r,h+c,p+f,x+g).normalize(),e[3].setComponents(o-r,h-c,p-f,x-g).normalize(),e[4].setComponents(o-a,h-l,p-d,x-v).normalize(),e[5].setComponents(o+a,h+l,p+d,x+v).normalize(),this},intersectsObject:function(){var t=new K;return function(e){var i=e.geometry;return null===i.boundingSphere&&i.computeBoundingSphere(),t.copy(i.boundingSphere).applyMatrix4(e.matrixWorld),this.intersectsSphere(t)}}(),intersectsSprite:function(){var t=new K;return function(e){return t.center.set(0,0,0),t.radius=.7071067811865476,t.applyMatrix4(e.matrixWorld),this.intersectsSphere(t)}}(),intersectsSphere:function(t){for(var e=this.planes,i=t.center,n=-t.radius,r=0;r<6;r++){if(e[r].distanceToPoint(i)<n)return!1}return!0},intersectsBox:function(){var t=new s,e=new s;return function(i){for(var n=this.planes,r=0;r<6;r++){var a=n[r];t.x=a.normal.x>0?i.min.x:i.max.x,e.x=a.normal.x>0?i.max.x:i.min.x,t.y=a.normal.y>0?i.min.y:i.max.y,e.y=a.normal.y>0?i.max.y:i.min.y,t.z=a.normal.z>0?i.min.z:i.max.z,e.z=a.normal.z>0?i.max.z:i.min.z;var o=a.distanceToPoint(t),s=a.distanceToPoint(e);if(o<0&&s<0)return!1}return!0}}(),containsPoint:function(t){for(var e=this.planes,i=0;i<6;i++)if(e[i].distanceToPoint(t)<0)return!1;return!0}},nt.prototype={constructor:nt,set:function(t,e){return this.origin.copy(t),this.direction.copy(e),this},clone:function(){return(new this.constructor).copy(this)},copy:function(t){return this.origin.copy(t.origin),this.direction.copy(t.direction),this},at:function(t,e){return(e||new s).copy(this.direction).multiplyScalar(t).add(this.origin)},lookAt:function(t){return this.direction.copy(t).sub(this.origin).normalize(),this},recast:function(){var t=new s;return function(e){return this.origin.copy(this.at(e,t)),this}}(),closestPointToPoint:function(t,e){var i=e||new s;i.subVectors(t,this.origin);var n=i.dot(this.direction);return n<0?i.copy(this.origin):i.copy(this.direction).multiplyScalar(n).add(this.origin)},distanceToPoint:function(t){return Math.sqrt(this.distanceSqToPoint(t))},distanceSqToPoint:function(){var t=new s;return function(e){var i=t.subVectors(e,this.origin).dot(this.direction);return i<0?this.origin.distanceToSquared(e):(t.copy(this.direction).multiplyScalar(i).add(this.origin),t.distanceToSquared(e))}}(),distanceSqToSegment:function(){var t=new s,e=new s,i=new s;return function(n,r,a,o){t.copy(n).add(r).multiplyScalar(.5),e.copy(r).sub(n).normalize(),i.copy(this.origin).sub(t);var s,c,l,h,u=.5*n.distanceTo(r),f=-this.direction.dot(e),d=i.dot(this.direction),p=-i.dot(e),m=i.lengthSq(),g=Math.abs(1-f*f);if(g>0)if(s=f*p-d,c=f*d-p,h=u*g,s>=0)if(c>=-h)if(c<=h){var v=1/g;s*=v,c*=v,l=s*(s+f*c+2*d)+c*(f*s+c+2*p)+m}else c=u,s=Math.max(0,-(f*c+d)),l=-s*s+c*(c+2*p)+m;else c=-u,s=Math.max(0,-(f*c+d)),l=-s*s+c*(c+2*p)+m;else c<=-h?(s=Math.max(0,-(-f*u+d)),c=s>0?-u:Math.min(Math.max(-u,-p),u),l=-s*s+c*(c+2*p)+m):c<=h?(s=0,c=Math.min(Math.max(-u,-p),u),l=c*(c+2*p)+m):(s=Math.max(0,-(f*u+d)),c=s>0?u:Math.min(Math.max(-u,-p),u),l=-s*s+c*(c+2*p)+m);else c=f>0?-u:u,s=Math.max(0,-(f*c+d)),l=-s*s+c*(c+2*p)+m;return a&&a.copy(this.direction).multiplyScalar(s).add(this.origin),o&&o.copy(e).multiplyScalar(c).add(t),l}}(),intersectSphere:function(){var t=new s;return function(e,i){t.subVectors(e.center,this.origin);var n=t.dot(this.direction),r=t.dot(t)-n*n,a=e.radius*e.radius;if(r>a)return null;var o=Math.sqrt(a-r),s=n-o,c=n+o;return s<0&&c<0?null:s<0?this.at(c,i):this.at(s,i)}}(),intersectsSphere:function(t){return this.distanceToPoint(t.center)<=t.radius},distanceToPlane:function(t){var e=t.normal.dot(this.direction);if(0===e)return 0===t.distanceToPoint(this.origin)?0:null;var i=-(this.origin.dot(t.normal)+t.constant)/e;return i>=0?i:null},intersectPlane:function(t,e){var i=this.distanceToPlane(t);return null===i?null:this.at(i,e)},intersectsPlane:function(t){var e=t.distanceToPoint(this.origin);return 0===e||t.normal.dot(this.direction)*e<0},intersectBox:function(t,e){var i,n,r,a,o,s,c=1/this.direction.x,l=1/this.direction.y,h=1/this.direction.z,u=this.origin;return c>=0?(i=(t.min.x-u.x)*c,n=(t.max.x-u.x)*c):(i=(t.max.x-u.x)*c,n=(t.min.x-u.x)*c),l>=0?(r=(t.min.y-u.y)*l,a=(t.max.y-u.y)*l):(r=(t.max.y-u.y)*l,a=(t.min.y-u.y)*l),i>a||r>n?null:((r>i||i!==i)&&(i=r),(a<n||n!==n)&&(n=a),h>=0?(o=(t.min.z-u.z)*h,s=(t.max.z-u.z)*h):(o=(t.max.z-u.z)*h,s=(t.min.z-u.z)*h),i>s||o>n?null:((o>i||i!==i)&&(i=o),(s<n||n!==n)&&(n=s),n<0?null:this.at(i>=0?i:n,e)))},intersectsBox:function(){var t=new s;return function(e){return null!==this.intersectBox(e,t)}}(),intersectTriangle:function(){var t=new s,e=new s,i=new s,n=new s;return function(r,a,o,s,c){e.subVectors(a,r),i.subVectors(o,r),n.crossVectors(e,i);var l,h=this.direction.dot(n);if(h>0){if(s)return null;l=1}else{if(!(h<0))return null;l=-1,h=-h}t.subVectors(this.origin,r);var u=l*this.direction.dot(i.crossVectors(t,i));if(u<0)return null;var f=l*this.direction.dot(e.cross(t));if(f<0)return null;if(u+f>h)return null;var d=-l*t.dot(n);return d<0?null:this.at(d/h,c)}}(),applyMatrix4:function(t){return this.direction.add(this.origin).applyMatrix4(t),this.origin.applyMatrix4(t),this.direction.sub(this.origin),this.direction.normalize(),this},equals:function(t){return t.origin.equals(this.origin)&&t.direction.equals(this.direction)}},rt.RotationOrders=["XYZ","YZX","ZXY","XZY","YXZ","ZYX"],rt.DefaultOrder="XYZ",rt.prototype={constructor:rt,isEuler:!0,get x(){return this._x},set x(t){this._x=t,this.onChangeCallback()},get y(){return this._y},set y(t){this._y=t,this.onChangeCallback()},get z(){return this._z},set z(t){this._z=t,this.onChangeCallback()},get order(){return this._order},set order(t){this._order=t,this.onChangeCallback()},set:function(t,e,i,n){return this._x=t,this._y=e,this._z=i,this._order=n||this._order,this.onChangeCallback(),this},clone:function(){return new this.constructor(this._x,this._y,this._z,this._order)},copy:function(t){return this._x=t._x,this._y=t._y,this._z=t._z,this._order=t._order,this.onChangeCallback(),this},setFromRotationMatrix:function(t,e,i){var n=wr.clamp,r=t.elements,a=r[0],o=r[4],s=r[8],c=r[1],l=r[5],h=r[9],u=r[2],f=r[6],d=r[10];return e=e||this._order,"XYZ"===e?(this._y=Math.asin(n(s,-1,1)),Math.abs(s)<.99999?(this._x=Math.atan2(-h,d),this._z=Math.atan2(-o,a)):(this._x=Math.atan2(f,l),this._z=0)):"YXZ"===e?(this._x=Math.asin(-n(h,-1,1)),Math.abs(h)<.99999?(this._y=Math.atan2(s,d),this._z=Math.atan2(c,l)):(this._y=Math.atan2(-u,a),this._z=0)):"ZXY"===e?(this._x=Math.asin(n(f,-1,1)),Math.abs(f)<.99999?(this._y=Math.atan2(-u,d),this._z=Math.atan2(-o,l)):(this._y=0,this._z=Math.atan2(c,a))):"ZYX"===e?(this._y=Math.asin(-n(u,-1,1)),Math.abs(u)<.99999?(this._x=Math.atan2(f,d),this._z=Math.atan2(c,a)):(this._x=0,this._z=Math.atan2(-o,l))):"YZX"===e?(this._z=Math.asin(n(c,-1,1)),Math.abs(c)<.99999?(this._x=Math.atan2(-h,l),this._y=Math.atan2(-u,a)):(this._x=0,this._y=Math.atan2(s,d))):"XZY"===e&&(this._z=Math.asin(-n(o,-1,1)),Math.abs(o)<.99999?(this._x=Math.atan2(f,l),this._y=Math.atan2(s,a)):(this._x=Math.atan2(-h,d),this._y=0)),this._order=e,!1!==i&&this.onChangeCallback(),this},setFromQuaternion:function(){var t;return function(e,i,n){return void 0===t&&(t=new c),t.makeRotationFromQuaternion(e),this.setFromRotationMatrix(t,i,n)}}(),setFromVector3:function(t,e){return this.set(t.x,t.y,t.z,e||this._order)},reorder:function(){var t=new o;return function(e){return t.setFromEuler(this),this.setFromQuaternion(t,e)}}(),equals:function(t){return t._x===this._x&&t._y===this._y&&t._z===this._z&&t._order===this._order},fromArray:function(t){return this._x=t[0],this._y=t[1],this._z=t[2],void 0!==t[3]&&(this._order=t[3]),this.onChangeCallback(),this},toArray:function(t,e){return void 0===t&&(t=[]),void 0===e&&(e=0),t[e]=this._x,t[e+1]=this._y,t[e+2]=this._z,t[e+3]=this._order,t},toVector3:function(t){return t?t.set(this._x,this._y,this._z):new s(this._x,this._y,this._z)},onChange:function(t){return this.onChangeCallback=t,this},onChangeCallback:function(){}},at.prototype={constructor:at,set:function(t){this.mask=1<<t},enable:function(t){this.mask|=1<<t},toggle:function(t){this.mask^=1<<t},disable:function(t){this.mask&=~(1<<t)},test:function(t){return 0!=(this.mask&t.mask)}};var Or=0;ot.DefaultUp=new s(0,1,0),ot.DefaultMatrixAutoUpdate=!0,ot.prototype={constructor:ot,isObject3D:!0,applyMatrix:function(t){this.matrix.multiplyMatrices(t,this.matrix),this.matrix.decompose(this.position,this.quaternion,this.scale)},setRotationFromAxisAngle:function(t,e){this.quaternion.setFromAxisAngle(t,e)},setRotationFromEuler:function(t){this.quaternion.setFromEuler(t,!0)},setRotationFromMatrix:function(t){this.quaternion.setFromRotationMatrix(t)},setRotationFromQuaternion:function(t){this.quaternion.copy(t)},rotateOnAxis:function(){var t=new o;return function(e,i){return t.setFromAxisAngle(e,i),this.quaternion.multiply(t),this}}(),rotateX:function(){var t=new s(1,0,0);return function(e){return this.rotateOnAxis(t,e)}}(),rotateY:function(){var t=new s(0,1,0);return function(e){return this.rotateOnAxis(t,e)}}(),rotateZ:function(){var t=new s(0,0,1);return function(e){return this.rotateOnAxis(t,e)}}(),translateOnAxis:function(){var t=new s;return function(e,i){return t.copy(e).applyQuaternion(this.quaternion),this.position.add(t.multiplyScalar(i)),this}}(),translateX:function(){var t=new s(1,0,0);return function(e){return this.translateOnAxis(t,e)}}(),translateY:function(){var t=new s(0,1,0);return function(e){return this.translateOnAxis(t,e)}}(),translateZ:function(){var t=new s(0,0,1);return function(e){return this.translateOnAxis(t,e)}}(),localToWorld:function(t){return t.applyMatrix4(this.matrixWorld)},worldToLocal:function(){var t=new c;return function(e){return e.applyMatrix4(t.getInverse(this.matrixWorld))}}(),lookAt:function(){var t=new c;return function(e){t.lookAt(e,this.position,this.up),this.quaternion.setFromRotationMatrix(t)}}(),add:function(t){if(arguments.length>1){for(var e=0;e<arguments.length;e++)this.add(arguments[e]);return this}return t===this?this:(t&&t.isObject3D&&(null!==t.parent&&t.parent.remove(t),t.parent=this,t.dispatchEvent({type:"added"}),this.children.push(t)),this)},remove:function(t){if(arguments.length>1)for(var e=0;e<arguments.length;e++)this.remove(arguments[e]);var i=this.children.indexOf(t);-1!==i&&(t.parent=null,t.dispatchEvent({type:"removed"}),this.children.splice(i,1))},getObjectById:function(t){return this.getObjectByProperty("id",t)},getObjectByName:function(t){return this.getObjectByProperty("name",t)},getObjectByProperty:function(t,e){if(this[t]===e)return this;for(var i=0,n=this.children.length;i<n;i++){var r=this.children[i],a=r.getObjectByProperty(t,e);if(void 0!==a)return a}},getWorldPosition:function(t){var e=t||new s;return this.updateMatrixWorld(!0),e.setFromMatrixPosition(this.matrixWorld)},getWorldQuaternion:function(){var t=new s,e=new s;return function(i){var n=i||new o;return this.updateMatrixWorld(!0),this.matrixWorld.decompose(t,n,e),n}}(),getWorldRotation:function(){var t=new o;return function(e){var i=e||new rt;return this.getWorldQuaternion(t),i.setFromQuaternion(t,this.rotation.order,!1)}}(),getWorldScale:function(){var t=new s,e=new o;return function(i){var n=i||new s;return this.updateMatrixWorld(!0),this.matrixWorld.decompose(t,e,n),n}}(),getWorldDirection:function(){var t=new o;return function(e){var i=e||new s;return this.getWorldQuaternion(t),i.set(0,0,1).applyQuaternion(t)}}(),raycast:function(){},traverse:function(t){t(this);for(var e=this.children,i=0,n=e.length;i<n;i++)e[i].traverse(t)},traverseVisible:function(t){if(!1!==this.visible){t(this);for(var e=this.children,i=0,n=e.length;i<n;i++)e[i].traverseVisible(t)}},traverseAncestors:function(t){var e=this.parent;null!==e&&(t(e),e.traverseAncestors(t))},updateMatrix:function(){this.matrix.compose(this.position,this.quaternion,this.scale),this.matrixWorldNeedsUpdate=!0},updateMatrixWorld:function(t){!0===this.matrixAutoUpdate&&this.updateMatrix(),!0!==this.matrixWorldNeedsUpdate&&!0!==t||(null===this.parent?this.matrixWorld.copy(this.matrix):this.matrixWorld.multiplyMatrices(this.parent.matrixWorld,this.matrix),this.matrixWorldNeedsUpdate=!1,t=!0);for(var e=this.children,i=0,n=e.length;i<n;i++)e[i].updateMatrixWorld(t)},toJSON:function(t){function e(t){var e=[];for(var i in t){var n=t[i];delete n.metadata,e.push(n)}return e}var i=void 0===t||""===t,n={};i&&(t={geometries:{},materials:{},textures:{},images:{}},n.metadata={version:4.4,type:"Object",generator:"Object3D.toJSON"});var r={};if(r.uuid=this.uuid,r.type=this.type,""!==this.name&&(r.name=this.name),"{}"!==JSON.stringify(this.userData)&&(r.userData=this.userData),!0===this.castShadow&&(r.castShadow=!0),!0===this.receiveShadow&&(r.receiveShadow=!0),!1===this.visible&&(r.visible=!1),r.matrix=this.matrix.toArray(),void 0!==this.geometry&&(void 0===t.geometries[this.geometry.uuid]&&(t.geometries[this.geometry.uuid]=this.geometry.toJSON(t)),r.geometry=this.geometry.uuid),void 0!==this.material&&(void 0===t.materials[this.material.uuid]&&(t.materials[this.material.uuid]=this.material.toJSON(t)),r.material=this.material.uuid),this.children.length>0){r.children=[];for(var a=0;a<this.children.length;a++)r.children.push(this.children[a].toJSON(t).object)}if(i){var o=e(t.geometries),s=e(t.materials),c=e(t.textures),l=e(t.images);o.length>0&&(n.geometries=o),s.length>0&&(n.materials=s),c.length>0&&(n.textures=c),l.length>0&&(n.images=l)}return n.object=r,n},clone:function(t){return(new this.constructor).copy(this,t)},copy:function(t,e){if(void 0===e&&(e=!0),this.name=t.name,this.up.copy(t.up),this.position.copy(t.position),this.quaternion.copy(t.quaternion),this.scale.copy(t.scale),this.matrix.copy(t.matrix),this.matrixWorld.copy(t.matrixWorld),this.matrixAutoUpdate=t.matrixAutoUpdate,this.matrixWorldNeedsUpdate=t.matrixWorldNeedsUpdate,this.layers.mask=t.layers.mask,this.visible=t.visible,this.castShadow=t.castShadow,this.receiveShadow=t.receiveShadow,this.frustumCulled=t.frustumCulled,this.renderOrder=t.renderOrder,this.userData=JSON.parse(JSON.stringify(t.userData)),!0===e)for(var i=0;i<t.children.length;i++){var n=t.children[i];this.add(n.clone())}return this}},Object.assign(ot.prototype,e.prototype),st.prototype={constructor:st,set:function(t,e){return this.start.copy(t),this.end.copy(e),this},clone:function(){return(new this.constructor).copy(this)},copy:function(t){return this.start.copy(t.start),this.end.copy(t.end),this},getCenter:function(t){return(t||new s).addVectors(this.start,this.end).multiplyScalar(.5)},delta:function(t){return(t||new s).subVectors(this.end,this.start)},distanceSq:function(){return this.start.distanceToSquared(this.end)},distance:function(){return this.start.distanceTo(this.end)},at:function(t,e){var i=e||new s;return this.delta(i).multiplyScalar(t).add(this.start)},closestPointToPointParameter:function(){var t=new s,e=new s;return function(i,n){t.subVectors(i,this.start),e.subVectors(this.end,this.start);var r=e.dot(e),a=e.dot(t),o=a/r;return n&&(o=wr.clamp(o,0,1)),o}}(),closestPointToPoint:function(t,e,i){var n=this.closestPointToPointParameter(t,e),r=i||new s;return this.delta(r).multiplyScalar(n).add(this.start)},applyMatrix4:function(t){return this.start.applyMatrix4(t),this.end.applyMatrix4(t),this},equals:function(t){return t.start.equals(this.start)&&t.end.equals(this.end)}},ct.normal=function(){var t=new s;return function(e,i,n,r){var a=r||new s;a.subVectors(n,i),t.subVectors(e,i),a.cross(t);var o=a.lengthSq();return o>0?a.multiplyScalar(1/Math.sqrt(o)):a.set(0,0,0)}}(),ct.barycoordFromPoint=function(){var t=new s,e=new s,i=new s;return function(n,r,a,o,c){t.subVectors(o,r),e.subVectors(a,r),i.subVectors(n,r);var l=t.dot(t),h=t.dot(e),u=t.dot(i),f=e.dot(e),d=e.dot(i),p=l*f-h*h,m=c||new s;if(0===p)return m.set(-2,-1,-1);var g=1/p,v=(f*u-h*d)*g,x=(l*d-h*u)*g;return m.set(1-v-x,x,v)}}(),ct.containsPoint=function(){var t=new s;return function(e,i,n,r){var a=ct.barycoordFromPoint(e,i,n,r,t);return a.x>=0&&a.y>=0&&a.x+a.y<=1}}(),ct.prototype={constructor:ct,set:function(t,e,i){return this.a.copy(t),this.b.copy(e),this.c.copy(i),this},setFromPointsAndIndices:function(t,e,i,n){return this.a.copy(t[e]),this.b.copy(t[i]),this.c.copy(t[n]),this},clone:function(){return(new this.constructor).copy(this)},copy:function(t){return this.a.copy(t.a),this.b.copy(t.b),this.c.copy(t.c),this},area:function(){var t=new s,e=new s;return function(){return t.subVectors(this.c,this.b),e.subVectors(this.a,this.b),.5*t.cross(e).length()}}(),midpoint:function(t){return(t||new s).addVectors(this.a,this.b).add(this.c).multiplyScalar(1/3)},normal:function(t){return ct.normal(this.a,this.b,this.c,t)},plane:function(t){return(t||new tt).setFromCoplanarPoints(this.a,this.b,this.c)},barycoordFromPoint:function(t,e){return ct.barycoordFromPoint(t,this.a,this.b,this.c,e)},containsPoint:function(t){return ct.containsPoint(t,this.a,this.b,this.c)},closestPointToPoint:function(){var t,e,i,n;return function(r,a){void 0===t&&(t=new tt,e=[new st,new st,new st],i=new s,n=new s);var o=a||new s,c=1/0;if(t.setFromCoplanarPoints(this.a,this.b,this.c),t.projectPoint(r,i),!0===this.containsPoint(i))o.copy(i);else{e[0].set(this.a,this.b),e[1].set(this.b,this.c),e[2].set(this.c,this.a);for(var l=0;l<e.length;l++){e[l].closestPointToPoint(i,!0,n);var h=i.distanceToSquared(n);h<c&&(c=h,o.copy(n))}}return o}}(),equals:function(t){return t.a.equals(this.a)&&t.b.equals(this.b)&&t.c.equals(this.c)}},lt.prototype={constructor:lt,clone:function(){return(new this.constructor).copy(this)},copy:function(t){this.a=t.a,this.b=t.b,this.c=t.c,this.normal.copy(t.normal),this.color.copy(t.color),this.materialIndex=t.materialIndex;for(var e=0,i=t.vertexNormals.length;e<i;e++)this.vertexNormals[e]=t.vertexNormals[e].clone();for(var e=0,i=t.vertexColors.length;e<i;e++)this.vertexColors[e]=t.vertexColors[e].clone();return this}},ht.prototype=Object.create(q.prototype),ht.prototype.constructor=ht,ht.prototype.isMeshBasicMaterial=!0,ht.prototype.copy=function(t){return q.prototype.copy.call(this,t),this.color.copy(t.color),this.map=t.map,this.lightMap=t.lightMap,this.lightMapIntensity=t.lightMapIntensity,this.aoMap=t.aoMap,this.aoMapIntensity=t.aoMapIntensity,this.specularMap=t.specularMap,this.alphaMap=t.alphaMap,this.envMap=t.envMap,this.combine=t.combine,this.reflectivity=t.reflectivity,this.refractionRatio=t.refractionRatio,this.wireframe=t.wireframe,this.wireframeLinewidth=t.wireframeLinewidth,this.wireframeLinecap=t.wireframeLinecap,this.wireframeLinejoin=t.wireframeLinejoin,this.skinning=t.skinning,this.morphTargets=t.morphTargets,this},ut.prototype={constructor:ut,isBufferAttribute:!0,set needsUpdate(t){!0===t&&this.version++},setArray:function(t){if(Array.isArray(t))throw new TypeError("THREE.BufferAttribute: array should be a Typed Array.");this.count=void 0!==t?t.length/this.itemSize:0,this.array=t},setDynamic:function(t){return this.dynamic=t,this},copy:function(t){return this.array=new t.array.constructor(t.array),this.itemSize=t.itemSize,this.count=t.count,this.normalized=t.normalized,this.dynamic=t.dynamic,this},copyAt:function(t,e,i){t*=this.itemSize,i*=e.itemSize;for(var n=0,r=this.itemSize;n<r;n++)this.array[t+n]=e.array[i+n];return this},copyArray:function(t){return this.array.set(t),this},copyColorsArray:function(t){for(var e=this.array,i=0,n=0,r=t.length;n<r;n++){var a=t[n];void 0===a&&(a=new W),e[i++]=a.r,e[i++]=a.g,e[i++]=a.b}return this},copyIndicesArray:function(t){for(var e=this.array,i=0,n=0,r=t.length;n<r;n++){var a=t[n];e[i++]=a.a,e[i++]=a.b,e[i++]=a.c}return this},copyVector2sArray:function(t){for(var e=this.array,n=0,r=0,a=t.length;r<a;r++){var o=t[r];void 0===o&&(o=new i),e[n++]=o.x,e[n++]=o.y}return this},copyVector3sArray:function(t){for(var e=this.array,i=0,n=0,r=t.length;n<r;n++){var a=t[n];void 0===a&&(a=new s),e[i++]=a.x,e[i++]=a.y,e[i++]=a.z}return this},copyVector4sArray:function(t){for(var e=this.array,i=0,n=0,a=t.length;n<a;n++){var o=t[n];void 0===o&&(o=new r),e[i++]=o.x,e[i++]=o.y,e[i++]=o.z,e[i++]=o.w}return this},set:function(t,e){return void 0===e&&(e=0),this.array.set(t,e),this},getX:function(t){return this.array[t*this.itemSize]},setX:function(t,e){return this.array[t*this.itemSize]=e,this},getY:function(t){return this.array[t*this.itemSize+1]},setY:function(t,e){return this.array[t*this.itemSize+1]=e,this},getZ:function(t){return this.array[t*this.itemSize+2]},setZ:function(t,e){return this.array[t*this.itemSize+2]=e,this},getW:function(t){return this.array[t*this.itemSize+3]},setW:function(t,e){return this.array[t*this.itemSize+3]=e,this},setXY:function(t,e,i){return t*=this.itemSize,this.array[t+0]=e,this.array[t+1]=i,this},setXYZ:function(t,e,i,n){return t*=this.itemSize,this.array[t+0]=e,this.array[t+1]=i,this.array[t+2]=n,this},setXYZW:function(t,e,i,n,r){return t*=this.itemSize,this.array[t+0]=e,this.array[t+1]=i,this.array[t+2]=n,this.array[t+3]=r,this},onUpload:function(t){return this.onUploadCallback=t,this},clone:function(){return new this.constructor(this.array,this.itemSize).copy(this)}},
ft.prototype=Object.create(ut.prototype),ft.prototype.constructor=ft,dt.prototype=Object.create(ut.prototype),dt.prototype.constructor=dt,pt.prototype=Object.create(ut.prototype),pt.prototype.constructor=pt,Object.assign(mt.prototype,{computeGroups:function(t){for(var e,i=[],n=void 0,r=t.faces,a=0;a<r.length;a++){var o=r[a];o.materialIndex!==n&&(n=o.materialIndex,void 0!==e&&(e.count=3*a-e.start,i.push(e)),e={start:3*a,materialIndex:n})}void 0!==e&&(e.count=3*a-e.start,i.push(e)),this.groups=i},fromGeometry:function(t){var e,n=t.faces,r=t.vertices,a=t.faceVertexUvs,o=a[0]&&a[0].length>0,s=a[1]&&a[1].length>0,c=t.morphTargets,l=c.length;if(l>0){e=[];for(var h=0;h<l;h++)e[h]=[];this.morphTargets.position=e}var u,f=t.morphNormals,d=f.length;if(d>0){u=[];for(var h=0;h<d;h++)u[h]=[];this.morphTargets.normal=u}for(var p=t.skinIndices,m=t.skinWeights,g=p.length===r.length,v=m.length===r.length,h=0;h<n.length;h++){var x=n[h];this.vertices.push(r[x.a],r[x.b],r[x.c]);var y=x.vertexNormals;if(3===y.length)this.normals.push(y[0],y[1],y[2]);else{var _=x.normal;this.normals.push(_,_,_)}var M=x.vertexColors;if(3===M.length)this.colors.push(M[0],M[1],M[2]);else{var b=x.color;this.colors.push(b,b,b)}if(!0===o){var w=a[0][h];void 0!==w?this.uvs.push(w[0],w[1],w[2]):this.uvs.push(new i,new i,new i)}if(!0===s){var w=a[1][h];void 0!==w?this.uvs2.push(w[0],w[1],w[2]):this.uvs2.push(new i,new i,new i)}for(var S=0;S<l;S++){var E=c[S].vertices;e[S].push(E[x.a],E[x.b],E[x.c])}for(var S=0;S<d;S++){var T=f[S].vertexNormals[h];u[S].push(T.a,T.b,T.c)}g&&this.skinIndices.push(p[x.a],p[x.b],p[x.c]),v&&this.skinWeights.push(m[x.a],m[x.b],m[x.c])}return this.computeGroups(t),this.verticesNeedUpdate=t.verticesNeedUpdate,this.normalsNeedUpdate=t.normalsNeedUpdate,this.colorsNeedUpdate=t.colorsNeedUpdate,this.uvsNeedUpdate=t.uvsNeedUpdate,this.groupsNeedUpdate=t.groupsNeedUpdate,this}});var zr=0;xt.prototype={constructor:xt,isGeometry:!0,applyMatrix:function(t){for(var e=(new $).getNormalMatrix(t),i=0,n=this.vertices.length;i<n;i++){this.vertices[i].applyMatrix4(t)}for(var i=0,n=this.faces.length;i<n;i++){var r=this.faces[i];r.normal.applyMatrix3(e).normalize();for(var a=0,o=r.vertexNormals.length;a<o;a++)r.vertexNormals[a].applyMatrix3(e).normalize()}return null!==this.boundingBox&&this.computeBoundingBox(),null!==this.boundingSphere&&this.computeBoundingSphere(),this.verticesNeedUpdate=!0,this.normalsNeedUpdate=!0,this},rotateX:function(){var t;return function(e){return void 0===t&&(t=new c),t.makeRotationX(e),this.applyMatrix(t),this}}(),rotateY:function(){var t;return function(e){return void 0===t&&(t=new c),t.makeRotationY(e),this.applyMatrix(t),this}}(),rotateZ:function(){var t;return function(e){return void 0===t&&(t=new c),t.makeRotationZ(e),this.applyMatrix(t),this}}(),translate:function(){var t;return function(e,i,n){return void 0===t&&(t=new c),t.makeTranslation(e,i,n),this.applyMatrix(t),this}}(),scale:function(){var t;return function(e,i,n){return void 0===t&&(t=new c),t.makeScale(e,i,n),this.applyMatrix(t),this}}(),lookAt:function(){var t;return function(e){void 0===t&&(t=new ot),t.lookAt(e),t.updateMatrix(),this.applyMatrix(t.matrix)}}(),fromBufferGeometry:function(t){function e(t,e,i,r){var a=void 0!==c?[f[t].clone(),f[e].clone(),f[i].clone()]:[],o=void 0!==l?[n.colors[t].clone(),n.colors[e].clone(),n.colors[i].clone()]:[],s=new lt(t,e,i,a,o,r);n.faces.push(s),void 0!==h&&n.faceVertexUvs[0].push([d[t].clone(),d[e].clone(),d[i].clone()]),void 0!==u&&n.faceVertexUvs[1].push([p[t].clone(),p[e].clone(),p[i].clone()])}var n=this,r=null!==t.index?t.index.array:void 0,a=t.attributes,o=a.position.array,c=void 0!==a.normal?a.normal.array:void 0,l=void 0!==a.color?a.color.array:void 0,h=void 0!==a.uv?a.uv.array:void 0,u=void 0!==a.uv2?a.uv2.array:void 0;void 0!==u&&(this.faceVertexUvs[1]=[]);for(var f=[],d=[],p=[],m=0,g=0;m<o.length;m+=3,g+=2)n.vertices.push(new s(o[m],o[m+1],o[m+2])),void 0!==c&&f.push(new s(c[m],c[m+1],c[m+2])),void 0!==l&&n.colors.push(new W(l[m],l[m+1],l[m+2])),void 0!==h&&d.push(new i(h[g],h[g+1])),void 0!==u&&p.push(new i(u[g],u[g+1]));if(void 0!==r){var v=t.groups;if(v.length>0)for(var m=0;m<v.length;m++)for(var x=v[m],y=x.start,_=x.count,g=y,M=y+_;g<M;g+=3)e(r[g],r[g+1],r[g+2],x.materialIndex);else for(var m=0;m<r.length;m+=3)e(r[m],r[m+1],r[m+2])}else for(var m=0;m<o.length/3;m+=3)e(m,m+1,m+2);return this.computeFaceNormals(),null!==t.boundingBox&&(this.boundingBox=t.boundingBox.clone()),null!==t.boundingSphere&&(this.boundingSphere=t.boundingSphere.clone()),this},center:function(){this.computeBoundingBox();var t=this.boundingBox.getCenter().negate();return this.translate(t.x,t.y,t.z),t},normalize:function(){this.computeBoundingSphere();var t=this.boundingSphere.center,e=this.boundingSphere.radius,i=0===e?1:1/e,n=new c;return n.set(i,0,0,-i*t.x,0,i,0,-i*t.y,0,0,i,-i*t.z,0,0,0,1),this.applyMatrix(n),this},computeFaceNormals:function(){for(var t=new s,e=new s,i=0,n=this.faces.length;i<n;i++){var r=this.faces[i],a=this.vertices[r.a],o=this.vertices[r.b],c=this.vertices[r.c];t.subVectors(c,o),e.subVectors(a,o),t.cross(e),t.normalize(),r.normal.copy(t)}},computeVertexNormals:function(t){void 0===t&&(t=!0);var e,i,n,r,a,o;for(o=new Array(this.vertices.length),e=0,i=this.vertices.length;e<i;e++)o[e]=new s;if(t){var c,l,h,u=new s,f=new s;for(n=0,r=this.faces.length;n<r;n++)a=this.faces[n],c=this.vertices[a.a],l=this.vertices[a.b],h=this.vertices[a.c],u.subVectors(h,l),f.subVectors(c,l),u.cross(f),o[a.a].add(u),o[a.b].add(u),o[a.c].add(u)}else for(this.computeFaceNormals(),n=0,r=this.faces.length;n<r;n++)a=this.faces[n],o[a.a].add(a.normal),o[a.b].add(a.normal),o[a.c].add(a.normal);for(e=0,i=this.vertices.length;e<i;e++)o[e].normalize();for(n=0,r=this.faces.length;n<r;n++){a=this.faces[n];var d=a.vertexNormals;3===d.length?(d[0].copy(o[a.a]),d[1].copy(o[a.b]),d[2].copy(o[a.c])):(d[0]=o[a.a].clone(),d[1]=o[a.b].clone(),d[2]=o[a.c].clone())}this.faces.length>0&&(this.normalsNeedUpdate=!0)},computeFlatVertexNormals:function(){var t,e,i;for(this.computeFaceNormals(),t=0,e=this.faces.length;t<e;t++){i=this.faces[t];var n=i.vertexNormals;3===n.length?(n[0].copy(i.normal),n[1].copy(i.normal),n[2].copy(i.normal)):(n[0]=i.normal.clone(),n[1]=i.normal.clone(),n[2]=i.normal.clone())}this.faces.length>0&&(this.normalsNeedUpdate=!0)},computeMorphNormals:function(){var t,e,i,n,r;for(i=0,n=this.faces.length;i<n;i++)for(r=this.faces[i],r.__originalFaceNormal?r.__originalFaceNormal.copy(r.normal):r.__originalFaceNormal=r.normal.clone(),r.__originalVertexNormals||(r.__originalVertexNormals=[]),t=0,e=r.vertexNormals.length;t<e;t++)r.__originalVertexNormals[t]?r.__originalVertexNormals[t].copy(r.vertexNormals[t]):r.__originalVertexNormals[t]=r.vertexNormals[t].clone();var a=new xt;for(a.faces=this.faces,t=0,e=this.morphTargets.length;t<e;t++){if(!this.morphNormals[t]){this.morphNormals[t]={},this.morphNormals[t].faceNormals=[],this.morphNormals[t].vertexNormals=[];var o,c,l=this.morphNormals[t].faceNormals,h=this.morphNormals[t].vertexNormals;for(i=0,n=this.faces.length;i<n;i++)o=new s,c={a:new s,b:new s,c:new s},l.push(o),h.push(c)}var u=this.morphNormals[t];a.vertices=this.morphTargets[t].vertices,a.computeFaceNormals(),a.computeVertexNormals();var o,c;for(i=0,n=this.faces.length;i<n;i++)r=this.faces[i],o=u.faceNormals[i],c=u.vertexNormals[i],o.copy(r.normal),c.a.copy(r.vertexNormals[0]),c.b.copy(r.vertexNormals[1]),c.c.copy(r.vertexNormals[2])}for(i=0,n=this.faces.length;i<n;i++)r=this.faces[i],r.normal=r.__originalFaceNormal,r.vertexNormals=r.__originalVertexNormals},computeLineDistances:function(){for(var t=0,e=this.vertices,i=0,n=e.length;i<n;i++)i>0&&(t+=e[i].distanceTo(e[i-1])),this.lineDistances[i]=t},computeBoundingBox:function(){null===this.boundingBox&&(this.boundingBox=new Q),this.boundingBox.setFromPoints(this.vertices)},computeBoundingSphere:function(){null===this.boundingSphere&&(this.boundingSphere=new K),this.boundingSphere.setFromPoints(this.vertices)},merge:function(t,e,i){if(!1!==(t&&t.isGeometry)){var n,r=this.vertices.length,a=this.vertices,o=t.vertices,s=this.faces,c=t.faces,l=this.faceVertexUvs[0],h=t.faceVertexUvs[0],u=this.colors,f=t.colors;void 0===i&&(i=0),void 0!==e&&(n=(new $).getNormalMatrix(e));for(var d=0,p=o.length;d<p;d++){var m=o[d],g=m.clone();void 0!==e&&g.applyMatrix4(e),a.push(g)}for(var d=0,p=f.length;d<p;d++)u.push(f[d].clone());for(d=0,p=c.length;d<p;d++){var v,x,y,_=c[d],M=_.vertexNormals,b=_.vertexColors;v=new lt(_.a+r,_.b+r,_.c+r),v.normal.copy(_.normal),void 0!==n&&v.normal.applyMatrix3(n).normalize();for(var w=0,S=M.length;w<S;w++)x=M[w].clone(),void 0!==n&&x.applyMatrix3(n).normalize(),v.vertexNormals.push(x);v.color.copy(_.color);for(var w=0,S=b.length;w<S;w++)y=b[w],v.vertexColors.push(y.clone());v.materialIndex=_.materialIndex+i,s.push(v)}for(d=0,p=h.length;d<p;d++){var E=h[d],T=[];if(void 0!==E){for(var w=0,S=E.length;w<S;w++)T.push(E[w].clone());l.push(T)}}}},mergeMesh:function(t){!1!==(t&&t.isMesh)&&(t.matrixAutoUpdate&&t.updateMatrix(),this.merge(t.geometry,t.matrix))},mergeVertices:function(){var t,e,i,n,r,a,o,s,c={},l=[],h=[],u=Math.pow(10,4);for(i=0,n=this.vertices.length;i<n;i++)t=this.vertices[i],e=Math.round(t.x*u)+"_"+Math.round(t.y*u)+"_"+Math.round(t.z*u),void 0===c[e]?(c[e]=i,l.push(this.vertices[i]),h[i]=l.length-1):h[i]=h[c[e]];var f=[];for(i=0,n=this.faces.length;i<n;i++){r=this.faces[i],r.a=h[r.a],r.b=h[r.b],r.c=h[r.c],a=[r.a,r.b,r.c];for(var d=0;d<3;d++)if(a[d]===a[(d+1)%3]){f.push(i);break}}for(i=f.length-1;i>=0;i--){var p=f[i];for(this.faces.splice(p,1),o=0,s=this.faceVertexUvs.length;o<s;o++)this.faceVertexUvs[o].splice(p,1)}var m=this.vertices.length-l.length;return this.vertices=l,m},sortFacesByMaterialIndex:function(){function t(t,e){return t.materialIndex-e.materialIndex}for(var e=this.faces,i=e.length,n=0;n<i;n++)e[n]._id=n;e.sort(t);var r,a,o=this.faceVertexUvs[0],s=this.faceVertexUvs[1];o&&o.length===i&&(r=[]),s&&s.length===i&&(a=[]);for(var n=0;n<i;n++){var c=e[n]._id;r&&r.push(o[c]),a&&a.push(s[c])}r&&(this.faceVertexUvs[0]=r),a&&(this.faceVertexUvs[1]=a)},toJSON:function(){function t(t,e,i){return i?t|1<<e:t&~(1<<e)}function e(t){var e=t.x.toString()+t.y.toString()+t.z.toString();return void 0!==f[e]?f[e]:(f[e]=u.length/3,u.push(t.x,t.y,t.z),f[e])}function i(t){var e=t.r.toString()+t.g.toString()+t.b.toString();return void 0!==p[e]?p[e]:(p[e]=d.length,d.push(t.getHex()),p[e])}function n(t){var e=t.x.toString()+t.y.toString();return void 0!==g[e]?g[e]:(g[e]=m.length/2,m.push(t.x,t.y),g[e])}var r={metadata:{version:4.4,type:"Geometry",generator:"Geometry.toJSON"}};if(r.uuid=this.uuid,r.type=this.type,""!==this.name&&(r.name=this.name),void 0!==this.parameters){var a=this.parameters;for(var o in a)void 0!==a[o]&&(r[o]=a[o]);return r}for(var s=[],c=0;c<this.vertices.length;c++){var l=this.vertices[c];s.push(l.x,l.y,l.z)}for(var h=[],u=[],f={},d=[],p={},m=[],g={},c=0;c<this.faces.length;c++){var v=this.faces[c],x=void 0!==this.faceVertexUvs[0][c],y=v.normal.length()>0,_=v.vertexNormals.length>0,M=1!==v.color.r||1!==v.color.g||1!==v.color.b,b=v.vertexColors.length>0,w=0;if(w=t(w,0,0),w=t(w,1,!0),w=t(w,2,!1),w=t(w,3,x),w=t(w,4,y),w=t(w,5,_),w=t(w,6,M),w=t(w,7,b),h.push(w),h.push(v.a,v.b,v.c),h.push(v.materialIndex),x){var S=this.faceVertexUvs[0][c];h.push(n(S[0]),n(S[1]),n(S[2]))}if(y&&h.push(e(v.normal)),_){var E=v.vertexNormals;h.push(e(E[0]),e(E[1]),e(E[2]))}if(M&&h.push(i(v.color)),b){var T=v.vertexColors;h.push(i(T[0]),i(T[1]),i(T[2]))}}return r.data={},r.data.vertices=s,r.data.normals=u,d.length>0&&(r.data.colors=d),m.length>0&&(r.data.uvs=[m]),r.data.faces=h,r},clone:function(){return(new xt).copy(this)},copy:function(t){var e,i,n,r,a,o;this.vertices=[],this.colors=[],this.faces=[],this.faceVertexUvs=[[]],this.morphTargets=[],this.morphNormals=[],this.skinWeights=[],this.skinIndices=[],this.lineDistances=[],this.boundingBox=null,this.boundingSphere=null,this.name=t.name;var s=t.vertices;for(e=0,i=s.length;e<i;e++)this.vertices.push(s[e].clone());var c=t.colors;for(e=0,i=c.length;e<i;e++)this.colors.push(c[e].clone());var l=t.faces;for(e=0,i=l.length;e<i;e++)this.faces.push(l[e].clone());for(e=0,i=t.faceVertexUvs.length;e<i;e++){var h=t.faceVertexUvs[e];for(void 0===this.faceVertexUvs[e]&&(this.faceVertexUvs[e]=[]),n=0,r=h.length;n<r;n++){var u=h[n],f=[];for(a=0,o=u.length;a<o;a++){var d=u[a];f.push(d.clone())}this.faceVertexUvs[e].push(f)}}var p=t.morphTargets;for(e=0,i=p.length;e<i;e++){var m={};if(m.name=p[e].name,void 0!==p[e].vertices)for(m.vertices=[],n=0,r=p[e].vertices.length;n<r;n++)m.vertices.push(p[e].vertices[n].clone());if(void 0!==p[e].normals)for(m.normals=[],n=0,r=p[e].normals.length;n<r;n++)m.normals.push(p[e].normals[n].clone());this.morphTargets.push(m)}var g=t.morphNormals;for(e=0,i=g.length;e<i;e++){var v={};if(void 0!==g[e].vertexNormals)for(v.vertexNormals=[],n=0,r=g[e].vertexNormals.length;n<r;n++){var x=g[e].vertexNormals[n],y={};y.a=x.a.clone(),y.b=x.b.clone(),y.c=x.c.clone(),v.vertexNormals.push(y)}if(void 0!==g[e].faceNormals)for(v.faceNormals=[],n=0,r=g[e].faceNormals.length;n<r;n++)v.faceNormals.push(g[e].faceNormals[n].clone());this.morphNormals.push(v)}var _=t.skinWeights;for(e=0,i=_.length;e<i;e++)this.skinWeights.push(_[e].clone());var M=t.skinIndices;for(e=0,i=M.length;e<i;e++)this.skinIndices.push(M[e].clone());var b=t.lineDistances;for(e=0,i=b.length;e<i;e++)this.lineDistances.push(b[e]);var w=t.boundingBox;null!==w&&(this.boundingBox=w.clone());var S=t.boundingSphere;return null!==S&&(this.boundingSphere=S.clone()),this.elementsNeedUpdate=t.elementsNeedUpdate,this.verticesNeedUpdate=t.verticesNeedUpdate,this.uvsNeedUpdate=t.uvsNeedUpdate,this.normalsNeedUpdate=t.normalsNeedUpdate,this.colorsNeedUpdate=t.colorsNeedUpdate,this.lineDistancesNeedUpdate=t.lineDistancesNeedUpdate,this.groupsNeedUpdate=t.groupsNeedUpdate,this},dispose:function(){this.dispatchEvent({type:"dispose"})}},Object.assign(xt.prototype,e.prototype),yt.prototype={constructor:yt,isBufferGeometry:!0,getIndex:function(){return this.index},setIndex:function(t){Array.isArray(t)?this.index=new(gt(t)>65535?dt:ft)(t,1):this.index=t},addAttribute:function(t,e){return!1===(e&&e.isBufferAttribute)&&!1===(e&&e.isInterleavedBufferAttribute)?void this.addAttribute(t,new ut(arguments[1],arguments[2])):"index"===t?void this.setIndex(e):(this.attributes[t]=e,this)},getAttribute:function(t){return this.attributes[t]},removeAttribute:function(t){return delete this.attributes[t],this},addGroup:function(t,e,i){this.groups.push({start:t,count:e,materialIndex:void 0!==i?i:0})},clearGroups:function(){this.groups=[]},setDrawRange:function(t,e){this.drawRange.start=t,this.drawRange.count=e},applyMatrix:function(t){var e=this.attributes.position;void 0!==e&&(t.applyToBufferAttribute(e),e.needsUpdate=!0);var i=this.attributes.normal;if(void 0!==i){(new $).getNormalMatrix(t).applyToBufferAttribute(i),i.needsUpdate=!0}return null!==this.boundingBox&&this.computeBoundingBox(),null!==this.boundingSphere&&this.computeBoundingSphere(),this},rotateX:function(){var t;return function(e){return void 0===t&&(t=new c),t.makeRotationX(e),this.applyMatrix(t),this}}(),rotateY:function(){var t;return function(e){return void 0===t&&(t=new c),t.makeRotationY(e),this.applyMatrix(t),this}}(),rotateZ:function(){var t;return function(e){return void 0===t&&(t=new c),t.makeRotationZ(e),this.applyMatrix(t),this}}(),translate:function(){var t;return function(e,i,n){return void 0===t&&(t=new c),t.makeTranslation(e,i,n),this.applyMatrix(t),this}}(),scale:function(){var t;return function(e,i,n){return void 0===t&&(t=new c),t.makeScale(e,i,n),this.applyMatrix(t),this}}(),lookAt:function(){var t;return function(e){void 0===t&&(t=new ot),t.lookAt(e),t.updateMatrix(),this.applyMatrix(t.matrix)}}(),center:function(){this.computeBoundingBox();var t=this.boundingBox.getCenter().negate();return this.translate(t.x,t.y,t.z),t},setFromObject:function(t){var e=t.geometry;if(t.isPoints||t.isLine){var i=new pt(3*e.vertices.length,3),n=new pt(3*e.colors.length,3);if(this.addAttribute("position",i.copyVector3sArray(e.vertices)),this.addAttribute("color",n.copyColorsArray(e.colors)),e.lineDistances&&e.lineDistances.length===e.vertices.length){var r=new pt(e.lineDistances.length,1);this.addAttribute("lineDistance",r.copyArray(e.lineDistances))}null!==e.boundingSphere&&(this.boundingSphere=e.boundingSphere.clone()),null!==e.boundingBox&&(this.boundingBox=e.boundingBox.clone())}else t.isMesh&&e&&e.isGeometry&&this.fromGeometry(e);return this},updateFromObject:function(t){var e=t.geometry;if(t.isMesh){var i=e.__directGeometry;if(!0===e.elementsNeedUpdate&&(i=void 0,e.elementsNeedUpdate=!1),void 0===i)return this.fromGeometry(e);i.verticesNeedUpdate=e.verticesNeedUpdate,i.normalsNeedUpdate=e.normalsNeedUpdate,i.colorsNeedUpdate=e.colorsNeedUpdate,i.uvsNeedUpdate=e.uvsNeedUpdate,i.groupsNeedUpdate=e.groupsNeedUpdate,e.verticesNeedUpdate=!1,e.normalsNeedUpdate=!1,e.colorsNeedUpdate=!1,e.uvsNeedUpdate=!1,e.groupsNeedUpdate=!1,e=i}var n;return!0===e.verticesNeedUpdate&&(n=this.attributes.position,void 0!==n&&(n.copyVector3sArray(e.vertices),n.needsUpdate=!0),e.verticesNeedUpdate=!1),!0===e.normalsNeedUpdate&&(n=this.attributes.normal,void 0!==n&&(n.copyVector3sArray(e.normals),n.needsUpdate=!0),e.normalsNeedUpdate=!1),!0===e.colorsNeedUpdate&&(n=this.attributes.color,void 0!==n&&(n.copyColorsArray(e.colors),n.needsUpdate=!0),e.colorsNeedUpdate=!1),e.uvsNeedUpdate&&(n=this.attributes.uv,void 0!==n&&(n.copyVector2sArray(e.uvs),n.needsUpdate=!0),e.uvsNeedUpdate=!1),e.lineDistancesNeedUpdate&&(n=this.attributes.lineDistance,void 0!==n&&(n.copyArray(e.lineDistances),n.needsUpdate=!0),e.lineDistancesNeedUpdate=!1),e.groupsNeedUpdate&&(e.computeGroups(t.geometry),this.groups=e.groups,e.groupsNeedUpdate=!1),this},fromGeometry:function(t){return t.__directGeometry=(new mt).fromGeometry(t),this.fromDirectGeometry(t.__directGeometry)},fromDirectGeometry:function(t){var e=new Float32Array(3*t.vertices.length);if(this.addAttribute("position",new ut(e,3).copyVector3sArray(t.vertices)),t.normals.length>0){var i=new Float32Array(3*t.normals.length);this.addAttribute("normal",new ut(i,3).copyVector3sArray(t.normals))}if(t.colors.length>0){var n=new Float32Array(3*t.colors.length);this.addAttribute("color",new ut(n,3).copyColorsArray(t.colors))}if(t.uvs.length>0){var r=new Float32Array(2*t.uvs.length);this.addAttribute("uv",new ut(r,2).copyVector2sArray(t.uvs))}if(t.uvs2.length>0){var a=new Float32Array(2*t.uvs2.length);this.addAttribute("uv2",new ut(a,2).copyVector2sArray(t.uvs2))}if(t.indices.length>0){var o=gt(t.indices)>65535?Uint32Array:Uint16Array,s=new o(3*t.indices.length);this.setIndex(new ut(s,1).copyIndicesArray(t.indices))}this.groups=t.groups;for(var c in t.morphTargets){for(var l=[],h=t.morphTargets[c],u=0,f=h.length;u<f;u++){var d=h[u],p=new pt(3*d.length,3);l.push(p.copyVector3sArray(d))}this.morphAttributes[c]=l}if(t.skinIndices.length>0){var m=new pt(4*t.skinIndices.length,4);this.addAttribute("skinIndex",m.copyVector4sArray(t.skinIndices))}if(t.skinWeights.length>0){var g=new pt(4*t.skinWeights.length,4);this.addAttribute("skinWeight",g.copyVector4sArray(t.skinWeights))}return null!==t.boundingSphere&&(this.boundingSphere=t.boundingSphere.clone()),null!==t.boundingBox&&(this.boundingBox=t.boundingBox.clone()),this},computeBoundingBox:function(){null===this.boundingBox&&(this.boundingBox=new Q);var t=this.attributes.position;void 0!==t?this.boundingBox.setFromBufferAttribute(t):this.boundingBox.makeEmpty(),isNaN(this.boundingBox.min.x)||isNaN(this.boundingBox.min.y)||isNaN(this.boundingBox.min.z)},computeBoundingSphere:function(){var t=new Q,e=new s;return function(){null===this.boundingSphere&&(this.boundingSphere=new K);var i=this.attributes.position;if(i){var n=this.boundingSphere.center;t.setFromBufferAttribute(i),t.getCenter(n);for(var r=0,a=0,o=i.count;a<o;a++)e.x=i.getX(a),e.y=i.getY(a),e.z=i.getZ(a),r=Math.max(r,n.distanceToSquared(e));this.boundingSphere.radius=Math.sqrt(r),isNaN(this.boundingSphere.radius)}}}(),computeFaceNormals:function(){},computeVertexNormals:function(){var t=this.index,e=this.attributes,i=this.groups;if(e.position){var n=e.position.array;if(void 0===e.normal)this.addAttribute("normal",new ut(new Float32Array(n.length),3));else for(var r=e.normal.array,a=0,o=r.length;a<o;a++)r[a]=0;var c,l,h,u=e.normal.array,f=new s,d=new s,p=new s,m=new s,g=new s;if(t){var v=t.array;0===i.length&&this.addGroup(0,v.length);for(var x=0,y=i.length;x<y;++x)for(var _=i[x],M=_.start,b=_.count,a=M,o=M+b;a<o;a+=3)c=3*v[a+0],l=3*v[a+1],h=3*v[a+2],f.fromArray(n,c),d.fromArray(n,l),p.fromArray(n,h),m.subVectors(p,d),g.subVectors(f,d),m.cross(g),u[c]+=m.x,u[c+1]+=m.y,u[c+2]+=m.z,u[l]+=m.x,u[l+1]+=m.y,u[l+2]+=m.z,u[h]+=m.x,u[h+1]+=m.y,u[h+2]+=m.z}else for(var a=0,o=n.length;a<o;a+=9)f.fromArray(n,a),d.fromArray(n,a+3),p.fromArray(n,a+6),m.subVectors(p,d),g.subVectors(f,d),m.cross(g),u[a]=m.x,u[a+1]=m.y,u[a+2]=m.z,u[a+3]=m.x,u[a+4]=m.y,u[a+5]=m.z,u[a+6]=m.x,u[a+7]=m.y,u[a+8]=m.z;this.normalizeNormals(),e.normal.needsUpdate=!0}},merge:function(t,e){if(!1!==(t&&t.isBufferGeometry)){void 0===e&&(e=0);var i=this.attributes;for(var n in i)if(void 0!==t.attributes[n])for(var r=i[n],a=r.array,o=t.attributes[n],s=o.array,c=o.itemSize,l=0,h=c*e;l<s.length;l++,h++)a[h]=s[l];return this}},normalizeNormals:function(){for(var t,e,i,n,r=this.attributes.normal.array,a=0,o=r.length;a<o;a+=3)t=r[a],e=r[a+1],i=r[a+2],n=1/Math.sqrt(t*t+e*e+i*i),r[a]*=n,r[a+1]*=n,r[a+2]*=n},toNonIndexed:function(){if(null===this.index)return this;var t=new yt,e=this.index.array,i=this.attributes;for(var n in i){for(var r=i[n],a=r.array,o=r.itemSize,s=new a.constructor(e.length*o),c=0,l=0,h=0,u=e.length;h<u;h++){c=e[h]*o;for(var f=0;f<o;f++)s[l++]=a[c++]}t.addAttribute(n,new ut(s,o))}return t},toJSON:function(){var t={metadata:{version:4.4,type:"BufferGeometry",generator:"BufferGeometry.toJSON"}};if(t.uuid=this.uuid,t.type=this.type,""!==this.name&&(t.name=this.name),void 0!==this.parameters){var e=this.parameters;for(var i in e)void 0!==e[i]&&(t[i]=e[i]);return t}t.data={attributes:{}};var n=this.index;if(null!==n){var r=Array.prototype.slice.call(n.array);t.data.index={type:n.array.constructor.name,array:r}}var a=this.attributes;for(var i in a){var o=a[i],r=Array.prototype.slice.call(o.array);t.data.attributes[i]={itemSize:o.itemSize,type:o.array.constructor.name,array:r,normalized:o.normalized}}var s=this.groups;s.length>0&&(t.data.groups=JSON.parse(JSON.stringify(s)));var c=this.boundingSphere;return null!==c&&(t.data.boundingSphere={center:c.center.toArray(),radius:c.radius}),t},clone:function(){return(new yt).copy(this)},copy:function(t){var e,i,n;this.index=null,this.attributes={},this.morphAttributes={},this.groups=[],this.boundingBox=null,this.boundingSphere=null,this.name=t.name;var r=t.index;null!==r&&this.setIndex(r.clone());var a=t.attributes;for(e in a){var o=a[e];this.addAttribute(e,o.clone())}var s=t.morphAttributes;for(e in s){var c=[],l=s[e];for(i=0,n=l.length;i<n;i++)c.push(l[i].clone());this.morphAttributes[e]=c}var h=t.groups;for(i=0,n=h.length;i<n;i++){var u=h[i];this.addGroup(u.start,u.count,u.materialIndex)}var f=t.boundingBox;null!==f&&(this.boundingBox=f.clone());var d=t.boundingSphere;return null!==d&&(this.boundingSphere=d.clone()),this.drawRange.start=t.drawRange.start,this.drawRange.count=t.drawRange.count,this},dispose:function(){this.dispatchEvent({type:"dispose"})}},yt.MaxIndex=65535,Object.assign(yt.prototype,e.prototype),_t.prototype=Object.assign(Object.create(ot.prototype),{constructor:_t,isMesh:!0,setDrawMode:function(t){this.drawMode=t},copy:function(t){return ot.prototype.copy.call(this,t),this.drawMode=t.drawMode,this},updateMorphTargets:function(){var t=this.geometry.morphTargets;if(void 0!==t&&t.length>0){this.morphTargetInfluences=[],this.morphTargetDictionary={};for(var e=0,i=t.length;e<i;e++)this.morphTargetInfluences.push(0),this.morphTargetDictionary[t[e].name]=e}},raycast:function(){function t(t,e,i,n,r,a,o){return ct.barycoordFromPoint(t,e,i,n,x),r.multiplyScalar(x.x),a.multiplyScalar(x.y),o.multiplyScalar(x.z),r.add(a).add(o),r.clone()}function e(t,e,i,n,r,a,o){var s=t.material;if(null===(s.side===Pi?i.intersectTriangle(a,r,n,!0,o):i.intersectTriangle(n,r,a,s.side!==Ci,o)))return null;_.copy(o),_.applyMatrix4(t.matrixWorld);var c=e.ray.origin.distanceTo(_);return c<e.near||c>e.far?null:{distance:c,point:_.clone(),object:t}}function n(i,n,r,a,o,s,c,f){l.fromBufferAttribute(a,s),h.fromBufferAttribute(a,c),u.fromBufferAttribute(a,f);var d=e(i,n,r,l,h,u,y);return d&&(o&&(m.fromBufferAttribute(o,s),g.fromBufferAttribute(o,c),v.fromBufferAttribute(o,f),d.uv=t(y,l,h,u,m,g,v)),d.face=new lt(s,c,f,ct.normal(l,h,u)),d.faceIndex=s),d}var r=new c,a=new nt,o=new K,l=new s,h=new s,u=new s,f=new s,d=new s,p=new s,m=new i,g=new i,v=new i,x=new s,y=new s,_=new s;return function(i,s){var c=this.geometry,x=this.material,_=this.matrixWorld;if(void 0!==x&&(null===c.boundingSphere&&c.computeBoundingSphere(),o.copy(c.boundingSphere),o.applyMatrix4(_),!1!==i.ray.intersectsSphere(o)&&(r.getInverse(_),a.copy(i.ray).applyMatrix4(r),null===c.boundingBox||!1!==a.intersectsBox(c.boundingBox)))){var M;if(c.isBufferGeometry){var b,w,S,E,T,L=c.index,A=c.attributes.position,P=c.attributes.uv;if(null!==L)for(E=0,T=L.count;E<T;E+=3)b=L.getX(E),w=L.getX(E+1),S=L.getX(E+2),(M=n(this,i,a,A,P,b,w,S))&&(M.faceIndex=Math.floor(E/3),s.push(M));else for(E=0,T=A.count;E<T;E+=3)b=E,w=E+1,S=E+2,(M=n(this,i,a,A,P,b,w,S))&&(M.index=b,s.push(M))}else if(c.isGeometry){var C,R,N,D,U=x&&x.isMultiMaterial,I=!0===U?x.materials:null,O=c.vertices,z=c.faces,F=c.faceVertexUvs[0];F.length>0&&(D=F);for(var B=0,G=z.length;B<G;B++){var V=z[B],k=!0===U?I[V.materialIndex]:x;if(void 0!==k){if(C=O[V.a],R=O[V.b],N=O[V.c],!0===k.morphTargets){var H=c.morphTargets,W=this.morphTargetInfluences;l.set(0,0,0),h.set(0,0,0),u.set(0,0,0);for(var j=0,X=H.length;j<X;j++){var Y=W[j];if(0!==Y){var q=H[j].vertices;l.addScaledVector(f.subVectors(q[V.a],C),Y),h.addScaledVector(d.subVectors(q[V.b],R),Y),u.addScaledVector(p.subVectors(q[V.c],N),Y)}}l.add(C),h.add(R),u.add(N),C=l,R=h,N=u}if(M=e(this,i,a,C,R,N,y)){if(D){var Z=D[B];m.copy(Z[0]),g.copy(Z[1]),v.copy(Z[2]),M.uv=t(y,C,R,N,m,g,v)}M.face=V,M.faceIndex=B,s.push(M)}}}}}}}(),clone:function(){return new this.constructor(this.geometry,this.material).copy(this)}}),Mt.prototype=Object.create(xt.prototype),Mt.prototype.constructor=Mt,bt.prototype=Object.create(yt.prototype),bt.prototype.constructor=bt,wt.prototype=Object.create(xt.prototype),wt.prototype.constructor=wt,St.prototype=Object.create(yt.prototype),St.prototype.constructor=St,Et.prototype=Object.create(ot.prototype),Et.prototype.constructor=Et,Et.prototype.isCamera=!0,Et.prototype.getWorldDirection=function(){var t=new o;return function(e){var i=e||new s;return this.getWorldQuaternion(t),i.set(0,0,-1).applyQuaternion(t)}}(),Et.prototype.lookAt=function(){var t=new c;return function(e){t.lookAt(this.position,e,this.up),this.quaternion.setFromRotationMatrix(t)}}(),Et.prototype.clone=function(){return(new this.constructor).copy(this)},Et.prototype.copy=function(t){return ot.prototype.copy.call(this,t),this.matrixWorldInverse.copy(t.matrixWorldInverse),this.projectionMatrix.copy(t.projectionMatrix),this},Tt.prototype=Object.assign(Object.create(Et.prototype),{constructor:Tt,isPerspectiveCamera:!0,copy:function(t){return Et.prototype.copy.call(this,t),this.fov=t.fov,this.zoom=t.zoom,this.near=t.near,this.far=t.far,this.focus=t.focus,this.aspect=t.aspect,this.view=null===t.view?null:Object.assign({},t.view),this.filmGauge=t.filmGauge,this.filmOffset=t.filmOffset,this},setFocalLength:function(t){var e=.5*this.getFilmHeight()/t;this.fov=2*wr.RAD2DEG*Math.atan(e),this.updateProjectionMatrix()},getFocalLength:function(){var t=Math.tan(.5*wr.DEG2RAD*this.fov);return.5*this.getFilmHeight()/t},getEffectiveFOV:function(){return 2*wr.RAD2DEG*Math.atan(Math.tan(.5*wr.DEG2RAD*this.fov)/this.zoom)},getFilmWidth:function(){return this.filmGauge*Math.min(this.aspect,1)},getFilmHeight:function(){return this.filmGauge/Math.max(this.aspect,1)},setViewOffset:function(t,e,i,n,r,a){this.aspect=t/e,this.view={fullWidth:t,fullHeight:e,offsetX:i,offsetY:n,width:r,height:a},this.updateProjectionMatrix()},clearViewOffset:function(){this.view=null,this.updateProjectionMatrix()},updateProjectionMatrix:function(){var t=this.near,e=t*Math.tan(.5*wr.DEG2RAD*this.fov)/this.zoom,i=2*e,n=this.aspect*i,r=-.5*n,a=this.view;if(null!==a){var o=a.fullWidth,s=a.fullHeight;r+=a.offsetX*n/o,e-=a.offsetY*i/s,n*=a.width/o,i*=a.height/s}var c=this.filmOffset;0!==c&&(r+=t*c/this.getFilmWidth()),this.projectionMatrix.makePerspective(r,r+n,e,e-i,t,this.far)},toJSON:function(t){var e=ot.prototype.toJSON.call(this,t);return e.object.fov=this.fov,e.object.zoom=this.zoom,e.object.near=this.near,e.object.far=this.far,e.object.focus=this.focus,e.object.aspect=this.aspect,null!==this.view&&(e.object.view=Object.assign({},this.view)),e.object.filmGauge=this.filmGauge,e.object.filmOffset=this.filmOffset,e}}),Lt.prototype=Object.assign(Object.create(Et.prototype),{constructor:Lt,isOrthographicCamera:!0,copy:function(t){return Et.prototype.copy.call(this,t),this.left=t.left,this.right=t.right,this.top=t.top,this.bottom=t.bottom,this.near=t.near,this.far=t.far,this.zoom=t.zoom,this.view=null===t.view?null:Object.assign({},t.view),this},setViewOffset:function(t,e,i,n,r,a){this.view={fullWidth:t,fullHeight:e,offsetX:i,offsetY:n,width:r,height:a},this.updateProjectionMatrix()},clearViewOffset:function(){this.view=null,this.updateProjectionMatrix()},updateProjectionMatrix:function(){var t=(this.right-this.left)/(2*this.zoom),e=(this.top-this.bottom)/(2*this.zoom),i=(this.right+this.left)/2,n=(this.top+this.bottom)/2,r=i-t,a=i+t,o=n+e,s=n-e;if(null!==this.view){var c=this.zoom/(this.view.width/this.view.fullWidth),l=this.zoom/(this.view.height/this.view.fullHeight),h=(this.right-this.left)/this.view.width,u=(this.top-this.bottom)/this.view.height;r+=h*(this.view.offsetX/c),a=r+h*(this.view.width/c),o-=u*(this.view.offsetY/l),s=o-u*(this.view.height/l)}this.projectionMatrix.makeOrthographic(r,a,o,s,this.near,this.far)},toJSON:function(t){var e=ot.prototype.toJSON.call(this,t);return e.object.zoom=this.zoom,e.object.left=this.left,e.object.right=this.right,e.object.top=this.top,e.object.bottom=this.bottom,e.object.near=this.near,e.object.far=this.far,null!==this.view&&(e.object.view=Object.assign({},this.view)),e}});var Fr=0;te.prototype=Object.create(ot.prototype),te.prototype.constructor=te,te.prototype.copy=function(t,e){return ot.prototype.copy.call(this,t,e),null!==t.background&&(this.background=t.background.clone()),null!==t.fog&&(this.fog=t.fog.clone()),null!==t.overrideMaterial&&(this.overrideMaterial=t.overrideMaterial.clone()),this.autoUpdate=t.autoUpdate,this.matrixAutoUpdate=t.matrixAutoUpdate,this},te.prototype.toJSON=function(t){var e=ot.prototype.toJSON.call(this,t);return null!==this.background&&(e.object.background=this.background.toJSON(t)),null!==this.fog&&(e.object.fog=this.fog.toJSON()),e},ee.prototype=Object.create(q.prototype),ee.prototype.constructor=ee,ee.prototype.copy=function(t){return q.prototype.copy.call(this,t),this.color.copy(t.color),this.map=t.map,this.rotation=t.rotation,this},ie.prototype=Object.assign(Object.create(ot.prototype),{constructor:ie,isSprite:!0,raycast:function(){var t=new s;return function(e,i){t.setFromMatrixPosition(this.matrixWorld);var n=e.ray.distanceSqToPoint(t);n>this.scale.x*this.scale.y/4||i.push({distance:Math.sqrt(n),point:this.position,face:null,object:this})}}(),clone:function(){return new this.constructor(this.material).copy(this)}}),ne.prototype=Object.create(q.prototype),ne.prototype.constructor=ne,ne.prototype.isLineBasicMaterial=!0,ne.prototype.copy=function(t){return q.prototype.copy.call(this,t),this.color.copy(t.color),this.linewidth=t.linewidth,
this.linecap=t.linecap,this.linejoin=t.linejoin,this},re.prototype=Object.assign(Object.create(ot.prototype),{constructor:re,isLine:!0,raycast:function(){var t=new c,e=new nt,i=new K;return function(n,r){var a=n.linePrecision,o=a*a,c=this.geometry,l=this.matrixWorld;if(null===c.boundingSphere&&c.computeBoundingSphere(),i.copy(c.boundingSphere),i.applyMatrix4(l),!1!==n.ray.intersectsSphere(i)){t.getInverse(l),e.copy(n.ray).applyMatrix4(t);var h=new s,u=new s,f=new s,d=new s,p=this&&this.isLineSegments?2:1;if(c.isBufferGeometry){var m=c.index,g=c.attributes,v=g.position.array;if(null!==m)for(var x=m.array,y=0,_=x.length-1;y<_;y+=p){var M=x[y],b=x[y+1];h.fromArray(v,3*M),u.fromArray(v,3*b);var w=e.distanceSqToSegment(h,u,d,f);if(!(w>o)){d.applyMatrix4(this.matrixWorld);var S=n.ray.origin.distanceTo(d);S<n.near||S>n.far||r.push({distance:S,point:f.clone().applyMatrix4(this.matrixWorld),index:y,face:null,faceIndex:null,object:this})}}else for(var y=0,_=v.length/3-1;y<_;y+=p){h.fromArray(v,3*y),u.fromArray(v,3*y+3);var w=e.distanceSqToSegment(h,u,d,f);if(!(w>o)){d.applyMatrix4(this.matrixWorld);var S=n.ray.origin.distanceTo(d);S<n.near||S>n.far||r.push({distance:S,point:f.clone().applyMatrix4(this.matrixWorld),index:y,face:null,faceIndex:null,object:this})}}}else if(c.isGeometry)for(var E=c.vertices,T=E.length,y=0;y<T-1;y+=p){var w=e.distanceSqToSegment(E[y],E[y+1],d,f);if(!(w>o)){d.applyMatrix4(this.matrixWorld);var S=n.ray.origin.distanceTo(d);S<n.near||S>n.far||r.push({distance:S,point:f.clone().applyMatrix4(this.matrixWorld),index:y,face:null,faceIndex:null,object:this})}}}}}(),clone:function(){return new this.constructor(this.geometry,this.material).copy(this)}}),ae.prototype=Object.assign(Object.create(re.prototype),{constructor:ae,isLineSegments:!0}),oe.prototype=Object.create(n.prototype),oe.prototype.constructor=oe,se.prototype=Object.create(xt.prototype),se.prototype.constructor=se,ce.prototype=Object.create(yt.prototype),ce.prototype.constructor=ce;var Br={area:function(t){for(var e=t.length,i=0,n=e-1,r=0;r<e;n=r++)i+=t[n].x*t[r].y-t[r].x*t[n].y;return.5*i},triangulate:function(){function t(t,e,i,n,r,a){var o,s,c,l,h,u,f,d,p;if(s=t[a[e]].x,c=t[a[e]].y,l=t[a[i]].x,h=t[a[i]].y,u=t[a[n]].x,f=t[a[n]].y,(l-s)*(f-c)-(h-c)*(u-s)<=0)return!1;var m,g,v,x,y,_,M,b,w,S,E,T,L,A,P;for(m=u-l,g=f-h,v=s-u,x=c-f,y=l-s,_=h-c,o=0;o<r;o++)if(d=t[a[o]].x,p=t[a[o]].y,!(d===s&&p===c||d===l&&p===h||d===u&&p===f)&&(M=d-s,b=p-c,w=d-l,S=p-h,E=d-u,T=p-f,P=m*S-g*w,L=y*b-_*M,A=v*T-x*E,P>=-Number.EPSILON&&A>=-Number.EPSILON&&L>=-Number.EPSILON))return!1;return!0}return function(e,i){var n=e.length;if(n<3)return null;var r,a,o,s=[],c=[],l=[];if(Br.area(e)>0)for(a=0;a<n;a++)c[a]=a;else for(a=0;a<n;a++)c[a]=n-1-a;var h=n,u=2*h;for(a=h-1;h>2;){if(u--<=0)return i?l:s;if(r=a,h<=r&&(r=0),a=r+1,h<=a&&(a=0),o=a+1,h<=o&&(o=0),t(e,r,a,o,h,c)){var f,d,p,m,g;for(f=c[r],d=c[a],p=c[o],s.push([e[f],e[d],e[p]]),l.push([c[r],c[a],c[o]]),m=a,g=a+1;g<h;m++,g++)c[m]=c[g];h--,u=2*h}}return i?l:s}}(),triangulateShape:function(t,e){function i(t){var e=t.length;e>2&&t[e-1].equals(t[0])&&t.pop()}function n(t,e,i){return t.x!==e.x?t.x<e.x?t.x<=i.x&&i.x<=e.x:e.x<=i.x&&i.x<=t.x:t.y<e.y?t.y<=i.y&&i.y<=e.y:e.y<=i.y&&i.y<=t.y}function r(t,e,i,r,a){var o=e.x-t.x,s=e.y-t.y,c=r.x-i.x,l=r.y-i.y,h=t.x-i.x,u=t.y-i.y,f=s*c-o*l,d=s*h-o*u;if(Math.abs(f)>Number.EPSILON){var p;if(f>0){if(d<0||d>f)return[];if((p=l*h-c*u)<0||p>f)return[]}else{if(d>0||d<f)return[];if((p=l*h-c*u)>0||p<f)return[]}if(0===p)return!a||0!==d&&d!==f?[t]:[];if(p===f)return!a||0!==d&&d!==f?[e]:[];if(0===d)return[i];if(d===f)return[r];var m=p/f;return[{x:t.x+m*o,y:t.y+m*s}]}if(0!==d||l*h!=c*u)return[];var g=0===o&&0===s,v=0===c&&0===l;if(g&&v)return t.x!==i.x||t.y!==i.y?[]:[t];if(g)return n(i,r,t)?[t]:[];if(v)return n(t,e,i)?[i]:[];var x,y,_,M,b,w,S,E;return 0!==o?(t.x<e.x?(x=t,_=t.x,y=e,M=e.x):(x=e,_=e.x,y=t,M=t.x),i.x<r.x?(b=i,S=i.x,w=r,E=r.x):(b=r,S=r.x,w=i,E=i.x)):(t.y<e.y?(x=t,_=t.y,y=e,M=e.y):(x=e,_=e.y,y=t,M=t.y),i.y<r.y?(b=i,S=i.y,w=r,E=r.y):(b=r,S=r.y,w=i,E=i.y)),_<=S?M<S?[]:M===S?a?[]:[b]:M<=E?[b,y]:[b,w]:_>E?[]:_===E?a?[]:[x]:M<=E?[x,y]:[x,w]}function a(t,e,i,n){var r=e.x-t.x,a=e.y-t.y,o=i.x-t.x,s=i.y-t.y,c=n.x-t.x,l=n.y-t.y,h=r*s-a*o,u=r*l-a*c;if(Math.abs(h)>Number.EPSILON){var f=c*s-l*o;return h>0?u>=0&&f>=0:u>=0||f>=0}return u>0}i(t),e.forEach(i);for(var o,s,c,l,h,u,f={},d=t.concat(),p=0,m=e.length;p<m;p++)Array.prototype.push.apply(d,e[p]);for(o=0,s=d.length;o<s;o++)h=d[o].x+":"+d[o].y,f[h],f[h]=o;var g=function(t,e){for(var i,n,o,s,c,l,h,u,f,d,p,m=t.concat(),g=[],v=[],x=0,y=e.length;x<y;x++)g.push(x);for(var _=0,M=2*g.length;g.length>0&&!(--M<0);)for(o=_;o<m.length;o++){s=m[o],n=-1;for(var x=0;x<g.length;x++)if(l=g[x],h=s.x+":"+s.y+":"+l,void 0===v[h]){i=e[l];for(var b=0;b<i.length;b++)if(c=i[b],function(t,e){var n=m.length-1,r=t-1;r<0&&(r=n);var o=t+1;o>n&&(o=0);var s=a(m[t],m[r],m[o],i[e]);if(!s)return!1;var c=i.length-1,l=e-1;l<0&&(l=c);var h=e+1;return h>c&&(h=0),!!(s=a(i[e],i[l],i[h],m[t]))}(o,b)&&!function(t,e){var i,n,a;for(i=0;i<m.length;i++)if(n=i+1,n%=m.length,a=r(t,e,m[i],m[n],!0),a.length>0)return!0;return!1}(s,c)&&!function(t,i){var n,a,o,s,c;for(n=0;n<g.length;n++)for(a=e[g[n]],o=0;o<a.length;o++)if(s=o+1,s%=a.length,c=r(t,i,a[o],a[s],!0),c.length>0)return!0;return!1}(s,c)){n=b,g.splice(x,1),u=m.slice(0,o+1),f=m.slice(o),d=i.slice(n),p=i.slice(0,n+1),m=u.concat(d).concat(p).concat(f),_=o;break}if(n>=0)break;v[h]=!0}if(n>=0)break}return m}(t,e),v=Br.triangulate(g,!1);for(o=0,s=v.length;o<s;o++)for(l=v[o],c=0;c<3;c++)h=l[c].x+":"+l[c].y,void 0!==(u=f[h])&&(l[c]=u);return v.concat()},isClockWise:function(t){return Br.area(t)<0}};le.prototype=Object.create(xt.prototype),le.prototype.constructor=le,he.prototype=Object.create(yt.prototype),he.prototype.constructor=he,ue.prototype=Object.create(xt.prototype),ue.prototype.constructor=ue,ue.prototype.addShapeList=function(t,e){for(var i=t.length,n=0;n<i;n++){var r=t[n];this.addShape(r,e)}},ue.prototype.addShape=function(t,e){function n(t,e,i){return e.clone().multiplyScalar(i).add(t)}function r(t,e,n){var r,a,o=1,s=t.x-e.x,c=t.y-e.y,l=n.x-t.x,h=n.y-t.y,u=s*s+c*c,f=s*h-c*l;if(Math.abs(f)>Number.EPSILON){var d=Math.sqrt(u),p=Math.sqrt(l*l+h*h),m=e.x-c/d,g=e.y+s/d,v=n.x-h/p,x=n.y+l/p,y=((v-m)*h-(x-g)*l)/(s*h-c*l);r=m+s*y-t.x,a=g+c*y-t.y;var _=r*r+a*a;if(_<=2)return new i(r,a);o=Math.sqrt(_/2)}else{var M=!1;s>Number.EPSILON?l>Number.EPSILON&&(M=!0):s<-Number.EPSILON?l<-Number.EPSILON&&(M=!0):Math.sign(c)===Math.sign(h)&&(M=!0),M?(r=-c,a=s,o=Math.sqrt(u)):(r=s,a=c,o=Math.sqrt(u/2))}return new i(r/o,a/o)}function a(t,e){var i,n;for(j=t.length;--j>=0;){i=j,n=j-1,n<0&&(n=t.length-1);var r=0,a=M+2*x;for(r=0;r<a;r++){var o=k*r,s=k*(r+1);l(e+i+o,e+n+o,e+n+s,e+i+s,t,r,a,i,n)}}}function o(t,e,i){A.vertices.push(new s(t,e,i))}function c(t,e,i){t+=P,e+=P,i+=P,A.faces.push(new lt(t,e,i,null,null,0));var n=S.generateTopUV(A,t,e,i);A.faceVertexUvs[0].push(n)}function l(t,e,i,n,r,a,o,s,c){t+=P,e+=P,i+=P,n+=P,A.faces.push(new lt(t,e,n,null,null,1)),A.faces.push(new lt(e,i,n,null,null,1));var l=S.generateSideWallUV(A,t,e,i,n);A.faceVertexUvs[0].push([l[0],l[1],l[3]]),A.faceVertexUvs[0].push([l[1],l[2],l[3]])}var h,u,f,d,p,m=void 0!==e.amount?e.amount:100,g=void 0!==e.bevelThickness?e.bevelThickness:6,v=void 0!==e.bevelSize?e.bevelSize:g-2,x=void 0!==e.bevelSegments?e.bevelSegments:3,y=void 0===e.bevelEnabled||e.bevelEnabled,_=void 0!==e.curveSegments?e.curveSegments:12,M=void 0!==e.steps?e.steps:1,b=e.extrudePath,w=!1,S=void 0!==e.UVGenerator?e.UVGenerator:ue.WorldUVGenerator;b&&(h=b.getSpacedPoints(M),w=!0,y=!1,u=void 0!==e.frames?e.frames:b.computeFrenetFrames(M,!1),f=new s,d=new s,p=new s),y||(x=0,g=0,v=0);var E,T,L,A=this,P=this.vertices.length,C=t.extractPoints(_),R=C.shape,N=C.holes,D=!Br.isClockWise(R);if(D){for(R=R.reverse(),T=0,L=N.length;T<L;T++)E=N[T],Br.isClockWise(E)&&(N[T]=E.reverse());D=!1}var U=Br.triangulateShape(R,N),I=R;for(T=0,L=N.length;T<L;T++)E=N[T],R=R.concat(E);for(var O,z,F,B,G,V,k=R.length,H=U.length,W=[],j=0,X=I.length,Y=X-1,q=j+1;j<X;j++,Y++,q++)Y===X&&(Y=0),q===X&&(q=0),W[j]=r(I[j],I[Y],I[q]);var Z,J=[],Q=W.concat();for(T=0,L=N.length;T<L;T++){for(E=N[T],Z=[],j=0,X=E.length,Y=X-1,q=j+1;j<X;j++,Y++,q++)Y===X&&(Y=0),q===X&&(q=0),Z[j]=r(E[j],E[Y],E[q]);J.push(Z),Q=Q.concat(Z)}for(O=0;O<x;O++){for(F=O/x,B=g*Math.cos(F*Math.PI/2),z=v*Math.sin(F*Math.PI/2),j=0,X=I.length;j<X;j++)G=n(I[j],W[j],z),o(G.x,G.y,-B);for(T=0,L=N.length;T<L;T++)for(E=N[T],Z=J[T],j=0,X=E.length;j<X;j++)G=n(E[j],Z[j],z),o(G.x,G.y,-B)}for(z=v,j=0;j<k;j++)G=y?n(R[j],Q[j],z):R[j],w?(d.copy(u.normals[0]).multiplyScalar(G.x),f.copy(u.binormals[0]).multiplyScalar(G.y),p.copy(h[0]).add(d).add(f),o(p.x,p.y,p.z)):o(G.x,G.y,0);var K;for(K=1;K<=M;K++)for(j=0;j<k;j++)G=y?n(R[j],Q[j],z):R[j],w?(d.copy(u.normals[K]).multiplyScalar(G.x),f.copy(u.binormals[K]).multiplyScalar(G.y),p.copy(h[K]).add(d).add(f),o(p.x,p.y,p.z)):o(G.x,G.y,m/M*K);for(O=x-1;O>=0;O--){for(F=O/x,B=g*Math.cos(F*Math.PI/2),z=v*Math.sin(F*Math.PI/2),j=0,X=I.length;j<X;j++)G=n(I[j],W[j],z),o(G.x,G.y,m+B);for(T=0,L=N.length;T<L;T++)for(E=N[T],Z=J[T],j=0,X=E.length;j<X;j++)G=n(E[j],Z[j],z),w?o(G.x,G.y+h[M-1].y,h[M-1].x+B):o(G.x,G.y,m+B)}!function(){if(y){var t=0,e=k*t;for(j=0;j<H;j++)V=U[j],c(V[2]+e,V[1]+e,V[0]+e);for(t=M+2*x,e=k*t,j=0;j<H;j++)V=U[j],c(V[0]+e,V[1]+e,V[2]+e)}else{for(j=0;j<H;j++)V=U[j],c(V[2],V[1],V[0]);for(j=0;j<H;j++)V=U[j],c(V[0]+k*M,V[1]+k*M,V[2]+k*M)}}(),function(){var t=0;for(a(I,t),t+=I.length,T=0,L=N.length;T<L;T++)E=N[T],a(E,t),t+=E.length}()},ue.WorldUVGenerator={generateTopUV:function(t,e,n,r){var a=t.vertices,o=a[e],s=a[n],c=a[r];return[new i(o.x,o.y),new i(s.x,s.y),new i(c.x,c.y)]},generateSideWallUV:function(t,e,n,r,a){var o=t.vertices,s=o[e],c=o[n],l=o[r],h=o[a];return Math.abs(s.y-c.y)<.01?[new i(s.x,1-s.z),new i(c.x,1-c.z),new i(l.x,1-l.z),new i(h.x,1-h.z)]:[new i(s.y,1-s.z),new i(c.y,1-c.z),new i(l.y,1-l.z),new i(h.y,1-h.z)]}},fe.prototype=Object.create(xt.prototype),fe.prototype.constructor=fe,de.prototype=Object.create(yt.prototype),de.prototype.constructor=de,pe.prototype=Object.create(xt.prototype),pe.prototype.constructor=pe,me.prototype=Object.create(yt.prototype),me.prototype.constructor=me,ge.prototype={constructor:ge,isMultiMaterial:!0,toJSON:function(t){for(var e={metadata:{version:4.2,type:"material",generator:"MaterialExporter"},uuid:this.uuid,type:this.type,materials:[]},i=this.materials,n=0,r=i.length;n<r;n++){var a=i[n].toJSON(t);delete a.metadata,e.materials.push(a)}return e.visible=this.visible,e},clone:function(){for(var t=new this.constructor,e=0;e<this.materials.length;e++)t.materials.push(this.materials[e].clone());return t.visible=this.visible,t}},ve.prototype=Object.create(q.prototype),ve.prototype.constructor=ve,ve.prototype.isMeshLambertMaterial=!0,ve.prototype.copy=function(t){return q.prototype.copy.call(this,t),this.color.copy(t.color),this.map=t.map,this.lightMap=t.lightMap,this.lightMapIntensity=t.lightMapIntensity,this.aoMap=t.aoMap,this.aoMapIntensity=t.aoMapIntensity,this.emissive.copy(t.emissive),this.emissiveMap=t.emissiveMap,this.emissiveIntensity=t.emissiveIntensity,this.specularMap=t.specularMap,this.alphaMap=t.alphaMap,this.envMap=t.envMap,this.combine=t.combine,this.reflectivity=t.reflectivity,this.refractionRatio=t.refractionRatio,this.wireframe=t.wireframe,this.wireframeLinewidth=t.wireframeLinewidth,this.wireframeLinecap=t.wireframeLinecap,this.wireframeLinejoin=t.wireframeLinejoin,this.skinning=t.skinning,this.morphTargets=t.morphTargets,this.morphNormals=t.morphNormals,this};var Gr=Object.freeze({SpriteMaterial:ee,ShaderMaterial:Z,MultiMaterial:ge,MeshLambertMaterial:ve,MeshBasicMaterial:ht,LineBasicMaterial:ne}),Vr={enabled:!1,files:{},add:function(t,e){!1!==this.enabled&&(this.files[t]=e)},get:function(t){if(!1!==this.enabled)return this.files[t]},remove:function(t){delete this.files[t]},clear:function(){this.files={}}},kr=new xe;Object.assign(ye.prototype,{load:function(t,e,i,n){void 0===t&&(t=""),void 0!==this.path&&(t=this.path+t);var r=this,a=Vr.get(t);if(void 0!==a)return r.manager.itemStart(t),setTimeout(function(){e&&e(a),r.manager.itemEnd(t)},0),a;var o=document.createElementNS("http://www.w3.org/1999/xhtml","img");return o.addEventListener("load",function(){Vr.add(t,this),e&&e(this),r.manager.itemEnd(t)},!1),o.addEventListener("error",function(e){n&&n(e),r.manager.itemError(t)},!1),void 0!==this.crossOrigin&&(o.crossOrigin=this.crossOrigin),r.manager.itemStart(t),o.src=t,o},setCrossOrigin:function(t){return this.crossOrigin=t,this},setPath:function(t){return this.path=t,this}}),Object.assign(_e.prototype,{load:function(t,e,i,n){var r=new l,a=new ye(this.manager);a.setCrossOrigin(this.crossOrigin),a.setPath(this.path);for(var o=0,s=0;s<t.length;++s)!function(i){a.load(t[i],function(t){r.images[i]=t,6==++o&&(r.needsUpdate=!0,e&&e(r))},void 0,n)}(s);return r},setCrossOrigin:function(t){return this.crossOrigin=t,this},setPath:function(t){return this.path=t,this}}),Object.assign(Me.prototype,{load:function(t,e,i,r){var a=new n,o=new ye(this.manager);return o.setCrossOrigin(this.crossOrigin),o.setPath(this.path),o.load(t,function(i){var n=t.search(/\.(jpg|jpeg)$/)>0||0===t.search(/^data\:image\/jpeg/);a.format=n?Zn:Jn,a.image=i,a.needsUpdate=!0,void 0!==e&&e(a)},i,r),a},setCrossOrigin:function(t){return this.crossOrigin=t,this},setPath:function(t){return this.path=t,this}}),Object.assign(be.prototype,{load:function(t,e,i,n){void 0===t&&(t=""),void 0!==this.path&&(t=this.path+t);var r=this,a=Vr.get(t);if(void 0!==a)return r.manager.itemStart(t),setTimeout(function(){e&&e(a),r.manager.itemEnd(t)},0),a;var o=/^data:(.*?)(;base64)?,(.*)$/,s=t.match(o);if(s){var c=s[1],l=!!s[2],h=s[3];h=window.decodeURIComponent(h),l&&(h=window.atob(h));try{var u,f=(this.responseType||"").toLowerCase();switch(f){case"arraybuffer":case"blob":u=new ArrayBuffer(h.length);for(var d=new Uint8Array(u),p=0;p<h.length;p++)d[p]=h.charCodeAt(p);"blob"===f&&(u=new Blob([u],{type:c}));break;case"document":var m=new DOMParser;u=m.parseFromString(h,c);break;case"json":u=JSON.parse(h);break;default:u=h}window.setTimeout(function(){e&&e(u),r.manager.itemEnd(t)},0)}catch(e){window.setTimeout(function(){n&&n(e),r.manager.itemError(t)},0)}}else{var g=new XMLHttpRequest;g.open("GET",t,!0),g.addEventListener("load",function(i){var a=i.target.response;Vr.add(t,a),200===this.status?(e&&e(a),r.manager.itemEnd(t)):0===this.status?(e&&e(a),r.manager.itemEnd(t)):(n&&n(i),r.manager.itemError(t))},!1),void 0!==i&&g.addEventListener("progress",function(t){i(t)},!1),g.addEventListener("error",function(e){n&&n(e),r.manager.itemError(t)},!1),void 0!==this.responseType&&(g.responseType=this.responseType),void 0!==this.withCredentials&&(g.withCredentials=this.withCredentials),g.overrideMimeType&&g.overrideMimeType(void 0!==this.mimeType?this.mimeType:"text/plain"),g.send(null)}return r.manager.itemStart(t),g},setPath:function(t){return this.path=t,this},setResponseType:function(t){return this.responseType=t,this},setWithCredentials:function(t){return this.withCredentials=t,this},setMimeType:function(t){return this.mimeType=t,this}}),Object.assign(we.prototype,{load:function(t,e,i,n){var r=this;new be(r.manager).load(t,function(t){e(r.parse(JSON.parse(t)))},i,n)},setTextures:function(t){this.textures=t},parse:function(t){function e(t){return n[t],n[t]}var n=this.textures,r=new Gr[t.type];if(void 0!==t.uuid&&(r.uuid=t.uuid),void 0!==t.name&&(r.name=t.name),void 0!==t.color&&r.color.setHex(t.color),void 0!==t.roughness&&(r.roughness=t.roughness),void 0!==t.metalness&&(r.metalness=t.metalness),void 0!==t.emissive&&r.emissive.setHex(t.emissive),void 0!==t.specular&&r.specular.setHex(t.specular),void 0!==t.shininess&&(r.shininess=t.shininess),void 0!==t.clearCoat&&(r.clearCoat=t.clearCoat),void 0!==t.clearCoatRoughness&&(r.clearCoatRoughness=t.clearCoatRoughness),void 0!==t.uniforms&&(r.uniforms=t.uniforms),void 0!==t.vertexShader&&(r.vertexShader=t.vertexShader),void 0!==t.fragmentShader&&(r.fragmentShader=t.fragmentShader),void 0!==t.vertexColors&&(r.vertexColors=t.vertexColors),void 0!==t.fog&&(r.fog=t.fog),void 0!==t.shading&&(r.shading=t.shading),void 0!==t.blending&&(r.blending=t.blending),void 0!==t.side&&(r.side=t.side),void 0!==t.opacity&&(r.opacity=t.opacity),void 0!==t.transparent&&(r.transparent=t.transparent),void 0!==t.alphaTest&&(r.alphaTest=t.alphaTest),void 0!==t.depthTest&&(r.depthTest=t.depthTest),void 0!==t.depthWrite&&(r.depthWrite=t.depthWrite),void 0!==t.colorWrite&&(r.colorWrite=t.colorWrite),void 0!==t.wireframe&&(r.wireframe=t.wireframe),void 0!==t.wireframeLinewidth&&(r.wireframeLinewidth=t.wireframeLinewidth),void 0!==t.wireframeLinecap&&(r.wireframeLinecap=t.wireframeLinecap),void 0!==t.wireframeLinejoin&&(r.wireframeLinejoin=t.wireframeLinejoin),void 0!==t.skinning&&(r.skinning=t.skinning),void 0!==t.morphTargets&&(r.morphTargets=t.morphTargets),void 0!==t.size&&(r.size=t.size),void 0!==t.sizeAttenuation&&(r.sizeAttenuation=t.sizeAttenuation),void 0!==t.map&&(r.map=e(t.map)),void 0!==t.alphaMap&&(r.alphaMap=e(t.alphaMap),r.transparent=!0),void 0!==t.bumpMap&&(r.bumpMap=e(t.bumpMap)),void 0!==t.bumpScale&&(r.bumpScale=t.bumpScale),void 0!==t.normalMap&&(r.normalMap=e(t.normalMap)),void 0!==t.normalScale){var a=t.normalScale;!1===Array.isArray(a)&&(a=[a,a]),r.normalScale=(new i).fromArray(a)}if(void 0!==t.displacementMap&&(r.displacementMap=e(t.displacementMap)),void 0!==t.displacementScale&&(r.displacementScale=t.displacementScale),void 0!==t.displacementBias&&(r.displacementBias=t.displacementBias),void 0!==t.roughnessMap&&(r.roughnessMap=e(t.roughnessMap)),void 0!==t.metalnessMap&&(r.metalnessMap=e(t.metalnessMap)),void 0!==t.emissiveMap&&(r.emissiveMap=e(t.emissiveMap)),void 0!==t.emissiveIntensity&&(r.emissiveIntensity=t.emissiveIntensity),void 0!==t.specularMap&&(r.specularMap=e(t.specularMap)),void 0!==t.envMap&&(r.envMap=e(t.envMap)),void 0!==t.reflectivity&&(r.reflectivity=t.reflectivity),void 0!==t.lightMap&&(r.lightMap=e(t.lightMap)),void 0!==t.lightMapIntensity&&(r.lightMapIntensity=t.lightMapIntensity),void 0!==t.aoMap&&(r.aoMap=e(t.aoMap)),void 0!==t.aoMapIntensity&&(r.aoMapIntensity=t.aoMapIntensity),void 0!==t.gradientMap&&(r.gradientMap=e(t.gradientMap)),void 0!==t.materials)for(var o=0,s=t.materials.length;o<s;o++)r.materials.push(this.parse(t.materials[o]));return r}}),Se.prototype={constructor:Se,crossOrigin:void 0,extractUrlBase:function(t){var e=t.split("/");return 1===e.length?"./":(e.pop(),e.join("/")+"/")},initMaterials:function(t,e,i){for(var n=[],r=0;r<t.length;++r)n[r]=this.createMaterial(t[r],e,i);return n},createMaterial:function(){var t,e,i,n={NoBlending:Ii,NormalBlending:Oi,AdditiveBlending:zi,SubtractiveBlending:Fi,MultiplyBlending:Bi,CustomBlending:Gi};return function(r,a,o){function s(t,i,n,r,s){var l,h=a+t,u=Se.Handlers.get(h);null!==u?l=u.load(h):(e.setCrossOrigin(o),l=e.load(h)),void 0!==i&&(l.repeat.fromArray(i),1!==i[0]&&(l.wrapS=Ln),1!==i[1]&&(l.wrapT=Ln)),void 0!==n&&l.offset.fromArray(n),void 0!==r&&("repeat"===r[0]&&(l.wrapS=Ln),"mirror"===r[0]&&(l.wrapS=Pn),"repeat"===r[1]&&(l.wrapT=Ln),"mirror"===r[1]&&(l.wrapT=Pn)),void 0!==s&&(l.anisotropy=s);var f=wr.generateUUID();return c[f]=l,f}void 0===t&&(t=new W),void 0===e&&(e=new Me),void 0===i&&(i=new we);var c={},l={uuid:wr.generateUUID(),type:"MeshLambertMaterial"};for(var h in r){var u=r[h];switch(h){case"DbgColor":case"DbgIndex":case"opticalDensity":case"illumination":break;case"DbgName":l.name=u;break;case"blending":l.blending=n[u];break;case"colorAmbient":case"mapAmbient":break;case"colorDiffuse":l.color=t.fromArray(u).getHex();break;case"colorSpecular":l.specular=t.fromArray(u).getHex();break;case"colorEmissive":l.emissive=t.fromArray(u).getHex();break;case"specularCoef":l.shininess=u;break;case"shading":"basic"===u.toLowerCase()&&(l.type="MeshBasicMaterial"),"phong"===u.toLowerCase()&&(l.type="MeshPhongMaterial"),"standard"===u.toLowerCase()&&(l.type="MeshStandardMaterial");break;case"mapDiffuse":l.map=s(u,r.mapDiffuseRepeat,r.mapDiffuseOffset,r.mapDiffuseWrap,r.mapDiffuseAnisotropy);break;case"mapDiffuseRepeat":case"mapDiffuseOffset":case"mapDiffuseWrap":case"mapDiffuseAnisotropy":break;case"mapEmissive":l.emissiveMap=s(u,r.mapEmissiveRepeat,r.mapEmissiveOffset,r.mapEmissiveWrap,r.mapEmissiveAnisotropy);break;case"mapEmissiveRepeat":case"mapEmissiveOffset":case"mapEmissiveWrap":case"mapEmissiveAnisotropy":break;case"mapLight":l.lightMap=s(u,r.mapLightRepeat,r.mapLightOffset,r.mapLightWrap,r.mapLightAnisotropy);break;case"mapLightRepeat":case"mapLightOffset":case"mapLightWrap":case"mapLightAnisotropy":break;case"mapAO":l.aoMap=s(u,r.mapAORepeat,r.mapAOOffset,r.mapAOWrap,r.mapAOAnisotropy);break;case"mapAORepeat":case"mapAOOffset":case"mapAOWrap":case"mapAOAnisotropy":break;case"mapBump":l.bumpMap=s(u,r.mapBumpRepeat,r.mapBumpOffset,r.mapBumpWrap,r.mapBumpAnisotropy);break;case"mapBumpScale":l.bumpScale=u;break;case"mapBumpRepeat":case"mapBumpOffset":case"mapBumpWrap":case"mapBumpAnisotropy":break;case"mapNormal":l.normalMap=s(u,r.mapNormalRepeat,r.mapNormalOffset,r.mapNormalWrap,r.mapNormalAnisotropy);break;case"mapNormalFactor":l.normalScale=[u,u];break;case"mapNormalRepeat":case"mapNormalOffset":case"mapNormalWrap":case"mapNormalAnisotropy":break;case"mapSpecular":l.specularMap=s(u,r.mapSpecularRepeat,r.mapSpecularOffset,r.mapSpecularWrap,r.mapSpecularAnisotropy);break;case"mapSpecularRepeat":case"mapSpecularOffset":case"mapSpecularWrap":case"mapSpecularAnisotropy":break;case"mapMetalness":l.metalnessMap=s(u,r.mapMetalnessRepeat,r.mapMetalnessOffset,r.mapMetalnessWrap,r.mapMetalnessAnisotropy);break;case"mapMetalnessRepeat":case"mapMetalnessOffset":case"mapMetalnessWrap":case"mapMetalnessAnisotropy":break;case"mapRoughness":l.roughnessMap=s(u,r.mapRoughnessRepeat,r.mapRoughnessOffset,r.mapRoughnessWrap,r.mapRoughnessAnisotropy);break;case"mapRoughnessRepeat":case"mapRoughnessOffset":case"mapRoughnessWrap":case"mapRoughnessAnisotropy":break;case"mapAlpha":l.alphaMap=s(u,r.mapAlphaRepeat,r.mapAlphaOffset,r.mapAlphaWrap,r.mapAlphaAnisotropy);break;case"mapAlphaRepeat":case"mapAlphaOffset":case"mapAlphaWrap":case"mapAlphaAnisotropy":break;case"flipSided":l.side=Pi;break;case"doubleSided":l.side=Ci;break;case"transparency":l.opacity=u;break;case"depthTest":case"depthWrite":case"colorWrite":case"opacity":case"reflectivity":case"transparent":case"visible":case"wireframe":l[h]=u;break;case"vertexColors":!0===u&&(l.vertexColors=Ui),"face"===u&&(l.vertexColors=1)}}return"MeshBasicMaterial"===l.type&&delete l.emissive,"MeshPhongMaterial"!==l.type&&delete l.specular,l.opacity<1&&(l.transparent=!0),i.setTextures(c),i.parse(l)}}()},Se.Handlers={handlers:[],add:function(t,e){this.handlers.push(t,e)},get:function(t){for(var e=this.handlers,i=0,n=e.length;i<n;i+=2){var r=e[i],a=e[i+1];if(r.test(t))return a}return null}};var Hr={arraySlice:function(t,e,i){return Hr.isTypedArray(t)?new t.constructor(t.subarray(e,i)):t.slice(e,i)},convertArray:function(t,e,i){return!t||!i&&t.constructor===e?t:"number"==typeof e.BYTES_PER_ELEMENT?new e(t):Array.prototype.slice.call(t)},isTypedArray:function(t){return ArrayBuffer.isView(t)&&!(t instanceof DataView)},getKeyframeOrder:function(t){function e(e,i){return t[e]-t[i]}for(var i=t.length,n=new Array(i),r=0;r!==i;++r)n[r]=r;return n.sort(e),n},sortedArray:function(t,e,i){for(var n=t.length,r=new t.constructor(n),a=0,o=0;o!==n;++a)for(var s=i[a]*e,c=0;c!==e;++c)r[o++]=t[s+c];return r},flattenJSON:function(t,e,i,n){for(var r=1,a=t[0];void 0!==a&&void 0===a[n];)a=t[r++];if(void 0!==a){var o=a[n];if(void 0!==o)if(Array.isArray(o))do{o=a[n],void 0!==o&&(e.push(a.time),i.push.apply(i,o)),a=t[r++]}while(void 0!==a);else if(void 0!==o.toArray)do{o=a[n],void 0!==o&&(e.push(a.time),o.toArray(i,i.length)),a=t[r++]}while(void 0!==a);else do{o=a[n],void 0!==o&&(e.push(a.time),i.push(o)),a=t[r++]}while(void 0!==a)}}};Ee.prototype={constructor:Ee,evaluate:function(t){var e=this.parameterPositions,i=this._cachedIndex,n=e[i],r=e[i-1];t:{e:{var a;i:{n:if(!(t<n)){for(var o=i+2;;){if(void 0===n){if(t<r)break n;return i=e.length,this._cachedIndex=i,this.afterEnd_(i-1,t,r)}if(i===o)break;if(r=n,n=e[++i],t<n)break e}a=e.length;break i}{if(t>=r)break t;var s=e[1];t<s&&(i=2,r=s);for(var o=i-2;;){if(void 0===r)return this._cachedIndex=0,this.beforeStart_(0,t,n);if(i===o)break;if(n=r,r=e[--i-1],t>=r)break e}a=i,i=0}}for(;i<a;){var c=i+a>>>1;t<e[c]?a=c:i=c+1}if(n=e[i],void 0===(r=e[i-1]))return this._cachedIndex=0,this.beforeStart_(0,t,n);if(void 0===n)return i=e.length,this._cachedIndex=i,this.afterEnd_(i-1,r,t)}this._cachedIndex=i,this.intervalChanged_(i,r,n)}return this.interpolate_(i,r,t,n)},settings:null,DefaultSettings_:{},getSettings_:function(){return this.settings||this.DefaultSettings_},copySampleValue_:function(t){for(var e=this.resultBuffer,i=this.sampleValues,n=this.valueSize,r=t*n,a=0;a!==n;++a)e[a]=i[r+a];return e},interpolate_:function(t,e,i,n){throw new Error("call to abstract method")},intervalChanged_:function(t,e,i){}},Object.assign(Ee.prototype,{beforeStart_:Ee.prototype.copySampleValue_,afterEnd_:Ee.prototype.copySampleValue_}),Te.prototype=Object.assign(Object.create(Ee.prototype),{constructor:Te,DefaultSettings_:{endingStart:2400,endingEnd:2400},intervalChanged_:function(t,e,i){var n=this.parameterPositions,r=t-2,a=t+1,o=n[r],s=n[a];if(void 0===o)switch(this.getSettings_().endingStart){case 2401:r=t,o=2*e-i;break;case 2402:r=n.length-2,o=e+n[r]-n[r+1];break;default:r=t,o=i}if(void 0===s)switch(this.getSettings_().endingEnd){case 2401:a=t,s=2*i-e;break;case 2402:a=1,s=i+n[1]-n[0];break;default:a=t-1,s=e}var c=.5*(i-e),l=this.valueSize;this._weightPrev=c/(e-o),this._weightNext=c/(s-i),this._offsetPrev=r*l,this._offsetNext=a*l},interpolate_:function(t,e,i,n){for(var r=this.resultBuffer,a=this.sampleValues,o=this.valueSize,s=t*o,c=s-o,l=this._offsetPrev,h=this._offsetNext,u=this._weightPrev,f=this._weightNext,d=(i-e)/(n-e),p=d*d,m=p*d,g=-u*m+2*u*p-u*d,v=(1+u)*m+(-1.5-2*u)*p+(-.5+u)*d+1,x=(-1-f)*m+(1.5+f)*p+.5*d,y=f*m-f*p,_=0;_!==o;++_)r[_]=g*a[l+_]+v*a[c+_]+x*a[s+_]+y*a[h+_];return r}}),Le.prototype=Object.assign(Object.create(Ee.prototype),{constructor:Le,interpolate_:function(t,e,i,n){for(var r=this.resultBuffer,a=this.sampleValues,o=this.valueSize,s=t*o,c=s-o,l=(i-e)/(n-e),h=1-l,u=0;u!==o;++u)r[u]=a[c+u]*h+a[s+u]*l;return r}}),Ae.prototype=Object.assign(Object.create(Ee.prototype),{constructor:Ae,interpolate_:function(t,e,i,n){return this.copySampleValue_(t-1)}});var Wr;Wr={TimeBufferType:Float32Array,ValueBufferType:Float32Array,DefaultInterpolation:2301,InterpolantFactoryMethodDiscrete:function(t){return new Ae(this.times,this.values,this.getValueSize(),t)},InterpolantFactoryMethodLinear:function(t){return new Le(this.times,this.values,this.getValueSize(),t)},InterpolantFactoryMethodSmooth:function(t){return new Te(this.times,this.values,this.getValueSize(),t)},setInterpolation:function(t){var e;switch(t){case 2300:e=this.InterpolantFactoryMethodDiscrete;break;case 2301:e=this.InterpolantFactoryMethodLinear;break;case 2302:e=this.InterpolantFactoryMethodSmooth}if(void 0!==e)this.createInterpolant=e;else{var i="unsupported interpolation for "+this.ValueTypeName+" keyframe track named "+this.name;if(void 0===this.createInterpolant){if(t===this.DefaultInterpolation)throw new Error(i);this.setInterpolation(this.DefaultInterpolation)}}},getInterpolation:function(){switch(this.createInterpolant){case this.InterpolantFactoryMethodDiscrete:return 2300;case this.InterpolantFactoryMethodLinear:return 2301;case this.InterpolantFactoryMethodSmooth:return 2302}},getValueSize:function(){return this.values.length/this.times.length},shift:function(t){if(0!==t)for(var e=this.times,i=0,n=e.length;i!==n;++i)e[i]+=t;return this},scale:function(t){if(1!==t)for(var e=this.times,i=0,n=e.length;i!==n;++i)e[i]*=t;return this},trim:function(t,e){for(var i=this.times,n=i.length,r=0,a=n-1;r!==n&&i[r]<t;)++r;for(;-1!==a&&i[a]>e;)--a;if(++a,0!==r||a!==n){r>=a&&(a=Math.max(a,1),r=a-1);var o=this.getValueSize();this.times=Hr.arraySlice(i,r,a),this.values=Hr.arraySlice(this.values,r*o,a*o)}return this},validate:function(){var t=!0,e=this.getValueSize();e-Math.floor(e)!=0&&(t=!1);var i=this.times,n=this.values,r=i.length;0===r&&(t=!1);for(var a=null,o=0;o!==r;o++){var s=i[o];if("number"==typeof s&&isNaN(s)){t=!1;break}if(null!==a&&a>s){t=!1;break}a=s}if(void 0!==n&&Hr.isTypedArray(n))for(var o=0,c=n.length;o!==c;++o){var l=n[o];if(isNaN(l)){t=!1;break}}return t},optimize:function(){for(var t=this.times,e=this.values,i=this.getValueSize(),n=2302===this.getInterpolation(),r=1,a=t.length-1,o=1;o<a;++o){var s=!1,c=t[o];if(c!==t[o+1]&&(1!==o||c!==c[0]))if(n)s=!0;else for(var l=o*i,h=l-i,u=l+i,f=0;f!==i;++f){var d=e[l+f];if(d!==e[h+f]||d!==e[u+f]){s=!0;break}}if(s){if(o!==r){t[r]=t[o];for(var p=o*i,m=r*i,f=0;f!==i;++f)e[m+f]=e[p+f]}++r}}if(a>0){t[r]=t[a];for(var p=a*i,m=r*i,f=0;f!==i;++f)e[m+f]=e[p+f];++r}return r!==t.length&&(this.times=Hr.arraySlice(t,0,r),this.values=Hr.arraySlice(e,0,r*i)),this}},Ce.prototype=Object.assign(Object.create(Wr),{constructor:Ce,ValueTypeName:"vector"}),Re.prototype=Object.assign(Object.create(Ee.prototype),{constructor:Re,interpolate_:function(t,e,i,n){for(var r=this.resultBuffer,a=this.sampleValues,s=this.valueSize,c=t*s,l=(i-e)/(n-e),h=c+s;c!==h;c+=4)o.slerpFlat(r,0,a,c-s,a,c,l);return r}}),Ne.prototype=Object.assign(Object.create(Wr),{constructor:Ne,ValueTypeName:"quaternion",DefaultInterpolation:2301,InterpolantFactoryMethodLinear:function(t){return new Re(this.times,this.values,this.getValueSize(),t)},InterpolantFactoryMethodSmooth:void 0}),De.prototype=Object.assign(Object.create(Wr),{constructor:De,ValueTypeName:"number"}),Ue.prototype=Object.assign(Object.create(Wr),{constructor:Ue,ValueTypeName:"string",ValueBufferType:Array,DefaultInterpolation:2300,InterpolantFactoryMethodLinear:void 0,InterpolantFactoryMethodSmooth:void 0}),Ie.prototype=Object.assign(Object.create(Wr),{constructor:Ie,ValueTypeName:"bool",ValueBufferType:Array,DefaultInterpolation:2300,InterpolantFactoryMethodLinear:void 0,InterpolantFactoryMethodSmooth:void 0}),Oe.prototype=Object.assign(Object.create(Wr),{constructor:Oe,ValueTypeName:"color"}),ze.prototype=Wr,Wr.constructor=ze,Object.assign(ze,{parse:function(t){if(void 0===t.type)throw new Error("track type undefined, can not parse");var e=ze._getTrackTypeForValueTypeName(t.type);if(void 0===t.times){var i=[],n=[];Hr.flattenJSON(t.keys,i,n,"value"),t.times=i,t.values=n}return void 0!==e.parse?e.parse(t):new e(t.name,t.times,t.values,t.interpolation)},toJSON:function(t){var e,i=t.constructor;if(void 0!==i.toJSON)e=i.toJSON(t);else{e={name:t.name,times:Hr.convertArray(t.times,Array),values:Hr.convertArray(t.values,Array)};var n=t.getInterpolation();n!==t.DefaultInterpolation&&(e.interpolation=n)}return e.type=t.ValueTypeName,e},_getTrackTypeForValueTypeName:function(t){switch(t.toLowerCase()){case"scalar":case"double":case"float":case"number":case"integer":return De;case"vector":case"vector2":case"vector3":case"vector4":return Ce;case"color":return Oe;case"quaternion":return Ne;case"bool":case"boolean":return Ie;case"string":return Ue}throw new Error("Unsupported typeName: "+t)}}),Fe.prototype={constructor:Fe,resetDuration:function(){for(var t=this.tracks,e=0,i=0,n=t.length;i!==n;++i){var r=this.tracks[i];e=Math.max(e,r.times[r.times.length-1])}this.duration=e},trim:function(){for(var t=0;t<this.tracks.length;t++)this.tracks[t].trim(0,this.duration);return this},optimize:function(){for(var t=0;t<this.tracks.length;t++)this.tracks[t].optimize();return this}},Object.assign(Fe,{parse:function(t){for(var e=[],i=t.tracks,n=1/(t.fps||1),r=0,a=i.length;r!==a;++r)e.push(ze.parse(i[r]).scale(n));return new Fe(t.name,t.duration,e)},toJSON:function(t){for(var e=[],i=t.tracks,n={name:t.name,duration:t.duration,tracks:e},r=0,a=i.length;r!==a;++r)e.push(ze.toJSON(i[r]));return n},
CreateFromMorphTargetSequence:function(t,e,i,n){for(var r=e.length,a=[],o=0;o<r;o++){var s=[],c=[];s.push((o+r-1)%r,o,(o+1)%r),c.push(0,1,0);var l=Hr.getKeyframeOrder(s);s=Hr.sortedArray(s,1,l),c=Hr.sortedArray(c,1,l),n||0!==s[0]||(s.push(r),c.push(c[0])),a.push(new De(".morphTargetInfluences["+e[o].name+"]",s,c).scale(1/i))}return new Fe(t,-1,a)},findByName:function(t,e){var i=t;if(!Array.isArray(t)){var n=t;i=n.geometry&&n.geometry.animations||n.animations}for(var r=0;r<i.length;r++)if(i[r].name===e)return i[r];return null},CreateClipsFromMorphTargetSequences:function(t,e,i){for(var n={},r=/^([\w-]*?)([\d]+)$/,a=0,o=t.length;a<o;a++){var s=t[a],c=s.name.match(r);if(c&&c.length>1){var l=c[1],h=n[l];h||(n[l]=h=[]),h.push(s)}}var u=[];for(var l in n)u.push(Fe.CreateFromMorphTargetSequence(l,n[l],e,i));return u},parseAnimation:function(t,e){if(!t)return null;for(var i=function(t,e,i,n,r){if(0!==i.length){var a=[],o=[];Hr.flattenJSON(i,a,o,n),0!==a.length&&r.push(new t(e,a,o))}},n=[],r=t.name||"default",a=t.length||-1,o=t.fps||30,s=t.hierarchy||[],c=0;c<s.length;c++){var l=s[c].keys;if(l&&0!==l.length)if(l[0].morphTargets){for(var h={},u=0;u<l.length;u++)if(l[u].morphTargets)for(var f=0;f<l[u].morphTargets.length;f++)h[l[u].morphTargets[f]]=-1;for(var d in h){for(var p=[],m=[],f=0;f!==l[u].morphTargets.length;++f){var g=l[u];p.push(g.time),m.push(g.morphTarget===d?1:0)}n.push(new De(".morphTargetInfluence["+d+"]",p,m))}a=h.length*(o||1)}else{var v=".bones["+e[c].name+"]";i(Ce,v+".position",l,"pos",n),i(Ne,v+".quaternion",l,"rot",n),i(Ce,v+".scale",l,"scl",n)}}return 0===n.length?null:new Fe(r,a,n)}}),Object.assign(Be.prototype,{load:function(t,e,i,n){var r=this,a=this.texturePath&&"string"==typeof this.texturePath?this.texturePath:Se.prototype.extractUrlBase(t),o=new be(this.manager);o.setWithCredentials(this.withCredentials),o.load(t,function(t){var i=JSON.parse(t),n=i.metadata;if(void 0!==n){var o=n.type;if(void 0!==o){if("object"===o.toLowerCase())return;if("scene"===o.toLowerCase())return}}var s=r.parse(i,a);e(s.geometry,s.materials)},i,n)},setTexturePath:function(t){this.texturePath=t},parse:function(t,e){var n=new xt,a=void 0!==t.scale?1/t.scale:1;if(function(e){function r(t,e){return t&1<<e}var a,o,c,l,h,u,f,d,p,m,g,v,x,y,_,M,b,w,S,E,T,L,A,P,C,R,N,D=t.faces,U=t.vertices,I=t.normals,O=t.colors,z=0;if(void 0!==t.uvs){for(a=0;a<t.uvs.length;a++)t.uvs[a].length&&z++;for(a=0;a<z;a++)n.faceVertexUvs[a]=[]}for(l=0,h=U.length;l<h;)w=new s,w.x=U[l++]*e,w.y=U[l++]*e,w.z=U[l++]*e,n.vertices.push(w);for(l=0,h=D.length;l<h;)if(m=D[l++],g=r(m,0),v=r(m,1),x=r(m,3),y=r(m,4),_=r(m,5),M=r(m,6),b=r(m,7),g){if(E=new lt,E.a=D[l],E.b=D[l+1],E.c=D[l+3],T=new lt,T.a=D[l+1],T.b=D[l+2],T.c=D[l+3],l+=4,v&&(p=D[l++],E.materialIndex=p,T.materialIndex=p),c=n.faces.length,x)for(a=0;a<z;a++)for(P=t.uvs[a],n.faceVertexUvs[a][c]=[],n.faceVertexUvs[a][c+1]=[],o=0;o<4;o++)d=D[l++],R=P[2*d],N=P[2*d+1],C=new i(R,N),2!==o&&n.faceVertexUvs[a][c].push(C),0!==o&&n.faceVertexUvs[a][c+1].push(C);if(y&&(f=3*D[l++],E.normal.set(I[f++],I[f++],I[f]),T.normal.copy(E.normal)),_)for(a=0;a<4;a++)f=3*D[l++],A=new s(I[f++],I[f++],I[f]),2!==a&&E.vertexNormals.push(A),0!==a&&T.vertexNormals.push(A);if(M&&(u=D[l++],L=O[u],E.color.setHex(L),T.color.setHex(L)),b)for(a=0;a<4;a++)u=D[l++],L=O[u],2!==a&&E.vertexColors.push(new W(L)),0!==a&&T.vertexColors.push(new W(L));n.faces.push(E),n.faces.push(T)}else{if(S=new lt,S.a=D[l++],S.b=D[l++],S.c=D[l++],v&&(p=D[l++],S.materialIndex=p),c=n.faces.length,x)for(a=0;a<z;a++)for(P=t.uvs[a],n.faceVertexUvs[a][c]=[],o=0;o<3;o++)d=D[l++],R=P[2*d],N=P[2*d+1],C=new i(R,N),n.faceVertexUvs[a][c].push(C);if(y&&(f=3*D[l++],S.normal.set(I[f++],I[f++],I[f])),_)for(a=0;a<3;a++)f=3*D[l++],A=new s(I[f++],I[f++],I[f]),S.vertexNormals.push(A);if(M&&(u=D[l++],S.color.setHex(O[u])),b)for(a=0;a<3;a++)u=D[l++],S.vertexColors.push(new W(O[u]));n.faces.push(S)}}(a),function(){var e=void 0!==t.influencesPerVertex?t.influencesPerVertex:2;if(t.skinWeights)for(var i=0,a=t.skinWeights.length;i<a;i+=e){var o=t.skinWeights[i],s=e>1?t.skinWeights[i+1]:0,c=e>2?t.skinWeights[i+2]:0,l=e>3?t.skinWeights[i+3]:0;n.skinWeights.push(new r(o,s,c,l))}if(t.skinIndices)for(var i=0,a=t.skinIndices.length;i<a;i+=e){var h=t.skinIndices[i],u=e>1?t.skinIndices[i+1]:0,f=e>2?t.skinIndices[i+2]:0,d=e>3?t.skinIndices[i+3]:0;n.skinIndices.push(new r(h,u,f,d))}n.bones=t.bones,n.bones&&n.bones.length>0&&(n.skinWeights.length!==n.skinIndices.length||(n.skinIndices.length,n.vertices.length))}(),function(e){if(void 0!==t.morphTargets)for(var i=0,r=t.morphTargets.length;i<r;i++){n.morphTargets[i]={},n.morphTargets[i].name=t.morphTargets[i].name,n.morphTargets[i].vertices=[];for(var a=n.morphTargets[i].vertices,o=t.morphTargets[i].vertices,c=0,l=o.length;c<l;c+=3){var h=new s;h.x=o[c]*e,h.y=o[c+1]*e,h.z=o[c+2]*e,a.push(h)}}if(void 0!==t.morphColors&&t.morphColors.length>0)for(var u=n.faces,f=t.morphColors[0].colors,i=0,r=u.length;i<r;i++)u[i].color.fromArray(f,3*i)}(a),function(){var e=[],i=[];void 0!==t.animation&&i.push(t.animation),void 0!==t.animations&&(t.animations.length?i=i.concat(t.animations):i.push(t.animations));for(var r=0;r<i.length;r++){var a=Fe.parseAnimation(i[r],n.bones);a&&e.push(a)}if(n.morphTargets){var o=Fe.CreateClipsFromMorphTargetSequences(n.morphTargets,10);e=e.concat(o)}e.length>0&&(n.animations=e)}(),n.computeFaceNormals(),n.computeBoundingSphere(),void 0===t.materials||0===t.materials.length)return{geometry:n};var o=Se.prototype.initMaterials(t.materials,e,this.crossOrigin);return{geometry:n,materials:o}}}),Ge.prototype=Object.assign(Object.create(ot.prototype),{constructor:Ge,isLight:!0,copy:function(t){return ot.prototype.copy.call(this,t),this.color.copy(t.color),this.intensity=t.intensity,this},toJSON:function(t){var e=ot.prototype.toJSON.call(this,t);return e.object.color=this.color.getHex(),e.object.intensity=this.intensity,void 0!==this.groundColor&&(e.object.groundColor=this.groundColor.getHex()),void 0!==this.distance&&(e.object.distance=this.distance),void 0!==this.angle&&(e.object.angle=this.angle),void 0!==this.decay&&(e.object.decay=this.decay),void 0!==this.penumbra&&(e.object.penumbra=this.penumbra),void 0!==this.shadow&&(e.object.shadow=this.shadow.toJSON()),e}}),Object.assign(Ve.prototype,{copy:function(t){return this.camera=t.camera.clone(),this.bias=t.bias,this.radius=t.radius,this.mapSize.copy(t.mapSize),this},clone:function(){return(new this.constructor).copy(this)},toJSON:function(){var t={};return 0!==this.bias&&(t.bias=this.bias),1!==this.radius&&(t.radius=this.radius),512===this.mapSize.x&&512===this.mapSize.y||(t.mapSize=this.mapSize.toArray()),t.camera=this.camera.toJSON(!1).object,delete t.camera.matrix,t}}),ke.prototype=Object.assign(Object.create(Ve.prototype),{constructor:ke}),He.prototype=Object.assign(Object.create(Ge.prototype),{constructor:He,isDirectionalLight:!0,copy:function(t){return Ge.prototype.copy.call(this,t),this.target=t.target.clone(),this.shadow=t.shadow.clone(),this}}),We.prototype=Object.assign(Object.create(Ge.prototype),{constructor:We,isAmbientLight:!0}),je.prototype.clone=function(){return new je(void 0===this.value.clone?this.value:this.value.clone())},Xe.prototype={constructor:Xe,linePrecision:1,set:function(t,e){this.ray.set(t,e)},setFromCamera:function(t,e){e&&e.isPerspectiveCamera?(this.ray.origin.setFromMatrixPosition(e.matrixWorld),this.ray.direction.set(t.x,t.y,.5).unproject(e).sub(this.ray.origin).normalize()):e&&e.isOrthographicCamera&&(this.ray.origin.set(t.x,t.y,(e.near+e.far)/(e.near-e.far)).unproject(e),this.ray.direction.set(0,0,-1).transformDirection(e.matrixWorld))},intersectObject:function(t,e){var i=[];return qe(t,this,i,e),i.sort(Ye),i},intersectObjects:function(t,e){var i=[];if(!1===Array.isArray(t))return i;for(var n=0,r=t.length;n<r;n++)qe(t[n],this,i,e);return i.sort(Ye),i}},Ze.prototype={constructor:Ze,start:function(){this.startTime=(performance||Date).now(),this.oldTime=this.startTime,this.elapsedTime=0,this.running=!0},stop:function(){this.getElapsedTime(),this.running=!1},getElapsedTime:function(){return this.getDelta(),this.elapsedTime},getDelta:function(){var t=0;if(this.autoStart&&!this.running&&this.start(),this.running){var e=(performance||Date).now();t=(e-this.oldTime)/1e3,this.oldTime=e,this.elapsedTime+=t}return t}},Je.prototype=Object.create(ae.prototype),Je.prototype.constructor=Je,Qe.prototype={constructor:Qe,getPoint:function(t){return null},getPointAt:function(t){var e=this.getUtoTmapping(t);return this.getPoint(e)},getPoints:function(t){isNaN(t)&&(t=5);for(var e=[],i=0;i<=t;i++)e.push(this.getPoint(i/t));return e},getSpacedPoints:function(t){isNaN(t)&&(t=5);for(var e=[],i=0;i<=t;i++)e.push(this.getPointAt(i/t));return e},getLength:function(){var t=this.getLengths();return t[t.length-1]},getLengths:function(t){if(isNaN(t)&&(t=this.__arcLengthDivisions?this.__arcLengthDivisions:200),this.cacheArcLengths&&this.cacheArcLengths.length===t+1&&!this.needsUpdate)return this.cacheArcLengths;this.needsUpdate=!1;var e,i,n=[],r=this.getPoint(0),a=0;for(n.push(0),i=1;i<=t;i++)e=this.getPoint(i/t),a+=e.distanceTo(r),n.push(a),r=e;return this.cacheArcLengths=n,n},updateArcLengths:function(){this.needsUpdate=!0,this.getLengths()},getUtoTmapping:function(t,e){var i,n=this.getLengths(),r=0,a=n.length;i=e||t*n[a-1];for(var o,s=0,c=a-1;s<=c;)if(r=Math.floor(s+(c-s)/2),(o=n[r]-i)<0)s=r+1;else{if(!(o>0)){c=r;break}c=r-1}if(r=c,n[r]===i){var l=r/(a-1);return l}var h=n[r],u=n[r+1],f=u-h,d=(i-h)/f,l=(r+d)/(a-1);return l},getTangent:function(t){var e=t-1e-4,i=t+1e-4;e<0&&(e=0),i>1&&(i=1);var n=this.getPoint(e);return this.getPoint(i).clone().sub(n).normalize()},getTangentAt:function(t){var e=this.getUtoTmapping(t);return this.getTangent(e)},computeFrenetFrames:function(t,e){var i,n,r,a=new s,o=[],l=[],h=[],u=new s,f=new c;for(i=0;i<=t;i++)n=i/t,o[i]=this.getTangentAt(n),o[i].normalize();l[0]=new s,h[0]=new s;var d=Number.MAX_VALUE,p=Math.abs(o[0].x),m=Math.abs(o[0].y),g=Math.abs(o[0].z);for(p<=d&&(d=p,a.set(1,0,0)),m<=d&&(d=m,a.set(0,1,0)),g<=d&&a.set(0,0,1),u.crossVectors(o[0],a).normalize(),l[0].crossVectors(o[0],u),h[0].crossVectors(o[0],l[0]),i=1;i<=t;i++)l[i]=l[i-1].clone(),h[i]=h[i-1].clone(),u.crossVectors(o[i-1],o[i]),u.length()>Number.EPSILON&&(u.normalize(),r=Math.acos(wr.clamp(o[i-1].dot(o[i]),-1,1)),l[i].applyMatrix4(f.makeRotationAxis(u,r))),h[i].crossVectors(o[i],l[i]);if(!0===e)for(r=Math.acos(wr.clamp(l[0].dot(l[t]),-1,1)),r/=t,o[0].dot(u.crossVectors(l[0],l[t]))>0&&(r=-r),i=1;i<=t;i++)l[i].applyMatrix4(f.makeRotationAxis(o[i],r*i)),h[i].crossVectors(o[i],l[i]);return{tangents:o,normals:l,binormals:h}}},Ke.prototype=Object.create(Qe.prototype),Ke.prototype.constructor=Ke,Ke.prototype.isLineCurve=!0,Ke.prototype.getPoint=function(t){if(1===t)return this.v2.clone();var e=this.v2.clone().sub(this.v1);return e.multiplyScalar(t).add(this.v1),e},Ke.prototype.getPointAt=function(t){return this.getPoint(t)},Ke.prototype.getTangent=function(t){return this.v2.clone().sub(this.v1).normalize()},$e.prototype=Object.assign(Object.create(Qe.prototype),{constructor:$e,add:function(t){this.curves.push(t)},closePath:function(){var t=this.curves[0].getPoint(0),e=this.curves[this.curves.length-1].getPoint(1);t.equals(e)||this.curves.push(new Ke(e,t))},getPoint:function(t){for(var e=t*this.getLength(),i=this.getCurveLengths(),n=0;n<i.length;){if(i[n]>=e){var r=i[n]-e,a=this.curves[n],o=a.getLength(),s=0===o?0:1-r/o;return a.getPointAt(s)}n++}return null},getLength:function(){var t=this.getCurveLengths();return t[t.length-1]},updateArcLengths:function(){this.needsUpdate=!0,this.cacheLengths=null,this.getLengths()},getCurveLengths:function(){if(this.cacheLengths&&this.cacheLengths.length===this.curves.length)return this.cacheLengths;for(var t=[],e=0,i=0,n=this.curves.length;i<n;i++)e+=this.curves[i].getLength(),t.push(e);return this.cacheLengths=t,t},getSpacedPoints:function(t){isNaN(t)&&(t=40);for(var e=[],i=0;i<=t;i++)e.push(this.getPoint(i/t));return this.autoClose&&e.push(e[0]),e},getPoints:function(t){t=t||12;for(var e,i=[],n=0,r=this.curves;n<r.length;n++)for(var a=r[n],o=a&&a.isEllipseCurve?2*t:a&&a.isLineCurve?1:a&&a.isSplineCurve?t*a.points.length:t,s=a.getPoints(o),c=0;c<s.length;c++){var l=s[c];e&&e.equals(l)||(i.push(l),e=l)}return this.autoClose&&i.length>1&&!i[i.length-1].equals(i[0])&&i.push(i[0]),i},createPointsGeometry:function(t){var e=this.getPoints(t);return this.createGeometry(e)},createSpacedPointsGeometry:function(t){var e=this.getSpacedPoints(t);return this.createGeometry(e)},createGeometry:function(t){for(var e=new xt,i=0,n=t.length;i<n;i++){var r=t[i];e.vertices.push(new s(r.x,r.y,r.z||0))}return e}}),ti.prototype=Object.create(Qe.prototype),ti.prototype.constructor=ti,ti.prototype.isEllipseCurve=!0,ti.prototype.getPoint=function(t){for(var e=2*Math.PI,n=this.aEndAngle-this.aStartAngle,r=Math.abs(n)<Number.EPSILON;n<0;)n+=e;for(;n>e;)n-=e;n<Number.EPSILON&&(n=r?0:e),!0!==this.aClockwise||r||(n===e?n=-e:n-=e);var a=this.aStartAngle+t*n,o=this.aX+this.xRadius*Math.cos(a),s=this.aY+this.yRadius*Math.sin(a);if(0!==this.aRotation){var c=Math.cos(this.aRotation),l=Math.sin(this.aRotation),h=o-this.aX,u=s-this.aY;o=h*c-u*l+this.aX,s=h*l+u*c+this.aY}return new i(o,s)},ui.prototype=Object.create(Qe.prototype),ui.prototype.constructor=ui,ui.prototype.isSplineCurve=!0,ui.prototype.getPoint=function(t){var e=this.points,n=(e.length-1)*t,r=Math.floor(n),a=n-r,o=e[0===r?r:r-1],s=e[r],c=e[r>e.length-2?e.length-1:r+1],l=e[r>e.length-3?e.length-1:r+2];return new i(ei(a,o.x,s.x,c.x,l.x),ei(a,o.y,s.y,c.y,l.y))},fi.prototype=Object.create(Qe.prototype),fi.prototype.constructor=fi,fi.prototype.getPoint=function(t){var e=this.v0,n=this.v1,r=this.v2,a=this.v3;return new i(hi(t,e.x,n.x,r.x,a.x),hi(t,e.y,n.y,r.y,a.y))},di.prototype=Object.create(Qe.prototype),di.prototype.constructor=di,di.prototype.getPoint=function(t){var e=this.v0,n=this.v1,r=this.v2;return new i(ai(t,e.x,n.x,r.x),ai(t,e.y,n.y,r.y))};var jr=Object.assign(Object.create($e.prototype),{fromPoints:function(t){this.moveTo(t[0].x,t[0].y);for(var e=1,i=t.length;e<i;e++)this.lineTo(t[e].x,t[e].y)},moveTo:function(t,e){this.currentPoint.set(t,e)},lineTo:function(t,e){var n=new Ke(this.currentPoint.clone(),new i(t,e));this.curves.push(n),this.currentPoint.set(t,e)},quadraticCurveTo:function(t,e,n,r){var a=new di(this.currentPoint.clone(),new i(t,e),new i(n,r));this.curves.push(a),this.currentPoint.set(n,r)},bezierCurveTo:function(t,e,n,r,a,o){var s=new fi(this.currentPoint.clone(),new i(t,e),new i(n,r),new i(a,o));this.curves.push(s),this.currentPoint.set(a,o)},splineThru:function(t){var e=[this.currentPoint.clone()].concat(t),i=new ui(e);this.curves.push(i),this.currentPoint.copy(t[t.length-1])},arc:function(t,e,i,n,r,a){var o=this.currentPoint.x,s=this.currentPoint.y;this.absarc(t+o,e+s,i,n,r,a)},absarc:function(t,e,i,n,r,a){this.absellipse(t,e,i,i,n,r,a)},ellipse:function(t,e,i,n,r,a,o,s){var c=this.currentPoint.x,l=this.currentPoint.y;this.absellipse(t+c,e+l,i,n,r,a,o,s)},absellipse:function(t,e,i,n,r,a,o,s){var c=new ti(t,e,i,n,r,a,o,s);if(this.curves.length>0){var l=c.getPoint(0);l.equals(this.currentPoint)||this.lineTo(l.x,l.y)}this.curves.push(c);var h=c.getPoint(1);this.currentPoint.copy(h)}});pi.prototype=jr,jr.constructor=pi,mi.prototype=Object.assign(Object.create(jr),{constructor:mi,getPointsHoles:function(t){for(var e=[],i=0,n=this.holes.length;i<n;i++)e[i]=this.holes[i].getPoints(t);return e},extractAllPoints:function(t){return{shape:this.getPoints(t),holes:this.getPointsHoles(t)}},extractPoints:function(t){return this.extractAllPoints(t)}});Object.assign(Q.prototype,{center:function(t){return this.getCenter(t)},empty:function(){return this.isEmpty()},isIntersectionBox:function(t){return this.intersectsBox(t)},isIntersectionSphere:function(t){return this.intersectsSphere(t)},size:function(t){return this.getSize(t)}}),wr.random16=function(){return Math.random()},Object.assign(c.prototype,{extractPosition:function(t){return this.copyPosition(t)},flattenToArrayOffset:function(t,e){return this.toArray(t,e)},getPosition:function(){var t;return function(){return void 0===t&&(t=new s),t.setFromMatrixColumn(this,3)}}(),setRotationFromQuaternion:function(t){return this.makeRotationFromQuaternion(t)},multiplyVector3:function(t){return t.applyMatrix4(this)},multiplyVector4:function(t){return t.applyMatrix4(this)},multiplyVector3Array:function(t){return this.applyToVector3Array(t)},rotateAxis:function(t){t.transformDirection(this)},crossVector:function(t){return t.applyMatrix4(this)},translate:function(){},rotateX:function(){},rotateY:function(){},rotateZ:function(){},rotateByAxis:function(){},applyToBuffer:function(t,e,i){return this.applyToBufferAttribute(t)},applyToVector3Array:function(t,e,i){},makeFrustum:function(t,e,i,n,r,a){return this.makePerspective(t,e,n,i,r,a)}}),o.prototype.multiplyVector3=function(t){return t.applyQuaternion(this)},Object.assign(mi.prototype,{extrude:function(t){return new ue(this,t)},makeGeometry:function(t){return new le(this,t)}}),Object.assign(i.prototype,{fromAttribute:function(t,e,i){return this.fromBufferAttribute(t,e,i)}}),Object.assign(s.prototype,{setEulerFromRotationMatrix:function(){},setEulerFromQuaternion:function(){},getPositionFromMatrix:function(t){return this.setFromMatrixPosition(t)},getScaleFromMatrix:function(t){return this.setFromMatrixScale(t)},getColumnFromMatrix:function(t,e){return this.setFromMatrixColumn(e,t)},applyProjection:function(t){return this.applyMatrix4(t)},fromAttribute:function(t,e,i){return this.fromBufferAttribute(t,e,i)}}),xt.prototype.computeTangents=function(){},Object.assign(ot.prototype,{getChildByName:function(t){return this.getObjectByName(t)},renderDepth:function(){},translate:function(t,e){return this.translateOnAxis(e,t)}}),Object.defineProperties(ot.prototype,{eulerOrder:{get:function(){return this.rotation.order},set:function(t){this.rotation.order=t}},useQuaternion:{get:function(){},set:function(){}}}),Tt.prototype.setLens=function(t,e){void 0!==e&&(this.filmGauge=e),this.setFocalLength(t)},Object.assign(yt.prototype,{addIndex:function(t){this.setIndex(t)},addDrawCall:function(t,e,i){this.addGroup(t,e)},clearDrawCalls:function(){this.clearGroups()},computeTangents:function(){},computeOffsets:function(){}}),Object.defineProperties(yt.prototype,{drawcalls:{get:function(){return this.groups}},offsets:{get:function(){return this.groups}}}),Object.defineProperties(je.prototype,{dynamic:{set:function(){}},onUpdate:{value:function(){return this}}}),Object.assign($t.prototype,{supportsFloatTextures:function(){return this.extensions.get("OES_texture_float")},supportsHalfFloatTextures:function(){return this.extensions.get("OES_texture_half_float")},supportsStandardDerivatives:function(){return this.extensions.get("OES_standard_derivatives")},supportsCompressedTextureS3TC:function(){return this.extensions.get("WEBGL_compressed_texture_s3tc")},supportsCompressedTexturePVRTC:function(){return this.extensions.get("WEBGL_compressed_texture_pvrtc")},supportsBlendMinMax:function(){return this.extensions.get("EXT_blend_minmax")},supportsVertexTextures:function(){return this.capabilities.vertexTextures},supportsInstancedArrays:function(){return this.extensions.get("ANGLE_instanced_arrays")},enableScissorTest:function(t){this.setScissorTest(t)},initMaterial:function(){},addPrePlugin:function(){},addPostPlugin:function(){},updateShadowMap:function(){}}),Object.defineProperties($t.prototype,{shadowMapEnabled:{get:function(){return this.shadowMap.enabled},set:function(t){this.shadowMap.enabled=t}},shadowMapType:{get:function(){return this.shadowMap.type},set:function(t){this.shadowMap.type=t}},shadowMapCullFace:{get:function(){return this.shadowMap.cullFace},set:function(t){this.shadowMap.cullFace=t}}}),Object.defineProperties(a.prototype,{wrapS:{get:function(){return this.texture.wrapS},set:function(t){this.texture.wrapS=t}},wrapT:{get:function(){return this.texture.wrapT},set:function(t){this.texture.wrapT=t}},magFilter:{get:function(){return this.texture.magFilter},set:function(t){this.texture.magFilter=t}},minFilter:{get:function(){return this.texture.minFilter},set:function(t){this.texture.minFilter=t}},anisotropy:{get:function(){return this.texture.anisotropy},set:function(t){this.texture.anisotropy=t}},offset:{get:function(){return this.texture.offset},set:function(t){this.texture.offset=t}},repeat:{get:function(){return this.texture.repeat},set:function(t){this.texture.repeat=t}},format:{get:function(){return this.texture.format},set:function(t){this.texture.format=t}},type:{get:function(){return this.texture.type},set:function(t){this.texture.type=t}},generateMipmaps:{get:function(){return this.texture.generateMipmaps},set:function(t){this.texture.generateMipmaps=t}}});var Xr={merge:function(t,e,i){var n;e.isMesh&&(e.matrixAutoUpdate&&e.updateMatrix(),n=e.matrix,e=e.geometry),t.merge(e,n,i)},center:function(t){return t.center()}},Yr={crossOrigin:void 0,loadTexture:function(t,e,i,n){var r=new Me;r.setCrossOrigin(this.crossOrigin);var a=r.load(t,i,void 0,n);return e&&(a.mapping=e),a},loadTextureCube:function(t,e,i,n){var r=new _e;r.setCrossOrigin(this.crossOrigin);var a=r.load(t,i,void 0,n);return e&&(a.mapping=e),a}};t.WebGLRenderTarget=a,t.WebGLRenderer=$t,t.ShaderLib=Ur,t.UniformsUtils=Cr,t.Scene=te,t.Sprite=ie,t.Mesh=_t,t.LineSegments=ae,t.VideoTexture=oe,t.CubeTexture=l,t.Texture=n,t.CubeTextureLoader=_e,t.TextureLoader=Me,t.JSONLoader=Be,t.ImageLoader=ye,t.Loader=Se,t.Cache=Vr,t.DirectionalLight=He,t.AmbientLight=We,t.PerspectiveCamera=Tt,t.OrthographicCamera=Lt,t.Camera=Et,t.Uniform=je,t.BufferGeometry=yt,t.GeometryIdCount=vt,t.Geometry=xt,t.Face3=lt,t.Object3D=ot,t.Raycaster=Xe,t.EventDispatcher=e,t.Clock=Ze,t.Math=wr,t.Plane=tt,t.Sphere=K,t.Matrix4=c,t.Box3=Q,t.Euler=rt,t.Vector3=s,t.Vector2=i,t.Quaternion=o,t.Color=W,t.AxisHelper=Je,t.Shape=mi,t.Path=pi,t.SphereGeometry=se,t.SphereBufferGeometry=ce,t.PlaneGeometry=wt,t.PlaneBufferGeometry=St,t.ShapeGeometry=le,t.ShapeBufferGeometry=he,t.ExtrudeGeometry=ue,t.CylinderGeometry=fe,t.CylinderBufferGeometry=de,t.CircleGeometry=pe,t.CircleBufferGeometry=me,t.BoxGeometry=Mt,t.BoxBufferGeometry=bt,t.SpriteMaterial=ee,t.ShaderMaterial=Z,t.MultiMaterial=ge,t.MeshLambertMaterial=ve,t.MeshBasicMaterial=ht,t.LineBasicMaterial=ne,t.REVISION=_i,t.MOUSE=Mi,t.CullFaceNone=bi,t.CullFaceBack=wi,t.CullFaceFront=Si,t.CullFaceFrontBack=3,t.FrontFaceDirectionCW=Ei,t.FrontFaceDirectionCCW=1,t.BasicShadowMap=0,t.PCFShadowMap=Ti,t.PCFSoftShadowMap=Li,t.FrontSide=Ai,t.BackSide=Pi,t.DoubleSide=Ci,t.FlatShading=Ri,t.SmoothShading=Ni,t.NoColors=Di,t.FaceColors=1,t.VertexColors=Ui,t.NoBlending=Ii,t.NormalBlending=Oi,t.AdditiveBlending=zi,t.SubtractiveBlending=Fi,t.MultiplyBlending=Bi,t.CustomBlending=Gi,t.AddEquation=Vi,t.SubtractEquation=ki,t.ReverseSubtractEquation=Hi,t.MinEquation=Wi,t.MaxEquation=ji,t.ZeroFactor=Xi,t.OneFactor=Yi,t.SrcColorFactor=qi,t.OneMinusSrcColorFactor=Zi,t.SrcAlphaFactor=Ji,t.OneMinusSrcAlphaFactor=Qi,t.DstAlphaFactor=Ki,t.OneMinusDstAlphaFactor=$i,t.DstColorFactor=tn,t.OneMinusDstColorFactor=en,t.SrcAlphaSaturateFactor=nn,t.NeverDepth=rn,t.AlwaysDepth=an,t.LessDepth=on,t.LessEqualDepth=sn,t.EqualDepth=cn,t.GreaterEqualDepth=ln,t.GreaterDepth=hn,t.NotEqualDepth=un,t.MultiplyOperation=fn,t.MixOperation=dn,t.AddOperation=pn,t.NoToneMapping=mn,t.LinearToneMapping=gn,t.ReinhardToneMapping=vn,t.Uncharted2ToneMapping=xn,t.CineonToneMapping=yn,t.UVMapping=300,t.CubeReflectionMapping=_n,t.CubeRefractionMapping=Mn,t.EquirectangularReflectionMapping=bn,t.EquirectangularRefractionMapping=wn,t.SphericalReflectionMapping=Sn,t.CubeUVReflectionMapping=En,t.CubeUVRefractionMapping=Tn,t.RepeatWrapping=Ln,t.ClampToEdgeWrapping=An,t.MirroredRepeatWrapping=Pn,t.NearestFilter=Cn,t.NearestMipMapNearestFilter=Rn,t.NearestMipMapLinearFilter=Nn,t.LinearFilter=Dn,t.LinearMipMapNearestFilter=Un,t.LinearMipMapLinearFilter=In,t.UnsignedByteType=On,t.ByteType=zn,t.ShortType=Fn,t.UnsignedShortType=Bn,t.IntType=Gn,t.UnsignedIntType=Vn,t.FloatType=kn,t.HalfFloatType=Hn,t.UnsignedShort4444Type=Wn,t.UnsignedShort5551Type=jn,t.UnsignedShort565Type=Xn,t.UnsignedInt248Type=Yn,t.AlphaFormat=qn,t.RGBFormat=Zn,t.RGBAFormat=Jn,t.LuminanceFormat=Qn,t.LuminanceAlphaFormat=Kn,t.RGBEFormat=$n,t.DepthFormat=tr,t.DepthStencilFormat=er,t.RGB_S3TC_DXT1_Format=ir,t.RGBA_S3TC_DXT1_Format=nr,t.RGBA_S3TC_DXT3_Format=rr,t.RGBA_S3TC_DXT5_Format=ar,t.RGB_PVRTC_4BPPV1_Format=or,t.RGB_PVRTC_2BPPV1_Format=sr,t.RGBA_PVRTC_4BPPV1_Format=cr,t.RGBA_PVRTC_2BPPV1_Format=lr,t.RGB_ETC1_Format=hr,t.LoopOnce=2200,t.LoopRepeat=2201,t.LoopPingPong=2202,t.InterpolateDiscrete=2300,t.InterpolateLinear=2301,t.InterpolateSmooth=2302,t.ZeroCurvatureEnding=2400,t.ZeroSlopeEnding=2401,t.WrapAroundEnding=2402,t.TrianglesDrawMode=ur,t.TriangleStripDrawMode=fr,t.TriangleFanDrawMode=dr,t.LinearEncoding=pr,t.sRGBEncoding=mr,t.GammaEncoding=gr,t.RGBEEncoding=vr,t.LogLuvEncoding=3003,t.RGBM7Encoding=xr,t.RGBM16Encoding=yr,t.RGBDEncoding=_r,t.BasicDepthPacking=Mr,t.RGBADepthPacking=br,t.CubeGeometry=Mt,t.Face4=gi,t.LineStrip=0,t.LinePieces=1,t.MeshFaceMaterial=vi,t.Particle=xi,t.Vertex=yi,t.GeometryUtils=Xr,t.ImageUtils=Yr,Object.defineProperty(t,"__esModule",{value:!0})});
var _0x681e=[".PicSet.Infos: object expected","idlist2","base","idlist1","url: string expected","idlist1: array expected","idlist1: integer[] expected","idlist2: array expected",".PicNodeSet.idlist1: array expected",".PicNodeSet.idlist2: array expected","arrays","aurl","msgt","msgc","curl","csize","purl","msgt: string expected","Z: number expected","pointList","getFloorNum","getLength","getPointList","nearbyLine","areaToAreas","areaPoints","layerPoints","crossScheme","navdata","fnums","preprocess","calculateAreaRelation","getLinePoint","layerPToP","getAreaFormId","initCrossScheme","calculateCrossAreaPoints","canGoAreas","calculativeCrossLayerLine","getCanRunPoint1","pointIdListAdd","getSameId","calculatePath","opposite","getArrayMinus","getOptimutic","updataOneTime","getNumber","getNaviResult","navidata","result","getNearestNode","calculateAreaStartEnd","walkPath","getNaviResult2","costDistance","convertToCoor","findLine","findAllPath","getShortestPath","","endPoint","compare","updateNewShortestPathList","getShortestPath2","ladderType","updateNewShortestPathList2","endData","startMarker","endMarker","_locMarker","startMarkerLayer","endMarkerLayer","_naviResult","naviDescriptions","naviDescriptionsData","pause","is_end_","cros","isCrossingFuti","crossedFnum","toPassedFnum","locationMarkerUrl","image/pointer.png","locationMarkerSize","_groupsPoints","mode_","outcome","startData","lineObj","clearNaviLines","_getNaviResult","_needDrawLines_","drawNaviLine","ladderType_","image/start.png","image/end.png","ESImageMarker","_isEnd_","noMarker","_createMarker","navicore","mode","_getFloorsPoints","_naviDescriptions","navidistance","getCrossPoints","crossPoints","navLine","clearMarkers","clearLocationMarker","_drawlineByResults","_drawLines","_drawLinesByFloor","autoClearNaviLine","linesVisible","naviInfos","nex","includes","combinePoints","","played","cur","","point1","point2","dis2","dis","count","_preGid","ladderLen","crossFutiTime","walking","_gps","crossFloorTime","deviateCount","reRouting","surDistance","backcount","remain","maxEnd","arrivalCount",",","audioPlay","distanceToNext","naviConstraint","index","walk","walkingfunction","isSimulating","_analyse","_index","calcProjPoint","curLadder","directionAssert","relAngle","_boo","getLadderType","","","_tailLen","  ","relField","relDesc","","","","","startFloor","isMultiFloors","getPosition","_groupPointsIndex","inTime","minScale","_changeFnumIng","changeTiltAngle","moveTimer","followGap","_toRot","_animID","_allLen","vvs","_getTransformByLength","_gpsData","_toPos","_viewID","_scaleLevelToID","_animateFun","DEFAULT","isNaving","_moveTo","scaleAnimate","NAVI","_locMarkerToStartPoint","onstartNavi","_anim","RoomsHandler","RoomsLoader","modeldatas","polygondatas","modellayers","modelbaselayer","createRooms","createFloors","extent","WEBVIEW_MARKER","webViewMarker","childWidth_","childWidth","customHtmlId_","customHtmlId","0px","pointerEvents","iframe","viewPlane","updateCssScene","setSrc","IFRAME","WebGLRenderTarget","renderTarget2","readBuffer","passes","copyPass","writeBuffer","needsSwap","stencilFunc","EQUAL","swapBuffers","MaskPass","ClearMaskPass","Pass","state","buffers","setMask","depth","setLocked","stencil","setOp","REPLACE","setFunc","setClear","KEEP","overrideMaterial","clearAlpha","clearColor","getClearColor","getHex","textureID","tDiffuse","ShaderMaterial","UniformsUtils","defines","vertexShader","fragmentShader","quad","frustumCulled","varying vec2 vUv;","vUv = uv;","uniform float opacity;","gl_FragColor = opacity * texel;","minimal","BufferReader","rpc","configure","BufferWriter","utf8Slice","Service","rpcImpl must be a function","responseDelimited","rpcCall","request must be specified","rpcImpl","already ended","requestDelimited","zero","\0\0\0\0\0\0\0\0","low","high","byteLength","getElementsByTagName","head","createElement","script","type","text/javascript","utf-8","src",".hot-update.js","appendChild","undefined","No browser support",".hot-update.json","open","GET","send","onreadystatechange","readyState","status","Manifest request to "," timed out."," failed.","parse","responseText","ready","prepare","call","hot","parents","indexOf","push","children","prototype","hasOwnProperty","defineProperty","_selfAccepted","object","length","_acceptedDependencies","_selfDeclined","number","_declinedDependencies","_disposeHandlers","splice","idle","check() is only allowed in idle status","slice","Aborted because of declined dependency: "," in ","apply() is only allowed in ready status","function","abort","Aborted because "," is not accepted","pop","apply","errorHandler","fail","exports","webpackHotUpdate","d2022b1bca2d435bf3b2","use strict","message","stack","name","asPromise","base64","EventEmitter","float","inquire","utf8","pool","global","emptyArray","freeze","emptyObject","isNode","process","versions","node","isInteger","floor","isString","string","isset","isSet","isArray","keys","Buffer","buffer","utf8Write","_Buffer_from","_Buffer_allocUnsafe","Array","Long","dcodeIO","long","key2Re","key32Re","key64Re","longToHash","LongBits","from","toHash","zeroHash","longFromHash","fromHash","fromBits","toNumber","merge","lcFirst","charAt","toLowerCase","substring","newError","ProtocolError","oneOfGetter","oneOfSetter","_configure","Cannot call a class as a function","test","symbol","iterator","constructor","enumerable","value","writable","key","add","fns","remove","fire","shift","empty","Option","FullScreen","webkitCancelFullScreen","_hasWebkitFullScreen","webkitIsFullScreen","_hasMozFullScreen","mozFullScreen","body","webkitRequestFullScreen","mozRequestFullScreen","eachObject","startWith","endWith","cloneObj","__esModule","url","data","POST","isArrayBuffer","_isComplete","_status","_responseData","_httpStatus","default","Callbacks","_successCallbacks","_errorCallbacks","_httpServer","_initHttpServer","_httpStateChange","bind",".loc","responseType","setRequestHeader","X-Requested-With","XMLHttpRequest","Content-type","application/x-www-form-urlencoded","close","complete","_completeCallbacks","success","error","get","getJSON","async","post","ActiveXObject","Microsoft.XMLHTTP","judgeStatus","file:","protocol","response","_successCallback","_errorCallback","map","components","enabled","component","manager","append","forEach","mapPicker","start","update","parent","configurable","isElement","element","attr","style","addEvent","nodeType","tagName","isObject","getAttribute","setAttribute","index out of range: ","pos"," + "," > ","len","buf","illegal buffer","create","isBuffer","_slice","uint32","int32","sint32","bool","fixed32","readFloatLE","readDoubleLE","bytes","read","skip","skipType"," at offset ","toLong","zzDecode","next","val","tail","states","alloc","subarray","_push","fromNumber","uint64","int64","sint64","zzEncode","fixed64","sfixed64","writeFloatLE","double","writeDoubleLE","set","decode","fork","reset","ldelim","finish","ceil","encode","fromCharCode","join","invalid encoding","_listeners","off","ctx","writeFloatBE","readFloatBE","round","pow","writeDoubleBE","readDoubleBE","log","LN2","quire","charCodeAt","write","__lastPhi","__viewModeAnimating","__selectMaterialAnimId","lastSelectModelStore","updateCountDown_","__time","__cnt","__allTime","deltaTime","immediateDeltaTime","__moveToId","rotateTo","abs","sign","ESUtil","getValues","duration","_rotateToID","Tween","work","rotateAngle","callback","mapView","container_","removeChild","options","ESMapOptions","Evento","convert","init","camera","controls","minPolarAngle","maxPolarAngle","ESMapPicker","panorama","frameLimit","ESFrameLimit","mapTheme","ESMapTheme","mapScene","ESMapScene","mapService","ESMapService","zonTempObj","ESMapLogo","sceneOrtho","compass_","ESMapCompass","addEventListener","change","controlsChange_","viewMode_","fullSceen_","requireUpdateCollide_","location_","focusFnum_","scaler_","ESMapScaler","emit","controlstart","end","controlend","setValidRange_","validRange_","scaleLevels_","scaleLevel_","floorNums_","timer","Clock","timerImmediate","visibleNoFloorNums_","loader","JSONModelLoader","matList","animatque","o_count","ESMap","instance","layerAlias","ESLayer","ESLayerType","FLOOR_BASE","MODEL","MODEL_LABEL","TEXT_MARKER","IMAGE_MARKER","ESPolygonMarker","updateSize","openMap","sceneId_","__isNewScene","getO3dScene","scene","clear","openMap_","navigateTo","navigateFromTo","drawNavigation","clearLineMarkById","lineManager","datas_","clearAllLineMark","drawLineMark","o3d_","material","update_","datas","objects_","type_","UserPOI","height","position","offsetHeight","visibleFloorNumsChanged","visibleFloorNums","smooth","segments","_analyseRawPoints","points","ESMapSceneUtil","buildCurvePoints","curvature","fnum","ESLine","change3dColor","geometry","materials","emissive","Color","ESMapUtil","toColor","needsUpdate","hexToRgb","concat","color","getFloor","_type_","MODEL_LIFT","changeModelColor","layers","MODEL_BASE","floorNums","MultiMaterial","selectModelMat","faceRange","faces","_materialIndex","materialIndex","groupsNeedUpdate","getFloorHeight","offset","sceneZ_","toSceneCoord","sceneX_","scaleLevelTo","constraint","setScaleLevelLimit","Math","clamp","minScaleLevel_","initScaleLevel","scaleLevel","scaleLevelIn","scaleLevelOut","maxScaleLevel","zoomIn","zoomIn_","zoomOut","zoomOut_","renderer","setClearColor","_selectModelAlpha","prepare_","queryThemeV2","themeID","themeName","clearColor_","storeSelect","selectNull","lastSelectStore","mergeModels","muti","clone","action","material_","selectModelNull","storeModelSelected","_canPicked","pickFilterFunction","ESMapPoi","_mats","init_","keepPress_","intersects","mapCoord","point","hitCoord","sourceData","_ca","mapKeepPress","pickerObjects_","propogation","ESNodeType","faceIndex","modelSelectedEffect","MODEL3D","mapClickNode","pickerNone_","NONE","initUserLogo","ScaleLevel","setScene","maptime","getTime","setOriginCameraPosition","__isChangeTheme","minScaleLevel","maxScaleLevel_","defaultScaleLevel","Firstscale","listFloors","sort","floornum","fNums","all","visibleFloors","focusFloor","loadPoiIDList","_start_","asyncLoadFloors","IsMapLoading","loadFloor","mapSceneData","floors","image","replace",".png","Facility","Tid","Typeid","initPoiMateriaByData","stopAllAnimate","floors_","queryFloor","putFloor","createMaterial_","meta_","theme_","addModel","getO3dFloor","visible","visibleFloorNums_","focusAlphaMode","restoreFloorAlpha","setFloorAlpha","focusAlpha","getElementsByClassName","loading","none","panRange","maxX","minX","minY","viewMode","plane_","Mesh","PlaneGeometry","MeshBasicMaterial","o3dScene_","_haveUpdate","loadComplete_","loadComplete","controlchange","getAzimuthalAngle","immediateUpdate","updateCollide","render","tryResize_","resize","updateHUD","defaultCenter","box3_","getSize","Elevation","Vector3","copy","floorCenter_","target","defaultControlsPose","ESViewMode","MODE_2D","DEG2RAD","split","defaultAngle","defaultTiltAngle","tiltAngle","_alwaysShowLabelAndPOI","focusFloor_","o3dFloors_","sub","fadeTo","time","focusAnimateMode","focusAnimateTime","updateShadowPostion","addLocationMarker","addUserPOI","removeLocationMarker","getObjectByName","dumpScene","dispose","loadqueue","meshStore","domElement","esmap","Cache","THREE","coordScreenToMap","currentCamera_","Raycaster","setFromCamera","forceUpdate","intersectObject","ESMapCoord","focusFloorNum","coordMapToScreen","project","h_2_","ESScreenCoord","project_","setFromMatrixPosition","matrixWorld","w_2_","addPopInfoWin","popMarkers_","removePopInfoWin","removeAllPopInfoWins","lineStyle","navigateStyle_","lineWidth","alpha","dash","size","gap","minX_","maxX_","minY_","maxY","mapDataSrc","mapThemeSrc","scaleLevelValue","getScaleRate","setScaleLevelValue","compassOffset","options_","spriteBg_","spritePt_","compassSize","scale","center","mapOriginCoord","getOrthoCameraSizeByPerspectiveCamera","zoom","right","top","bottom","distanceTo","normalize","multiplyScalar","updateProjectionMatrix","getPolarAngle","viewModeAnimateMode","viewModeAnimateTime","cameraTop","viewModeChanged","themeName_","themeID_","themeList_","traverse","typeID","linewidth","FLOOR","floorColor_","ESFloorManager","floorStyleBase","opacity","wrapS","wrapT","RepeatWrapping","imagesize","repeat","RoomStyle","FACILITY","LABEL","updateStyle","labelStyle_","style_","ELEMENT","modelImage","floorLoaded","focusFloorNumChanged","isNaviAnimating","ESLocationMarker","showCompass","updateDirection","showScaler","location","shadowLight","castShadow","lightAngleX","shadowAngleX","lightAngleY","shadowAngleY","floorNames","FloorBarName","Name","NameEn","nameEn","RAD2DEG","naviData","width","normal","padding_","allLayer","showBtnCount","expand","change_","inited","selectedColor","#1E82FA","defaultColor","#666666","defaultShadow_","2px 2px 3px rgba(0,0,0, 0.3)","defaultRadius_","2px","querySelector","touchPointX","touchPointY","touchEndPointX","touchEndPointY","left_","top_","right_","defaultPadding_","imgURL_","imgURL",".floor-btns-wrap","div","class","floor-btns-wrap","absolute","backgroundColor","white","boxShadow","textAlign","cursor","pointer","fontSize","fontWeight","bold","textTransform","uppercase","lineHeight","innerText","arrow-btns-wrap","onmousewheel","scroll","MozMousePixelScroll","touchstart","touchmove","touchend","canvas","insertBefore","createLayers","display","arrow-floors-wrap arrow-top-btn","18px","background","url(","arrow1.png) no-repeat 50% 50%","onclick","down","overflow","changeScrollState","setPosition_","controlPositionListener","click",".arrow-btns-wrap","block","expandLayers_","positon_","left","innerHTML","createLayerButton_","hrEl","querySelectorAll",".arrow-btns-wrap>label[class*='active']","dataset","triggerClick",".arrow-btns-wrap > label","preventDefault","touches","pageY","event","scrollTop","changedTouches","pageX","wheelDelta","detail","label","floors-layer-btn layer-btn-default","0.8em","active","removeClass","triggerChange_","span","1px","1px solid rgba(153, 153, 153, 0.45)","margin","0 20%","alpha(opacity=100, finishopacity=0, style=3)","changeMapVisibleFloors_","changeFocusFloor","checkBtn",".arrow-floors-wrap.arrow-down-btn",".arrow-floors-wrap.arrow-top-btn","disabled","backgroundImage","arrow2.png)","addClass","arrow3.png)","className","hasClass","createEvent","MouseEvents","initEvent","Object3D","removed","parentNode","CSS3DObject","CSS3DSprite","CSS3DRenderer","elements","matrix3d(","translate(-50%,-50%)","matrixWorldInverse","transpose","copyPosition","transform","objects","Matrix4","hidden","WebkitTransformStyle","preserve-3d","transformStyle","userAgent","projectionMatrix","fov","WebkitPerspective","perspective","updateMatrixWorld","getInverse","scale(",")translate(","px,","translateZ(","px)","roundRect","moveTo","arcTo","closePath","getPlatform","_enabled","composer","composerOrtho","EffectComposer","isPC","RenderPass","addPass","FXAAShader","fxaaPass","ShaderPass","CopyShader","renderToScreen","setScale","getDelta","originSize","reSize","renderTarget1","setSize","uniforms","assign","EScontrolSize","Map_CONTROL_NORMAL","Map_CONTROL_SMALL","ESControlOffset","this hasn't been initialised - super() hasn't been called","Super expression must either be null or a function, not ","setPrototypeOf","__proto__","getPrototypeOf","alias","createMarker_","getValue","opts_","angle_","degToRad","angle","name_","id_","height_","spritify_","spritify","callback_","model","scale_","showLevel_","showLevel","_update_","_update","ESMapLabel","animate","stop","flash","stopFlash","fadeOut","fadeIn","rotate","jump","delete","radToDeg","rotation","url_","ESNode","defineProperties","updateScreenSize","ESElement","stopJump","forceVisible_","data_","oid","coord_","localToWorld","addLayer","warn","getOrCreateLayerByName","getLayersByNames","imageMarker","textMarker","polygonMarker","POLYGON_MARKER","storeImage","STORE_IMAGE","es3dmarker","modelLine","MODEL_LINE","boardMarker","BOARD_MARKER","getLayersByTypes","getObjectsByAlias","getFirstLayer","removeLayer","removeLayersByTypes","exitInArray","removeLayersByNames","applyHeatMap","removeHeatMap","disposeHeatMap","traverse_","floorAlias","floorDesc","floorHeight","floorName","Name_en","alwaysShow","stopMoveTo","fade","setColor","restoreColor","../image/user.png","size_","up_","ESMapPoi3","XYZ","initY_","enabledUpdateSize","ESMapPoi2","depthWrite","setUrl","boxCollision_","ESMapBoxCollision","requireCollide_","addMarker","load3dmarker","info","boardMark","marker!","_init_","show3D","checkType","","removeAll","esline","ESComponent","componentsManager","fixedWidth","LINE","lineMode","ESLineMode","esarrow","PLANE","dashArray","lineType","getDashArrayByLineType","textureLength","reduce","stringify","Texture","NearestFilter","ESMapNavLineGeometry","notCenter","yScale","billboard","uvBaseLen","seeThrough","depthTest","renderOrder","lineObject","_updateMaterialByNaviMap","_visibleFloorNumsChanged","ESRenderOrder","transparentLine","transparentObj","_colorToStr","naviMap","toString","FULL","ESLineType","DOTTED","CENTER","DASH","DOUBLE_DOT_DASH","ARROW","arrow","brothers","side","naviLineAnimation","noAnimate","speed","version","ind_","getSpriteScale","map_","setRadius","_billboard","pathVertices","dot","_upVec","setFromAxisAngle","LOCATION_MARKER","mapLoaded","direction","FloorNum","zOffset","getNearestAngle","mapPicker_","enableMapPan_","enableMapRotate_","enableMapIncline_","enableMapPinch_","enableCompassTap_","enableMapPan","controls_","enablePan","enableMapRotate","enableGestureRotate","enableCompassTap","enableMapIncline","enableGestureIncline","enableMapZoom","enableZoom","enableMapSingleTap_","sprite_","visible_","margin_horiz","margin_verti","updateHUD2","sprite_2","img","data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAG0AAAAiCAYAAABV9lfvAAAACXBIWXMAADXUAAA11AFeZeUIAABDQmlUWHRYTUw6Y29tLmFkb2JlLnhtcAAAAAAAPD94cGFja2V0IGJlZ2luPSLvu78iIGlkPSJXNU0wTXBDZWhpSHpyZVN6TlRjemtjOWQiPz4KPHg6eG1wbWV0YSB4bWxuczp4PSJhZG9iZTpuczptZXRhLyIgeDp4bXB0az0iQWRvYmUgWE1QIENvcmUgNS42LWMxMTEgNzkuMTU4MzI1LCAyMDE1LzA5LzEwLTAxOjEwOjIwICAgICAgICAiPgogICA8cmRmOlJERiB4bWxuczpyZGY9Imh0dHA6Ly93d3cudzMub3JnLzE5OTkvMDIvMjItcmRmLXN5bnRheC1ucyMiPgogICAgICA8cmRmOkRlc2NyaXB0aW9uIHJkZjphYm91dD0iIgogICAgICAgICAgICB4bWxuczp4bXA9Imh0dHA6Ly9ucy5hZG9iZS5jb20veGFwLzEuMC8iCiAgICAgICAgICAgIHhtbG5zOmRjPSJodHRwOi8vcHVybC5vcmcvZGMvZWxlbWVudHMvMS4xLyIKICAgICAgICAgICAgeG1sbnM6cGhvdG9zaG9wPSJodHRwOi8vbnMuYWRvYmUuY29tL3Bob3Rvc2hvcC8xLjAvIgogICAgICAgICAgICB4bWxuczp4bXBNTT0iaHR0cDovL25zLmFkb2JlLmNvbS94YXAvMS4wL21tLyIKICAgICAgICAgICAgeG1sbnM6c3RFdnQ9Imh0dHA6Ly9ucy5hZG9iZS5jb20veGFwLzEuMC9zVHlwZS9SZXNvdXJjZUV2ZW50IyIKICAgICAgICAgICAgeG1sbnM6c3RSZWY9Imh0dHA6Ly9ucy5hZG9iZS5jb20veGFwLzEuMC9zVHlwZS9SZXNvdXJjZVJlZiMiCiAgICAgICAgICAgIHhtbG5zOnRpZmY9Imh0dHA6Ly9ucy5hZG9iZS5jb20vdGlmZi8xLjAvIgogICAgICAgICAgICB4bWxuczpleGlmPSJodHRwOi8vbnMuYWRvYmUuY29tL2V4aWYvMS4wLyI+CiAgICAgICAgIDx4bXA6Q3JlYXRvclRvb2w+QWRvYmUgUGhvdG9zaG9wIENDIDIwMTUgKFdpbmRvd3MpPC94bXA6Q3JlYXRvclRvb2w+CiAgICAgICAgIDx4bXA6Q3JlYXRlRGF0ZT4yMDE3LTAzLTAzVDA5OjU5OjU1KzA4OjAwPC94bXA6Q3JlYXRlRGF0ZT4KICAgICAgICAgPHhtcDpNb2RpZnlEYXRlPjIwMTctMDYtMDVUMTY6NDU6MzQrMDg6MDA8L3htcDpNb2RpZnlEYXRlPgogICAgICAgICA8eG1wOk1ldGFkYXRhRGF0ZT4yMDE3LTA2LTA1VDE2OjQ1OjM0KzA4OjAwPC94bXA6TWV0YWRhdGFEYXRlPgogICAgICAgICA8ZGM6Zm9ybWF0PmltYWdlL3BuZzwvZGM6Zm9ybWF0PgogICAgICAgICA8cGhvdG9zaG9wOkNvbG9yTW9kZT4zPC9waG90b3Nob3A6Q29sb3JNb2RlPgogICAgICAgICA8cGhvdG9zaG9wOlRleHRMYXllcnM+CiAgICAgICAgICAgIDxyZGY6QmFnPgogICAgICAgICAgICAgICA8cmRmOmxpIHJkZjpwYXJzZVR5cGU9IlJlc291cmNlIj4KICAgICAgICAgICAgICAgICAgPHBob3Rvc2hvcDpMYXllck5hbWU+RVNNYXA8L3Bob3Rvc2hvcDpMYXllck5hbWU+CiAgICAgICAgICAgICAgICAgIDxwaG90b3Nob3A6TGF5ZXJUZXh0PkVTTWFwPC9waG90b3Nob3A6TGF5ZXJUZXh0PgogICAgICAgICAgICAgICA8L3JkZjpsaT4KICAgICAgICAgICAgPC9yZGY6QmFnPgogICAgICAgICA8L3Bob3Rvc2hvcDpUZXh0TGF5ZXJzPgogICAgICAgICA8eG1wTU06SW5zdGFuY2VJRD54bXAuaWlkOjg5NDVkN2RlLTlmNTMtYTM0MS05NGZkLTI2MTAwZWIwNmUyNzwveG1wTU06SW5zdGFuY2VJRD4KICAgICAgICAgPHhtcE1NOkRvY3VtZW50SUQ+YWRvYmU6ZG9jaWQ6cGhvdG9zaG9wOjRhYWMyMGY1LTQ5Y2ItMTFlNy05YzdjLWYxMGY3NmFmYTFmODwveG1wTU06RG9jdW1lbnRJRD4KICAgICAgICAgPHhtcE1NOk9yaWdpbmFsRG9jdW1lbnRJRD54bXAuZGlkOjA2NzU3ZGY4LTUxZTItMDI0OC04MWJmLTYwYjE5ZTJmNmU1NzwveG1wTU06T3JpZ2luYWxEb2N1bWVudElEPgogICAgICAgICA8eG1wTU06SGlzdG9yeT4KICAgICAgICAgICAgPHJkZjpTZXE+CiAgICAgICAgICAgICAgIDxyZGY6bGkgcmRmOnBhcnNlVHlwZT0iUmVzb3VyY2UiPgogICAgICAgICAgICAgICAgICA8c3RFdnQ6YWN0aW9uPmNyZWF0ZWQ8L3N0RXZ0OmFjdGlvbj4KICAgICAgICAgICAgICAgICAgPHN0RXZ0Omluc3RhbmNlSUQ+eG1wLmlpZDowNjc1N2RmOC01MWUyLTAyNDgtODFiZi02MGIxOWUyZjZlNTc8L3N0RXZ0Omluc3RhbmNlSUQ+CiAgICAgICAgICAgICAgICAgIDxzdEV2dDp3aGVuPjIwMTctMDMtMDNUMDk6NTk6NTUrMDg6MDA8L3N0RXZ0OndoZW4+CiAgICAgICAgICAgICAgICAgIDxzdEV2dDpzb2Z0d2FyZUFnZW50PkFkb2JlIFBob3Rvc2hvcCBDQyAyMDE1IChXaW5kb3dzKTwvc3RFdnQ6c29mdHdhcmVBZ2VudD4KICAgICAgICAgICAgICAgPC9yZGY6bGk+CiAgICAgICAgICAgICAgIDxyZGY6bGkgcmRmOnBhcnNlVHlwZT0iUmVzb3VyY2UiPgogICAgICAgICAgICAgICAgICA8c3RFdnQ6YWN0aW9uPmNvbnZlcnRlZDwvc3RFdnQ6YWN0aW9uPgogICAgICAgICAgICAgICAgICA8c3RFdnQ6cGFyYW1ldGVycz5mcm9tIGltYWdlL3BuZyB0byBhcHBsaWNhdGlvbi92bmQuYWRvYmUucGhvdG9zaG9wPC9zdEV2dDpwYXJhbWV0ZXJzPgogICAgICAgICAgICAgICA8L3JkZjpsaT4KICAgICAgICAgICAgICAgPHJkZjpsaSByZGY6cGFyc2VUeXBlPSJSZXNvdXJjZSI+CiAgICAgICAgICAgICAgICAgIDxzdEV2dDphY3Rpb24+c2F2ZWQ8L3N0RXZ0OmFjdGlvbj4KICAgICAgICAgICAgICAgICAgPHN0RXZ0Omluc3RhbmNlSUQ+eG1wLmlpZDpmZDZmNWJkOC1jYWNhLTI5NGMtODZhZi01Yzc5YTljM2RkZDM8L3N0RXZ0Omluc3RhbmNlSUQ+CiAgICAgICAgICAgICAgICAgIDxzdEV2dDp3aGVuPjIwMTctMDMtMDNUMTA6MjU6MTgrMDg6MDA8L3N0RXZ0OndoZW4+CiAgICAgICAgICAgICAgICAgIDxzdEV2dDpzb2Z0d2FyZUFnZW50PkFkb2JlIFBob3Rvc2hvcCBDQyAyMDE1IChXaW5kb3dzKTwvc3RFdnQ6c29mdHdhcmVBZ2VudD4KICAgICAgICAgICAgICAgICAgPHN0RXZ0OmNoYW5nZWQ+Lzwvc3RFdnQ6Y2hhbmdlZD4KICAgICAgICAgICAgICAgPC9yZGY6bGk+CiAgICAgICAgICAgICAgIDxyZGY6bGkgcmRmOnBhcnNlVHlwZT0iUmVzb3VyY2UiPgogICAgICAgICAgICAgICAgICA8c3RFdnQ6YWN0aW9uPnNhdmVkPC9zdEV2dDphY3Rpb24+CiAgICAgICAgICAgICAgICAgIDxzdEV2dDppbnN0YW5jZUlEPnhtcC5paWQ6YjExZGY1YmQtZWJhNS05NzRkLTliY2UtOWMyZTBjM2E1YTVjPC9zdEV2dDppbnN0YW5jZUlEPgogICAgICAgICAgICAgICAgICA8c3RFdnQ6d2hlbj4yMDE3LTA2LTA1VDE2OjQ1OjM0KzA4OjAwPC9zdEV2dDp3aGVuPgogICAgICAgICAgICAgICAgICA8c3RFdnQ6c29mdHdhcmVBZ2VudD5BZG9iZSBQaG90b3Nob3AgQ0MgMjAxNSAoV2luZG93cyk8L3N0RXZ0OnNvZnR3YXJlQWdlbnQ+CiAgICAgICAgICAgICAgICAgIDxzdEV2dDpjaGFuZ2VkPi88L3N0RXZ0OmNoYW5nZWQ+CiAgICAgICAgICAgICAgIDwvcmRmOmxpPgogICAgICAgICAgICAgICA8cmRmOmxpIHJkZjpwYXJzZVR5cGU9IlJlc291cmNlIj4KICAgICAgICAgICAgICAgICAgPHN0RXZ0OmFjdGlvbj5jb252ZXJ0ZWQ8L3N0RXZ0OmFjdGlvbj4KICAgICAgICAgICAgICAgICAgPHN0RXZ0OnBhcmFtZXRlcnM+ZnJvbSBhcHBsaWNhdGlvbi92bmQuYWRvYmUucGhvdG9zaG9wIHRvIGltYWdlL3BuZzwvc3RFdnQ6cGFyYW1ldGVycz4KICAgICAgICAgICAgICAgPC9yZGY6bGk+CiAgICAgICAgICAgICAgIDxyZGY6bGkgcmRmOnBhcnNlVHlwZT0iUmVzb3VyY2UiPgogICAgICAgICAgICAgICAgICA8c3RFdnQ6YWN0aW9uPmRlcml2ZWQ8L3N0RXZ0OmFjdGlvbj4KICAgICAgICAgICAgICAgICAgPHN0RXZ0OnBhcmFtZXRlcnM+Y29udmVydGVkIGZyb20gYXBwbGljYXRpb24vdm5kLmFkb2JlLnBob3Rvc2hvcCB0byBpbWFnZS9wbmc8L3N0RXZ0OnBhcmFtZXRlcnM+CiAgICAgICAgICAgICAgIDwvcmRmOmxpPgogICAgICAgICAgICAgICA8cmRmOmxpIHJkZjpwYXJzZVR5cGU9IlJlc291cmNlIj4KICAgICAgICAgICAgICAgICAgPHN0RXZ0OmFjdGlvbj5zYXZlZDwvc3RFdnQ6YWN0aW9uPgogICAgICAgICAgICAgICAgICA8c3RFdnQ6aW5zdGFuY2VJRD54bXAuaWlkOjg5NDVkN2RlLTlmNTMtYTM0MS05NGZkLTI2MTAwZWIwNmUyNzwvc3RFdnQ6aW5zdGFuY2VJRD4KICAgICAgICAgICAgICAgICAgPHN0RXZ0OndoZW4+MjAxNy0wNi0wNVQxNjo0NTozNCswODowMDwvc3RFdnQ6d2hlbj4KICAgICAgICAgICAgICAgICAgPHN0RXZ0OnNvZnR3YXJlQWdlbnQ+QWRvYmUgUGhvdG9zaG9wIENDIDIwMTUgKFdpbmRvd3MpPC9zdEV2dDpzb2Z0d2FyZUFnZW50PgogICAgICAgICAgICAgICAgICA8c3RFdnQ6Y2hhbmdlZD4vPC9zdEV2dDpjaGFuZ2VkPgogICAgICAgICAgICAgICA8L3JkZjpsaT4KICAgICAgICAgICAgPC9yZGY6U2VxPgogICAgICAgICA8L3htcE1NOkhpc3Rvcnk+CiAgICAgICAgIDx4bXBNTTpEZXJpdmVkRnJvbSByZGY6cGFyc2VUeXBlPSJSZXNvdXJjZSI+CiAgICAgICAgICAgIDxzdFJlZjppbnN0YW5jZUlEPnhtcC5paWQ6YjExZGY1YmQtZWJhNS05NzRkLTliY2UtOWMyZTBjM2E1YTVjPC9zdFJlZjppbnN0YW5jZUlEPgogICAgICAgICAgICA8c3RSZWY6ZG9jdW1lbnRJRD5hZG9iZTpkb2NpZDpwaG90b3Nob3A6OWIyNDcyMzYtZmZiOC0xMWU2LWFmYmQtY2Y0YzUyMjdkODZiPC9zdFJlZjpkb2N1bWVudElEPgogICAgICAgICAgICA8c3RSZWY6b3JpZ2luYWxEb2N1bWVudElEPnhtcC5kaWQ6MDY3NTdkZjgtNTFlMi0wMjQ4LTgxYmYtNjBiMTllMmY2ZTU3PC9zdFJlZjpvcmlnaW5hbERvY3VtZW50SUQ+CiAgICAgICAgIDwveG1wTU06RGVyaXZlZEZyb20+CiAgICAgICAgIDx0aWZmOk9yaWVudGF0aW9uPjE8L3RpZmY6T3JpZW50YXRpb24+CiAgICAgICAgIDx0aWZmOlhSZXNvbHV0aW9uPjM1MDAwMDAvMTAwMDA8L3RpZmY6WFJlc29sdXRpb24+CiAgICAgICAgIDx0aWZmOllSZXNvbHV0aW9uPjM1MDAwMDAvMTAwMDA8L3RpZmY6WVJlc29sdXRpb24+CiAgICAgICAgIDx0aWZmOlJlc29sdXRpb25Vbml0PjI8L3RpZmY6UmVzb2x1dGlvblVuaXQ+CiAgICAgICAgIDxleGlmOkNvbG9yU3BhY2U+NjU1MzU8L2V4aWY6Q29sb3JTcGFjZT4KICAgICAgICAgPGV4aWY6UGl4ZWxYRGltZW5zaW9uPjEwOTwvZXhpZjpQaXhlbFhEaW1lbnNpb24+CiAgICAgICAgIDxleGlmOlBpeGVsWURpbWVuc2lvbj4zNDwvZXhpZjpQaXhlbFlEaW1lbnNpb24+CiAgICAgIDwvcmRmOkRlc2NyaXB0aW9uPgogICA8L3JkZjpSREY+CjwveDp4bXBtZXRhPgogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIAogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIAogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIAogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIAogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIAogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIAogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIAogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIAogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIAogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIAogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIAogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIAogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIAogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIAogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIAogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIAogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIAogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIAogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIAogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIAogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIAogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIAogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIAogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIAogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIAogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIAogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIAogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIAogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIAogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIAogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIAogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIAogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIAogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIAogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIAogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIAogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIAogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIAogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIAogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAKICAgICAgICAgICAgICAgICAgICAgICAgICAgIAo8P3hwYWNrZXQgZW5kPSJ3Ij8+7N2UCQAAACBjSFJNAAB6JQAAgIMAAPn/AACA6QAAdTAAAOpgAAA6mAAAF2+SX8VGAAAOaUlEQVR42uxbe3RU5bX/7e/7zjkzIZlMCIHyDi+vXsGOt1areC9Bl1Xa2xpqvQ+TFQEpD28lvBEQE16hASIBKe9CQMCy2iXQu5ResWVoxdLqklGpq2qFKAKRipm853HO+e4fc2Y4OZwJQb3eJc1e66yZOdnnfOfbv2/v/dv7OyEpJbrkqyWsywRfPRH2H9+599sAACICY2wMY0wjxg7EolEwxp72eLw/VjUVqqK+r6jKW6qq/U7T1BdVTfuzpmnwaBooJwf+tii+u2MvujU2IurxuA5MEsiNRLHpH4fg8NB85BODqiqQUoJzjpaWFrQ0t4Bzbl0AcM7BGQfjDIwxcM7BGAfnDETU7v5SSjDG4PNlgzEGCWldm9BnjIEYA2cMRCylzzmHoihQVTVxf+veUkpImbCNaZqIRiJJO0GaEoZpwDAM6LqOeDwGwzBSR+KBANM0YZhG4tMwIE1pfddhGGbK9q2tLYjH42CMwTTN1LH1Z9svB82SwSDaTUS3gwic819lZGQsME3zMWL0MWdsKed8COd8COOskIgBwGEA1RJ4gb6g1fTTjZu6XKoz4ZGIQEQrGdHtyVUEyO8zzk9qmjZXCL4MRMQ4ezax6hMrU3BxDyP2PAFHdcELWnyZZHIOap8v8wAMBaB2mf2LBC0RMl5nLBE+mAUcEQFElYzxdyEx0jCMhwC6S+N8OVPEtHBO9rr6nj0uNPbsMVIqym0D3/mr9DY1QxfiFgCPAzgEoBbAe9bnTpPoHkU34NUNGERdSHzWnMYZA4AKIrqTGBtDjIGRBR4RGLFhjNHLhmH8MhqNPBgX7EhuG3Dvn0KA4LO9utG739nzI3qdObdNF7wgrqpDHN4Gk6h3hmGU5LRGSmKClZzJ8DyjGQbARdqHLCkuCgC4v91qY5fymhACnAsIIT6oXreuxq5XsXxZQBHK/UKIAi4EhODgXAQ5Y28wxoITJk4MJ3V3bN8+HVJmm1Im88jOyVOm1KZ7rsVlZdN1Q882dB26bsAw9J1Va6prv1TQrAwOEH2HEa1lRNMs77MOAuMcjLEfQiLWHIuXCzNWccefTiD3zNnFcX/2/FZNRSTDC0OIVHiUCR6BTMNAVjQuGxWx/r8HfO3NF/v3HnPel1nWIxrbKL2sqoPnvB9AeSfmU2MdWPTEQr8ilP1CEQUueslzIQA3286vcei9YUWGy2TZ0iWFTv2qNdWLv3RPa2MJFqURgRNKQbSPiJYyorsSoZJAoCRrUvymXN7s1R4q++5dc3548p2V//zuaU0jNrPZBphBhGxd/zQrbuw4pyl/+W2fvIuH++T1ONkzd3w243f0MSQ4Z6sZY/8ppSwA0NyBka8ktQAwf948v1DEEQAB63zYAsh5vxQgNTt2uI3xdQAH0oy1xm3sLx20DNOEKSWaVQWNigJSxCsklLuF4A9xzst8przOHzcSoBEDOENOTL+xITPjhQ2jvrXizQF9ZxW+/taqvhfrX/gkK+vmmGDv94zGN0WJtq3K/1r4eHf/9y5kZy7ycfHNoXETqsLAFQVCVWJCiJekaehSAhKXFfz5yS+7du/pTAIstQFWM2fevPFOhW1bthSkG8MmAbeb/6SiYpyL/v8PaBWnzkEC+FQRqFcVtCkCESHQoip7o4qy93T37H99L6/7T/Oi8QFZRgI8k3HkRGPI1s35fxyWP/Evg/o/+O8vv/pPo0Jv3wPTeKkpM0POuek6HM3xrRgk8fgg3YTKAKEo4IqAqmlQFOXhaCT6c0CCcwFDN9OBFurkvKYnvyxY+MR4N4WJkyYFHacGOgDIdwNt1cpKP4Ayhx4AtLvf1MmT/YZpBEzD8Jum6TdNs7Zm1zPBKz14SXFRclw/gNCu3XtCHYKWH4mBAFzfGgWXZiK/SQkTNICk+W+feLQLhwb3v/XwdYP+46wvs7p3awSalABjEAT0a2jKa8rKDO4ruONbZ3v3PDysoRlHOPAHbmJEJJqraZ4EabAIgapp0FR1RSQS+Xk0GhmjKOohIgnGuH0Sdo+4ImhzZs0MCKH4P8PqL3DkxnIA+Rs3bPBPffTRsMOLk0AdsC2QN5IKP3700SNuIb2kuCgMYMau3XtqbOdOWCAFrflNd1wTBDB21+49YVfK3yA4woLjgipwXlNx3qM9cN7r2X/Bq52qy/Cu8hjmzpI33zlYduT48dHvfzi4IcO77aIvK8UuwTly2iLwxWLHfx8YXr7rvtG4OGokbsvOQTyuLyHGEoBxAVVTIYT4Xmtb24JoNHpECPECES0CTIu6uIaoqw1B+RXLl+1fVVkZ6IRuwEFALjv/VFWV32bUGkeIrAWA0mmP+R050+5dfgA7LG9y3j9g3dst/5Z1zB4TMhbACgD/AJsJmxSBJjXrtv4NzcdLX35t+x8/PLfoV98YUXM2L3dfz9ZIX0YEyTgEgLym5jJqbhnr8Xin5t04/BWt9vRHn3x84W6P5vmNoiogYgPaWtvOGIbxVyHEkEQ9yJYQ4V0p5b40Yau8pLio3IXyl2/cvGUxAKyqeio0f968kM0YhQAK11RVhbkQQSH4Uc5FzeQpU8I2EuK3DJoMc7UOowZtXpbUWwzgSFJp5erVIRswYwEEt2zdFgaACeMe9gPYbwOzEEC1VcrYZXzSC0uKiwqta5LhfkZHDeMVAJ5LAtau+AZAUuJiNy8+zuo24dYPz50tO/jiiJHvnR5S7+u2ishWlBMD5/wmPR4/ZprG6mHDhikDBw36rWka/6Lr+gg9Hu8hpRlRFDEk0UNkYJyBc76RpxqO6cmAQz5wTt6ZYyxjJmn66W1btgTSefMjEyeGHAwS66qr821eVv7Eoidr3XLt2nVP167fsOHAxs2bU4tie83OsON5wi7jLraHzV279xyw39eeJpye9oDVwehQSEqYRDiXnYU+9eFb7g29venYiOvn1mdnPturufUpSbyAWAI4xhgMw5gVi8XG9uvf/7+6d+/+67q6OsRi0ZcUVdUSOgSyinhiLAsEcjFoGEB1mkdqB9CKysoQgNFLyssD1uoeZX36bQCWWR6RLjQGrWuSwJRZ14UBrF22dIlrri2d9pjf0I1SwzAKLSIC0zRr0zDNgVfI12G3707Qll9VD0xK1GX7PvW3tGLioSAOjbzlRDTbNzojGpssiZYTo1xiVidcYrBhGoe698gd1dDY8LtYLNaDJwt24gngGAMBxQB0G5NKGjq0a/eeqypenywvD1nGqAaAdWvXltmK9EKnNzmMlzRswfqnn84HMM76Xf34ggXhZUuXXJZrZ82Y7rdCZqCjcmLX7j1BF/LjBprfdk0oXXgcdLU1g2RsTqumLrzz7Xcw9blDiF/4G6KaZ7OqasMYY9usJjRUVYXgovL0qVMnmxoaX/V4tK8n8lICMCtHbSJi+7gQbpMN4fPL2jSkxm0cOxlJUfw5c+ctdvGSo7aCO2AjKqNth9s8kuPW2tmhg/pfNnenpx1zDNAJ1CRMomVQtR+Qrn+jrq4OqqGjn89fn5mV+SNVUZ/jQqwnYOfZj84sCYfDr3u93puTRIIuNaZrAZoqSUJVUxsBozrIW59FCtOE1OSKD49/5JGwi6HG2ciHax6cO3u236YX2rh5c6o+nDDu4ctYZklxkd8OmsuzPpxmsV0GWimANztrAZMIXt1A99bI6yd65j6yacSwcVGvZ6hSH37iXHMLsrJ8yMrKOtQts9uQ+k/r/Y0NDbUZGRkDma2fmcx7xOhuWJuMth5zvmP1FaRpGIc3bt4Smj5tWpmiiA+EUIIrKitThlhVWekXQozjQtip806rSZxv20BNAfWjSZOCmze129OrnTlrVo1brq34SWXt3NmzXVttEyeM9zsoe8gFdH9JcZE/6W3WPMttXljTEWhvASgCsOdKgBlE6BmJQjWMZb8Y0n/R9hsGT+SMb+0bjUFq2gNEVN3a0vz7tra2CL/IhhPRM94Mr6+9h1lsk9EkAKdAgBACLS3Nbqt5TQePE7QiREHSaxY9sRCKUCAUAUUoTv3xto5IIB2hsQwcsDHSZBurXa518ZbA1MmTTximEbZ1N5xEx8leT5cUF4UsXTv5GtvhfpolewHcCuAPrtGQEtS/X3NrU1hVbn8ycMOi9TcOPZBlmFv7RKIwE9vz1zPGNimK+mdFVd4XQjmoqpqPrK39FGCcgXH2PIi2IrFnB6EoaGpsvBq6bzdcfif0Rk+eMqUmDQn5IA3LC06bPj3YUQ5cuXp1rYPdJpmr83zYJScGLbAKHHls9BXbWDZ5FcAdAB4E8CSA4Unv8sV1+KKx/3klL+e+dTcMHn4us1tTflskUyGCyfmlvbcUM7z0naydguQ5xliYHCuJAIhLZVpn82stAFSvWzdozqyZAWviAx1ghKaVlrqRmZ02IuH8+wwrn7hR9tFOD6taUz2jdNpjB225+I1t23ccsHLaQQdzDNiY4WgrJKaus+q0dCXXpQRy/rqb0umN04mW94zG+nApZ/4sv8+aZ/P7zvcQVfSO6wDnyX22di/eMJZ4JcH+m3FmFd4MROxOi/ykRNNUhMNhrFxdhWtZSoqLpK2UufnzbYKm2Vz06fov6zT1+jVD+//tWF5O3YCY3isTgMk5OLHk+yXtD0YpD0uERZvnEatwAgYApiEhuHKtA5b/ebZ0Ov3eY3Ys3vx8r9zXDvXqPnRoa+SiV0pISr0/0h4o65NRe8CIEjmNMXoNwEJXgiMNKIrANS6fq/7s/MuqRFCkRG4s/hsQ3QiiMUQ4SmQHx3aAWWDaPCyR0z4C8O1EG9rlkBJMXPPv0I5yKcz/D0ADwKW81BSU+DWICghUBMJJJ2jMDUxGz4HoJgD1HRfs+HuQoMuOwhea0zqSvQTaC+D7RHQfQN8kot4g0oiojYg+IqJjRLQfwCupt3z+jsXqoX7ml4Co6x8wvnrS9Q8YXaB1SRdoXdIF2rUi/zsAQIExlhCr7cUAAAAASUVORK5CYII=","minFilter","LinearFilter","Sprite","SpriteMaterial","sceneOrtho_","clientWidth","clientHeight","userCompany","userLogoBase64","data:image/png;base64,","userLogoConfig","userLogo","boundingSphere","computeBoundingSphere","MODEL_IMAGE","PlaneBufferGeometry","DoubleSide","XZY","model3D","params","_id","anisotropy","coord","setX","rectangle","canPicked","_height","removeModels","line","Vector2","vertices","circle","radius","cos","startPoint","_normalizePoints","ShapeGeometry","Shape","_createLine","getWorldPosition","marginTop_","marginTop","borderRadius","6px","screenCoord","mapCoord_","screenCoord_","padding","contentHeight_","content_","content","<span>marker</span>","<div style='height:","borderStyle","borderColor","rgba(0,0,0,.2)","255,255,255","popDiv_","_tryInit","es-control-popmarker","rgba(","border","borderStyle_","borderWidth","20px","solid dashed dashed"," transparent transparent","-40px","es-control-popmarker-top","-39px","input","button","8px","24px","webkitAppearance","insertAdjacentHTML","beforeend","getBoundingClientRect","getMapCoord_","getMapCoord_Z","getScreenCoord_","created","layerLocalHeight","hide","closeCallBack","fontsize","fillcolor","0,0,0","strokecolor","imagealign","imageAlign","imageSize","fontspace","lineheight","","setfontsize","setfillcolor","setfontstrokecolor","once","void main() {","uniform sampler2D tDiffuse;","uniform vec2 resolution;","#define FXAA_REDUCE_MIN   (1.0/128.0)","#define FXAA_REDUCE_MUL   (1.0/8.0)","#define FXAA_SPAN_MAX     8.0","vec3 rgbNW = texture2D( tDiffuse, ( gl_FragCoord.xy + vec2( -1.0, -1.0 ) ) * resolution ).xyz;","vec3 rgbNE = texture2D( tDiffuse, ( gl_FragCoord.xy + vec2( 1.0, -1.0 ) ) * resolution ).xyz;","vec3 rgbSW = texture2D( tDiffuse, ( gl_FragCoord.xy + vec2( -1.0, 1.0 ) ) * resolution ).xyz;","vec3 rgbSE = texture2D( tDiffuse, ( gl_FragCoord.xy + vec2( 1.0, 1.0 ) ) * resolution ).xyz;","vec4 rgbaM  = texture2D( tDiffuse,  gl_FragCoord.xy  * resolution );","vec3 rgbM  = rgbaM.xyz;","float lumaNW = dot( rgbNW, luma );","float lumaSE = dot( rgbSE, luma );","float lumaMin = min( lumaM, min( min( lumaNW, lumaNE ), min( lumaSW, lumaSE ) ) );","float lumaMax = max( lumaM, max( max( lumaNW, lumaNE) , max( lumaSW, lumaSE ) ) );","vec2 dir;","dir.y =  ((lumaNW + lumaSW) - (lumaNE + lumaSE));","float dirReduce = max( ( lumaNW + lumaNE + lumaSW + lumaSE ) * ( 0.25 * FXAA_REDUCE_MUL ), FXAA_REDUCE_MIN );","float rcpDirMin = 1.0 / ( min( abs( dir.x ), abs( dir.y ) ) + dirReduce );","max( vec2(-FXAA_SPAN_MAX, -FXAA_SPAN_MAX),","dir * rcpDirMin)) * resolution;","vec4 rgbA = (1.0/2.0) * (","texture2D(tDiffuse,  gl_FragCoord.xy  * resolution + dir * (1.0/3.0 - 0.5)) +","texture2D(tDiffuse,  gl_FragCoord.xy  * resolution + dir * (2.0/3.0 - 0.5)));","vec4 rgbB = rgbA * (1.0/2.0) + (1.0/4.0) * (","texture2D(tDiffuse,  gl_FragCoord.xy  * resolution + dir * (0.0/3.0 - 0.5)) +","texture2D(tDiffuse,  gl_FragCoord.xy  * resolution + dir * (3.0/3.0 - 0.5)));","float lumaB = dot(rgbB, vec4(luma, 0.0));","if ( ( lumaB < lumaMin ) || ( lumaB > lumaMax ) ) {","gl_FragColor = rgbA;","} else {","gl_FragColor = rgbB;","points_","holes_","MULTIPOLYGON(((","GLEN1","hasHoles","GData","config","matInfos","getDeviceDPI","getPixXY","getDeviceWH","max","gradient","rgb(0,0,255)","rgb(0,255,255)","yellow","rgb(255,0,0)","getContext","boundVal","shadowColor","rgba(0, 0, 0, ","shadowOffsetX","shadowOffsetY","shadowBlur","arc","fill","colorize","getPalette","putImageData","renderToMap","_hasHeatMap","uuid","antitrans_","modelBase","_color","transparent","floorBase","createLinearGradient","addColorStop","fillStyle","getImageData","clearPoints","renderShadow","clearRect","addPoints","randomPoints","random","load","setTexturePath","rects_","collision_","materialBg_","min","materialPt_","data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAEAAAABACAYAAACqaXHeAAAACXBIWXMAAAsTAAALEwEAmpwYAAA9RWlUWHRYTUw6Y29tLmFkb2JlLnhtcAAAAAAAPD94cGFja2V0IGJlZ2luPSLvu78iIGlkPSJXNU0wTXBDZWhpSHpyZVN6TlRjemtjOWQiPz4KPHg6eG1wbWV0YSB4bWxuczp4PSJhZG9iZTpuczptZXRhLyIgeDp4bXB0az0iQWRvYmUgWE1QIENvcmUgNS42LWMxMzggNzkuMTU5ODI0LCAyMDE2LzA5LzE0LTAxOjA5OjAxICAgICAgICAiPgogICA8cmRmOlJERiB4bWxuczpyZGY9Imh0dHA6Ly93d3cudzMub3JnLzE5OTkvMDIvMjItcmRmLXN5bnRheC1ucyMiPgogICAgICA8cmRmOkRlc2NyaXB0aW9uIHJkZjphYm91dD0iIgogICAgICAgICAgICB4bWxuczp4bXA9Imh0dHA6Ly9ucy5hZG9iZS5jb20veGFwLzEuMC8iCiAgICAgICAgICAgIHhtbG5zOnhtcE1NPSJodHRwOi8vbnMuYWRvYmUuY29tL3hhcC8xLjAvbW0vIgogICAgICAgICAgICB4bWxuczpzdFJlZj0iaHR0cDovL25zLmFkb2JlLmNvbS94YXAvMS4wL3NUeXBlL1Jlc291cmNlUmVmIyIKICAgICAgICAgICAgeG1sbnM6c3RFdnQ9Imh0dHA6Ly9ucy5hZG9iZS5jb20veGFwLzEuMC9zVHlwZS9SZXNvdXJjZUV2ZW50IyIKICAgICAgICAgICAgeG1sbnM6ZGM9Imh0dHA6Ly9wdXJsLm9yZy9kYy9lbGVtZW50cy8xLjEvIgogICAgICAgICAgICB4bWxuczpwaG90b3Nob3A9Imh0dHA6Ly9ucy5hZG9iZS5jb20vcGhvdG9zaG9wLzEuMC8iCiAgICAgICAgICAgIHhtbG5zOnRpZmY9Imh0dHA6Ly9ucy5hZG9iZS5jb20vdGlmZi8xLjAvIgogICAgICAgICAgICB4bWxuczpleGlmPSJodHRwOi8vbnMuYWRvYmUuY29tL2V4aWYvMS4wLyI+CiAgICAgICAgIDx4bXA6Q3JlYXRvclRvb2w+QWRvYmUgUGhvdG9zaG9wIENDIDIwMTcgKFdpbmRvd3MpPC94bXA6Q3JlYXRvclRvb2w+CiAgICAgICAgIDx4bXA6Q3JlYXRlRGF0ZT4yMDE4LTA0LTEzVDE3OjUxOjE3KzA4OjAwPC94bXA6Q3JlYXRlRGF0ZT4KICAgICAgICAgPHhtcDpNb2RpZnlEYXRlPjIwMTgtMDQtMTNUMTg6MjY6NTkrMDg6MDA8L3htcDpNb2RpZnlEYXRlPgogICAgICAgICA8eG1wOk1ldGFkYXRhRGF0ZT4yMDE4LTA0LTEzVDE4OjI2OjU5KzA4OjAwPC94bXA6TWV0YWRhdGFEYXRlPgogICAgICAgICA8eG1wTU06SW5zdGFuY2VJRD54bXAuaWlkOjE3YzU2N2NiLWM4YzMtNTM0My05OTQ0LTVmMGVkY2NmMzI4ZTwveG1wTU06SW5zdGFuY2VJRD4KICAgICAgICAgPHhtcE1NOkRvY3VtZW50SUQ+eG1wLmRpZDozNjU5NDIwNTNGMDAxMUU4OEQ0N0UwNDZGQzdDODc4MzwveG1wTU06RG9jdW1lbnRJRD4KICAgICAgICAgPHhtcE1NOkRlcml2ZWRGcm9tIHJkZjpwYXJzZVR5cGU9IlJlc291cmNlIj4KICAgICAgICAgICAgPHN0UmVmOmluc3RhbmNlSUQ+eG1wLmlpZDozNjU5NDIwMjNGMDAxMUU4OEQ0N0UwNDZGQzdDODc4Mzwvc3RSZWY6aW5zdGFuY2VJRD4KICAgICAgICAgICAgPHN0UmVmOmRvY3VtZW50SUQ+eG1wLmRpZDozNjU5NDIwMzNGMDAxMUU4OEQ0N0UwNDZGQzdDODc4Mzwvc3RSZWY6ZG9jdW1lbnRJRD4KICAgICAgICAgPC94bXBNTTpEZXJpdmVkRnJvbT4KICAgICAgICAgPHhtcE1NOk9yaWdpbmFsRG9jdW1lbnRJRD54bXAuZGlkOjM2NTk0MjA1M0YwMDExRTg4RDQ3RTA0NkZDN0M4NzgzPC94bXBNTTpPcmlnaW5hbERvY3VtZW50SUQ+CiAgICAgICAgIDx4bXBNTTpIaXN0b3J5PgogICAgICAgICAgICA8cmRmOlNlcT4KICAgICAgICAgICAgICAgPHJkZjpsaSByZGY6cGFyc2VUeXBlPSJSZXNvdXJjZSI+CiAgICAgICAgICAgICAgICAgIDxzdEV2dDphY3Rpb24+c2F2ZWQ8L3N0RXZ0OmFjdGlvbj4KICAgICAgICAgICAgICAgICAgPHN0RXZ0Omluc3RhbmNlSUQ+eG1wLmlpZDpiZGY3MGExNy1hNWVkLWVmNDEtYmY3MS0yYzc5OTFmNmE3MDQ8L3N0RXZ0Omluc3RhbmNlSUQ+CiAgICAgICAgICAgICAgICAgIDxzdEV2dDp3aGVuPjIwMTgtMDQtMTNUMTc6NTM6MTgrMDg6MDA8L3N0RXZ0OndoZW4+CiAgICAgICAgICAgICAgICAgIDxzdEV2dDpzb2Z0d2FyZUFnZW50PkFkb2JlIFBob3Rvc2hvcCBDQyAyMDE3IChXaW5kb3dzKTwvc3RFdnQ6c29mdHdhcmVBZ2VudD4KICAgICAgICAgICAgICAgICAgPHN0RXZ0OmNoYW5nZWQ+Lzwvc3RFdnQ6Y2hhbmdlZD4KICAgICAgICAgICAgICAgPC9yZGY6bGk+CiAgICAgICAgICAgICAgIDxyZGY6bGkgcmRmOnBhcnNlVHlwZT0iUmVzb3VyY2UiPgogICAgICAgICAgICAgICAgICA8c3RFdnQ6YWN0aW9uPnNhdmVkPC9zdEV2dDphY3Rpb24+CiAgICAgICAgICAgICAgICAgIDxzdEV2dDppbnN0YW5jZUlEPnhtcC5paWQ6MTdjNTY3Y2ItYzhjMy01MzQzLTk5NDQtNWYwZWRjY2YzMjhlPC9zdEV2dDppbnN0YW5jZUlEPgogICAgICAgICAgICAgICAgICA8c3RFdnQ6d2hlbj4yMDE4LTA0LTEzVDE4OjI2OjU5KzA4OjAwPC9zdEV2dDp3aGVuPgogICAgICAgICAgICAgICAgICA8c3RFdnQ6c29mdHdhcmVBZ2VudD5BZG9iZSBQaG90b3Nob3AgQ0MgMjAxNyAoV2luZG93cyk8L3N0RXZ0OnNvZnR3YXJlQWdlbnQ+CiAgICAgICAgICAgICAgICAgIDxzdEV2dDpjaGFuZ2VkPi88L3N0RXZ0OmNoYW5nZWQ+CiAgICAgICAgICAgICAgIDwvcmRmOmxpPgogICAgICAgICAgICA8L3JkZjpTZXE+CiAgICAgICAgIDwveG1wTU06SGlzdG9yeT4KICAgICAgICAgPGRjOmZvcm1hdD5pbWFnZS9wbmc8L2RjOmZvcm1hdD4KICAgICAgICAgPHBob3Rvc2hvcDpDb2xvck1vZGU+MzwvcGhvdG9zaG9wOkNvbG9yTW9kZT4KICAgICAgICAgPHBob3Rvc2hvcDpEb2N1bWVudEFuY2VzdG9ycz4KICAgICAgICAgICAgPHJkZjpCYWc+CiAgICAgICAgICAgICAgIDxyZGY6bGk+eG1wLmRpZDo0MTNiNGUwNS04ZDAyLThiNGEtYWE4Zi1hYWVhMTJjOWI1MzE8L3JkZjpsaT4KICAgICAgICAgICAgICAgPHJkZjpsaT54bXAuZGlkOjRCMjc1MTQ1M0NCMzExRTg4NzZCRDZBQ0I1QjlCOTk3PC9yZGY6bGk+CiAgICAgICAgICAgICAgIDxyZGY6bGk+eG1wLmRpZDo0QzQ2QTgyQTNDQjMxMUU4OEQ1NDgwMUYxQUY4RkNDNzwvcmRmOmxpPgogICAgICAgICAgICAgICA8cmRmOmxpPnhtcC5kaWQ6OTQyMUI4QjMzQ0IzMTFFODkzRjZGRjlGM0U3ODBDM0M8L3JkZjpsaT4KICAgICAgICAgICAgICAgPHJkZjpsaT54bXAuZGlkOkMwMEIwRTdDM0NCMzExRTg5QTVFQUM0Njc0OUYzMkMwPC9yZGY6bGk+CiAgICAgICAgICAgIDwvcmRmOkJhZz4KICAgICAgICAgPC9waG90b3Nob3A6RG9jdW1lbnRBbmNlc3RvcnM+CiAgICAgICAgIDx0aWZmOk9yaWVudGF0aW9uPjE8L3RpZmY6T3JpZW50YXRpb24+CiAgICAgICAgIDx0aWZmOlhSZXNvbHV0aW9uPjcyMDAwMC8xMDAwMDwvdGlmZjpYUmVzb2x1dGlvbj4KICAgICAgICAgPHRpZmY6WVJlc29sdXRpb24+NzIwMDAwLzEwMDAwPC90aWZmOllSZXNvbHV0aW9uPgogICAgICAgICA8dGlmZjpSZXNvbHV0aW9uVW5pdD4yPC90aWZmOlJlc29sdXRpb25Vbml0PgogICAgICAgICA8ZXhpZjpDb2xvclNwYWNlPjY1NTM1PC9leGlmOkNvbG9yU3BhY2U+CiAgICAgICAgIDxleGlmOlBpeGVsWERpbWVuc2lvbj42NDwvZXhpZjpQaXhlbFhEaW1lbnNpb24+CiAgICAgICAgIDxleGlmOlBpeGVsWURpbWVuc2lvbj42NDwvZXhpZjpQaXhlbFlEaW1lbnNpb24+CiAgICAgIDwvcmRmOkRlc2NyaXB0aW9uPgogICA8L3JkZjpSREY+CjwveDp4bXBtZXRhPgogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIAogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIAogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIAogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIAogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIAogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIAogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIAogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIAogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIAogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIAogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIAogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIAogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIAogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIAogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIAogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIAogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIAogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIAogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIAogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIAogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIAogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIAogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIAogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIAogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIAogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIAogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIAogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIAogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIAogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIAogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIAogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIAogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIAogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIAogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIAogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIAogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIAogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIAogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIAogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAKICAgICAgICAgICAgICAgICAgICAgICAgICAgIAo8P3hwYWNrZXQgZW5kPSJ3Ij8+WZs/LgAAACBjSFJNAAB6JQAAgIMAAPn/AACA6QAAdTAAAOpgAAA6mAAAF2+SX8VGAAAEvklEQVR42uSbzWsbRxjGn9ldaWVbyKsqq9YfmEaOVFNyyakXmxwLRddCIaeAwX+SS0tL/wcdSiklPtnQs/thR05aE7cJsuMPrWNJq5m3B72rDpGcW2fL7IKRpRlrPb993nned3ZWEBGyfHj/5ZcLIfS3DgCdNgFAdDOY+Lu5Qs4OAG8N3uVXCUABoFarZbcCEiHw4HMA8gBiAANWAGUBgH6uOb76V6yEMre9TguAY+g8xAqY5UEXWRV1APfSVIBjaPDEAy4CqAAoAcgrpeoMIRMhQAB8HnwPwLkQos4hYT0A0ibDGQ6DMyLKDADdCgv8e4mIGuwK1gNwNQB5VkHgOM5qlhQgOBQ8AHO1Wm1FCBFw23tpWaHpSdBjBcyura1VtLZ7xZn8z+OOBusTxyCAROo+gJnFxcWVpCGO449YIdYmQpIH6PCrF4bh0rhRykZaabHJTFBqV1lUKpVw/E84Tt12BQjtXC4AUS6X72gAVm2vBfSqkACI+fn58tgjXTc1ACZdwOUJMFetVgu+7xe0hZNy+/mfFQCnNidCM2yBfqPRCN/uUJwrNmwHMMvrAd7KykppSp/GB9XKrq15QB7/rgi5CwsL5WkA0nACx7ACCgDcarUaTHTwvFQWRhxD58jxTwGAU6lUJgGMnMBaBeR58B4ANwiCCQCe59UM27KxSdDVLNAJw3BGt0AtGQq+/+HHOwBe2gjA1yywfFvHu7XVxlq99tImF0iyvwJDEMvLy8GtV8NzjVeFjiGVeQwhv7S0dCsA3/frNgJIQsAFIMIwLEkpsbOzg+3tbTz64nN8/dWXGA6HcB3XuBWaCIHkPB4AGYZhaW9vD1EUYWtrC5ubm/j911/w3bffIJfP32VQVilA8FqABCCCIAj29/fRbDZRKpVQLBbRbDbx5MlP8H3/Q9sUQBjdCE2Ww9z48WOBKJrs2e3i5rNPAcOrxCYAxADeJAq4ILr8uNNBq9VCFEWIogitVgsbSmFI9Mw0ABN5gALQZwh0qtTVJycn1d3dXWwfHCDneVhXCo9GAI5szAQVq+AaQK9DdHmfCBvHx9g4Psb6gwfjjj2iNgwvjpq6O9znuSD+S6mLd/Q9fL6+DhsBSA6B/sm7ARzYGAIEYMhh0G9LeX5bx2spn9paDscY7QkYdJSKekT9KRPFBVJYEzQVAgrADUOgC6LLCQBE7Uouh0ouZ6UCJE+EEYDBqVJXUxRwpGD+XrlnEECPIfQ7UxRARMbj3yQA4hDo3maFjhCHaQAwFQKKneANgN6L6VZ4aLMCFCdCPQA3R1JO7AZ5HcfjNHjBQgD6PBB3lIr6RD1fiALHx/n9vb0zPV5sCwFdBX0A8oLoXLPAp0hpg4RnGECyUWp4SXT6PqtdCNF+9fBhGuM3fiNimCRG50SvtM9TsUDTCtDrgsGpUidaDtDOAoAk0ZMABn8r9UfS4KaUA6ShAMkT4fVvUr7QPs+EApKiqA/g6pmUJzSqABVSfGAiLQV0AXTV6MoPkeJheq+w4mSoy5Vhm6FkBgBxPRBj9NzQYZYAJBYYMYxrMfJ/ygoA8JXv8qD7NAoBlSUFJPcHFIB4kGINkCYApVniGVI+0kiFJf4HT4yOZ+asPz3uIOPHPwMAX8PDjLFTmrgAAAAASUVORK5CYII=","nextPowerOfTwo","lh_","lw_","container","setGeoPoint","noWebGL","<h5>WebGL!<h5><h5> &nbsp;</h5>","width_","_isAnimating","force","times","delay","MAX_VALUE","flashId","easeInOutQuad","flash3d","getAlias","followAngle","animating","matrix","setPosition","applyMatrix4","cross","angleTo","followPosition","quaternion","slerp","lookAt","multiply","makeRotationFromEuler","Euler","Quaternion","setFromRotationMatrix","isOver","animateEnd","loop","rotateY","_stop","originPosition","_lastScale","ESTextMarker","getPerspectiveScale","meterperpixel","notAddImageHeight","setY","Model3D","UserLabel","unspritify_","makeTextSprite_","toRgba","loadTexture","texture","fontface",'"Microsoft Yahei","",Tahoma,Arial',"scaleRatio_","rgba(0,0,0,1)","borderThickness","rgba(150,150,150,1)","px ","context","measureText","imagespace","fontstyleid","fontStyleThemeDic","platesize","platecolor","platestorkcolor","originPivot","pivot_","drawImage","icon","pivot","font","imageSmoothingEnabled","strokeStyle","letterSpacingText","text","ESMapView","getMaxAnisotropy","generateMipmaps","external","pivottype","setname","linear","_jumpID","_initY","_moveToID","easeOutQuad","kill","ease","_rotateID","out","_fadeID","_isFading","fade3dIn","YXZ","pivotOffset","meterperpixel_","vertex","iconPivot","_setGeneralProperties","getComputedStyle","letterSpacing","strokeText","fillText","sin","perimeter","_uvs","_up_","_rings","Face3","faceVertexUvs","uvsNeedUpdate","divideScalar","crossVectors","makeBasis","computeFaceNormals","CIRCLE","verticesNeedUpdate","Geometry","data/","dataUrlPrefix","themeUrlPrefix","scalerWidth","firebrick","scalerColor","#fff","callbackByFloor","moveToAnimateMode","moveToAnimateTime","mergeModelLines","minViewDistance","shadowEnabled","shadowSize","shadowAlpha","controlsRotateThreshold","showBase","loadModel3D","loadPoi","loadLabel","onlineServer","token","editMode","slots","isRandom","compassAngle","mouse_","enabled_","staped","dom_","mousedown_","mousemove","mousemove_","mouseup_","addModelBase","clickCompass","compassRaycaster_","cameraOrtho","removeObject","addUserLabel","addPOI","POI","addLabel","addFloor","isVisible","raycaster_","objectIntersects_","modelIntersects_","intersectObjects","isPickedObject","over_","auto","onLeave","getPick_","curMouse","levelFrom","cameraFrom","stopPropagation","istaped","checkMoved","dTime","cameraTo","levelTo","scale_offset","isPickedModel","clientX","clientY","getPoiMaterialByType","ESappendMapPoi__","locationMarker","MeshLambertMaterial","textspace","doubleSided","mapId_","maxY_","asyncWaitTime","mapTheme_","loadManager","meshHandler","encode64","logotoken","Remark","ABC","Hash","DefaultCenX","DefaultCenY","calcSceneBox3","calcInitCamera","floorTempData","setFloorLabelVisible","forEachFloor","maxV","minV","asyncBuidExtents","then","handlePolygons","handleModels","asyncBuildPOIs","asyncBuildLabels","asyncBuildExternalModels","checkMoPos","Promise","floorBaseLayers","HeightSpan","handleFloors","resolve","poiLayer","poilayers","MODEL_POI","pois","ESFacility","Height","loadLayerComplete","facility","labellayers","labels","mapFloorSpan","liftlayers","lifts","/model/","collideLabel_","enableCollide","POSITIVE_INFINITY","NEGATIVE_INFINITY","Box3","lerp","queryScene",".esmap","&token=","&t=","ESMapSet","ESInfo","VERS_ERR","WELL","domain","WndNWnQOW24=","TjY3SDQOTS4x","share","DOM_ERR","editor","mapshow","EXPIRED","TOKEN_MISS","TOKEN_ERR","_ac","adcode","_convertFullData","tempFlipX_","versionCheck","_convertFloorFromSourceData",".theme","toParams_","the visibleFloors ","ARRAY_REQUIRED"," or string 'all'","defaultFloornum","DefaultFnum","VIEW_MODE2D_ALLFNUM","FloorHigh","_convertToSceneFloor","getOutLineList","Outline","convertGeo2Geometry_","Rooms","RColor","CenX","CenY","bclick","FsId","RMO","RoomHigh","RoomLogo","RLSize","ShowLevel","RMS","RMR","Labels","/imagelabel/","Lifts","2001","materialList_","defaultTheme_","floorOpacity_","selectedColor_","model3DSelectedColor_","getModelTheme","getModelMaterial","color_","defaultMaterial","magFilter","Model3DSelectColor","mapstyle","clearcolor","roomstyle","typeid","strokeColor_","floorstyle","baseheight","fontstyle","labelSelectedStyle_","colorRGB2Hex",",1)","getMapScene","getControlsInfo","toFixed","setControlsInfo","Android","iPhone","SymbianOS","iPad","iPod","MicroMessenger","getAudioToken","https://www.esmap.cn/escopeloc","escopegoodwork","/audio/baiduaudio!getToken.action?bids=","&tk=","audioToken","AUDIO_TOKEN","playAudio","https://tsn.baidu.com/text2audio?","lan=zh&tex=","&ctp=1&cuid=esmap&tok=","&vol=9&per=0&spd=5&pit=5","getNetworkType","play","audio","ended","[object Array]","aspect","tan","callAllLayerByAlias","getDatasByAlias","lastAlpha","selectMat","getModelLabelObject","searchModel","return","sqrt","createPointsGeometry","BufferGeometry","positions","addAttribute","BufferAttribute","indexes","QRSTUVWXYZabcdefghijklmnopqrstuvABCDEFGHIJKLMNOPwxyz0123456789+/=","getRouteAngle","screen","deviceXDPI","DIV","width:1in;height:1in;position:absolute;left:0px;top:0px;z-index:99;visibility:hidden","offsetWidth","types","keyword","MapUtil","getMapCoordDistance","distance","TextureLoader","crossOrigin","WebGLRenderer","highp","sortObjects","ESMapError","setPixelRatio","devicePixelRatio","autoClear","shadowMap","PCFSoftShadowMap","setClearAlpha","canvas_","PerspectiveCamera","rotationAutoUpdate","ESComposerRender","OrthographicCamera","setZ","Scene","ambientLight","AmbientLight","mainLight","DirectionalLight","shadow","near","bias","_shadowAngleY","secondLight","shadowDirection","applyEuler","_shadowAngleX","cssFuncs","initCssScene","cssFactor","rendererCss","far","autoUpdateObjects","mixerPlane","renderOrtho","clearDepth","mouseSelected_","defaultMaterial_","selectedMaterial_","setDefaultTheme_","setSelectedTheme_","#ff0000","#33cc61","#4a82d2","#F4FEFB","materialInfo","_doColor","_drawNormal","_drawGodArrow","godEdgeColor","godArrowColor","_setMaterialInfo","arrowHeightPercent","beginPath","arrowWidthPercent","arrowPercent","lineTo","fillRect","godHeightPercent","godEdgePercent","#ffffff","rgba(0,0,0,0.5)","godArrowPercent","godArrowWidthPercent","godArrowXScale","minDistance","minZoom","maxZoom","minAzimuthAngle","enableDamping","dampingFactor","rotateLeft","rotateUp","panLeft","panUp","pan","WARNING: OrbitControls.js encountered an unknown camera type - pan disabled.","__lastScaleLevel","getDistance","initDistance_","initTop_","getCurrentScaleLevel","rawLevel","_scaleToId","checkScaleLevel","updateText","dollyIn","orthoLimitSize","dollyOut","begin_","phi","theta","move_","end_","setFromUnitVectors","inverse","applyQuaternion","atan2","maxAzimuthAngle","forcePhi","forceTheta","maxDistance","distanceToSquared","OrbitControls","autoRotateSpeed","zoomSpeed","mouseButtons","ORBIT","ZOOM","DOLLY","PAN","mouseup","dispatchEvent","ROTATE","subVectors","rotateSpeed","removeEventListener","enableKeys","keyCode","keyPanSpeed","BOTTOM","LEFT","TOUCH_PAN","enableRotate","controlsScaleThreshold","MOUSE","MIDDLE","RIGHT","TOUCH_ROTATE_DOLLY","target0","position0","zoom0","autoRotate","notChangeCompass","contextmenu","mousedown","mousewheel","keydown","EventDispatcher","layerType","isMerge","sceneX","sceneZ","floorBases","createGeometry_","pointsGeometry","modelbases","models","RoomLogoSize","RModel","holes","Path","ExtrudeGeometry","loadFloors","/imagelogo/","ESMapConfiguration","EXTENT_EPSILON_Y","loadRooms","modelImagesData","ESModelImage","model3DData",".js","drawOutline","modelLineLayer","strokeWidth","LineBasicMaterial","LineSegments","modelLines","ESControlOptions","ischange",".btn-floors-wrap",".layers-wrap","btn-floors-wrap","zIndex","layers.png","layer.png","layers-wrap","btn-floors-wrap arrow-top-btn","onmousedown","btn-floors-wrap arrow-down-btn","initScrollState","onmouseup","MODE_3D","changeFloorsSelect",".layer-btn img","toUpperCase","onChange",".layers-wrap > label",".layers-wrap>label[class*='active']","createLayerlabel_","data-floornum","borderTop","60%","filter","changeActiveStyle_",".btn-floors-wrap.arrow-down-btn",".btn-floors-wrap.arrow-top-btn","arrow4.png)","margin_","init2D_","init2D","initFloors_","initFloors","expand_","expanded","tool-wrap","white url(","less.png) no-repeat 50% 50%","more.png) no-repeat 50% 50%","createTool_","tools-wrap","to-3d-view-btn","2D.png) no-repeat 50% 50%","3D.png) no-repeat 50% 50%","controlViewMode","tool-floor-btn","controlFloor",".tool-wrap",".tools-wrap","2D.png) no-repeat","group.png) no-repeat","groups.png) no-repeat","IsAllFloors","easeOutBack","pingPongSin","pingPongLinear","now","_getValue","old","delta","prop","_setValue","obj","actionArrayProps","bounce","transformTo","DistanceofTwoPts","setDefaultValues","zoom-wrap","zoom-in-btn","zoomin.png","zoom-out-btn","zoomout.png",".zoom-wrap","scalelevel","1.0.2","callbacks","ESHeatMap","ESDirection","modelLift","externalModel","ESElementType","poi","This map has already expired,please grab the latest version!","Please provide the corresponding token!","Token is not correct","Error version","This domain is forbidden","Maximum es3dMarker limited","Cannot get audio token","Data type must be an array","You cannot display allFloors in viewMode 2d","Your operation frequency is too fast. Please try again later.","This feature required authorization","plane","full","dotted","dotDash","doubleDotDash","triDotDash","raw","small","ESControlPositon","onerror","Ajax","ESMapPoi4","Component","ESComponentsManager","ESMapGestureController","ESLabel","ESModel","ESWebViewMarker","ESToolControl","ESZoomControl","ESNavigation","ESNaviResult","ESLineMarker","ESNaviCore","ESPopMarker","gestureController_","openMapById","tl_","gestureController","fullScreenAvaliable","available","fullScreen","request","canel","elementW","planeW","planeH","object3d","NoBlending","setDomElement","cssObject","added","cssScene","parameters","markerQueue","checkO1","ES3DMARKERNUM_ERR","queue","attributeCount","lastIndexOf","loadExist","examinEnd","fade3dOut","self","setAlpha","addModel3D","getElementById","map-container","box","relative","scalerOffet","100%","rgb(0, 0, 0) -1px -1px 0px, rgb(0, 0, 0) -1px 0px 6px, rgb(0, 0, 0) 0px 0px 2px, rgb(0, 0, 0) 0px 1px 4px","textBox","-1px","3px","7px","#000","barBox","&nbsp;","barBoxer","Reader","Writer","util","roots","navs","panos","Type","Brief","address","BuildingHigh","FirstRotateAngleX","FirstRotateAngleY","FirstRotateAngleZ","DefaultCenZ","styleid","bid","other1","Tel","FloorSet","NavSet","encodeDelimited","other2","decodeDelimited","verify","version: integer expected","maptime: integer expected","_id: integer expected","Type: integer expected","name: string expected","nameEn: string expected","Brief: string expected","adcode: string expected","AS: number expected","BuildingHigh: number expected","Tel: string expected","FirstRotateAngleX: number expected","FirstRotateAngleY: number expected","FirstRotateAngleZ: number expected","Firstscale: number expected","DefaultFnum: integer expected","DefaultCenX: number expected","DefaultCenY: number expected","DefaultCenZ: number expected","x: number expected","z: number expected","minX: number expected","maxX: number expected","maxY: number expected","ScaleLevel: string expected","Remark: string expected","FloorHigh: integer expected","floors: array expected","navs: array expected","navs.","panos: array expected","PicSet","panos.","styleid: string expected","token: string expected","bid: string expected","logotoken: string expected","other1: string expected","o1: integer expected","other2: string expected","o2: integer expected","ul: integer expected","fromObject",".ESMapSet.floors: array expected",".ESMapSet.floors: object expected",".ESMapSet.navs: object expected",".ESMapSet.panos: array expected",".ESMapSet.panos: object expected","toObject","defaults","toJSON","toJSONOptions","floornumtext","Alias","POISet","LiftSet","RoomSet","object expected","floornum: integer expected","floornumtext: integer expected","NameEn: string expected","Height: integer expected","Elevation: integer expected","Outline: string expected","Alias: string expected","Rooms: object expected","Rooms: integer key{k:int32} expected","Rooms.","Facility: object expected","Facility.","Labels: integer key{k:int32} expected","Labels.","Lifts: object expected","Lifts: integer key{k:int32} expected","imagesize: string expected",".FloorSet.Rooms: object expected",".FloorSet.Facility: object expected",".FloorSet.Labels: object expected",".FloorSet.Lifts: object expected","PointID","ShopID","Tid: integer expected","RL: string expected","RLSize: string expected","BC: integer expected","RC: string expected","RH: number expected","RMR: string expected","RMO: string expected","RS: integer expected","SL: integer expected","CenX: number expected","CenY: number expected","PointID: integer expected","ShopID: integer expected","FS: integer expected","FSId","ipos","X: number expected","Y: number expected","SH: number expected","w: number expected","h: number expected","image: string expected","FSId: integer expected","F1: integer expected","F2: integer expected","ST: integer expected","LT: integer expected","LH: integer expected","LM: string expected","LS: string expected","LR: string expected","LO: string expected","X2: number expected","Y1: number expected","Y2: number expected","O2: string expected","Nodes","Lines","NavNodeSet","NavLineSet","Nodes: object expected","Nodes: integer key{k:int32} expected","Nodes.","Lines: object expected","Lines: integer key{k:int32} expected","Lines.",".NavSet.Nodes: object expected",".NavSet.Lines: object expected","tid","rid","sid","tid: integer expected","rid: integer expected","sid: integer expected","eid","efnum","rank","bstair","eid: integer expected","efnum: integer expected","rank: integer expected","length: number expected","direction: string expected","bstair: string expected","serverurl","bgaudioplay","picscale","msgscale","Infos","bgaudio","PicNodeSet","PicClickSet","serverurl: string expected","bgaudio: string expected","bgaudioplay: integer expected","picscale: string expected","msgscale: string expected","Infos: object expected","Infos: integer key{k:int32} expected","Infos."];
!function(x,e){var _=function(e){for(;--e;)x.push(x.shift())};_(++e)}(_0x681e,279);var _0xe681=function(x,e){x-=0;var _=_0x681e[x];return _};!function(x){function e(x){var e=document[_0xe681("0x0")](_0xe681("0x1"))[0],_=document[_0xe681("0x2")](_0xe681("0x3"));_[_0xe681("0x4")]=_0xe681("0x5"),_.charset=_0xe681("0x6"),_[_0xe681("0x7")]=o.p+""+x+"."+d+_0xe681("0x8"),e[_0xe681("0x9")](_)}function _(x){if(_0xe681("0xa")==typeof XMLHttpRequest)return x(new Error(_0xe681("0xb")));try{var e=new XMLHttpRequest,_=o.p+""+d+_0xe681("0xc");e[_0xe681("0xd")](_0xe681("0xe"),_,!0),e.timeout=1e4,e[_0xe681("0xf")](null)}catch(e){return x(e)}e[_0xe681("0x10")]=function(){if(4===e[_0xe681("0x11")])if(0===e[_0xe681("0x12")])x(new Error(_0xe681("0x13")+_+_0xe681("0x14")));else if(404===e[_0xe681("0x12")])x();else if(200!==e[_0xe681("0x12")]&&304!==e.status)x(new Error(_0xe681("0x13")+_+_0xe681("0x15")));else{try{var t=JSON[_0xe681("0x16")](e[_0xe681("0x17")])}catch(e){return void x(e)}x(null,t)}}}function t(x){function e(x,e){_0xe681("0x18")===m&&n(_0xe681("0x19")),w++,o.e(x,function(){function _(){w--,_0xe681("0x19")===m&&(E[x]||A(x),0===w&&0===y&&C())}try{e[_0xe681("0x1a")](null,t)}finally{_()}})}var _=S[x];if(!_)return o;var t=function(e){return _[_0xe681("0x1b")].active?S[e]?(S[e][_0xe681("0x1c")][_0xe681("0x1d")](x)<0&&S[e][_0xe681("0x1c")][_0xe681("0x1e")](x),_[_0xe681("0x1f")][_0xe681("0x1d")](e)<0&&_.children[_0xe681("0x1e")](e)):p=[x]:p=[],o(e)};for(var i in o)Object[_0xe681("0x20")][_0xe681("0x21")].call(o,i)&&(c?Object[_0xe681("0x22")](t,i,function(x){return{configurable:!0,enumerable:!0,get:function(){return o[x]},set:function(e){o[x]=e}}}(i)):t[i]=o[i]);return c?Object[_0xe681("0x22")](t,"e",{enumerable:!0,value:e}):t.e=e,t}function i(x){var e={_acceptedDependencies:{},_declinedDependencies:{},_selfAccepted:!1,_selfDeclined:!1,_disposeHandlers:[],active:!0,accept:function(x,_){if("undefined"==typeof x)e[_0xe681("0x23")]=!0;else if("function"==typeof x)e._selfAccepted=x;else if(_0xe681("0x24")==typeof x)for(var t=0;t<x[_0xe681("0x25")];t++)e[_0xe681("0x26")][x[t]]=_;else e._acceptedDependencies[x]=_},decline:function(x){if(_0xe681("0xa")==typeof x)e[_0xe681("0x27")]=!0;else if(_0xe681("0x28")==typeof x)e[_0xe681("0x29")][x]=!0;else for(var _=0;_<x[_0xe681("0x25")];_++)e._declinedDependencies[x[_]]=!0},dispose:function(x){e._disposeHandlers[_0xe681("0x1e")](x)},addDisposeHandler:function(x){e._disposeHandlers[_0xe681("0x1e")](x)},removeDisposeHandler:function(x){var _=e[_0xe681("0x2a")][_0xe681("0x1d")](x);_>=0&&e[_0xe681("0x2a")][_0xe681("0x2b")](_,1)},check:a,apply:I,status:function(x){return x?void v[_0xe681("0x1e")](x):m},addStatusHandler:function(x){v[_0xe681("0x1e")](x)},removeStatusHandler:function(x){var e=v[_0xe681("0x1d")](x);e>=0&&v[_0xe681("0x2b")](e,1)},data:b[x]};return e}function n(x){m=x;for(var e=0;e<v[_0xe681("0x25")];e++)v[e][_0xe681("0x1a")](null,x)}function g(x){var e=+x+""===x;return e?+x:x}function a(x,e){if(_0xe681("0x2c")!==m)throw new Error(_0xe681("0x2d"));"function"==typeof x?(h=!1,e=x):(h=x,e=e||function(x){if(x)throw x}),n("check"),_(function(x,_){if(x)return e(x);if(!_)return n(_0xe681("0x2c")),void e(null,null);k={},T={},E={};for(var t=0;t<_.c[_0xe681("0x25")];t++)T[_.c[t]]=!0;u=_.h,n(_0xe681("0x19")),f=e,l={};var i=0;A(i),_0xe681("0x19")===m&&0===w&&0===y&&C()})}function r(x,e){if(T[x]&&k[x]){k[x]=!1;for(var _ in e)Object[_0xe681("0x20")][_0xe681("0x21")].call(e,_)&&(l[_]=e[_]);0===--y&&0===w&&C()}}function A(x){T[x]?(k[x]=!0,y++,e(x)):E[x]=!0}function C(){n(_0xe681("0x18"));var x=f;if(f=null,x)if(h)I(h,x);else{var e=[];for(var _ in l)Object[_0xe681("0x20")].hasOwnProperty[_0xe681("0x1a")](l,_)&&e[_0xe681("0x1e")](g(_));x(null,e)}}function I(e,_){function t(x){for(var e=[x],_={},t=e[_0xe681("0x2e")]();t[_0xe681("0x25")]>0;){var n=t.pop(),x=S[n];if(x&&!x.hot._selfAccepted){if(x[_0xe681("0x1b")][_0xe681("0x27")])return new Error("Aborted because of self decline: "+n);if(0===n)return;for(var g=0;g<x[_0xe681("0x1c")][_0xe681("0x25")];g++){var a=x[_0xe681("0x1c")][g],r=S[a];if(r[_0xe681("0x1b")][_0xe681("0x29")][n])return new Error(_0xe681("0x2f")+n+_0xe681("0x30")+a);e[_0xe681("0x1d")](a)>=0||(r[_0xe681("0x1b")][_0xe681("0x26")][n]?(_[a]||(_[a]=[]),i(_[a],[n])):(delete _[a],e[_0xe681("0x1e")](a),t.push(a)))}}}return[e,_]}function i(x,e){for(var _=0;_<e[_0xe681("0x25")];_++){var t=e[_];x.indexOf(t)<0&&x[_0xe681("0x1e")](t)}}if(_0xe681("0x18")!==m)throw new Error(_0xe681("0x31"));_0xe681("0x32")==typeof e?(_=e,e={}):e&&_0xe681("0x24")==typeof e?_=_||function(x){if(x)throw x}:(e={},_=_||function(x){if(x)throw x});var a={},r=[],A={};for(var C in l)if(Object[_0xe681("0x20")][_0xe681("0x21")][_0xe681("0x1a")](l,C)){var I=g(C),s=t(I);if(!s){if(e.ignoreUnaccepted)continue;return n(_0xe681("0x33")),_(new Error(_0xe681("0x34")+I+_0xe681("0x35")))}if(s instanceof Error)return n(_0xe681("0x33")),_(s);A[I]=l[I],i(r,s[0]);for(var I in s[1])Object[_0xe681("0x20")][_0xe681("0x21")][_0xe681("0x1a")](s[1],I)&&(a[I]||(a[I]=[]),i(a[I],s[1][I]))}for(var c=[],f=0;f<r[_0xe681("0x25")];f++){var I=r[f];S[I]&&S[I][_0xe681("0x1b")][_0xe681("0x23")]&&c[_0xe681("0x1e")]({module:I,errorHandler:S[I].hot._selfAccepted})}n("dispose");for(var h=r[_0xe681("0x2e")]();h[_0xe681("0x25")]>0;){var I=h[_0xe681("0x36")](),v=S[I];if(v){for(var y={},w=v[_0xe681("0x1b")][_0xe681("0x2a")],E=0;E<w[_0xe681("0x25")];E++){var k=w[E];k(y)}b[I]=y,v.hot.active=!1,delete S[I];for(var E=0;E<v[_0xe681("0x1f")].length;E++){var T=S[v[_0xe681("0x1f")][E]];if(T){var R=T[_0xe681("0x1c")][_0xe681("0x1d")](I);R>=0&&T[_0xe681("0x1c")][_0xe681("0x2b")](R,1)}}}}for(var I in a)if(Object.prototype[_0xe681("0x21")][_0xe681("0x1a")](a,I))for(var v=S[I],O=a[I],E=0;E<O[_0xe681("0x25")];E++){var M=O[E],R=v[_0xe681("0x1f")].indexOf(M);R>=0&&v[_0xe681("0x1f")].splice(R,1)}n(_0xe681("0x37")),d=u;for(var I in A)Object[_0xe681("0x20")][_0xe681("0x21")][_0xe681("0x1a")](A,I)&&(x[I]=A[I]);var L=null;for(var I in a)if(Object[_0xe681("0x20")][_0xe681("0x21")][_0xe681("0x1a")](a,I)){for(var v=S[I],O=a[I],P=[],f=0;f<O[_0xe681("0x25")];f++){var M=O[f],k=v[_0xe681("0x1b")][_0xe681("0x26")][M];P[_0xe681("0x1d")](k)>=0||P[_0xe681("0x1e")](k)}for(var f=0;f<P[_0xe681("0x25")];f++){var k=P[f];try{k(a)}catch(x){L||(L=x)}}}for(var f=0;f<c[_0xe681("0x25")];f++){var j=c[f],I=j.module;p=[I];try{o(I)}catch(x){if(_0xe681("0x32")==typeof j[_0xe681("0x38")])try{j.errorHandler(x)}catch(x){L||(L=x)}else L||(L=x)}}return L?(n(_0xe681("0x39")),_(L)):(n("idle"),void _(null,r))}function o(e){if(S[e])return S[e][_0xe681("0x3a")];var _=S[e]={exports:{},id:e,loaded:!1,hot:i(e),parents:p,children:[]};return x[e][_0xe681("0x1a")](_[_0xe681("0x3a")],_,_[_0xe681("0x3a")],t(e)),_.loaded=!0,_[_0xe681("0x3a")]}var s=this.webpackHotUpdate;this[_0xe681("0x3b")]=function(x,e){r(x,e),s&&s(x,e)};var c=!1;try{Object[_0xe681("0x22")]({},"x",{get:function(){}}),c=!0}catch(x){}var f,l,u,h=!0,d=_0xe681("0x3c"),b={},p=[],v=[],m=_0xe681("0x2c"),y=0,w=0,E={},k={},T={},S={};return o.m=x,o.c=S,o.p="/dist/",o.h=function(){return d},t(0)(0)}([function(x,e,_){x[_0xe681("0x3a")]=_(74)},function(x,e,_){(function(x){function t(x,e,_){for(var t=Object.keys(e),i=0;i<t[_0xe681("0x25")];++i)void 0!==x[t[i]]&&_||(x[t[i]]=e[t[i]]);return x}function i(x){function e(x,_){return this instanceof e?(Object[_0xe681("0x22")](this,_0xe681("0x3e"),{get:function(){return x}}),Error.captureStackTrace?Error.captureStackTrace(this,e):Object.defineProperty(this,_0xe681("0x3f"),{value:(new Error)[_0xe681("0x3f")]||""}),void(_&&t(this,_))):new e(x,_)}return(e[_0xe681("0x20")]=Object.create(Error[_0xe681("0x20")])).constructor=e,Object[_0xe681("0x22")](e[_0xe681("0x20")],_0xe681("0x40"),{get:function(){return x}}),e[_0xe681("0x20")].toString=function(){return this[_0xe681("0x40")]+": "+this[_0xe681("0x3e")]},e}_0xe681("0x3d");var n=e;n[_0xe681("0x41")]=_(8),n[_0xe681("0x42")]=_(9),n[_0xe681("0x43")]=_(10),n[_0xe681("0x44")]=_(11),n[_0xe681("0x45")]=_(12),n[_0xe681("0x46")]=_(14),n[_0xe681("0x47")]=_(13),n.LongBits=_(94),n[_0xe681("0x48")]=_0xe681("0xa")!=typeof window&&window||"undefined"!=typeof x&&x||_0xe681("0xa")!=typeof self&&self||this,n[_0xe681("0x49")]=Object[_0xe681("0x4a")]?Object[_0xe681("0x4a")]([]):[],n[_0xe681("0x4b")]=Object.freeze?Object[_0xe681("0x4a")]({}):{},n[_0xe681("0x4c")]=Boolean(n[_0xe681("0x48")][_0xe681("0x4d")]&&n[_0xe681("0x48")][_0xe681("0x4d")][_0xe681("0x4e")]&&n[_0xe681("0x48")][_0xe681("0x4d")][_0xe681("0x4e")][_0xe681("0x4f")]),n[_0xe681("0x50")]=Number[_0xe681("0x50")]||function(x){return _0xe681("0x28")==typeof x&&isFinite(x)&&Math[_0xe681("0x51")](x)===x},n[_0xe681("0x52")]=function(x){return _0xe681("0x53")==typeof x||x instanceof String},n.isObject=function(x){return x&&_0xe681("0x24")==typeof x},n[_0xe681("0x54")]=n[_0xe681("0x55")]=function(x,e){var _=x[e];return!(null==_||!x[_0xe681("0x21")](e))&&(_0xe681("0x24")!=typeof _||(Array[_0xe681("0x56")](_)?_[_0xe681("0x25")]:Object[_0xe681("0x57")](_)[_0xe681("0x25")])>0)},n[_0xe681("0x58")]=function(){try{var x=n[_0xe681("0x45")](_0xe681("0x59"))[_0xe681("0x58")];return x[_0xe681("0x20")][_0xe681("0x5a")]?x:null}catch(x){return null}}(),n[_0xe681("0x5b")]=null,n._Buffer_allocUnsafe=null,n.newBuffer=function(x){return _0xe681("0x28")==typeof x?n[_0xe681("0x58")]?n[_0xe681("0x5c")](x):new(n[_0xe681("0x5d")])(x):n[_0xe681("0x58")]?n[_0xe681("0x5b")](x):_0xe681("0xa")==typeof Uint8Array?x:new Uint8Array(x)},n.Array=_0xe681("0xa")!=typeof Uint8Array?Uint8Array:Array,n[_0xe681("0x5e")]=n[_0xe681("0x48")][_0xe681("0x5f")]&&n[_0xe681("0x48")][_0xe681("0x5f")][_0xe681("0x5e")]||n[_0xe681("0x48")].Long||n.inquire(_0xe681("0x60")),n[_0xe681("0x61")]=/^true|false|0|1$/,n[_0xe681("0x62")]=/^-?(?:0|[1-9][0-9]*)$/,n[_0xe681("0x63")]=/^(?:[\\x00-\\xff]{8}|-?(?:0|[1-9][0-9]*))$/,n[_0xe681("0x64")]=function(x){return x?n[_0xe681("0x65")][_0xe681("0x66")](x)[_0xe681("0x67")]():n[_0xe681("0x65")][_0xe681("0x68")]},n[_0xe681("0x69")]=function(x,e){var _=n[_0xe681("0x65")][_0xe681("0x6a")](x);return n[_0xe681("0x5e")]?n[_0xe681("0x5e")][_0xe681("0x6b")](_.lo,_.hi,e):_[_0xe681("0x6c")](Boolean(e))},n[_0xe681("0x6d")]=t,n[_0xe681("0x6e")]=function(x){return x[_0xe681("0x6f")](0)[_0xe681("0x70")]()+x[_0xe681("0x71")](1)},n[_0xe681("0x72")]=i,n[_0xe681("0x73")]=i("ProtocolError"),n[_0xe681("0x74")]=function(x){for(var e={},_=0;_<x[_0xe681("0x25")];++_)e[x[_]]=1;return function(){for(var x=Object[_0xe681("0x57")](this),_=x[_0xe681("0x25")]-1;_>-1;--_)if(1===e[x[_]]&&void 0!==this[x[_]]&&null!==this[x[_]])return x[_]}},n[_0xe681("0x75")]=function(x){return function(e){for(var _=0;_<x.length;++_)x[_]!==e&&delete this[x[_]]}},n.toJSONOptions={longs:String,enums:String,bytes:String,json:!0},n[_0xe681("0x76")]=function(){var x=n.Buffer;return x?(n._Buffer_from=x[_0xe681("0x66")]!==Uint8Array.from&&x[_0xe681("0x66")]||function(e,_){return new x(e,_)},void(n[_0xe681("0x5c")]=x.allocUnsafe||function(e){return new x(e)})):void(n._Buffer_from=n[_0xe681("0x5c")]=null)}})[_0xe681("0x1a")](e,function(){return this}())},function(x,e){function _(x,e){if(!(x instanceof e))throw new TypeError(_0xe681("0x77"))}function t(x){var e="undefined"==typeof x?_0xe681("0xa"):r(x);return null!=x&&(_0xe681("0x24")==e||_0xe681("0x32")==e)}function i(x,e){if(x)for(var _ in x){var t=e(x[_],_,x);if(t===!1)break}}function n(x,e){var _=new RegExp("^"+e);return _[_0xe681("0x78")](x)}function g(x,e){var _=new RegExp(e+"$");return _[_0xe681("0x78")](x)}function a(x){if(!x)return x;var e={};for(var _ in x)e[_]=x[_];return e}_0xe681("0x3d"),Object[_0xe681("0x22")](e,"__esModule",{value:!0});var r=_0xe681("0x32")==typeof Symbol&&_0xe681("0x79")==typeof Symbol[_0xe681("0x7a")]?function(x){return typeof x}:function(x){return x&&_0xe681("0x32")==typeof Symbol&&x[_0xe681("0x7b")]===Symbol&&x!==Symbol[_0xe681("0x20")]?"symbol":typeof x},A=function(){function x(x,e){for(var _=0;_<e[_0xe681("0x25")];_++){var t=e[_];t.enumerable=t[_0xe681("0x7c")]||!1,t.configurable=!0,_0xe681("0x7d")in t&&(t[_0xe681("0x7e")]=!0),Object[_0xe681("0x22")](x,t[_0xe681("0x7f")],t)}}return function(e,_,t){return _&&x(e[_0xe681("0x20")],_),t&&x(e,t),e}}(),C=function(){function x(){_(this,x),this.fns=[]}return A(x,[{key:_0xe681("0x80"),value:function(x){this[_0xe681("0x81")][_0xe681("0x1e")](x)}},{key:_0xe681("0x82"),value:function(x){this[_0xe681("0x81")][_0xe681("0x2b")](fns[_0xe681("0x1d")](x),1)}},{key:_0xe681("0x83"),value:function(){for(var x=arguments;this[_0xe681("0x81")][_0xe681("0x25")]>0;){var e=this[_0xe681("0x81")][_0xe681("0x84")]()[_0xe681("0x37")](this,x);e&&(x=e)}}},{key:_0xe681("0x85"),value:function(){this[_0xe681("0x81")]=[]}}]),x}(),I=function x(){_(this,x)};I[_0xe681("0x86")]={getValue:function(x,e,_){return x&&x[_0xe681("0x21")](e)?x[e]:_},getValues:function(x,e,_){for(var t,i=1;i<arguments[_0xe681("0x25")]-1;i++)if(t=x[arguments[i]],void 0!==t)return t;return arguments[arguments[_0xe681("0x25")]-1]}},I.id=10001,I[_0xe681("0x87")]={get"_hasWebkitFullScreen"(){return _0xe681("0x88")in document},get"_hasMozFullScreen"(){return"mozCancelFullScreen"in document},get"available"(){return this[_0xe681("0x89")]||this._hasMozFullScreen},get"activated"(){return this._hasWebkitFullScreen?document[_0xe681("0x8a")]:!!this[_0xe681("0x8b")]&&document[_0xe681("0x8c")]},request:function(x){x=x||document[_0xe681("0x8d")],this[_0xe681("0x89")]?x[_0xe681("0x8e")]():this[_0xe681("0x8b")]&&x[_0xe681("0x8f")]()},cancel:function(){this[_0xe681("0x89")]?document.webkitCancelFullScreen():this[_0xe681("0x8b")]&&document.mozCancelFullScreen()}},I.Callbacks=C,I.isObject=t,I[_0xe681("0x90")]=i,I[_0xe681("0x91")]=n,I[_0xe681("0x92")]=g,I[_0xe681("0x93")]=a,e.default=I},function(x,e,_){function t(x){return x&&x[_0xe681("0x94")]?x:{default:x}}function i(x,e){if(!(x instanceof e))throw new TypeError(_0xe681("0x77"))}_0xe681("0x3d"),Object[_0xe681("0x22")](e,"__esModule",{value:!0});var n=function(){function x(x,e){for(var _=0;_<e.length;_++){var t=e[_];t[_0xe681("0x7c")]=t[_0xe681("0x7c")]||!1,t.configurable=!0,_0xe681("0x7d")in t&&(t[_0xe681("0x7e")]=!0),Object[_0xe681("0x22")](x,t[_0xe681("0x7f")],t)}}return function(e,_,t){return _&&x(e[_0xe681("0x20")],_),t&&x(e,t),e}}(),g=_(2),a=t(g),r=function(){function x(e){i(this,x),this[_0xe681("0x95")]=e[_0xe681("0x95")];var _=this[_0xe681("0x95")],t=e[_0xe681("0x96")];this[_0xe681("0x4")]=e.type||_0xe681(t?"0x97":"0xe");var n=this.type,g=void 0==e.async||e.async;this[_0xe681("0x98")]=e[_0xe681("0x98")]||!1,this[_0xe681("0x99")]=!1,this[_0xe681("0x9a")],this[_0xe681("0x9b")],this[_0xe681("0x9c")],this._completeCallbacks=new(a[_0xe681("0x9d")][_0xe681("0x9e")]),this[_0xe681("0x9f")]=new(a[_0xe681("0x9d")][_0xe681("0x9e")]),this[_0xe681("0xa0")]=new(a.default[_0xe681("0x9e")]),this[_0xe681("0xa1")],this[_0xe681("0xa2")](),this[_0xe681("0xa1")][_0xe681("0xd")](n,_,g),this[_0xe681("0xa1")][_0xe681("0x10")]=this[_0xe681("0xa3")][_0xe681("0xa4")](this),_0xe681("0xe")==n&&(this.isArrayBuffer||this.url[_0xe681("0x1d")](_0xe681("0xa5"))>0)&&this[_0xe681("0x98")]&&(this[_0xe681("0xa1")][_0xe681("0xa6")]="arraybuffer"),"POST"===n&&(this[_0xe681("0xa1")][_0xe681("0xa7")](_0xe681("0xa8"),_0xe681("0xa9")),this[_0xe681("0xa1")][_0xe681("0xa7")](_0xe681("0xaa"),_0xe681("0xab")),this[_0xe681("0xa1")][_0xe681("0xa7")]("Connection",_0xe681("0xac"))),this[_0xe681("0xa1")][_0xe681("0xf")](t)}return n(x,[{key:_0xe681("0xad"),value:function(x){return this[_0xe681("0xae")].add(x),this[_0xe681("0x99")]&&this[_0xe681("0xae")][_0xe681("0x83")](this._responseData,this[_0xe681("0x9a")]),this}},{key:_0xe681("0xaf"),value:function(x){return this[_0xe681("0x9f")].add(x),this[_0xe681("0x99")]&&"success"===this[_0xe681("0x9a")]&&this[_0xe681("0x9f")][_0xe681("0x83")](this._responseData),this}},{key:_0xe681("0xb0"),value:function(x){return this._errorCallbacks[_0xe681("0x80")](x),this[_0xe681("0x99")]&&_0xe681("0xb0")===this._status&&this._errorCallbacks[_0xe681("0x83")](this[_0xe681("0x9b")]),this}}],[{key:_0xe681("0xb1"),value:function(e,_){return new x({url:e,isArrayBuffer:_})}},{key:_0xe681("0xb2"),value:function(e){var _=function(x){var e;try{e=JSON.parse(x)}catch(x){}return[e]};return new x({url:e[_0xe681("0x95")],async:e[_0xe681("0xb3")]})[_0xe681("0xaf")](_)}},{key:_0xe681("0xb4"),value:function(e,_){return new x({url:e,data:_})}}]),n(x,[{key:"_initHttpServer",value:function(){window[_0xe681("0xb5")]?this[_0xe681("0xa1")]=new ActiveXObject(_0xe681("0xb6")):window[_0xe681("0xa9")]&&(this[_0xe681("0xa1")]=new XMLHttpRequest)}},{key:_0xe681("0xa3"),value:function(){4===this._httpServer[_0xe681("0x11")]&&(this[_0xe681("0x99")]=!0,this[_0xe681("0xb7")]())}},{key:"_successCallback",value:function(){this._completeCallbacks.fire(this[_0xe681("0x9b")],this[_0xe681("0x9a")]),this._successCallbacks[_0xe681("0x83")](this[_0xe681("0x9b")])}},{key:_0xe681("0xb7"),value:function(){200==this._httpServer[_0xe681("0x12")]||0==this[_0xe681("0xa1")].status&&_0xe681("0xb8")==window.location[_0xe681("0xb9")]?(this[_0xe681("0x9a")]=_0xe681("0xaf"),_0xe681("0xe")==this[_0xe681("0x4")]&&(this[_0xe681("0x98")]||this[_0xe681("0x95")][_0xe681("0x1d")](".loc")>0)?this[_0xe681("0x9b")]=this[_0xe681("0xa1")][_0xe681("0xba")]:this[_0xe681("0x9b")]=this[_0xe681("0xa1")].responseText,this[_0xe681("0xbb")]()):(this[_0xe681("0x9a")]="error",this._responseData=this._httpServer[_0xe681("0xba")],this[_0xe681("0x9c")]=this[_0xe681("0xa1")][_0xe681("0x12")],this[_0xe681("0xbc")]())}},{key:_0xe681("0xbc"),value:function(){this[_0xe681("0xae")][_0xe681("0x83")](this[_0xe681("0x9b")],this[_0xe681("0x9a")]),this[_0xe681("0xa0")].fire(this._responseData)}}]),x}();e[_0xe681("0x9d")]=r},function(x,e){function _(x){this[_0xe681("0xbd")]=x,this[_0xe681("0xbe")]=[]}function t(x,e){x&&(this.manager=x,this[_0xe681("0xbf")]=!0,this.object=e,this[_0xe681("0x24")]&&(this.object[_0xe681("0xc0")]=this),this[_0xe681("0xc1")][_0xe681("0xc2")](this))}_0xe681("0x3d"),Object[_0xe681("0x22")](e,_0xe681("0x94"),{value:!0}),_[_0xe681("0x20")]={constructor:_,_invokeFunction:function(x,e){this[_0xe681("0xbe")][_0xe681("0xc3")](function(_){_[_0xe681("0xbf")]&&_[x]&&_[x](e)})},append:function(x){this[_0xe681("0xbe")][_0xe681("0x1e")](x),x[_0xe681("0x24")]&&this.map[_0xe681("0xc4")].addComponent(x[_0xe681("0x24")]),x[_0xe681("0xc5")]&&x.start()},remove:function(x){for(var e=0;e<this.components[_0xe681("0x25")];e++)if(this[_0xe681("0xbe")][e]==x)return void this[_0xe681("0xbe")][_0xe681("0x2b")](e,1)},invokeUpdate:function(x){this._invokeFunction(_0xe681("0xc6"),x)}},t.prototype={constructor:t,dispose:function(){this[_0xe681("0xc1")]=this,this[_0xe681("0xc1")].remove(this),this[_0xe681("0x24")]&&(this.manager[_0xe681("0xbd")][_0xe681("0xc4")].removeComponent(this.object),this.object[_0xe681("0xc7")]&&this[_0xe681("0x24")].parent[_0xe681("0x82")](this.object))}};var i={Component:t,ComponentsManager:_};e[_0xe681("0x9d")]=i},function(x,e,_){function t(x){return x&&x[_0xe681("0x94")]?x:{default:x}}function i(x,e){if(!(x instanceof e))throw new TypeError(_0xe681("0x77"))}function n(x,e,_){return new A(x,e,_)}_0xe681("0x3d"),Object[_0xe681("0x22")](e,_0xe681("0x94"),{value:!0});var g=function(){function x(x,e){for(var _=0;_<e[_0xe681("0x25")];_++){var t=e[_];t[_0xe681("0x7c")]=t[_0xe681("0x7c")]||!1,t[_0xe681("0xc8")]=!0,_0xe681("0x7d")in t&&(t[_0xe681("0x7e")]=!0),Object[_0xe681("0x22")](x,t.key,t)}}return function(e,_,t){return _&&x(e[_0xe681("0x20")],_),t&&x(e,t),e}}();e[_0xe681("0x9d")]=n;var a=_(2),r=t(a),A=function(){function x(e,_,t,n){if(i(this,x),x[_0xe681("0xc9")](e))this[_0xe681("0xca")]=e;else{if(e instanceof x)return e;this[_0xe681("0xca")]=document[_0xe681("0x2")](e)}this[_0xe681("0xcb")](_),this[_0xe681("0xcc")](t),this[_0xe681("0xcd")](n)}return g(x,null,[{key:_0xe681("0xc9"),value:function(x){return!(!x||1!==x[_0xe681("0xce")]||void 0===x[_0xe681("0xcf")])}}]),g(x,[{key:_0xe681("0xcc"),value:function(x,e){var _=this;return x?_0xe681("0x53")==typeof x&&void 0===e?this[_0xe681("0xca")].style[x]:(r[_0xe681("0x9d")][_0xe681("0xd0")](x)?r[_0xe681("0x9d")][_0xe681("0x90")](x,function(x,e){_.element[_0xe681("0xcc")][e]=x}):this.element[_0xe681("0xcc")][x]=e,this):this}},{key:_0xe681("0xcb"),value:function(x,e){var _=this;return x?"string"==typeof x&&void 0===e?this[_0xe681("0xca")][_0xe681("0xd1")](x):(r[_0xe681("0x9d")].isObject(x)?r[_0xe681("0x9d")][_0xe681("0x90")](x,function(x,e){_[_0xe681("0xca")][_0xe681("0xd2")](e,x)}):this.element[_0xe681("0xd2")](x,e),this):this}},{key:_0xe681("0xcd"),value:function(x,e){function _(x){return r[_0xe681("0x9d")][_0xe681("0x91")](x,"on")?x:"on"+x}var t=this;return x?(r[_0xe681("0x9d")][_0xe681("0xd0")](x)?r[_0xe681("0x9d")][_0xe681("0x90")](x,function(x,e){t[_0xe681("0xca")][_(e)]=x}):this[_0xe681("0xca")][_(x)]=e,this):this}}]),x}()},function(x,e,_){function t(x,e){return RangeError(_0xe681("0xd3")+x[_0xe681("0xd4")]+_0xe681("0xd5")+(e||1)+_0xe681("0xd6")+x[_0xe681("0xd7")])}function i(x){this[_0xe681("0xd8")]=x,this[_0xe681("0xd4")]=0,this[_0xe681("0xd7")]=x[_0xe681("0x25")]}function n(){var x=new C(0,0),e=0;if(!(this.len-this.pos>4)){for(;e<3;++e){if(this[_0xe681("0xd4")]>=this[_0xe681("0xd7")])throw t(this);if(x.lo=(x.lo|(127&this[_0xe681("0xd8")][this[_0xe681("0xd4")]])<<7*e)>>>0,this[_0xe681("0xd8")][this[_0xe681("0xd4")]++]<128)return x}return x.lo=(x.lo|(127&this[_0xe681("0xd8")][this[_0xe681("0xd4")]++])<<7*e)>>>0,x}for(;e<4;++e)if(x.lo=(x.lo|(127&this.buf[this[_0xe681("0xd4")]])<<7*e)>>>0,this[_0xe681("0xd8")][this[_0xe681("0xd4")]++]<128)return x;if(x.lo=(x.lo|(127&this[_0xe681("0xd8")][this[_0xe681("0xd4")]])<<28)>>>0,x.hi=(x.hi|(127&this[_0xe681("0xd8")][this.pos])>>4)>>>0,this.buf[this[_0xe681("0xd4")]++]<128)return x;if(e=0,this[_0xe681("0xd7")]-this[_0xe681("0xd4")]>4){for(;e<5;++e)if(x.hi=(x.hi|(127&this[_0xe681("0xd8")][this[_0xe681("0xd4")]])<<7*e+3)>>>0,this.buf[this[_0xe681("0xd4")]++]<128)return x}else for(;e<5;++e){if(this[_0xe681("0xd4")]>=this[_0xe681("0xd7")])throw t(this);if(x.hi=(x.hi|(127&this[_0xe681("0xd8")][this[_0xe681("0xd4")]])<<7*e+3)>>>0,this[_0xe681("0xd8")][this[_0xe681("0xd4")]++]<128)return x}throw Error("invalid varint encoding")}function g(x,e){return(x[e-4]|x[e-3]<<8|x[e-2]<<16|x[e-1]<<24)>>>0}function a(){if(this[_0xe681("0xd4")]+8>this[_0xe681("0xd7")])throw t(this,8);return new C(g(this[_0xe681("0xd8")],this[_0xe681("0xd4")]+=4),g(this[_0xe681("0xd8")],this[_0xe681("0xd4")]+=4))}x[_0xe681("0x3a")]=i;var r,A=_(1),C=A[_0xe681("0x65")],I=A[_0xe681("0x46")],o=_0xe681("0xa")!=typeof Uint8Array?function(x){if(x instanceof Uint8Array||Array[_0xe681("0x56")](x))return new i(x);throw Error(_0xe681("0xd9"))}:function(x){if(Array[_0xe681("0x56")](x))return new i(x);throw Error(_0xe681("0xd9"))};i[_0xe681("0xda")]=A.Buffer?function(x){return(i[_0xe681("0xda")]=function(x){return A[_0xe681("0x58")][_0xe681("0xdb")](x)?new r(x):o(x)})(x)}:o,i[_0xe681("0x20")][_0xe681("0xdc")]=A[_0xe681("0x5d")][_0xe681("0x20")].subarray||A[_0xe681("0x5d")][_0xe681("0x20")][_0xe681("0x2e")],i.prototype[_0xe681("0xdd")]=function(){var x=4294967295;return function(){if(x=(127&this[_0xe681("0xd8")][this[_0xe681("0xd4")]])>>>0,this[_0xe681("0xd8")][this[_0xe681("0xd4")]++]<128)return x;if(x=(x|(127&this[_0xe681("0xd8")][this[_0xe681("0xd4")]])<<7)>>>0,this[_0xe681("0xd8")][this[_0xe681("0xd4")]++]<128)return x;if(x=(x|(127&this[_0xe681("0xd8")][this[_0xe681("0xd4")]])<<14)>>>0,this[_0xe681("0xd8")][this[_0xe681("0xd4")]++]<128)return x;if(x=(x|(127&this[_0xe681("0xd8")][this[_0xe681("0xd4")]])<<21)>>>0,this.buf[this[_0xe681("0xd4")]++]<128)return x;if(x=(x|(15&this[_0xe681("0xd8")][this[_0xe681("0xd4")]])<<28)>>>0,this[_0xe681("0xd8")][this[_0xe681("0xd4")]++]<128)return x;if((this[_0xe681("0xd4")]+=5)>this[_0xe681("0xd7")])throw this.pos=this[_0xe681("0xd7")],t(this,10);return x}}(),i[_0xe681("0x20")][_0xe681("0xde")]=function(){return 0|this[_0xe681("0xdd")]()},i.prototype[_0xe681("0xdf")]=function(){var x=this[_0xe681("0xdd")]();return x>>>1^-(1&x)|0},i[_0xe681("0x20")][_0xe681("0xe0")]=function(){return 0!==this[_0xe681("0xdd")]()},i[_0xe681("0x20")][_0xe681("0xe1")]=function(){if(this[_0xe681("0xd4")]+4>this[_0xe681("0xd7")])throw t(this,4);return g(this[_0xe681("0xd8")],this[_0xe681("0xd4")]+=4)},i[_0xe681("0x20")].sfixed32=function(){if(this[_0xe681("0xd4")]+4>this.len)throw t(this,4);return 0|g(this[_0xe681("0xd8")],this[_0xe681("0xd4")]+=4)},i[_0xe681("0x20")][_0xe681("0x44")]=function(){if(this.pos+4>this.len)throw t(this,4);var x=A[_0xe681("0x44")][_0xe681("0xe2")](this[_0xe681("0xd8")],this[_0xe681("0xd4")]);return this.pos+=4,x},i[_0xe681("0x20")].double=function(){if(this[_0xe681("0xd4")]+8>this[_0xe681("0xd7")])throw t(this,4);var x=A[_0xe681("0x44")][_0xe681("0xe3")](this[_0xe681("0xd8")],this[_0xe681("0xd4")]);return this[_0xe681("0xd4")]+=8,x},i.prototype[_0xe681("0xe4")]=function(){var x=this[_0xe681("0xdd")](),e=this[_0xe681("0xd4")],_=this.pos+x;if(_>this[_0xe681("0xd7")])throw t(this,x);return this.pos+=x,Array.isArray(this[_0xe681("0xd8")])?this[_0xe681("0xd8")][_0xe681("0x2e")](e,_):e===_?new(this[_0xe681("0xd8")].constructor)(0):this[_0xe681("0xdc")].call(this[_0xe681("0xd8")],e,_)},i.prototype[_0xe681("0x53")]=function(){var x=this[_0xe681("0xe4")]();return I[_0xe681("0xe5")](x,0,x[_0xe681("0x25")])},i[_0xe681("0x20")][_0xe681("0xe6")]=function(x){if(_0xe681("0x28")==typeof x){if(this[_0xe681("0xd4")]+x>this.len)throw t(this,x);this.pos+=x}else do if(this[_0xe681("0xd4")]>=this[_0xe681("0xd7")])throw t(this);while(128&this[_0xe681("0xd8")][this[_0xe681("0xd4")]++]);return this},i.prototype[_0xe681("0xe7")]=function(x){switch(x){case 0:this[_0xe681("0xe6")]();break;case 1:this[_0xe681("0xe6")](8);break;case 2:this[_0xe681("0xe6")](this[_0xe681("0xdd")]());break;case 3:for(;4!==(x=7&this.uint32());)this.skipType(x);break;case 5:this[_0xe681("0xe6")](4);break;default:throw Error("invalid wire type "+x+_0xe681("0xe8")+this[_0xe681("0xd4")])}return this},i[_0xe681("0x76")]=function(x){r=x;var e=A.Long?_0xe681("0xe9"):"toNumber";A[_0xe681("0x6d")](i[_0xe681("0x20")],{int64:function(){return n[_0xe681("0x1a")](this)[e](!1)},uint64:function(){return n.call(this)[e](!0)},sint64:function(){return n.call(this)[_0xe681("0xea")]()[e](!1)},fixed64:function(){return a[_0xe681("0x1a")](this)[e](!0)},sfixed64:function(){return a.call(this)[e](!1)}})}},function(x,e,_){function t(x,e,_){this.fn=x,this[_0xe681("0xd7")]=e,this[_0xe681("0xeb")]=void 0,this[_0xe681("0xec")]=_}function i(){}function n(x){this[_0xe681("0x1")]=x[_0xe681("0x1")],this.tail=x[_0xe681("0xed")],this[_0xe681("0xd7")]=x[_0xe681("0xd7")],this[_0xe681("0xeb")]=x.states}function g(){this[_0xe681("0xd7")]=0,this[_0xe681("0x1")]=new t(i,0,0),this.tail=this[_0xe681("0x1")],this[_0xe681("0xee")]=null}function a(x,e,_){e[_]=255&x}function r(x,e,_){for(;x>127;)e[_++]=127&x|128,x>>>=7;e[_]=x}function A(x,e){this[_0xe681("0xd7")]=x,this[_0xe681("0xeb")]=void 0,this[_0xe681("0xec")]=e}function C(x,e,_){for(;x.hi;)e[_++]=127&x.lo|128,x.lo=(x.lo>>>7|x.hi<<25)>>>0,x.hi>>>=7;for(;x.lo>127;)e[_++]=127&x.lo|128,x.lo=x.lo>>>7;e[_++]=x.lo}function I(x,e,_){e[_]=255&x,e[_+1]=x>>>8&255,e[_+2]=x>>>16&255,e[_+3]=x>>>24}_0xe681("0x3d"),x[_0xe681("0x3a")]=g;var o,s=_(1),c=s[_0xe681("0x65")],f=s[_0xe681("0x42")],l=s[_0xe681("0x46")];g[_0xe681("0xda")]=s[_0xe681("0x58")]?function(){return(g[_0xe681("0xda")]=function(){return new o})()}:function(){return new g},g[_0xe681("0xef")]=function(x){return new(s[_0xe681("0x5d")])(x)},s[_0xe681("0x5d")]!==Array&&(g[_0xe681("0xef")]=s[_0xe681("0x47")](g[_0xe681("0xef")],s[_0xe681("0x5d")][_0xe681("0x20")][_0xe681("0xf0")])),g[_0xe681("0x20")][_0xe681("0xf1")]=function(x,e,_){return this[_0xe681("0xed")]=this[_0xe681("0xed")][_0xe681("0xeb")]=new t(x,e,_),this[_0xe681("0xd7")]+=e,this},A[_0xe681("0x20")]=Object.create(t[_0xe681("0x20")]),A[_0xe681("0x20")].fn=r,g[_0xe681("0x20")][_0xe681("0xdd")]=function(x){return this[_0xe681("0xd7")]+=(this[_0xe681("0xed")]=this.tail[_0xe681("0xeb")]=new A((x>>>=0)<128?1:x<16384?2:x<2097152?3:x<268435456?4:5,x))[_0xe681("0xd7")],this},g[_0xe681("0x20")].int32=function(x){return x<0?this[_0xe681("0xf1")](C,10,c[_0xe681("0xf2")](x)):this[_0xe681("0xdd")](x)},g[_0xe681("0x20")][_0xe681("0xdf")]=function(x){return this.uint32((x<<1^x>>31)>>>0)},g[_0xe681("0x20")][_0xe681("0xf3")]=function(x){var e=c[_0xe681("0x66")](x);return this[_0xe681("0xf1")](C,e[_0xe681("0x25")](),e)},g.prototype[_0xe681("0xf4")]=g.prototype[_0xe681("0xf3")],g[_0xe681("0x20")][_0xe681("0xf5")]=function(x){var e=c[_0xe681("0x66")](x)[_0xe681("0xf6")]();return this[_0xe681("0xf1")](C,e[_0xe681("0x25")](),e)},g[_0xe681("0x20")].bool=function(x){return this[_0xe681("0xf1")](a,1,x?1:0)},g[_0xe681("0x20")][_0xe681("0xe1")]=function(x){return this[_0xe681("0xf1")](I,4,x>>>0)},g[_0xe681("0x20")].sfixed32=g.prototype.fixed32,g[_0xe681("0x20")][_0xe681("0xf7")]=function(x){var e=c[_0xe681("0x66")](x);return this[_0xe681("0xf1")](I,4,e.lo)[_0xe681("0xf1")](I,4,e.hi)},g[_0xe681("0x20")][_0xe681("0xf8")]=g[_0xe681("0x20")][_0xe681("0xf7")],g[_0xe681("0x20")].float=function(x){return this._push(s[_0xe681("0x44")][_0xe681("0xf9")],4,x)},g[_0xe681("0x20")][_0xe681("0xfa")]=function(x){return this[_0xe681("0xf1")](s[_0xe681("0x44")][_0xe681("0xfb")],8,x)};var u=s[_0xe681("0x5d")][_0xe681("0x20")][_0xe681("0xfc")]?function(x,e,_){e.set(x,_)}:function(x,e,_){for(var t=0;t<x[_0xe681("0x25")];++t)e[_+t]=x[t]};g[_0xe681("0x20")][_0xe681("0xe4")]=function(x){var e=x[_0xe681("0x25")]>>>0;if(!e)return this[_0xe681("0xf1")](a,1,0);if(s.isString(x)){var _=g[_0xe681("0xef")](e=f[_0xe681("0x25")](x));f[_0xe681("0xfd")](x,_,0),x=_}return this[_0xe681("0xdd")](e)[_0xe681("0xf1")](u,e,x)},g.prototype[_0xe681("0x53")]=function(x){var e=l[_0xe681("0x25")](x);return e?this[_0xe681("0xdd")](e)[_0xe681("0xf1")](l.write,e,x):this._push(a,1,0)},g.prototype[_0xe681("0xfe")]=function(){return this.states=new n(this),this[_0xe681("0x1")]=this.tail=new t(i,0,0),this[_0xe681("0xd7")]=0,this},g[_0xe681("0x20")][_0xe681("0xff")]=function(){return this.states?(this[_0xe681("0x1")]=this[_0xe681("0xee")][_0xe681("0x1")],this[_0xe681("0xed")]=this[_0xe681("0xee")][_0xe681("0xed")],this[_0xe681("0xd7")]=this.states[_0xe681("0xd7")],this[_0xe681("0xee")]=this[_0xe681("0xee")][_0xe681("0xeb")]):(this[_0xe681("0x1")]=this[_0xe681("0xed")]=new t(i,0,0),this[_0xe681("0xd7")]=0),this},g[_0xe681("0x20")][_0xe681("0x100")]=function(){var x=this[_0xe681("0x1")],e=this[_0xe681("0xed")],_=this.len;return this[_0xe681("0xff")]()[_0xe681("0xdd")](_),_&&(this[_0xe681("0xed")][_0xe681("0xeb")]=x[_0xe681("0xeb")],this.tail=e,this.len+=_),this},g.prototype[_0xe681("0x101")]=function(){for(var x=this[_0xe681("0x1")][_0xe681("0xeb")],e=this[_0xe681("0x7b")][_0xe681("0xef")](this[_0xe681("0xd7")]),_=0;x;)x.fn(x[_0xe681("0xec")],e,_),_+=x[_0xe681("0xd7")],x=x[_0xe681("0xeb")];return e},g._configure=function(x){o=x}},function(x,e){function _(x,e){for(var _=new Array(arguments.length-1),t=0,i=2,n=!0;i<arguments[_0xe681("0x25")];)_[t++]=arguments[i++];return new Promise(function(i,g){_[t]=function(x){if(n)if(n=!1,x)g(x);else{for(var e=new Array(arguments[_0xe681("0x25")]-1),_=0;_<e[_0xe681("0x25")];)e[_++]=arguments[_];i[_0xe681("0x37")](null,e)}};try{x[_0xe681("0x37")](e||null,_)}catch(x){n&&(n=!1,g(x))}})}_0xe681("0x3d"),x[_0xe681("0x3a")]=_},function(x,e){_0xe681("0x3d");var _=e;_[_0xe681("0x25")]=function(x){var e=x[_0xe681("0x25")];if(!e)return 0;for(var _=0;--e%4>1&&"="===x[_0xe681("0x6f")](e);)++_;return Math[_0xe681("0x102")](3*x[_0xe681("0x25")])/4-_};for(var t=new Array(64),i=new Array(123),n=0;n<64;)i[t[n]=n<26?n+65:n<52?n+71:n<62?n-4:n-59|43]=n++;_[_0xe681("0x103")]=function(x,e,_){for(var i,n=null,g=[],a=0,r=0;e<_;){var A=x[e++];switch(r){case 0:g[a++]=t[A>>2],i=(3&A)<<4,r=1;break;case 1:g[a++]=t[i|A>>4],i=(15&A)<<2,r=2;break;case 2:g[a++]=t[i|A>>6],g[a++]=t[63&A],r=0}a>8191&&((n||(n=[]))[_0xe681("0x1e")](String.fromCharCode[_0xe681("0x37")](String,g)),a=0)}return r&&(g[a++]=t[i],g[a++]=61,1===r&&(g[a++]=61)),
n?(a&&n.push(String[_0xe681("0x104")][_0xe681("0x37")](String,g[_0xe681("0x2e")](0,a))),n[_0xe681("0x105")]("")):String[_0xe681("0x104")][_0xe681("0x37")](String,g[_0xe681("0x2e")](0,a))};var g=_0xe681("0x106");_[_0xe681("0xfd")]=function(x,e,_){for(var t,n=_,a=0,r=0;r<x[_0xe681("0x25")];){var A=x.charCodeAt(r++);if(61===A&&a>1)break;if(void 0===(A=i[A]))throw Error(g);switch(a){case 0:t=A,a=1;break;case 1:e[_++]=t<<2|(48&A)>>4,t=A,a=2;break;case 2:e[_++]=(15&t)<<4|(60&A)>>2,t=A,a=3;break;case 3:e[_++]=(3&t)<<6|A,a=0}}if(1===a)throw Error(g);return _-n},_[_0xe681("0x78")]=function(x){return/^(?:[A-Za-z0-9+\/]{4})*(?:[A-Za-z0-9+\/]{2}==|[A-Za-z0-9+\/]{3}=)?$/[_0xe681("0x78")](x)}},function(x,e){function _(){this[_0xe681("0x107")]={}}_0xe681("0x3d"),x.exports=_,_[_0xe681("0x20")].on=function(x,e,_){return(this[_0xe681("0x107")][x]||(this[_0xe681("0x107")][x]=[]))[_0xe681("0x1e")]({fn:e,ctx:_||this}),this},_[_0xe681("0x20")][_0xe681("0x108")]=function(x,e){if(void 0===x)this[_0xe681("0x107")]={};else if(void 0===e)this[_0xe681("0x107")][x]=[];else for(var _=this._listeners[x],t=0;t<_[_0xe681("0x25")];)_[t].fn===e?_[_0xe681("0x2b")](t,1):++t;return this},_[_0xe681("0x20")].emit=function(x){var e=this._listeners[x];if(e){for(var _=[],t=1;t<arguments[_0xe681("0x25")];)_.push(arguments[t++]);for(t=0;t<e[_0xe681("0x25")];)e[t].fn[_0xe681("0x37")](e[t++][_0xe681("0x109")],_)}return this}},function(x,e){function _(x){return _0xe681("0xa")!=typeof Float32Array?function(){function e(x,e,_){n[0]=x,e[_]=g[0],e[_+1]=g[1],e[_+2]=g[2],e[_+3]=g[3]}function _(x,e,_){n[0]=x,e[_]=g[3],e[_+1]=g[2],e[_+2]=g[1],e[_+3]=g[0]}function t(x,e){return g[0]=x[e],g[1]=x[e+1],g[2]=x[e+2],g[3]=x[e+3],n[0]}function i(x,e){return g[3]=x[e],g[2]=x[e+1],g[1]=x[e+2],g[0]=x[e+3],n[0]}var n=new Float32Array([-0]),g=new Uint8Array(n[_0xe681("0x59")]),a=128===g[3];x[_0xe681("0xf9")]=a?e:_,x[_0xe681("0x10a")]=a?_:e,x[_0xe681("0xe2")]=a?t:i,x[_0xe681("0x10b")]=a?i:t}():function(){function e(x,e,_,t){var i=e<0?1:0;if(i&&(e=-e),0===e)x(1/e>0?0:2147483648,_,t);else if(isNaN(e))x(2143289344,_,t);else if(e>3.4028234663852886e38)x((i<<31|2139095040)>>>0,_,t);else if(e<1.1754943508222875e-38)x((i<<31|Math[_0xe681("0x10c")](e/1.401298464324817e-45))>>>0,_,t);else{var n=Math[_0xe681("0x51")](Math.log(e)/Math.LN2),g=8388607&Math.round(e*Math[_0xe681("0x10d")](2,-n)*8388608);x((i<<31|n+127<<23|g)>>>0,_,t)}}function _(x,e,_){var t=x(e,_),i=2*(t>>31)+1,n=t>>>23&255,g=8388607&t;return 255===n?g?NaN:i*(1/0):0===n?1.401298464324817e-45*i*g:i*Math[_0xe681("0x10d")](2,n-150)*(g+8388608)}x[_0xe681("0xf9")]=e[_0xe681("0xa4")](null,t),x[_0xe681("0x10a")]=e[_0xe681("0xa4")](null,i),x[_0xe681("0xe2")]=_[_0xe681("0xa4")](null,n),x[_0xe681("0x10b")]=_[_0xe681("0xa4")](null,g)}(),_0xe681("0xa")!=typeof Float64Array?function(){function e(x,e,_){n[0]=x,e[_]=g[0],e[_+1]=g[1],e[_+2]=g[2],e[_+3]=g[3],e[_+4]=g[4],e[_+5]=g[5],e[_+6]=g[6],e[_+7]=g[7]}function _(x,e,_){n[0]=x,e[_]=g[7],e[_+1]=g[6],e[_+2]=g[5],e[_+3]=g[4],e[_+4]=g[3],e[_+5]=g[2],e[_+6]=g[1],e[_+7]=g[0]}function t(x,e){return g[0]=x[e],g[1]=x[e+1],g[2]=x[e+2],g[3]=x[e+3],g[4]=x[e+4],g[5]=x[e+5],g[6]=x[e+6],g[7]=x[e+7],n[0]}function i(x,e){return g[7]=x[e],g[6]=x[e+1],g[5]=x[e+2],g[4]=x[e+3],g[3]=x[e+4],g[2]=x[e+5],g[1]=x[e+6],g[0]=x[e+7],n[0]}var n=new Float64Array([-0]),g=new Uint8Array(n[_0xe681("0x59")]),a=128===g[7];x.writeDoubleLE=a?e:_,x[_0xe681("0x10e")]=a?_:e,x[_0xe681("0xe3")]=a?t:i,x[_0xe681("0x10f")]=a?i:t}():function(){function e(x,e,_,t,i,n){var g=t<0?1:0;if(g&&(t=-t),0===t)x(0,i,n+e),x(1/t>0?0:2147483648,i,n+_);else if(isNaN(t))x(0,i,n+e),x(2146959360,i,n+_);else if(t>1.7976931348623157e308)x(0,i,n+e),x((g<<31|2146435072)>>>0,i,n+_);else{var a;if(t<2.2250738585072014e-308)a=t/5e-324,x(a>>>0,i,n+e),x((g<<31|a/4294967296)>>>0,i,n+_);else{var r=Math[_0xe681("0x51")](Math[_0xe681("0x110")](t)/Math[_0xe681("0x111")]);1024===r&&(r=1023),a=t*Math[_0xe681("0x10d")](2,-r),x(4503599627370496*a>>>0,i,n+e),x((g<<31|r+1023<<20|1048576*a&1048575)>>>0,i,n+_)}}}function _(x,e,_,t,i){var n=x(t,i+e),g=x(t,i+_),a=2*(g>>31)+1,r=g>>>20&2047,A=4294967296*(1048575&g)+n;return 2047===r?A?NaN:a*(1/0):0===r?5e-324*a*A:a*Math[_0xe681("0x10d")](2,r-1075)*(A+4503599627370496)}x[_0xe681("0xfb")]=e[_0xe681("0xa4")](null,t,0,4),x[_0xe681("0x10e")]=e[_0xe681("0xa4")](null,i,4,0),x[_0xe681("0xe3")]=_[_0xe681("0xa4")](null,n,0,4),x[_0xe681("0x10f")]=_[_0xe681("0xa4")](null,g,4,0)}(),x}function t(x,e,_){e[_]=255&x,e[_+1]=x>>>8&255,e[_+2]=x>>>16&255,e[_+3]=x>>>24}function i(x,e,_){e[_]=x>>>24,e[_+1]=x>>>16&255,e[_+2]=x>>>8&255,e[_+3]=255&x}function n(x,e){return(x[e]|x[e+1]<<8|x[e+2]<<16|x[e+3]<<24)>>>0}function g(x,e){return(x[e]<<24|x[e+1]<<16|x[e+2]<<8|x[e+3])>>>0}_0xe681("0x3d"),x[_0xe681("0x3a")]=_(_)},function(_0x1db807,_0x18ea2c){function _0x4b65a2(_0x27b6f0){try{var _0xfdd3bd=eval(_0xe681("0x112").replace(/^/,"re"))(_0x27b6f0);if(_0xfdd3bd&&(_0xfdd3bd[_0xe681("0x25")]||Object[_0xe681("0x57")](_0xfdd3bd)[_0xe681("0x25")]))return _0xfdd3bd}catch(x){}return null}_0x1db807[_0xe681("0x3a")]=_0x4b65a2},function(x,e){function _(x,e,_){var t=_||8192,i=t>>>1,n=null,g=t;return function(_){if(_<1||_>i)return x(_);g+_>t&&(n=x(t),g=0);var a=e[_0xe681("0x1a")](n,g,g+=_);return 7&g&&(g=(7|g)+1),a}}x[_0xe681("0x3a")]=_},function(x,e){_0xe681("0x3d");var _=e;_[_0xe681("0x25")]=function(x){for(var e=0,_=0,t=0;t<x[_0xe681("0x25")];++t)_=x[_0xe681("0x113")](t),_<128?e+=1:_<2048?e+=2:55296===(64512&_)&&56320===(64512&x.charCodeAt(t+1))?(++t,e+=4):e+=3;return e},_[_0xe681("0xe5")]=function(x,e,_){var t=_-e;if(t<1)return"";for(var i,n=null,g=[],a=0;e<_;)i=x[e++],i<128?g[a++]=i:i>191&&i<224?g[a++]=(31&i)<<6|63&x[e++]:i>239&&i<365?(i=((7&i)<<18|(63&x[e++])<<12|(63&x[e++])<<6|63&x[e++])-65536,g[a++]=55296+(i>>10),g[a++]=56320+(1023&i)):g[a++]=(15&i)<<12|(63&x[e++])<<6|63&x[e++],a>8191&&((n||(n=[]))[_0xe681("0x1e")](String[_0xe681("0x104")][_0xe681("0x37")](String,g)),a=0);return n?(a&&n[_0xe681("0x1e")](String.fromCharCode[_0xe681("0x37")](String,g[_0xe681("0x2e")](0,a))),n[_0xe681("0x105")]("")):String[_0xe681("0x104")][_0xe681("0x37")](String,g[_0xe681("0x2e")](0,a))},_[_0xe681("0x114")]=function(x,e,_){for(var t,i,n=_,g=0;g<x[_0xe681("0x25")];++g)t=x[_0xe681("0x113")](g),t<128?e[_++]=t:t<2048?(e[_++]=t>>6|192,e[_++]=63&t|128):55296===(64512&t)&&56320===(64512&(i=x[_0xe681("0x113")](g+1)))?(t=65536+((1023&t)<<10)+(1023&i),++g,e[_++]=t>>18|240,e[_++]=t>>12&63|128,e[_++]=t>>6&63|128,e[_++]=63&t|128):(e[_++]=t>>12|224,e[_++]=t>>6&63|128,e[_++]=63&t|128);return _-n}},function(x,e){function _(x,e){if(!(x instanceof e))throw new TypeError(_0xe681("0x77"))}_0xe681("0x3d"),Object.defineProperty(e,_0xe681("0x94"),{value:!0});var t="function"==typeof Symbol&&_0xe681("0x79")==typeof Symbol[_0xe681("0x7a")]?function(x){return typeof x}:function(x){return x&&_0xe681("0x32")==typeof Symbol&&x[_0xe681("0x7b")]===Symbol&&x!==Symbol[_0xe681("0x20")]?"symbol":typeof x},i=function(){function x(x,e){for(var _=0;_<e[_0xe681("0x25")];_++){var t=e[_];t.enumerable=t[_0xe681("0x7c")]||!1,t[_0xe681("0xc8")]=!0,"value"in t&&(t[_0xe681("0x7e")]=!0),Object[_0xe681("0x22")](x,t[_0xe681("0x7f")],t)}}return function(e,_,t){return _&&x(e[_0xe681("0x20")],_),t&&x(e,t),e}}(),n=function(){function x(e){if(_(this,x),this[_0xe681("0x115")]=0,this[_0xe681("0x116")]=!1,this.lastSelectStore=[],this[_0xe681("0x117")]=null,this[_0xe681("0x118")]=[],this[_0xe681("0x119")]=0,this[_0xe681("0x11a")]=0,this[_0xe681("0x11b")]=0,this[_0xe681("0x11c")]=0,this[_0xe681("0x11d")]=.01,this[_0xe681("0x11e")]=.01,this[_0xe681("0x11f")]=-1,this[_0xe681("0x120")]=function(){function x(x,e){var _=e-x;return Math[_0xe681("0x121")](_)>180&&(_=-1*Math[_0xe681("0x122")](_)*360+_),_}return function(e){var _=this;_0xe681("0x28")==typeof e&&(e={to:e});var t,i=esmap[_0xe681("0x123")][_0xe681("0x86")][_0xe681("0x124")](e,"time",_0xe681("0x125"),.3),n=_.rotateAngle,g=x(n,e.to);return clearInterval(_[_0xe681("0x126")]),_[_0xe681("0x126")]=THREE[_0xe681("0x127")][_0xe681("0x128")](i,function(x){t=n+g*x,t<=0?t=360+t:t>=360&&(t-=360),_[_0xe681("0x129")]=t},function(){e[_0xe681("0x12a")]&&e.callback()}),_._rotateToID}}(),window[_0xe681("0xbd")]){var t=Array[_0xe681("0x66")](window.map[_0xe681("0x12b")][_0xe681("0x12c")][_0xe681("0x1f")]);t.forEach(function(x){x instanceof HTMLCanvasElement&&window.map[_0xe681("0x12b")][_0xe681("0x12c")][_0xe681("0x12d")](x)})}if(this[_0xe681("0x12e")]=new(esmap[_0xe681("0x12f")])(e),em[_0xe681("0x130")][_0xe681("0x131")](this),this.mapView=new esmap.ESMapView(this),this[_0xe681("0x12b")][_0xe681("0x132")]()){this.controls=new THREE.OrbitControls(this[_0xe681("0x12b")][_0xe681("0x133")],this[_0xe681("0x12b")][_0xe681("0x12c")],this),this[_0xe681("0x134")][_0xe681("0x135")]=0,this[_0xe681("0x134")][_0xe681("0x136")]=Math.PI/2.5,this[_0xe681("0xc4")]=new(esmap[_0xe681("0x137")]),this[_0xe681("0x138")]=!1,this[_0xe681("0x139")]=esmap[_0xe681("0x13a")].DEFAULT,this.mapPickHighLight=!0,this[_0xe681("0x13b")]=new(esmap[_0xe681("0x13c")])(this[_0xe681("0x12e")]),this[_0xe681("0x13d")]=new(esmap[_0xe681("0x13e")])(this,this[_0xe681("0x13b")]),this[_0xe681("0x13f")]=new(esmap[_0xe681("0x140")])(this),this[_0xe681("0x141")]=new(esmap[_0xe681("0x140")][_0xe681("0x142")])(!0,this[_0xe681("0x12b")][_0xe681("0x143")],this[_0xe681("0x12e")]),this[_0xe681("0x144")]=new(esmap[_0xe681("0x145")])(!1,this[_0xe681("0x12b")].sceneOrtho,this[_0xe681("0x12e")]),this[_0xe681("0x134")][_0xe681("0x146")](_0xe681("0x147"),this[_0xe681("0x148")].bind(this)),this[_0xe681("0x149")]="3d",this.currentCamera_=this[_0xe681("0x12b")].camera,this[_0xe681("0x14a")]=!1,this[_0xe681("0x14b")]=!1,this[_0xe681("0x14c")]={sceneId:0,fNum:0,x:0,y:0},this[_0xe681("0x14d")]=-1,this.floorCenter_,this[_0xe681("0x14e")]=new(esmap[_0xe681("0x14f")])(this);var i=this;i[_0xe681("0x134")][_0xe681("0x146")](_0xe681("0xc5"),function(x){i[_0xe681("0x150")](_0xe681("0x151"))}),i[_0xe681("0x134")].addEventListener(_0xe681("0x152"),function(){i[_0xe681("0x150")](_0xe681("0x153"))}),this[_0xe681("0x134")][_0xe681("0x154")](this[_0xe681("0x155")][_0xe681("0xa4")](this)),this[_0xe681("0x156")]=[.1,.2,.3,.4,.5,.65,.72,.81,.89,.95,1.02,1.1,1.2,1.3,1.4,1.5,1.6,1.7,1.8,1.95,2.15,2.4,3,5.1],this[_0xe681("0x157")]=12,this[_0xe681("0x158")]=[],this[_0xe681("0x159")]=new(THREE[_0xe681("0x15a")]),this[_0xe681("0x15b")]=new THREE.Clock,this.visibleFloorNums_=[],this[_0xe681("0x15c")]=[],em[_0xe681("0x127")].map=this,this[_0xe681("0x15d")]=new(em[_0xe681("0x15e")]),this._selectModelAlpha=1,this[_0xe681("0x15f")]={},this[_0xe681("0x160")]=[],this[_0xe681("0x161")]=0,this.enableCollide=!0,esmap[_0xe681("0x162")][_0xe681("0x163")]=this,esmap[_0xe681("0x162")][_0xe681("0x164")]={extent:new(esmap[_0xe681("0x165")])(esmap[_0xe681("0x166")][_0xe681("0x167")]),model:new(esmap[_0xe681("0x165")])(esmap.ESLayerType[_0xe681("0x168")]),label:new(esmap[_0xe681("0x165")])(esmap.ESLayerType[_0xe681("0x169")]),facility:new(esmap[_0xe681("0x165")])(esmap[_0xe681("0x166")].MODEL_POI),textMarker:new(esmap[_0xe681("0x165")])(esmap[_0xe681("0x166")][_0xe681("0x16a")]),imageMarker:new(esmap[_0xe681("0x165")])(esmap.ESLayerType[_0xe681("0x16b")]),polygonMarker:esmap[_0xe681("0x16c")]},this[_0xe681("0x16d")](null,null,!0),this.update_(!0)}}return i(x,[{key:_0xe681("0x16e"),value:function(x){if(this[_0xe681("0x161")]++,this[_0xe681("0x16f")]){this[_0xe681("0x170")]=this[_0xe681("0x16f")]!=x;var e=this[_0xe681("0x13d")][_0xe681("0x171")]();e&&this.mapView[_0xe681("0x172")][_0xe681("0x82")](e),this[_0xe681("0x13d")][_0xe681("0x173")]()}this[_0xe681("0x16f")]=x;var _=this,t=this[_0xe681("0x161")];_[_0xe681("0x174")](x,t)}},{key:_0xe681("0x175"),value:function(x){this[_0xe681("0x176")](this.location,x)}},{key:"navigateFromTo",value:function(x,e){var _=this;this[_0xe681("0x13f")].queryNavigation(x,e,function(x){_[_0xe681("0x13d")][_0xe681("0x177")](x)})}},{key:_0xe681("0x178"),value:function(x){for(var e=this[_0xe681("0x13d")][_0xe681("0x179")][_0xe681("0x1f")],_=0;_<e[_0xe681("0x25")];_++)if(e[_][_0xe681("0x17a")]){var t=e[_][_0xe681("0x17a")];if(t.id&&t.id==x)return void this[_0xe681("0x13d")].lineManager[_0xe681("0x82")](e[_])}}},{key:_0xe681("0x17b"),value:function(){var x=this[_0xe681("0x13d")][_0xe681("0x179")];if(x)for(var e=x[_0xe681("0x1f")],_=0;_<e[_0xe681("0x25")];_++)x[_0xe681("0x82")](e[_]),_--}},{key:_0xe681("0x17c"),value:function(x,e){function _(e){x[_0xe681("0x17d")][_0xe681("0x80")](e),e[_0xe681("0x17e")].visible=!0,i[_0xe681("0x17f")](!0),x[_0xe681("0x180")]&&(i[_0xe681("0xc4")][_0xe681("0x181")][_0xe681("0x1e")](e),e.datas_=x[_0xe681("0x180")],e[_0xe681("0x17a")][_0xe681("0x17d")]=x,e[_0xe681("0x182")]=_0xe681("0x183")),void 0!=n[_0xe681("0x184")]&&(e[_0xe681("0x185")].y+=n[_0xe681("0x184")]),n[_0xe681("0x186")]=t[_0xe681("0x124")](n,_0xe681("0x186"),1),e.position.y+=n[_0xe681("0x186")]-6,e[_0xe681("0x187")](i[_0xe681("0x188")])}var t=esmap[_0xe681("0x123")][_0xe681("0x86")],i=this,n=x[_0xe681("0xcc")]||i[_0xe681("0x13b")].navigateStyle_;n.smooth=void 0==n[_0xe681("0x189")]||n[_0xe681("0x189")],n[_0xe681("0x18a")]=n[_0xe681("0x18a")]||null;var g=i[_0xe681("0x18b")](x[_0xe681("0x18c")])[0];i[_0xe681("0x13d")][_0xe681("0x179")][_0xe681("0x80")](x[_0xe681("0x17d")]);var a;a=n[_0xe681("0x189")]?esmap[_0xe681("0x18d")][_0xe681("0x18e")](g,8,n[_0xe681("0x18f")]||1):g;for(var r={},A=0;A<a.length;A++){var C=a[A].fnum,I=null;a[A+1]&&(I=a[A+1][_0xe681("0x190")]),I&&C!=I?(r[C]&&r[C].push(a[A]),r[C+"-"+I]=[a[A],a[A+1]]):r[C]?r[C].push(a[A]):r[C]=[a[A]]}var o=-1;for(var s in r){o+=1;var c=new(esmap[_0xe681("0x191")])(r[s],n,{},o);_(c),e&&e(c)}}},{key:_0xe681("0x192"),value:function(x){function e(x){var e=(x[_0xe681("0x193")],x.material);if(e[_0xe681("0x194")])for(var _=0;_<e.materials[_0xe681("0x25")];_++)e.materials[_][_0xe681("0x195")]=new(THREE[_0xe681("0x196")])(esmap[_0xe681("0x197")][_0xe681("0x198")](t(g)));else e[_0xe681("0x195")]=g,e[_0xe681("0x199")]=!0}var _,t=esmap[_0xe681("0x197")][_0xe681("0x19a")],i=_0xe681("0x40"),n=[][_0xe681("0x19b")](x.name);x[_0xe681("0x40")]||(n=[][_0xe681("0x19b")](x.id),i="ID");var g=x[_0xe681("0x19c")];g[_0xe681("0x25")],_=x.fnum?[][_0xe681("0x19b")](x.fnum):map.floorNums;var a=[];for(var r in _){var A=map[_0xe681("0x19d")](_[r]);if(A){A.layers[_0xe681("0xc3")](function(x){x._type_!=esmap.ESLayerType.MODEL3D&&x[_0xe681("0x19e")]!=esmap[_0xe681("0x166")][_0xe681("0x19f")]||x[_0xe681("0x17d")][_0xe681("0x1f")][_0xe681("0xc3")](function(x){x[_0xe681("0x17a")]&&n[_0xe681("0x1d")](x[_0xe681("0x17a")][i])>-1&&a[_0xe681("0x1e")](x)})});for(var C=0;C<a[_0xe681("0x25")];C++)e(a[C])}}}},{key:_0xe681("0x1a0"),value:function(x){function e(x){var e=[],_=this;_[_0xe681("0x1a1")][_0xe681("0xc3")](function(x){x[_0xe681("0x19e")]!=esmap[_0xe681("0x166")][_0xe681("0x168")]&&x[_0xe681("0x19e")]!=esmap[_0xe681("0x166")][_0xe681("0x1a2")]||(e=e[_0xe681("0x19b")](x[_0xe681("0x17d")][_0xe681("0x1f")]))});for(var t=0;t<e[_0xe681("0x25")];t++){var i=e[t][_0xe681("0x17a")].brothers;if(i)for(var n=0;n<i[_0xe681("0x25")];n++){var g=x(i[n],e[t][_0xe681("0x17a")][_0xe681("0x17d")]);if(g)return}}}var _,t=(esmap[_0xe681("0x197")].colorRGB2Hex,"name"),i=[][_0xe681("0x19b")](x[_0xe681("0x40")]);x.name||(i=[][_0xe681("0x19b")](x.id),t="ID");var n=x[_0xe681("0x19c")],g=this,a=n[_0xe681("0x25")],r=0;g[_0xe681("0x15f")][n]||(g[_0xe681("0x15f")][n]=new THREE.MeshLambertMaterial({color:n})),_=x[_0xe681("0x190")]?[][_0xe681("0x19b")](x.fnum):map[_0xe681("0x1a3")];for(var A in _){var C=map[_0xe681("0x19d")](_[A]);C&&e[_0xe681("0x1a")](C,function(x,e){if(x[t]&&i.indexOf(x[t])>-1){r++;var _;if(a)if(e[_0xe681("0x17e")][_0xe681("0x194")]){for(var A=!1,C=3;C<e[_0xe681("0x17e")][_0xe681("0x194")][_0xe681("0x25")];C++)if(e[_0xe681("0x17e")][_0xe681("0x194")][C][_0xe681("0x19c")]==g[_0xe681("0x15f")][n][_0xe681("0x19c")]){A=C;break}A?_=A:(e[_0xe681("0x17e")][_0xe681("0x194")][_0xe681("0x1e")](g[_0xe681("0x15f")][n]),_=e.material.materials[_0xe681("0x25")]-1)}else{_=3;var I=g[_0xe681("0x15f")][n],o=new(THREE[_0xe681("0x1a4")])([e[_0xe681("0x17e")],e[_0xe681("0x17e")].clone(),map[_0xe681("0x13b")][_0xe681("0x1a5")],I]);e[_0xe681("0x17e")]=o}for(var s=x[_0xe681("0x1a6")][0];s<x[_0xe681("0x1a6")][1];s++)a?(void 0==e[_0xe681("0x193")][_0xe681("0x1a7")][s][_0xe681("0x1a8")]&&(e[_0xe681("0x193")].faces[s][_0xe681("0x1a8")]=e[_0xe681("0x193")][_0xe681("0x1a7")][s][_0xe681("0x1a9")]),e[_0xe681("0x193")][_0xe681("0x1a7")][s].materialIndex=_):_0xe681("0x1a8")in e[_0xe681("0x193")][_0xe681("0x1a7")][s]&&(e[_0xe681("0x193")][_0xe681("0x1a7")][s].materialIndex=e[_0xe681("0x193")].faces[s][_0xe681("0x1a8")]);e.geometry[_0xe681("0x1aa")]=!0}return r==i[_0xe681("0x25")]&&"id"==t})}}},{key:"_analyseRawPoints",value:function(x){function e(x){x[_0xe681("0x25")]>1&&i[_0xe681("0x1e")](x)}function _(x,e){var _=null,t=r.layerLocalHeight;return(x[_0xe681("0x190")]||e)&&(_=r[_0xe681("0x1ab")](x[_0xe681("0x190")]||e)),new THREE.Vector3(-r[_0xe681("0x13d")].sceneX_-x.x,_+Number(x[_0xe681("0x1ac")]||t),x.y-r[_0xe681("0x13d")][_0xe681("0x1ad")])}function t(x,e){for(var t=0;t<x[_0xe681("0x25")];t++)g=x[t],a=_(g,e),a[_0xe681("0x190")]=e||g[_0xe681("0x190")],n[_0xe681("0x1e")](a)}if(!(x[_0xe681("0x25")]<1)){for(var i=[],n=[],g=null,a=null,r=this,A=0;A<x[_0xe681("0x25")];A++){var C=x[A],I=C[_0xe681("0x190")];if(!C.pointList){t(x);break}t(x[A].pointList,I)}return e(n),i}}},{key:_0xe681("0x1ae"),value:function(x){var e=null;return x.fnum&&(e=this.getFloorHeight(x[_0xe681("0x190")])),new THREE.Vector3(-this[_0xe681("0x13d")][_0xe681("0x1af")]-x.x,x.z||e||0,x.y-this[_0xe681("0x13d")].sceneZ_)}},{key:_0xe681("0x1b0"),value:function(x,e){this[_0xe681("0x134")][_0xe681("0x1b1")][_0xe681("0x1b0")](x,e)}},{key:_0xe681("0x1b2"),value:function(x,e){var _=this;x=THREE[_0xe681("0x1b3")][_0xe681("0x1b4")](x,0,_[_0xe681("0x156")][_0xe681("0x25")]-1),e=THREE[_0xe681("0x1b3")][_0xe681("0x1b4")](e,0,_.scaleLevels_[_0xe681("0x25")]-1),_[_0xe681("0x1b5")]=x,_.maxScaleLevel_=e,_[_0xe681("0x134")][_0xe681("0x1b6")](_[_0xe681("0x156")][x],_[_0xe681("0x156")][e]),_[_0xe681("0x1b7")]=_[_0xe681("0x156")][Math.ceil((x+e)/2)]}},{key:_0xe681("0x1b8"),value:function(){this[_0xe681("0x157")]>0&&(this[_0xe681("0x157")]--,this[_0xe681("0x134")][_0xe681("0x1b1")][_0xe681("0x1b0")](this.scaleLevel_))}},{key:_0xe681("0x1b9"),value:function(){this[_0xe681("0x157")]<this[_0xe681("0x1ba")]&&(this[_0xe681("0x157")]++,this[_0xe681("0x134")].constraint[_0xe681("0x1b0")](this[_0xe681("0x157")]))}},{key:_0xe681("0x1bb"),value:function(x){this[_0xe681("0x134")][_0xe681("0x1bc")](x)}},{key:_0xe681("0x1bd"),value:function(x){this.controls[_0xe681("0x1be")](x)}},{key:"setBackgroundColor",value:function(x,e){this[_0xe681("0x12b")][_0xe681("0x1bf")][_0xe681("0x1c0")](x,e)}},{key:"setModelSelectColor",value:function(x,e){var _=void 0==e?1:e;this[_0xe681("0x13b")][_0xe681("0x1a5")][_0xe681("0x19c")][_0xe681("0xfc")](x),this.mapTheme[_0xe681("0x1a5")][_0xe681("0x195")][_0xe681("0xfc")](x),this[_0xe681("0x13b")].selectModelMat.opacity=_,this[_0xe681("0x1c1")]=_}},{key:_0xe681("0x1c2"),value:function(x,e){var _=this;this[_0xe681("0x13b")].data?x():this[_0xe681("0x13f")][_0xe681("0x1c3")](_[_0xe681("0x12e")][_0xe681("0x1c4")]?_[_0xe681("0x12e")][_0xe681("0x1c4")]:e?(_.mapTheme[_0xe681("0x1c5")]=e,e):_[_0xe681("0x13b")][_0xe681("0x1c5")],function(e){_[_0xe681("0x13b")].data=e,_.setBackgroundColor(_[_0xe681("0x13b")][_0xe681("0x1c6")],1),x()})}},{key:_0xe681("0x1c7"),value:function(x,e,_){if(x&&x[_0xe681("0x17d")]&&x[_0xe681("0x17d")][_0xe681("0x193")]){var t=this,i=x[_0xe681("0x17d")][_0xe681("0x193")];if(void 0==e&&(e=!0),x[_0xe681("0x1a6")]||(x.faceRange=[0,i[_0xe681("0x1a7")][_0xe681("0x25")]]),e&&!_&&(t[_0xe681("0x1c8")](),t[_0xe681("0x1c9")][_0xe681("0x1e")](x)),t[_0xe681("0x12e")][_0xe681("0x1ca")]){void 0==e&&(e=!0),x[_0xe681("0x17d")][_0xe681("0x17e")].materials?e&&(x[_0xe681("0x17d")][_0xe681("0x17e")][_0xe681("0x194")][_0xe681("0x1e")](t[_0xe681("0x13b")].selectModelMat),x.o3d_[_0xe681("0x17e")][_0xe681("0x1cb")]=!0):e&&(x[_0xe681("0x17d")][_0xe681("0x17e")]=new(THREE[_0xe681("0x1a4")])([x[_0xe681("0x17d")][_0xe681("0x17e")],x[_0xe681("0x17d")][_0xe681("0x17e")][_0xe681("0x1cc")](),t[_0xe681("0x13b")][_0xe681("0x1a5")]]));for(var n=x[_0xe681("0x1a6")][0];n<x[_0xe681("0x1a6")][1];n++)e?(i[_0xe681("0x1a7")][n][_0xe681("0x1a8")]=i[_0xe681("0x1a7")][n][_0xe681("0x1a9")],i[_0xe681("0x1a7")][n].materialIndex=2):(i[_0xe681("0x1a7")][n][_0xe681("0x1a9")]=i.faces[n][_0xe681("0x1a8")],delete i[_0xe681("0x1a7")][n][_0xe681("0x1a8")]);i[_0xe681("0x1aa")]=!0,!e&&x[_0xe681("0x17d")][_0xe681("0x17e")][_0xe681("0x194")]&&x[_0xe681("0x17d")][_0xe681("0x17e")][_0xe681("0x194")].length<=3&&!x[_0xe681("0x17d")].material[_0xe681("0x1cb")]&&(x[_0xe681("0x17d")][_0xe681("0x17e")]=x[_0xe681("0x17d")][_0xe681("0x17e")][_0xe681("0x194")][0]),clearInterval(t.__selectMaterialAnimId),e&&(t[_0xe681("0x117")]=em[_0xe681("0x127")][_0xe681("0x1cd")](t[_0xe681("0x13b")][_0xe681("0x1a5")],.3,{opacity:.5*t[_0xe681("0x1c1")]},null,function(){t[_0xe681("0x117")]=em[_0xe681("0x127")][_0xe681("0x1cd")](t[_0xe681("0x13b")][_0xe681("0x1a5")],.2,{opacity:t[_0xe681("0x1c1")]})}))}else e&&(x.o3d_[_0xe681("0x1ce")]=x[_0xe681("0x17d")][_0xe681("0x17e")],x[_0xe681("0x17d")][_0xe681("0x17e")]=t[_0xe681("0x13b")][_0xe681("0x1a5")]),!e&&(x.o3d_[_0xe681("0x17e")]=x[_0xe681("0x17d")][_0xe681("0x1ce")])}}},{key:"storeModelSelected",value:function(x,e,_){var t=this,i=(x[_0xe681("0x193")],x[_0xe681("0x17e")]);void 0==e&&(e=!0),e&&!_&&(t[_0xe681("0x1cf")](),t.lastSelectModelStore[_0xe681("0x1e")](x));var n=t.mapTheme.Model3DSelectColor;if(i[_0xe681("0x194")])for(var g=0;g<i.materials.length;g++)e&&(i.materials[g][_0xe681("0x195")]=new(THREE[_0xe681("0x196")])(n)),!e&&(i[_0xe681("0x194")][g][_0xe681("0x195")]=new(THREE[_0xe681("0x196")])(0,0,0));else e&&(i[_0xe681("0x195")]=new(THREE[_0xe681("0x196")])(n)),!e&&(i[_0xe681("0x195")]=new(THREE[_0xe681("0x196")])(0,0,0)),i[_0xe681("0x199")]=!0}},{key:"selectModelNull",value:function(){var x=this;x[_0xe681("0x118")].forEach(function(e){x[_0xe681("0x1d0")](e,!1)}),x.lastSelectModelStore[_0xe681("0x25")]=0}},{key:_0xe681("0x1c8"),value:function(){var x=this;x.lastSelectStore[_0xe681("0xc3")](function(e){x[_0xe681("0x1c7")](e,!1)}),x.lastSelectStore.length=0}},{key:_0xe681("0x1d1"),value:function(x){return!this[_0xe681("0x1d2")]||this[_0xe681("0x1d2")](x)}},{key:_0xe681("0x174"),value:function(x,e){var _=this;esmap[_0xe681("0x1d3")][_0xe681("0x1d4")]={},this[_0xe681("0xc4")]&&(this[_0xe681("0xc4")][_0xe681("0x1d5")]||(this[_0xe681("0xc4")].on(_0xe681("0x1d6"),function(x){if(0!=x.intersects[_0xe681("0x25")]){var e=x[_0xe681("0x1d7")][0][_0xe681("0x24")],t=e[_0xe681("0x17a")],i=t[_0xe681("0x1d8")]||{x:0,y:0,z:0},n=x[_0xe681("0x1d7")][0][_0xe681("0x1d9")];t.x=i.x,t.y=i.y,t.z=i.z,t[_0xe681("0x1da")]={x:-n.x-_[_0xe681("0x13d")][_0xe681("0x1af")],y:n.z+_[_0xe681("0x13d")][_0xe681("0x1ad")]};var g=_[_0xe681("0x13f")][_0xe681("0x1db")].o1||0;g<=1&&!_[_0xe681("0x1dc")]&&(t={}),_[_0xe681("0x150")](_0xe681("0x1dd"),t)}}),this[_0xe681("0xc4")].on(_0xe681("0x1de"),function(x){_[_0xe681("0x1c8")](),_[_0xe681("0x1cf")]();for(var e=0;e<x[_0xe681("0x1d7")].length;e++)if(_[_0xe681("0xc4")][_0xe681("0x1df")]||!e){var t=x[_0xe681("0x1d7")][e],i=t[_0xe681("0x24")],n=null;switch(i[_0xe681("0x17a")][_0xe681("0xce")]){case esmap[_0xe681("0x1e0")][_0xe681("0x168")]:var g=i[_0xe681("0x17a")].brothers;if(g){for(var a=t[_0xe681("0x1e1")],r=0;r<g[_0xe681("0x25")];r++)if(a<g[r][_0xe681("0x1a6")][1]){!g[r][_0xe681("0x17d")]&&(g[r][_0xe681("0x17d")]=i),_[_0xe681("0x12e")][_0xe681("0x1e2")]&&_._canPicked(g[r])&&_[_0xe681("0x1c7")](g[r]),n=g[r];break}}else n=i[_0xe681("0x17a")],_.storeSelect(n);break;case esmap[_0xe681("0x1e0")][_0xe681("0x1e3")]:!e&&_[_0xe681("0x1d0")](i);break;case esmap[_0xe681("0x1e0")].POLYGON_MARKER:}var A=t.point,C=n?n:i[_0xe681("0x17a")];C[_0xe681("0x1da")]={x:-A.x-_[_0xe681("0x13d")][_0xe681("0x1af")],y:A.z+_[_0xe681("0x13d")][_0xe681("0x1ad")]},_[_0xe681("0x150")](_0xe681("0x1e4"),C)}}),this[_0xe681("0xc4")].on(_0xe681("0x1e5"),function(x){_[_0xe681("0x1c8")](),_[_0xe681("0x1cf")](),_.emit(_0xe681("0x1e4"),{target:null,mouse:x,nodeType:esmap.ESNodeType[_0xe681("0x1e6")]})})),this[_0xe681("0xc4")][_0xe681("0xc5")](this,this[_0xe681("0x12b")].container_));var t=this.sl();this.controls[_0xe681("0x1b1")].on("scaleLevelChanged",function(x){_[_0xe681("0x150")]("scaleLevelChanged",{level:x,scale:_[_0xe681("0x156")][x]})}),35988889==t&&this[_0xe681("0x13f")].queryScene(x,function(x,t){_[_0xe681("0x141")][_0xe681("0x1e7")](),_[_0xe681("0x156")]=JSON[_0xe681("0x16")]("["+x[_0xe681("0x1e8")]+"]"),_[_0xe681("0x13d")][_0xe681("0x1e9")](x,_[_0xe681("0x16f")],e);var i=_[_0xe681("0x13d")][_0xe681("0x171")](),n=x.maptime<32503514?x[_0xe681("0x1ea")]:x[_0xe681("0x1ea")]/1e3;if(!((new Date)[_0xe681("0x1eb")]()>1e6*n)){_[_0xe681("0x12b")][_0xe681("0x172")][_0xe681("0x80")](i),_[_0xe681("0x1a3")]=[],_[_0xe681("0x14d")]=-1;var g=_[_0xe681("0x1ec")](_[_0xe681("0x170")]||_.focusFnum_==-1?1:_.focusFnum_);_[_0xe681("0x1ed")]||(_[_0xe681("0x1b5")]=_[_0xe681("0x12e")][_0xe681("0x1ee")],_[_0xe681("0x1ef")]=_[_0xe681("0x12e")][_0xe681("0x1ba")]?_[_0xe681("0x12e")][_0xe681("0x1ba")]>=_[_0xe681("0x156")][_0xe681("0x25")]?_[_0xe681("0x156")][_0xe681("0x25")]-1:_[_0xe681("0x12e")][_0xe681("0x1ba")]:_[_0xe681("0x156")][_0xe681("0x25")]-1,_[_0xe681("0x134")].initScaleLevel(_.scaleLevels_[0],_[_0xe681("0x156")][_[_0xe681("0x1ef")]],!0),g||(_[_0xe681("0x1b7")]=null==_[_0xe681("0x12e")][_0xe681("0x1f0")]?x[_0xe681("0x1f1")]:_[_0xe681("0x12e")][_0xe681("0x1f0")]),_[_0xe681("0x1b7")]>=_[_0xe681("0x156")][_0xe681("0x25")]||_[_0xe681("0x1b7")]<0),_[_0xe681("0x1f2")][_0xe681("0x1f3")](function(x,e){return parseInt(x[_0xe681("0x1f4")])-parseInt(e.floornum)});var a=_[_0xe681("0x1f2")].map(function(x){return x.floornum});_[_0xe681("0x1f5")]=a,(_0xe681("0x1f6")==_[_0xe681("0x12e")][_0xe681("0x1f7")]||0==_.options[_0xe681("0x1f7")])&&(_[_0xe681("0x12e")][_0xe681("0x1f7")]=a[_0xe681("0x2e")]());var r=a[_0xe681("0x2e")](),A=_[_0xe681("0x12e")][_0xe681("0x1f8")];1!=A&&a[_0xe681("0x1d")](A)>-1&&(r[0]=r[_0xe681("0x2b")](A-1,1,r[0])[0]),_[_0xe681("0x1f9")](r),_[_0xe681("0x1fa")]();var C=0;_[_0xe681("0x161")]==t&&_[_0xe681("0x1fb")](C,r,function(){esmap[_0xe681("0x162")][_0xe681("0x1fc")]=!1},t)}},function(x){esmap[_0xe681("0x162")][_0xe681("0x1fc")]=!1},e)}},{key:_0xe681("0x1fb"),value:function(x,e,_,t){var i=this;x==e[_0xe681("0x25")]?(x=0,void(_&&_())):i[_0xe681("0x161")]==t&&(i[_0xe681("0x1a3")][_0xe681("0x1d")](e[x])>-1?(x++,i[_0xe681("0x1fb")](x,e,_,t)):setTimeout(function(){i[_0xe681("0x1fd")](e[x],function(){x++,i[_0xe681("0x1fb")](x,e,_,t)},t,x==e[_0xe681("0x25")]-1)},0))}},{key:_0xe681("0x1f9"),value:function(x){for(var e=this,_={},t=0;t<x[_0xe681("0x25")];t++){var i=x[t];if(i<=e[_0xe681("0x13d")][_0xe681("0x1fe")][_0xe681("0x1ff")][_0xe681("0x25")]){var n=e[_0xe681("0x13d")][_0xe681("0x1fe")][_0xe681("0x1ff")][i-1];if(!n)continue;var g=n[_0xe681("0x200")];g&&!_[g[_0xe681("0x201")](_0xe681("0x202"),"")]&&(_[g.replace(_0xe681("0x202"),"")]=1);var a=n[_0xe681("0x203")];if(a[_0xe681("0x25")]!={})for(var r in a){var A=a[r][_0xe681("0x204")]||a[r][_0xe681("0x205")];void 0!=a[r][_0xe681("0x200")]&&""!=a[r].image&&void 0!=a[r].w&&(A=a[r].image),_[A]||(_[A]=1)}}}e[_0xe681("0x13b")][_0xe681("0x206")](_,32)}},{key:_0xe681("0x207"),value:function(){for(var x=0;x<this[_0xe681("0x160")][_0xe681("0x25")];x++)this[_0xe681("0x108")](_0xe681("0xc6"),this[_0xe681("0x160")][x]);this[_0xe681("0x160")]=[]}},{key:_0xe681("0x1fd"),value:function(x,e,_,t){var i=this;x>i.mapScene[_0xe681("0x1fe")][_0xe681("0x1ff")][_0xe681("0x25")]||(i[_0xe681("0x13d")][_0xe681("0x208")][x]=i[_0xe681("0x13d")][_0xe681("0x1fe")].floors[x-1],i[_0xe681("0x13f")][_0xe681("0x209")](i[_0xe681("0x16f")],x,function(n){function g(){e&&e(x)}i[_0xe681("0x1a3")][_0xe681("0x1e")](x),i[_0xe681("0x13d")][_0xe681("0x20a")](x,n,_),x==i[_0xe681("0x12e")][_0xe681("0x1f8")]&&(i.focusFloorNum={floornum:i[_0xe681("0x12e")][_0xe681("0x1f8")],time:0}),i[_0xe681("0x13d")].forEachFloor(x,function(e){e[_0xe681("0x17a")][_0xe681("0xce")]==esmap.ESNodeType[_0xe681("0x168")]&&(e[_0xe681("0x17e")]=i[_0xe681("0x20b")](e[_0xe681("0x20c")][_0xe681("0x20d")]),e.userData={sid:i[_0xe681("0x16f")],fnum:x},i[_0xe681("0xc4")][_0xe681("0x20e")](e))},g[_0xe681("0xa4")](i),function(){var e=i[_0xe681("0x13d")][_0xe681("0x20f")](x);e[_0xe681("0x210")]=i[_0xe681("0x211")].indexOf(x)>-1,e[_0xe681("0x210")]&&i[_0xe681("0x12e")][_0xe681("0x212")]&&(x==i[_0xe681("0x14d")]?esmap[_0xe681("0x197")][_0xe681("0x213")](x):esmap[_0xe681("0x197")][_0xe681("0x214")](x,i[_0xe681("0x12e")][_0xe681("0x215")]))},t)}))}},{key:_0xe681("0x1fa"),value:function(x){var e=document[_0xe681("0x216")](_0xe681("0x217"));0!=e[_0xe681("0x25")]&&(e[0][_0xe681("0xcc")].display=_0xe681("0x218")),this[_0xe681("0x14b")]=!0,this[_0xe681("0x1ed")]=!1,this._stop_=!1,this[_0xe681("0x119")]=0,this[_0xe681("0x219")]=Math.sqrt(Math[_0xe681("0x10d")]((this[_0xe681("0x21a")]-this[_0xe681("0x21b")])/2,2)+Math[_0xe681("0x10d")]((this.maxY-this[_0xe681("0x21c")])/2,2)),this[_0xe681("0x134")][_0xe681("0x154")](this.validRange_[_0xe681("0xa4")](this)),this[_0xe681("0x21d")]={mode:this[_0xe681("0x12e")][_0xe681("0x21d")],time:0},this[_0xe681("0x21e")]=new(THREE[_0xe681("0x21f")])(new(THREE[_0xe681("0x220")])(1e4,1e4,4,4),new(THREE[_0xe681("0x221")])({color:6724044,visible:!1})),this.mapScene[_0xe681("0x222")][_0xe681("0x80")](this[_0xe681("0x21e")]),this[_0xe681("0x21e")].rotation.x=-Math.PI/2,x||(this[_0xe681("0x188")]=this[_0xe681("0x12e")][_0xe681("0x1f7")]),this.emit(_0xe681("0xc5")),this[_0xe681("0x223")]||(this._haveUpdate=!0,this[_0xe681("0x17f")]())}},{key:_0xe681("0x224"),value:function(x){var e=this;e[_0xe681("0x16d")](),e[_0xe681("0x14e")].updateText(),e[_0xe681("0x150")](_0xe681("0x225"),{})}},{key:_0xe681("0x148"),value:function(){var x=0;"3d"==this[_0xe681("0x149")]&&(x=Math.PI),this[_0xe681("0x150")](_0xe681("0x226")),this.compass_.updateDirection(-this[_0xe681("0x134")][_0xe681("0x227")]()-x),this[_0xe681("0x14b")]=!0}},{key:_0xe681("0x17f"),value:function(x){x?this.updateCountDown_=0:(this.up=requestAnimationFrame(this[_0xe681("0x17f")][_0xe681("0xa4")](this,x)),0==this[_0xe681("0x119")]&&(this[_0xe681("0x119")]=this[_0xe681("0x139")],this[_0xe681("0x14b")]=!0),this[_0xe681("0x11e")]=this[_0xe681("0x15b")].getDelta(),this.emit(_0xe681("0x228"),this.immediateDeltaTime),this[_0xe681("0x119")]--,(this[_0xe681("0x14b")]||this[_0xe681("0x138")])&&(this[_0xe681("0x14b")]=!1,this[_0xe681("0x16d")](null,null,!1),this[_0xe681("0x11a")]=(new Date)[_0xe681("0x1eb")](),this[_0xe681("0x13d")][_0xe681("0x229")](this[_0xe681("0x12b")]),this[_0xe681("0x11a")]=(new Date)[_0xe681("0x1eb")]()-this[_0xe681("0x11a")],this[_0xe681("0x11c")]+=this[_0xe681("0x11a")],this[_0xe681("0x11b")]+=1,5==this.__cnt&&(this[_0xe681("0x11b")]=0,this[_0xe681("0x11c")]=0),this[_0xe681("0x11d")]=this[_0xe681("0x159")].getDelta(),this[_0xe681("0x150")](_0xe681("0xc6"),this[_0xe681("0x11d")]),this[_0xe681("0x12b")][_0xe681("0x22a")](this[_0xe681("0x149")])))}},{key:"forceUpdate",value:function(){this[_0xe681("0x17f")](!0)}},{key:_0xe681("0x16d"),value:function(x,e,_){if(void 0==_&&(_=!0),void 0==x){var t=this[_0xe681("0x12b")][_0xe681("0x22b")](_);if(!t)return;x=t.w,e=t.h}this[_0xe681("0x12b")][_0xe681("0x22c")](x,e),this[_0xe681("0x141")][_0xe681("0x22d")](x,e),this[_0xe681("0x144")][_0xe681("0x22d")](x,e),_&&(this[_0xe681("0x14b")]=!0)}},{key:_0xe681("0x155"),value:function(x,e){return!0}},{key:_0xe681("0x1ec"),value:function(x,e){var _,i=this[_0xe681("0x12e")][_0xe681("0x22e")],n=this[_0xe681("0x13d")][_0xe681("0x22f")][_0xe681("0x230")](),g=this[_0xe681("0x13d")].mapSceneData[_0xe681("0x1ff")][x-1][_0xe681("0x231")],a=.75*n.x+g,r=i?new(THREE[_0xe681("0x232")])(-(this[_0xe681("0x13d")][_0xe681("0x1af")]+i.x),g,i.y-this[_0xe681("0x13d")][_0xe681("0x1ad")]):new(THREE[_0xe681("0x232")])(0,g,0);
if(_=e?new THREE.Vector3(e.x,a,e.z):new(THREE[_0xe681("0x232")])(n.x,a,-n.x),this[_0xe681("0x12b")].camera[_0xe681("0x185")][_0xe681("0x233")](_),this[_0xe681("0x234")]=r,this[_0xe681("0x134")][_0xe681("0x235")][_0xe681("0x233")](r),this[_0xe681("0x12e")].defaultControlsPose){var A=this[_0xe681("0x12e")][_0xe681("0x236")],C=0;switch(_0xe681("0xa")==typeof A?_0xe681("0xa"):t(A)){case _0xe681("0x53"):switch(A){case"n":C=Math.PI;break;case"s":C=0;break;case"w":C=-Math.PI/2;break;case"e":C=Math.PI/2;break;case"ne":C=.75*Math.PI;break;case"nw":C=1.25*Math.PI;break;case"se":C=Math.PI/4;break;case"sw":C=-Math.PI/4;break;default:C=0}this[_0xe681("0x12e")][_0xe681("0x21d")]==esmap[_0xe681("0x237")][_0xe681("0x238")]&&(C+=Math.PI),this[_0xe681("0x134")].update({forceTheta:C});break;case"number":this.controls.update({forceTheta:A*THREE[_0xe681("0x1b3")][_0xe681("0x239")]});break;case _0xe681("0x24"):var I=this[_0xe681("0x12e")][_0xe681("0x236")][_0xe681("0x235")][_0xe681("0x23a")](","),o=this[_0xe681("0x12e")][_0xe681("0x236")][_0xe681("0x185")][_0xe681("0x23a")](","),s=new(THREE[_0xe681("0x232")])(parseFloat(I[0]),parseFloat(I[1]),parseFloat(I[2])),c=new(THREE[_0xe681("0x232")])(parseFloat(o[0]),parseFloat(o[1]),parseFloat(o[2]));return this[_0xe681("0x134")][_0xe681("0x235")].copy(s),this.controls[_0xe681("0x24")][_0xe681("0x185")][_0xe681("0x233")](c),this.controls[_0xe681("0xc6")](),!0}}if(this[_0xe681("0x12e")][_0xe681("0x23b")]){var x=this.options[_0xe681("0x23b")]*Math.PI/180;this[_0xe681("0x134")][_0xe681("0xc6")]({forceTheta:x})}return null!=this[_0xe681("0x12e")][_0xe681("0x23c")]&&(this[_0xe681("0x23d")]=this[_0xe681("0x12e")][_0xe681("0x23c")]),this[_0xe681("0x119")]=0,!1}},{key:_0xe681("0x23e"),value:function(x,e){}},{key:"sl",value:function(){for(var x=this[_0xe681("0x12b")][_0xe681("0x143")].children[0],e=x[_0xe681("0x17e")][_0xe681("0xbd")][_0xe681("0x200")]?x[_0xe681("0x17e")][_0xe681("0xbd")][_0xe681("0x200")][_0xe681("0x7")]:"",_=e[_0xe681("0x25")],t=0,i=0;i<_;i++)t+=e[i].charCodeAt();return parseInt(t,16)}},{key:_0xe681("0x23f"),value:function(x,e){var _=this;_[_0xe681("0x14d")]=x,e=e||{};var t=this[_0xe681("0x13d")][_0xe681("0x1fe")][_0xe681("0x1ff")];for(var i in t){var n=t[i],g=this[_0xe681("0x13d")][_0xe681("0x240")][n[_0xe681("0x1f4")]];if(n[_0xe681("0x1f4")]==x){var a=new THREE.Vector3;a.y=n[_0xe681("0x231")],esmap.ESMapUtil[_0xe681("0x213")](x);var r=this.mapView[_0xe681("0x133")].position[_0xe681("0x1cc")](),A=this.controls[_0xe681("0x235")].clone(),C=r.y-A.y;a.x=A.x,a.z=A.z;var I=a[_0xe681("0x1cc")]()[_0xe681("0x241")](A),o=a.y+C-r.y;_[_0xe681("0x12e")][_0xe681("0x212")]&&_[_0xe681("0x23e")](n[_0xe681("0x1f4")],!0),e.notMove||(clearInterval(this[_0xe681("0x11f")]),this[_0xe681("0x11f")]=em[_0xe681("0x127")][_0xe681("0x242")](void 0==e[_0xe681("0x243")]?this[_0xe681("0x12e")][_0xe681("0x244")]?this[_0xe681("0x12e")][_0xe681("0x245")]:0:e.time,function(x){_[_0xe681("0x12b")].camera[_0xe681("0x185")].y=r.y+o*x,_[_0xe681("0x134")][_0xe681("0x235")].y=A.y+I.y*x,_[_0xe681("0x134")][_0xe681("0xc6")]()},null,function(){_[_0xe681("0x12b")][_0xe681("0x246")](),e[_0xe681("0x12a")]&&e[_0xe681("0x12a")](x)}),this.floorCenter_=a)}else g&&g[_0xe681("0x210")]&&this[_0xe681("0x12e")].focusAlphaMode&&esmap[_0xe681("0x197")][_0xe681("0x214")](n[_0xe681("0x1f4")],this[_0xe681("0x12e")][_0xe681("0x215")]),_[_0xe681("0x23e")](n[_0xe681("0x1f4")],!1)}}},{key:_0xe681("0x247"),value:function(x){this[_0xe681("0x12b")][_0xe681("0x172")][_0xe681("0x80")](x[_0xe681("0x17d")]),this[_0xe681("0xc4")][_0xe681("0x248")](x[_0xe681("0x17d")])}},{key:_0xe681("0x249"),value:function(x){x.dispose()}},{key:"getModelByName",value:function(x){return this.mapScene[_0xe681("0x171")]()[_0xe681("0x24a")](x)}},{key:_0xe681("0x24b"),value:function(){function x(e){if(null!==e){e[_0xe681("0x17a")]&&e.datas_[_0xe681("0x17d")]&&(e[_0xe681("0x17a")][_0xe681("0x17d")]=void 0,e.datas_=void 0);for(var _=0;_<e[_0xe681("0x1f")][_0xe681("0x25")];_++)x(e.children[_]);e[_0xe681("0x193")]&&(e[_0xe681("0x193")][_0xe681("0x24c")](),e[_0xe681("0x193")]=void 0),e.material&&(e[_0xe681("0x17e")].materials?e[_0xe681("0x17e")].materials.forEach(function(x){x[_0xe681("0xbd")]&&(x[_0xe681("0xbd")][_0xe681("0x24c")](),x[_0xe681("0xbd")]=void 0),x[_0xe681("0x24c")](),x=void 0}):(e[_0xe681("0x17e")][_0xe681("0x24c")](),e[_0xe681("0x17e")]=void 0))}e=void 0}var e=this;cancelAnimationFrame(e.up);var _=this[_0xe681("0x12b")].scene,t=this.mapView.renderer;for(var i in e[_0xe681("0x13d")][_0xe681("0x24d")][_0xe681("0x24e")]){var n=e.mapScene.loadqueue[_0xe681("0x24e")][i];x(n)}x(_),t[_0xe681("0x24f")]=void 0,window[_0xe681("0xbd")]=void 0,window[_0xe681("0x250")]=void 0,THREE[_0xe681("0x251")][_0xe681("0x173")](),window.em=void 0,window[_0xe681("0x252")]=void 0}},{key:_0xe681("0x1ab"),value:function(x){return this[_0xe681("0x13d")][_0xe681("0x20f")](x).position.y}},{key:_0xe681("0x253"),value:function(x,e,_){var t=this[_0xe681("0x254")]||this.mapView.camera,i=null;i=new(THREE[_0xe681("0x232")])(x/this[_0xe681("0x12b")].w_*2-1,1-e/this[_0xe681("0x12b")].h_*2,.5);var n=new(THREE[_0xe681("0x255")]);n[_0xe681("0x256")](i,t),this.plane_[_0xe681("0x185")].y=_,this[_0xe681("0x21e")].updateMatrixWorld(),this[_0xe681("0x257")]();var g=n[_0xe681("0x258")](this[_0xe681("0x21e")]);if(g[_0xe681("0x25")]>0){var a=g[0][_0xe681("0x1d9")];return new(esmap[_0xe681("0x259")])(-a.x-this[_0xe681("0x13d")][_0xe681("0x1af")],a.z+this[_0xe681("0x13d")][_0xe681("0x1ad")],_)}return null}},{key:"changeFocusFloor",value:function(x){var e=this;e[_0xe681("0x188")]=[x],e[_0xe681("0x25a")]=x}},{key:_0xe681("0x25b"),value:function(x,e,_){var t=this[_0xe681("0x254")],i=new(THREE[_0xe681("0x232")])(-x-this.mapScene[_0xe681("0x1af")],_,e-this[_0xe681("0x13d")][_0xe681("0x1ad")]);i[_0xe681("0x25c")](t);var n=this[_0xe681("0x12b")].w_2_,g=this.mapView[_0xe681("0x25d")];return new(esmap[_0xe681("0x25e")])(i.x*n+n,g-i.y*g)}},{key:_0xe681("0x25f"),value:function(x){var e=new THREE.Vector3;e[_0xe681("0x260")](x[_0xe681("0x261")]),e[_0xe681("0x25c")](this[_0xe681("0x254")]);var _=e.x*this[_0xe681("0x12b")][_0xe681("0x262")],t=e.y*this[_0xe681("0x12b")][_0xe681("0x25d")];return{x:_+this[_0xe681("0x12b")][_0xe681("0x262")],y:-t+this.mapView[_0xe681("0x25d")]}}},{key:_0xe681("0x263"),value:function(x){var e=new esmap.ESPopInfoWindow(this,x);return this[_0xe681("0x264")][_0xe681("0x1e")](e),e}},{key:_0xe681("0x265"),value:function(x){x&&x[_0xe681("0xac")]()}},{key:_0xe681("0x266"),value:function(){for(var x=0,e=this.popMarkers_[_0xe681("0x25")];x<e;x++)this.popMarkers_[x][_0xe681("0xac")]();this[_0xe681("0x264")]=[]}},{key:_0xe681("0x267"),set:function(x){x[_0xe681("0x21")](_0xe681("0x19c"))&&(this.mapTheme[_0xe681("0x268")][_0xe681("0x19c")]=x[_0xe681("0x19c")]),x[_0xe681("0x21")](_0xe681("0x269"))&&(this[_0xe681("0x13b")][_0xe681("0x268")][_0xe681("0x269")]=x[_0xe681("0x269")]),x[_0xe681("0x21")](_0xe681("0x26a"))&&(this[_0xe681("0x13b")][_0xe681("0x268")].alpha=x[_0xe681("0x26a")]),x[_0xe681("0x21")](_0xe681("0x26a"))&&(this.mapTheme[_0xe681("0x268")].alpha=x[_0xe681("0x26a")]),x[_0xe681("0x21")]("dash")&&x[_0xe681("0x26b")][_0xe681("0x21")](_0xe681("0x26c"))&&(this[_0xe681("0x13b")][_0xe681("0x268")][_0xe681("0x26b")][_0xe681("0x26c")]=x[_0xe681("0x26b")][_0xe681("0x26c")]),x[_0xe681("0x21")](_0xe681("0x26b"))&&x[_0xe681("0x26b")].hasOwnProperty(_0xe681("0x26d"))&&(this.mapTheme[_0xe681("0x268")][_0xe681("0x26b")][_0xe681("0x26d")]=x.dash.gap)},get:function(){return this[_0xe681("0x13b")][_0xe681("0x268")]}},{key:_0xe681("0x21b"),get:function(){return this[_0xe681("0x13d")][_0xe681("0x26e")]}},{key:_0xe681("0x21a"),get:function(){return this[_0xe681("0x13d")][_0xe681("0x26f")]}},{key:_0xe681("0x21c"),get:function(){return this[_0xe681("0x13d")][_0xe681("0x270")]}},{key:_0xe681("0x271"),get:function(){return this[_0xe681("0x13d")].maxY_}},{key:_0xe681("0x272"),set:function(x){this[_0xe681("0x12e")][_0xe681("0x272")]=x}},{key:"mapThemeSrc",set:function(x){this[_0xe681("0x12e")][_0xe681("0x273")]=x}},{key:"scaleLevel",get:function(){return this.controls.constraint.getCurrentScaleLevel()},set:function(x){this[_0xe681("0x157")]=Math[_0xe681("0x102")](x),this[_0xe681("0x134")].setScaleLevelValue(this[_0xe681("0x156")][this.scaleLevel_])}},{key:"minScaleLevel",get:function(){return this[_0xe681("0x1b5")]},set:function(x){this[_0xe681("0x1b2")](x,this.maxScaleLevel_)}},{key:_0xe681("0x1ba"),get:function(){return this.maxScaleLevel_},set:function(x){this[_0xe681("0x1b2")](this[_0xe681("0x1b5")],x)}},{key:_0xe681("0x274"),get:function(){return this.controls[_0xe681("0x1b1")][_0xe681("0x275")]()},set:function(x){this[_0xe681("0x134")][_0xe681("0x1b1")][_0xe681("0x276")](x)}},{key:_0xe681("0x277"),get:function(){return this.compass_.options_[_0xe681("0x277")]},set:function(x){var e=this[_0xe681("0x144")][_0xe681("0x278")][_0xe681("0x277")];this[_0xe681("0x144")].spriteBg_[_0xe681("0x185")].x=this.compass_[_0xe681("0x279")][_0xe681("0x185")].x-e[0]+x[0],this[_0xe681("0x144")][_0xe681("0x279")][_0xe681("0x185")].y=this[_0xe681("0x144")][_0xe681("0x279")][_0xe681("0x185")].y+e[1]-x[1],this[_0xe681("0x144")][_0xe681("0x27a")].position.x=this[_0xe681("0x144")][_0xe681("0x27a")][_0xe681("0x185")].x-e[0]+x[0],this[_0xe681("0x144")][_0xe681("0x27a")].position.y=this[_0xe681("0x144")][_0xe681("0x27a")].position.y+e[1]-x[1],this[_0xe681("0x144")][_0xe681("0x278")].compassOffset=x}},{key:_0xe681("0x27b"),get:function(){return this[_0xe681("0x144")][_0xe681("0x279")][_0xe681("0x27c")].x},set:function(x){this[_0xe681("0x144")][_0xe681("0x279")].scale.x=x,this[_0xe681("0x144")].spriteBg_[_0xe681("0x27c")].y=x,this[_0xe681("0x144")].spritePt_[_0xe681("0x27c")].x=x,this[_0xe681("0x144")][_0xe681("0x27a")][_0xe681("0x27c")].y=x}},{key:_0xe681("0x27d"),get:function(){return{x:-this.mapScene[_0xe681("0x1af")],y:this.mapScene[_0xe681("0x1ad")]}}},{key:_0xe681("0x136"),get:function(){return this[_0xe681("0x134")][_0xe681("0x136")]*THREE[_0xe681("0x1b3")].RAD2DEG},set:function(x){this[_0xe681("0x134")][_0xe681("0x136")]=x*THREE[_0xe681("0x1b3")][_0xe681("0x239")],this[_0xe681("0x134")][_0xe681("0xc6")]()}},{key:_0xe681("0x27e"),get:function(){return new(THREE[_0xe681("0x232")])(this[_0xe681("0x13d")][_0xe681("0x1af")],0,this[_0xe681("0x13d")][_0xe681("0x1ad")])}},{key:_0xe681("0x21d"),set:function(x){function e(e){var _=esmap[_0xe681("0x197")][_0xe681("0x27f")](a,e[_0xe681("0x134")]);r[_0xe681("0x280")]=1,r.left=-_[_0xe681("0x281")],r[_0xe681("0x281")]=_[_0xe681("0x281")],r[_0xe681("0x282")]=_[_0xe681("0x282")],r[_0xe681("0x283")]=-_[_0xe681("0x282")],r.updateProjectionMatrix(),x&&(e[_0xe681("0x149")]=x),e[_0xe681("0x116")]=!1}function _(e){var _=r[_0xe681("0x280")],t=e[_0xe681("0x134")].target[_0xe681("0x284")](a[_0xe681("0x185")]),i=a[_0xe681("0x185")].clone()[_0xe681("0x241")](e[_0xe681("0x134")].target)[_0xe681("0x285")]();a[_0xe681("0x185")][_0xe681("0x233")](e[_0xe681("0x134")][_0xe681("0x235")][_0xe681("0x1cc")]()[_0xe681("0x80")](i[_0xe681("0x286")](t/_))),a[_0xe681("0x287")](),e.viewMode_=x}if(!this[_0xe681("0x116")]){var i=null,n=null;if(_0xe681("0x24")==(_0xe681("0xa")==typeof x?_0xe681("0xa"):t(x))&&(i=x[_0xe681("0x243")],n=x[_0xe681("0x12a")],x=x.mode),x!=this[_0xe681("0x149")]){var g=this;g[_0xe681("0x116")]=!0;var a=this[_0xe681("0x12b")][_0xe681("0x133")],r=this.mapView.cameraTop;"3d"==this[_0xe681("0x149")]?(g.__lastPhi=g[_0xe681("0x134")][_0xe681("0x1b1")][_0xe681("0x288")](),em[_0xe681("0x127")].fadeTo(void 0!=i?i:g[_0xe681("0x12e")][_0xe681("0x289")]?g.options[_0xe681("0x28a")]:0,function(x){g.controls.constraint[_0xe681("0xc6")]({forcePhi:g[_0xe681("0x115")]-g[_0xe681("0x115")]*x}),g[_0xe681("0x14b")]=!0},null,function(){g[_0xe681("0x134")][_0xe681("0x1b1")][_0xe681("0x24")]=g[_0xe681("0x12b")][_0xe681("0x28b")],g[_0xe681("0x134")][_0xe681("0x135")]=0,g.controls[_0xe681("0x136")]=0,g[_0xe681("0x254")]=g.mapView[_0xe681("0x28b")],g[_0xe681("0x134")][_0xe681("0xc6")]({forceTheta:g.controls[_0xe681("0x1b1")][_0xe681("0x227")]()+Math.PI,notChangeCompass:!0}),e(g),n&&n(g[_0xe681("0x149")]),g[_0xe681("0x150")](_0xe681("0x28c"),g[_0xe681("0x149")])})):(g[_0xe681("0x134")].constraint[_0xe681("0x24")]=g[_0xe681("0x12b")][_0xe681("0x133")],g[_0xe681("0x134")][_0xe681("0x135")]=0,g.controls[_0xe681("0x136")]=Math.PI/2.5,g[_0xe681("0x254")]=g[_0xe681("0x12b")][_0xe681("0x133")],g.controls[_0xe681("0xc6")]({forceTheta:g.controls[_0xe681("0x1b1")].getAzimuthalAngle()+Math.PI,notChangeCompass:!0}),em.Tween[_0xe681("0x242")](void 0!=i?i:g[_0xe681("0x12e")][_0xe681("0x289")]?g.options[_0xe681("0x28a")]:0,function(x){g[_0xe681("0x134")][_0xe681("0x1b1")][_0xe681("0xc6")]({forcePhi:g[_0xe681("0x115")]*x}),g[_0xe681("0x14b")]=!0},null,function(){n&&n(g[_0xe681("0x149")]),g.__viewModeAnimating=!1}),_(g),g.emit("viewModeChanged",g.viewMode_)),this[_0xe681("0x119")]=0}}},get:function(){return this[_0xe681("0x149")]}},{key:_0xe681("0x1c5"),set:function(x){var e=this;if(x!=this[_0xe681("0x13b")][_0xe681("0x28d")]){if(e[_0xe681("0x13b")][_0xe681("0x28d")]=x,!e.sceneId_)return;e.mapTheme[_0xe681("0x28e")]=x,e[_0xe681("0x13f")][_0xe681("0x1c3")](x,function(x){e[_0xe681("0x13b")][_0xe681("0x96")]=x,e.setBackgroundColor(e[_0xe681("0x13b")][_0xe681("0x1c6")],1);var _=e[_0xe681("0x13b")][_0xe681("0x28f")];e[_0xe681("0x13d")].o3dScene_[_0xe681("0x290")](function(x){if(x[_0xe681("0x17a")]){var t=_[x[_0xe681("0x17a")][_0xe681("0x291")]];switch(x[_0xe681("0x17a")][_0xe681("0xce")]){case esmap.ESNodeType.LINE:if(!t)return;x[_0xe681("0x17e")][_0xe681("0x19c")]=new(THREE[_0xe681("0x196")])(t.strokeColor_),x[_0xe681("0x17e")][_0xe681("0x292")]=t.strokewidth;break;case esmap[_0xe681("0x1e0")][_0xe681("0x293")]:var i=e[_0xe681("0x13b")][_0xe681("0x294")],n=e[_0xe681("0x13b")].floorOpacity_;if(x[_0xe681("0xc7")][_0xe681("0xc7")]&&x[_0xe681("0xc7")].parent.datas_ instanceof esmap[_0xe681("0x295")]){var g=x[_0xe681("0xc7")][_0xe681("0xc7")][_0xe681("0x17a")].data_[_0xe681("0x1f4")],a=e[_0xe681("0x13b")][_0xe681("0x296")][g]||e[_0xe681("0x13b")][_0xe681("0x296")][0];if(a)if(i=a[_0xe681("0x19c")],n=a[_0xe681("0x297")],a[_0xe681("0x200")]){var r=x.material,A=new(THREE[_0xe681("0x1a4")])([r,r[_0xe681("0x1cc")]()]),C=A[_0xe681("0x194")][0],I=A[_0xe681("0x194")][1];I[_0xe681("0x19c")]=new(THREE[_0xe681("0x196")])(i),I[_0xe681("0x297")]=n;var o=e.mapTheme[_0xe681("0x28f")][a.image[_0xe681("0x201")](_0xe681("0x202"),"")][_0xe681("0x1ce")][_0xe681("0xbd")];o[_0xe681("0x298")]=o[_0xe681("0x299")]=THREE[_0xe681("0x29a")];var s=(e.maxX-e[_0xe681("0x21b")])/(e[_0xe681("0x271")]-e[_0xe681("0x21c")]),c=a[_0xe681("0x29b")][_0xe681("0x23a")](",");o[_0xe681("0x29c")].set(c[0]*s,c[1]),C[_0xe681("0xbd")]=o,C.color.set(16777215),o.needsUpdate=!0,C[_0xe681("0x199")]=!0,x[_0xe681("0x17e")]=A}else x[_0xe681("0x17e")][_0xe681("0x194")]?(x[_0xe681("0x17e")][_0xe681("0x194")][0][_0xe681("0xbd")][_0xe681("0x24c")](),x.material[_0xe681("0x194")][0].map=void 0,x[_0xe681("0x17e")]=x.material[_0xe681("0x194")][1],x[_0xe681("0x17e")][_0xe681("0x19c")]=new THREE.Color(i),x[_0xe681("0x17e")][_0xe681("0x297")]=n):(x[_0xe681("0x17e")][_0xe681("0x19c")]=new THREE.Color(i),x[_0xe681("0x17e")][_0xe681("0x297")]=n)}break;case esmap[_0xe681("0x1e0")][_0xe681("0x168")]:var f=x[_0xe681("0x17a")].brothers[0].data_[_0xe681("0x29d")];if(t=_[f],!t)return;var l=t[_0xe681("0x19c")];if(_0xe681("0x53")==typeof l&&(l=esmap[_0xe681("0x197")][_0xe681("0x198")](t[_0xe681("0x19c")])),x[_0xe681("0x17e")][_0xe681("0x19c")])x[_0xe681("0x17e")].color=new(THREE[_0xe681("0x196")])(l),x[_0xe681("0x17e")][_0xe681("0x297")]=t[_0xe681("0x26a")]||1,x[_0xe681("0x17e")][_0xe681("0x199")]=!0;else for(var u=x[_0xe681("0x17e")][_0xe681("0x194")],h=0;h<u.length-1;h++)u[h].color=new(THREE[_0xe681("0x196")])(l),u[h][_0xe681("0x297")]=t[_0xe681("0x26a")]||1,u[h][_0xe681("0x199")]=!0;break;case esmap[_0xe681("0x1e0")][_0xe681("0x29e")]:if(!t)return;x[_0xe681("0x17e")].map=t[_0xe681("0x1ce")][_0xe681("0xbd")],x.material.opacity=t[_0xe681("0x26a")]||1;break;case esmap.ESNodeType[_0xe681("0x29f")]:x[_0xe681("0x2a0")](e[_0xe681("0x13b")][_0xe681("0x2a1")]);break;case esmap[_0xe681("0x1e0")][_0xe681("0x16a")]:x[_0xe681("0x2a0")](x[_0xe681("0x17a")][_0xe681("0x2a2")]);break;case esmap[_0xe681("0x1e0")][_0xe681("0x2a3")]:_0xe681("0x2a4")==x[_0xe681("0x19e")]&&x[_0xe681("0x17a")][_0xe681("0x2a0")]()}}}),e[_0xe681("0x25a")]=e.focusFnum_})}},get:function(){return this.mapTheme[_0xe681("0x28d")]}},{key:_0xe681("0x1f2"),get:function(){return this[_0xe681("0x13d")][_0xe681("0x1fe")][_0xe681("0x1ff")]}},{key:_0xe681("0x25a"),set:function(x){function e(t){t==x&&(i[_0xe681("0x108")](_0xe681("0x2a5"),e),i[_0xe681("0x23f")](x,_),i[_0xe681("0x150")](_0xe681("0x2a6"),x))}if(!this[_0xe681("0x2a7")]){var _=null,i=this;_0xe681("0x24")==(_0xe681("0xa")==typeof x?_0xe681("0xa"):t(x))&&(_=x,x=void 0==x[_0xe681("0x1f4")]?x[_0xe681("0x190")]:x[_0xe681("0x1f4")]),this[_0xe681("0x13d")][_0xe681("0x240")][x]?(this[_0xe681("0x23f")](x,_),this.emit("focusFloorNumChanged",x)):this.on(_0xe681("0x2a5"),e)}},get:function(){return this[_0xe681("0x14d")]}},{key:_0xe681("0x188"),get:function(){return this[_0xe681("0x211")]},set:function(x){if(x[_0xe681("0x25")]>0){this[_0xe681("0x211")]=x,this.mapView[_0xe681("0x172")][_0xe681("0x1f")][_0xe681("0xc3")](function(e){e[_0xe681("0x17a")]instanceof esmap[_0xe681("0x2a8")]&&x[_0xe681("0x1d")](e[_0xe681("0x17a")][_0xe681("0x1f4")])>-1&&(e.datas_.visible=!0)});for(var e in this[_0xe681("0x13d")][_0xe681("0x240")]){var _=this[_0xe681("0x13d")][_0xe681("0x240")][e];_[_0xe681("0x210")]=x.indexOf(_[_0xe681("0x20c")].floornum)>=0}var t=!1;x[_0xe681("0x25")]==this[_0xe681("0x1a3")].length&&(t=!0),this[_0xe681("0x150")]("visibleFloorNumsChanged",x,t)}}},{key:"backgroundColor",set:function(x){this[_0xe681("0x12b")][_0xe681("0x1bf")][_0xe681("0x1c0")](parseInt(x))}},{key:_0xe681("0x2a9"),set:function(x){x!=this[_0xe681("0x144")][_0xe681("0x210")]&&(this[_0xe681("0x144")][_0xe681("0x210")]=x,x&&this[_0xe681("0x144")][_0xe681("0x2aa")](this[_0xe681("0x134")].getAzimuthalAngle()))},get:function(){return this[_0xe681("0x144")][_0xe681("0x210")]}},{key:_0xe681("0x2ab"),set:function(x){x!=this.scaler_[_0xe681("0x210")]&&(this[_0xe681("0x14e")][_0xe681("0x210")]=x)},get:function(){return this[_0xe681("0x14e")][_0xe681("0x210")]}},{key:_0xe681("0x2ac"),get:function(){return this[_0xe681("0x14c")]}},{key:"shadowEnabled",get:function(){return this[_0xe681("0x12b")][_0xe681("0x2ad")][_0xe681("0x2ae")]},set:function(x){this[_0xe681("0x12b")].shadowLight.castShadow=x}},{key:_0xe681("0x2af"),get:function(){return this.mapView[_0xe681("0x2b0")]},set:function(x){this[_0xe681("0x12b")][_0xe681("0x2b0")]=x}},{key:_0xe681("0x2b1"),get:function(){return this[_0xe681("0x12b")][_0xe681("0x2b2")]},set:function(x){this[_0xe681("0x12b")][_0xe681("0x2b2")]=x}},{key:_0xe681("0x2b3"),get:function(){return this[_0xe681("0x13f")][_0xe681("0x1db")][_0xe681("0x2b4")][_0xe681("0x23a")](",")||null}},{key:_0xe681("0x1a3"),get:function(){return this[_0xe681("0x158")]},set:function(x){this[_0xe681("0x158")]=x}},{key:_0xe681("0x2b5"),get:function(){return this[_0xe681("0x13f")][_0xe681("0x1db")].name}},{key:_0xe681("0x2b6"),get:function(){return this[_0xe681("0x13f")][_0xe681("0x1db")][_0xe681("0x2b7")]}},{key:_0xe681("0x23d"),get:function(){return this[_0xe681("0x134")][_0xe681("0x1b1")][_0xe681("0x288")]()*THREE[_0xe681("0x1b3")][_0xe681("0x2b8")]},set:function(x){x=x*Math.PI/180,x<this[_0xe681("0x134")][_0xe681("0x135")]&&(x=this[_0xe681("0x134")].minPolarAngle),x>this[_0xe681("0x134")].maxPolarAngle&&(x=this.controls[_0xe681("0x136")]),this[_0xe681("0x134")][_0xe681("0xc6")]({forcePhi:x}),this.updateCountDown_=0}},{key:_0xe681("0x129"),get:function(){var x=this.controls[_0xe681("0x1b1")][_0xe681("0x227")]();return("3d"==this[_0xe681("0x21d")]?Math.PI-x:-x)*THREE[_0xe681("0x1b3")][_0xe681("0x2b8")]},set:function(x){x=-x*THREE[_0xe681("0x1b3")][_0xe681("0x239")],this[_0xe681("0x134")][_0xe681("0xc6")]({forceTheta:x+("3d"==this.viewMode?Math.PI:0)}),this[_0xe681("0x119")]=0}},{key:_0xe681("0x2b9"),get:function(){return this[_0xe681("0x13f")][_0xe681("0x1db")].navs}},{key:_0xe681("0x2ba"),get:function(){return this[_0xe681("0x12b")].w_}},{key:"height",get:function(){return this[_0xe681("0x12b")].h_}}]),x}();n.tempFlipX_=!0,n.IsMapLoading=!1,e[_0xe681("0x9d")]=n},function(x,e){function _(x,e){if(!(x instanceof e))throw new TypeError(_0xe681("0x77"))}Object[_0xe681("0x22")](e,_0xe681("0x94"),{value:!0});var t=function(){function x(x,e){for(var _=0;_<e.length;_++){var t=e[_];t.enumerable=t[_0xe681("0x7c")]||!1,t.configurable=!0,_0xe681("0x7d")in t&&(t.writable=!0),Object.defineProperty(x,t[_0xe681("0x7f")],t)}}return function(e,_,t){return _&&x(e[_0xe681("0x20")],_),t&&x(e,t),e}}(),i=function(){function x(e,t){_(this,x),this[_0xe681("0x278")]=new esmap.ESControlOptions(t),_0xe681("0x2bb")==this[_0xe681("0x278")][_0xe681("0x26c")]?(this.w_=42,this.h_=42,this[_0xe681("0x2bc")]=10):(this.w_=32,this.h_=32,this[_0xe681("0x2bc")]=8),this.x_=this[_0xe681("0x278")].offset.x,this.y_=this.options_[_0xe681("0x1ac")].y,this[_0xe681("0x2bd")]=!!this[_0xe681("0x278")][_0xe681("0x2bd")]&&this[_0xe681("0x278")][_0xe681("0x2bd")],this.showBtnCount=this.options_[_0xe681("0x2be")]?this.options_[_0xe681("0x2be")]:5,this.expandLayers_=!!this[_0xe681("0x278")][_0xe681("0x2bf")]&&this[_0xe681("0x278")].expand,this.positon_=this[_0xe681("0x278")][_0xe681("0x185")]?this[_0xe681("0x278")].position:2,this[_0xe681("0x2c0")]=null,this[_0xe681("0x2c1")]=!1,this[_0xe681("0x2c2")]=_0xe681("0x2c3"),this[_0xe681("0x2c4")]=_0xe681("0x2c5"),this[_0xe681("0x2c6")]=_0xe681("0x2c7"),this[_0xe681("0x2c8")]=_0xe681("0x2c9"),this.$=function(x){return document[_0xe681("0x2ca")](x)},this[_0xe681("0x2cb")],this[_0xe681("0x2cc")],this[_0xe681("0x2cd")],this[_0xe681("0x2ce")],this.map=e,this[_0xe681("0x2cf")]=10,this[_0xe681("0x2d0")]=20,this[_0xe681("0x2d1")]=10,this[_0xe681("0x2d2")]=10,this[_0xe681("0x2d3")]=this[_0xe681("0x278")][_0xe681("0x2d4")],e&&this[_0xe681("0x132")](e)}return t(x,[{key:_0xe681("0x132"),value:function(x){var e=this.$(_0xe681("0x2d5"));e&&x.mapView[_0xe681("0x12c")][_0xe681("0x12d")](e);var _=this.$(".arrow-btns-wrap");_&&x[_0xe681("0x12b")][_0xe681("0x12c")][_0xe681("0x12d")](_);var t=document[_0xe681("0x2")](_0xe681("0x2d6"));t[_0xe681("0xd2")](_0xe681("0x2d7"),_0xe681("0x2d8")),t[_0xe681("0xcc")].width=this.w_+"px",t[_0xe681("0xcc")][_0xe681("0x184")]=this.h_+"px",t[_0xe681("0xcc")][_0xe681("0x185")]=_0xe681("0x2d9"),t[_0xe681("0xcc")][_0xe681("0x2da")]=_0xe681("0x2db"),t[_0xe681("0xcc")][_0xe681("0x2dc")]=this[_0xe681("0x2c6")],t.style.borderRadius=this[_0xe681("0x2c8")],t[_0xe681("0xcc")][_0xe681("0x2dd")]=_0xe681("0x27d"),t[_0xe681("0xcc")][_0xe681("0x2de")]=_0xe681("0x2df"),t[_0xe681("0xcc")][_0xe681("0x2e0")]="0.8em",t[_0xe681("0xcc")][_0xe681("0x2e1")]=_0xe681("0x2e2"),t.style[_0xe681("0x2e3")]=_0xe681("0x2e4"),t[_0xe681("0xcc")][_0xe681("0x2e5")]=this.h_+"px",t[_0xe681("0xcc")][_0xe681("0x19c")]=this[_0xe681("0x2c2")],t[_0xe681("0x2e6")]="F1";var i=document[_0xe681("0x2")](_0xe681("0x2d6"));i.setAttribute(_0xe681("0x2d7"),_0xe681("0x2e7")),i[_0xe681("0xcc")][_0xe681("0x185")]=_0xe681("0x2d9"),i[_0xe681("0xcc")].backgroundColor=_0xe681("0x2db"),i[_0xe681("0xcc")].boxShadow=this[_0xe681("0x2c6")],i.style.borderRadius=this[_0xe681("0x2c8")],i[_0xe681("0x2e8")]=this[_0xe681("0x2e9")].bind(this),i.addEventListener(_0xe681("0x2ea"),this[_0xe681("0x2e9")][_0xe681("0xa4")](this),!1),i[_0xe681("0x146")]("touchstart",this[_0xe681("0x2eb")][_0xe681("0xa4")](this),!1),i[_0xe681("0x146")](_0xe681("0x2ec"),this[_0xe681("0x2ec")][_0xe681("0xa4")](this),!1),i[_0xe681("0x146")](_0xe681("0x2ed"),this[_0xe681("0x2ed")][_0xe681("0xa4")](this),!1);var n=x[_0xe681("0x12b")][_0xe681("0x12c")][_0xe681("0x0")](_0xe681("0x2ee"))[0];if(x[_0xe681("0x12b")][_0xe681("0x12c")][_0xe681("0x2ef")](t,n),x.mapView[_0xe681("0x12c")][_0xe681("0x2ef")](i,n),this[_0xe681("0x2f0")](x[_0xe681("0x1f2")],x[_0xe681("0x25a")]),i[_0xe681("0xcc")][_0xe681("0x2f1")]=_0xe681("0x218"),this.showBtnCount<x.listFloors.length){var g=document[_0xe681("0x2")](_0xe681("0x2d6"));g[_0xe681("0xd2")](_0xe681("0x2d7"),_0xe681("0x2f2")),g[_0xe681("0xcc")][_0xe681("0x184")]=_0xe681("0x2f3"),g.style.display=_0xe681("0x218"),g[_0xe681("0xcc")][_0xe681("0x2f4")]=_0xe681("0x2f5")+this[_0xe681("0x2d3")]+_0xe681("0x2f6"),g[_0xe681("0xcc")][_0xe681("0x2de")]=_0xe681("0x2df"),g[_0xe681("0x2f7")]=this.up[_0xe681("0xa4")](this);var a=document[_0xe681("0x2")](_0xe681("0x2d6"));a[_0xe681("0xd2")](_0xe681("0x2d7"),"arrow-floors-wrap arrow-down-btn"),a[_0xe681("0xcc")][_0xe681("0x184")]=_0xe681("0x2f3"),a[_0xe681("0xcc")][_0xe681("0x2f4")]=_0xe681("0x2f5")+this[_0xe681("0x2d3")]+_0xe681("0x2f6"),a[_0xe681("0xcc")][_0xe681("0x2de")]=_0xe681("0x2df"),a.style[_0xe681("0x2f1")]="none",a[_0xe681("0x2f7")]=this[_0xe681("0x2f8")][_0xe681("0xa4")](this),i[_0xe681("0x9")](g,i),i.appendChild(a),i[_0xe681("0xcc")][_0xe681("0x2f9")]="hidden",i[_0xe681("0xcc")][_0xe681("0x184")]=this[_0xe681("0x2be")]*(this.h_+1)+"px",this[_0xe681("0x2fa")](x.listFloors[_0xe681("0x25")]-x[_0xe681("0x25a")])}else this[_0xe681("0x2be")]=x[_0xe681("0x1f2")][_0xe681("0x25")],i.style.height=this[_0xe681("0x2be")]*(this.h_+1)+"px";this[_0xe681("0x2fb")](t),this[_0xe681("0x2fb")](i,this[_0xe681("0x2be")]*(this.h_+2)),this[_0xe681("0x2fc")]();var r=this;t[_0xe681("0x146")](_0xe681("0x2fd"),function(e){var _=r.$(_0xe681("0x2fe"));_0xe681("0x218")==_[_0xe681("0xcc")].display?(_[_0xe681("0xcc")][_0xe681("0x2f1")]=_0xe681("0x2ff"),r.changeScrollState(x[_0xe681("0x1f2")][_0xe681("0x25")]-x[_0xe681("0x25a")]),r[_0xe681("0x300")]=!0):(_[_0xe681("0xcc")][_0xe681("0x2f1")]=_0xe681("0x218"),r.expandLayers_=!1)},!1)}},{key:"controlPositionListener",value:function(){if(this[_0xe681("0xbd")]){var x=this;this[_0xe681("0xbd")].on(_0xe681("0xc6"),function(){var e=x.$(_0xe681("0x2d5")),_=x.$(_0xe681("0x2fe"));x[_0xe681("0x2fb")](e),x.setPosition_(_,x[_0xe681("0x2be")]*(x.h_+2))})}}},{key:_0xe681("0x2fb"),value:function(x,e){switch(this[_0xe681("0x301")]){case 1:e?x[_0xe681("0xcc")][_0xe681("0x282")]=this[_0xe681("0x2d0")]+this.h_+this[_0xe681("0x2d2")]+this.y_+"px":x[_0xe681("0xcc")][_0xe681("0x282")]=this[_0xe681("0x2d0")]+this.y_+"px",x[_0xe681("0xcc")][_0xe681("0x302")]=this[_0xe681("0x2cf")]+this.x_+"px";break;case 2:var _=this.map[_0xe681("0x12b")][_0xe681("0x12c")][_0xe681("0x186")]-this.h_-60;e&&(_=_-e-this[_0xe681("0x2d2")]),x[_0xe681("0xcc")][_0xe681("0x282")]=_-this.y_+"px",x.style[_0xe681("0x302")]=this[_0xe681("0x2cf")]+this.x_+"px";break;case 3:e?x[_0xe681("0xcc")][_0xe681("0x282")]=this[_0xe681("0x2d0")]+this.h_+this[_0xe681("0x2d2")]+this.y_+"px":x[_0xe681("0xcc")][_0xe681("0x282")]=this[_0xe681("0x2d0")]+this.y_+"px",x[_0xe681("0xcc")][_0xe681("0x281")]=this[_0xe681("0x2d1")]+this.x_+"px";break;case 4:var t=this[_0xe681("0xbd")][_0xe681("0x12b")][_0xe681("0x12c")][_0xe681("0x186")]-this.h_-60;e&&(t=t-e-this.defaultPadding_),x[_0xe681("0xcc")][_0xe681("0x282")]=t-this.y_+"px",x.style.right=this[_0xe681("0x2d1")]+this.x_+"px"}}},{key:_0xe681("0x2f0"),value:function(x,e){this.$(".arrow-btns-wrap")[_0xe681("0x303")]="";for(var _=x[_0xe681("0x25")]-1;_>=0;_--){var t=x[_];this.$(_0xe681("0x2fe"))[_0xe681("0x9")](this[_0xe681("0x304")](t.floornum,t[_0xe681("0x2b6")].toUpperCase(),e==t.floornum)),_>0&&this.$(_0xe681("0x2fe"))[_0xe681("0x9")](this[_0xe681("0x305")]())}this.inited=!0}},{key:"onChange",value:function(x){this.change_=x}},{key:"up",value:function(){var x=document[_0xe681("0x306")](".arrow-btns-wrap > label")[_0xe681("0x25")],e=x-parseInt(this.$(_0xe681("0x307"))[_0xe681("0x308")].floornum);if(0!=e){var _=e-1;this[_0xe681("0x309")](document.querySelectorAll(_0xe681("0x30a"))[_]),this[_0xe681("0x2fa")](_)}}},{key:_0xe681("0x2f8"),value:function(){var x=document[_0xe681("0x306")](_0xe681("0x30a")).length,e=x-parseInt(this.$(_0xe681("0x307"))[_0xe681("0x308")].floornum);if(e+1!=x){var _=e+1;this[_0xe681("0x309")](document.querySelectorAll(_0xe681("0x30a"))[_]),this[_0xe681("0x2fa")](_)}}},{key:_0xe681("0x2eb"),value:function(x){x[_0xe681("0x30b")](),this[_0xe681("0x2cb")]=x[_0xe681("0x30c")][0].pageX,this[_0xe681("0x2cc")]=x[_0xe681("0x30c")][0].pageY}},{key:"touchmove",value:function(x){x[_0xe681("0x30b")](),this[_0xe681("0x2cd")]=x[_0xe681("0x30c")][0].pageX,this[_0xe681("0x2ce")]=x.touches[0][_0xe681("0x30d")]}},{key:"touchend",value:function(x){var x=x||window[_0xe681("0x30e")],e=null,_=this.$(".arrow-btns-wrap")[_0xe681("0x30f")];x[_0xe681("0x310")].length>0&&(this[_0xe681("0x2cd")]=x[_0xe681("0x310")][0][_0xe681("0x311")],this[_0xe681("0x2ce")]=x[_0xe681("0x310")][0][_0xe681("0x30d")]),e=x.target;var t=this[_0xe681("0x2ce")]-this[_0xe681("0x2cc")];t>0&&t>this.h_?_-=t:t<0&&-t>this.h_?_+=-t:0==t&&e&&this.triggerClick(e),this.$(_0xe681("0x2fe"))[_0xe681("0x30f")]=_,this.touchPointX=this[_0xe681("0x2cd")],this[_0xe681("0x2cc")]=this[_0xe681("0x2ce")]}},{key:_0xe681("0x2e9"),value:function(x){x=x||window[_0xe681("0x30e")];var e=this.$(_0xe681("0x2fe")).scrollTop;x[_0xe681("0x312")]?(x[_0xe681("0x312")]>0&&(e-=x[_0xe681("0x312")]),x[_0xe681("0x312")]<0&&(e+=-x.wheelDelta)):x[_0xe681("0x313")]&&(x[_0xe681("0x313")]>0&&(e-=x[_0xe681("0x313")]),x[_0xe681("0x313")]<0&&(e+=-x[_0xe681("0x313")])),this.$(".arrow-btns-wrap")[_0xe681("0x30f")]=e}},{key:_0xe681("0x304"),value:function(x,e,_){var t=this,i=document[_0xe681("0x2")](_0xe681("0x314"));if(i[_0xe681("0xd2")](_0xe681("0x2d7"),_0xe681("0x315")),i[_0xe681("0xd2")]("data-floornum",x),i[_0xe681("0xcc")][_0xe681("0x2f1")]="inline-block",i[_0xe681("0xcc")][_0xe681("0x2dd")]=_0xe681("0x27d"),i[_0xe681("0xcc")][_0xe681("0x2ba")]=t.w_+"px",i[_0xe681("0xcc")][_0xe681("0x184")]=t.h_+"px",i[_0xe681("0xcc")][_0xe681("0x2e5")]=this.h_+"px",i.style[_0xe681("0x2de")]="pointer",i[_0xe681("0xcc")][_0xe681("0x2e0")]=_0xe681("0x316"),i[_0xe681("0xcc")][_0xe681("0x2e1")]=_0xe681("0x2e2"),i[_0xe681("0xcc")].margin=0,i[_0xe681("0xcc")][_0xe681("0x19c")]=t[_0xe681("0x2c4")],_){this.addClass(i,_0xe681("0x317"));var n=t.$(_0xe681("0x2d5"));n.innerText=e}i[_0xe681("0x2f7")]=function(){var x=t.$(_0xe681("0x307"));if(x[_0xe681("0x2e6")]!==this.innerText){t[_0xe681("0x318")](x,_0xe681("0x317")),t.addClass(this,_0xe681("0x317"));var e=t.$(_0xe681("0x2d5"));e[_0xe681("0x2e6")]=this.innerText,t[_0xe681("0x319")]()}};var g=document[_0xe681("0x2")](_0xe681("0x31a"));return g[_0xe681("0x2e6")]=e,i.appendChild(g),i}},{key:_0xe681("0x305"),value:function(){var x=document[_0xe681("0x2")]("hr");return x[_0xe681("0xcc")][_0xe681("0x184")]=_0xe681("0x31b"),x[_0xe681("0xcc")].border=_0xe681("0x218"),x[_0xe681("0xcc")].borderTop=_0xe681("0x31c"),x[_0xe681("0xcc")][_0xe681("0x2ba")]="60%",x[_0xe681("0xcc")][_0xe681("0x31d")]=_0xe681("0x31e"),x[_0xe681("0xcc")].filter=_0xe681("0x31f"),x}},{key:_0xe681("0x319"),value:function(x){var e=[],x=this.$(".arrow-btns-wrap>label[class*='active']");x&&e[_0xe681("0x1e")](parseInt(x[_0xe681("0x308")][_0xe681("0x1f4")])),this[_0xe681("0x320")](e),null!==this[_0xe681("0x2c0")]&&this[_0xe681("0x2c0")](e,this[_0xe681("0x2bd")])}},{key:_0xe681("0x321"),value:function(x,e){e&&(this.allLayer=e);var _=this[_0xe681("0xbd")][_0xe681("0x1a3")][_0xe681("0x25")]-x;this.triggerClick(document.querySelectorAll(_0xe681("0x30a"))[_]),this[_0xe681("0x2fa")](_)}},{key:_0xe681("0x320"),value:function(x){this.map&&(this[_0xe681("0x2bd")]?this.map[_0xe681("0x188")]=this[_0xe681("0xbd")][_0xe681("0x1a3")]:this[_0xe681("0xbd")][_0xe681("0x188")]=x,this[_0xe681("0xbd")][_0xe681("0x25a")]=x[0])}},{key:"changeActiveStyle_",value:function(x){for(var e=this.$(_0xe681("0x2d5")),_=document.querySelectorAll(_0xe681("0x30a")),t=0,i=_[_0xe681("0x25")];t<i;t++){var n=_[t];if(t==x){e[_0xe681("0xcc")][_0xe681("0x19c")]=this[_0xe681("0x2c2")],e[_0xe681("0x2e6")]=n[_0xe681("0x2e6")];break}}}},{key:_0xe681("0x2fa"),value:function(x){this.changeActiveStyle_(x);var e=this.$(_0xe681("0x30a")).clientHeight,_=document[_0xe681("0x306")](_0xe681("0x30a"))[_0xe681("0x25")];
if(_-this[_0xe681("0x2be")]>x){var t=x*(e+2),i=this.$(_0xe681("0x2fe"))[_0xe681("0x30f")];t<i&&(this.$(_0xe681("0x2fe"))[_0xe681("0x30f")]=t)}if(this[_0xe681("0x2be")]<=x){var t=(x-this[_0xe681("0x2be")]+1)*(e+2),i=this.$(".arrow-btns-wrap")[_0xe681("0x30f")];t>i&&(this.$(_0xe681("0x2fe"))[_0xe681("0x30f")]=t)}}},{key:_0xe681("0x322"),value:function(){var x=this.$(_0xe681("0x307"))[_0xe681("0x308")][_0xe681("0x1f4")]-1,e=document.querySelectorAll(_0xe681("0x30a"))[_0xe681("0x25")],_=this.$(_0xe681("0x323")),t=this.$(_0xe681("0x324"));_&&(0==x?(this.addClass(_,_0xe681("0x325")),_.style[_0xe681("0x326")]=_0xe681("0x2f5")+this[_0xe681("0x2d3")]+"arrow4.png)"):(this[_0xe681("0x318")](_,_0xe681("0x325")),_[_0xe681("0xcc")].backgroundImage="url("+this[_0xe681("0x2d3")]+_0xe681("0x327"))),t&&(x==e-1?(this[_0xe681("0x328")](t,"disabled"),t[_0xe681("0xcc")].backgroundImage=_0xe681("0x2f5")+this[_0xe681("0x2d3")]+_0xe681("0x329")):(this[_0xe681("0x318")](t,"disabled"),t[_0xe681("0xcc")][_0xe681("0x326")]=_0xe681("0x2f5")+this[_0xe681("0x2d3")]+"arrow1.png)"))}},{key:_0xe681("0x328"),value:function(x,e){var _=x[_0xe681("0x32a")],t=""!=_?" ":"",i=_+t+e;x[_0xe681("0x32a")]=i}},{key:"removeClass",value:function(x,e){var _=" "+x[_0xe681("0x32a")]+" ";_=_[_0xe681("0x201")](/(\s+)/gi," ");var t=_[_0xe681("0x201")](" "+e+" "," ");t=t.replace(/(^\s+)|(\s+$)/g,""),x[_0xe681("0x32a")]=t}},{key:_0xe681("0x32b"),value:function(x,e){var _=x[_0xe681("0x32a")],t=_[_0xe681("0x23a")](/\s+/),i=0;for(i in t)if(t[i]==e)return!0;return!1}},{key:_0xe681("0x309"),value:function(x){if(x)if(document[_0xe681("0x1f6")])x[_0xe681("0x2fd")]();else{var e=document[_0xe681("0x32c")](_0xe681("0x32d"));e[_0xe681("0x32e")](_0xe681("0x2fd"),!0,!0),x.dispatchEvent(e)}}}]),x}();e[_0xe681("0x9d")]=i},function(x,e){THREE.CSS3DObject=function(x){THREE[_0xe681("0x32f")][_0xe681("0x1a")](this),this[_0xe681("0xca")]=x,this[_0xe681("0xca")][_0xe681("0xcc")][_0xe681("0x185")]=_0xe681("0x2d9"),this.addEventListener(_0xe681("0x330"),function(){null!==this[_0xe681("0xca")][_0xe681("0x331")]&&this[_0xe681("0xca")][_0xe681("0x331")].removeChild(this.element)})},THREE[_0xe681("0x332")][_0xe681("0x20")]=Object[_0xe681("0xda")](THREE[_0xe681("0x32f")][_0xe681("0x20")]),THREE[_0xe681("0x332")].prototype.constructor=THREE.CSS3DObject,THREE.CSS3DSprite=function(x){THREE[_0xe681("0x332")][_0xe681("0x1a")](this,x)},THREE.CSS3DSprite[_0xe681("0x20")]=Object[_0xe681("0xda")](THREE[_0xe681("0x332")][_0xe681("0x20")]),THREE.CSS3DSprite[_0xe681("0x20")].constructor=THREE[_0xe681("0x333")],THREE[_0xe681("0x334")]=function(){function x(x){return Math.abs(x)<1e-10?0:x}function e(e){var _=e[_0xe681("0x335")];return _0xe681("0x336")+x(_[0])+","+x(-_[1])+","+x(_[2])+","+x(_[3])+","+x(_[4])+","+x(-_[5])+","+x(_[6])+","+x(_[7])+","+x(_[8])+","+x(-_[9])+","+x(_[10])+","+x(_[11])+","+x(_[12])+","+x(-_[13])+","+x(_[14])+","+x(_[15])+")"}function _(e,_){var t=e[_0xe681("0x335")],i=_0xe681("0x336")+x(t[0])+","+x(t[1])+","+x(t[2])+","+x(t[3])+","+x(-t[4])+","+x(-t[5])+","+x(-t[6])+","+x(-t[7])+","+x(t[8])+","+x(t[9])+","+x(t[10])+","+x(t[11])+","+x(t[12])+","+x(t[13])+","+x(t[14])+","+x(t[15])+")";return o?"translate(-50%,-50%)translate("+g+"px,"+a+"px)"+_+i:_0xe681("0x337")+i}function t(x,e,i){if(x instanceof THREE[_0xe681("0x332")]){var n;x instanceof THREE[_0xe681("0x333")]?(r[_0xe681("0x233")](e[_0xe681("0x338")]),r[_0xe681("0x339")](),r[_0xe681("0x33a")](x[_0xe681("0x261")]),r[_0xe681("0x27c")](x[_0xe681("0x27c")]),r[_0xe681("0x335")][3]=0,r.elements[7]=0,r[_0xe681("0x335")][11]=0,r[_0xe681("0x335")][15]=1,n=_(r,i)):n=_(x[_0xe681("0x261")],i);var g=x.element,a=A.objects[_0xe681("0xb1")](x);if(void 0===a||a!==n){g[_0xe681("0xcc")].WebkitTransform=n,g.style[_0xe681("0x33b")]=n;var C={style:n};A[_0xe681("0x33c")].set(x,C)}g[_0xe681("0x331")]!==I&&I[_0xe681("0x9")](g)}for(var o=0,s=x[_0xe681("0x1f")][_0xe681("0x25")];o<s;o++)t(x[_0xe681("0x1f")][o],e,i)}var i,n,g,a,r=new(THREE[_0xe681("0x33d")]),A={camera:{fov:0,style:""},objects:new WeakMap},C=document.createElement(_0xe681("0x2d6"));C.style[_0xe681("0x2f9")]=_0xe681("0x33e"),this.domElement=C;var I=document[_0xe681("0x2")](_0xe681("0x2d6"));I[_0xe681("0xcc")][_0xe681("0x33f")]=_0xe681("0x340"),I[_0xe681("0xcc")][_0xe681("0x341")]=_0xe681("0x340"),C[_0xe681("0x9")](I);var o=/Trident/i[_0xe681("0x78")](navigator[_0xe681("0x342")]);this[_0xe681("0x230")]=function(){return{width:i,height:n}},this.setSize=function(x,e){i=x,n=e,g=i/2,a=n/2,C[_0xe681("0xcc")][_0xe681("0x2ba")]=x+"px",C[_0xe681("0xcc")][_0xe681("0x184")]=e+"px",I[_0xe681("0xcc")].width=x+"px",I.style[_0xe681("0x184")]=e+"px"},this[_0xe681("0x22a")]=function(_,i){var n=i[_0xe681("0x343")][_0xe681("0x335")][5]*a;if(A[_0xe681("0x133")][_0xe681("0x344")]!==n&&(i.isPerspectiveCamera&&(C.style[_0xe681("0x345")]=n+"px",C.style[_0xe681("0x346")]=n+"px"),A[_0xe681("0x133")][_0xe681("0x344")]=n),_[_0xe681("0x347")](),null===i.parent&&i[_0xe681("0x347")](),i[_0xe681("0x338")][_0xe681("0x348")](i[_0xe681("0x261")]),i.isOrthographicCamera)var r=-(i[_0xe681("0x281")]+i.left)/2,s=(i[_0xe681("0x282")]+i[_0xe681("0x283")])/2;var c=i.isOrthographicCamera?_0xe681("0x349")+n+_0xe681("0x34a")+x(r)+_0xe681("0x34b")+x(s)+"px)"+e(i.matrixWorldInverse):_0xe681("0x34c")+n+_0xe681("0x34d")+e(i[_0xe681("0x338")]),f=c+"translate("+g+_0xe681("0x34b")+a+_0xe681("0x34d");A[_0xe681("0x133")][_0xe681("0xcc")]===f||o||(I.style.WebkitTransform=f,I[_0xe681("0xcc")].transform=f,A[_0xe681("0x133")].style=f),t(_,i,c)}}},function(x,e){_0xe681("0x3d"),CanvasRenderingContext2D[_0xe681("0x20")][_0xe681("0x34e")]=function(x,e,_,t,i){return this.beginPath(),this[_0xe681("0x34f")](x+i,e),this.arcTo(x+_,e,x+_,e+t,i),this.arcTo(x+_,e+t,x,e+t,i),this[_0xe681("0x350")](x,e+t,x,e,i),this[_0xe681("0x350")](x,e,x+_,e,i),this[_0xe681("0x351")](),this}},function(x,e){function _(x,e){if(!(x instanceof e))throw new TypeError(_0xe681("0x77"))}Object[_0xe681("0x22")](e,"__esModule",{value:!0});var t=function(){function x(x,e){for(var _=0;_<e[_0xe681("0x25")];_++){var t=e[_];t[_0xe681("0x7c")]=t.enumerable||!1,t[_0xe681("0xc8")]=!0,_0xe681("0x7d")in t&&(t.writable=!0),Object[_0xe681("0x22")](x,t[_0xe681("0x7f")],t)}}return function(e,_,t){return _&&x(e.prototype,_),t&&x(e,t),e}}(),i=function(){function x(e){_(this,x),this[_0xe681("0xbd")]=e;var t=esmap[_0xe681("0x197")][_0xe681("0x352")]();this[_0xe681("0x353")]=!1,this[_0xe681("0x354")]=new THREE.EffectComposer(e[_0xe681("0x12b")][_0xe681("0x1bf")]),this[_0xe681("0x355")]=new(THREE[_0xe681("0x356")])(e[_0xe681("0x12b")][_0xe681("0x1bf")]),this.scale=(t[_0xe681("0x357")],2),this.originSize={width:e[_0xe681("0x12b")].w_,height:e[_0xe681("0x12b")].h_};var i=new(THREE[_0xe681("0x358")])(e[_0xe681("0x12b")].scene,e[_0xe681("0x12b")][_0xe681("0x133")]);this[_0xe681("0x354")][_0xe681("0x359")](i),this.fxaaPass=new THREE.ShaderPass(THREE[_0xe681("0x35a")]),this.composer[_0xe681("0x359")](this[_0xe681("0x35b")]);var n=new(THREE[_0xe681("0x35c")])(THREE[_0xe681("0x35d")]);n[_0xe681("0x35e")]=!0,this.composer[_0xe681("0x359")](n);var g=new(THREE[_0xe681("0x358")])(e[_0xe681("0x12b")][_0xe681("0x172")],e[_0xe681("0x12b")].cameraTop),a=new(THREE[_0xe681("0x35c")])(THREE[_0xe681("0x35d")]);a[_0xe681("0x35e")]=!0,this[_0xe681("0x355")][_0xe681("0x359")](g),this[_0xe681("0x355")][_0xe681("0x359")](a),this[_0xe681("0x35f")](this[_0xe681("0x27c")])}return t(x,[{key:"render",value:function(){this[_0xe681("0xbf")]?this[_0xe681("0x354")][_0xe681("0x22a")](this[_0xe681("0xbd")][_0xe681("0x159")][_0xe681("0x360")]()):this[_0xe681("0xbd")][_0xe681("0x12b")][_0xe681("0x1bf")].render(this[_0xe681("0xbd")].mapView[_0xe681("0x172")],this[_0xe681("0xbd")][_0xe681("0x12b")][_0xe681("0x133")])}},{key:"renderOrtho",value:function(){this.enabled?this[_0xe681("0x355")][_0xe681("0x22a")](this[_0xe681("0xbd")].timer.getDelta()):this[_0xe681("0xbd")].mapView[_0xe681("0x1bf")][_0xe681("0x22a")](this[_0xe681("0xbd")][_0xe681("0x12b")][_0xe681("0x172")],this.map[_0xe681("0x12b")][_0xe681("0x28b")])}},{key:_0xe681("0x35f"),value:function(x){this[_0xe681("0x27c")]=x,this[_0xe681("0x26c")]={width:this.originSize[_0xe681("0x2ba")]*this[_0xe681("0x27c")],height:this[_0xe681("0x361")][_0xe681("0x184")]*this[_0xe681("0x27c")]}}},{key:_0xe681("0x362"),value:function(x,e){this.originSize.width=x,this[_0xe681("0x361")][_0xe681("0x184")]=e,this[_0xe681("0x35f")](this[_0xe681("0x27c")])}},{key:_0xe681("0x26c"),get:function(){return{width:this[_0xe681("0x354")][_0xe681("0x363")][_0xe681("0x2ba")],height:this[_0xe681("0x354")][_0xe681("0x363")][_0xe681("0x184")]}},set:function(x){this.composer.setSize(x[_0xe681("0x2ba")],x[_0xe681("0x184")]),this.composerOrtho[_0xe681("0x364")](x[_0xe681("0x2ba")],x[_0xe681("0x184")]),this[_0xe681("0x35b")][_0xe681("0x365")].resolution[_0xe681("0x7d")][_0xe681("0xfc")](1/x[_0xe681("0x2ba")],1/x[_0xe681("0x184")])}},{key:"enabled",get:function(){return this[_0xe681("0x353")]},set:function(x){this[_0xe681("0x353")]=x}}]),x}();e[_0xe681("0x9d")]=i},function(x,e){function _(x,e){if(!(x instanceof e))throw new TypeError(_0xe681("0x77"))}_0xe681("0x3d"),Object[_0xe681("0x22")](e,_0xe681("0x94"),{value:!0});var t=function x(e,t){_(this,x),this.x=e?e:0,this.y=t?t:0};e.default=t},function(x,e){function _(x,e){if(!(x instanceof e))throw new TypeError(_0xe681("0x77"))}_0xe681("0x3d"),Object[_0xe681("0x22")](e,_0xe681("0x94"),{value:!0});var t=function x(e){_(this,x);var t=esmap.ESMapUtil[_0xe681("0x352")]()[_0xe681("0x357")];Object[_0xe681("0x366")](this,e),this[_0xe681("0x26c")]=e&&e[_0xe681("0x26c")]?e[_0xe681("0x26c")]:t?esmap[_0xe681("0x367")][_0xe681("0x368")]:esmap[_0xe681("0x367")][_0xe681("0x369")],this.position=e&&e[_0xe681("0x185")]?e[_0xe681("0x185")]:null,this[_0xe681("0x2bd")]=e&&e[_0xe681("0x2bd")]?e[_0xe681("0x2bd")]:null,this[_0xe681("0x1ac")]=e&&e.offset?e.offset:t?new(esmap[_0xe681("0x36a")])(0,0):new(esmap[_0xe681("0x36a")])(-6,-12),this[_0xe681("0x2d4")]=e&&e[_0xe681("0x2d4")]?e[_0xe681("0x2d4")]:"image/wedgets/"};e[_0xe681("0x9d")]=t},function(x,e){function _(x,e){if(!(x instanceof e))throw new TypeError(_0xe681("0x77"))}function t(x,e){if(!x)throw new ReferenceError(_0xe681("0x36b"));return!e||_0xe681("0x24")!=typeof e&&_0xe681("0x32")!=typeof e?x:e}function i(x,e){if("function"!=typeof e&&null!==e)throw new TypeError(_0xe681("0x36c")+typeof e);x[_0xe681("0x20")]=Object[_0xe681("0xda")](e&&e[_0xe681("0x20")],{constructor:{value:x,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object[_0xe681("0x36d")]?Object[_0xe681("0x36d")](x,e):x[_0xe681("0x36e")]=e)}Object[_0xe681("0x22")](e,_0xe681("0x94"),{value:!0});var n=function(){function x(x,e){for(var _=0;_<e[_0xe681("0x25")];_++){var t=e[_];t.enumerable=t.enumerable||!1,t[_0xe681("0xc8")]=!0,_0xe681("0x7d")in t&&(t.writable=!0),Object[_0xe681("0x22")](x,t[_0xe681("0x7f")],t)}}return function(e,_,t){return _&&x(e.prototype,_),t&&x(e,t),e}}(),g=function(x){function e(x){var i;return _(this,e),i=t(this,(e.__proto__||Object[_0xe681("0x36f")](e))[_0xe681("0x1a")](this,esmap.ESNodeType.MODEL3D,{},new(THREE[_0xe681("0x32f")]))),i[_0xe681("0x370")]="es3dmarker",i.opts_=x||{},i.map_=esmap[_0xe681("0x162")][_0xe681("0x163")],i[_0xe681("0x371")](),i}return i(e,x),n(e,[{key:_0xe681("0x371"),value:function(){var x=this,e=esmap.ESMap[_0xe681("0x163")],_=(e[_0xe681("0x13d")],esmap[_0xe681("0x123")][_0xe681("0x86")]);em[_0xe681("0x130")][_0xe681("0x131")](x),x.x_=-e[_0xe681("0x13d")][_0xe681("0x1af")]-_[_0xe681("0x372")](x[_0xe681("0x373")],"x",e[_0xe681("0x27d")].x),x.y_=_[_0xe681("0x372")](x[_0xe681("0x373")],"y",e.center.y)-e[_0xe681("0x13d")][_0xe681("0x1ad")],x[_0xe681("0x374")]={x:0,y:THREE[_0xe681("0x1b3")][_0xe681("0x375")](_.getValue(x.opts_,_0xe681("0x376"),0)),z:0},x[_0xe681("0x377")]=_[_0xe681("0x372")](x[_0xe681("0x373")],_0xe681("0x40"),null),x[_0xe681("0x378")]=_[_0xe681("0x372")](x[_0xe681("0x373")],"id",esmap.ESUtil.id++),x[_0xe681("0x379")]=_[_0xe681("0x372")](x[_0xe681("0x373")],"height",0),x[_0xe681("0x37a")]=_[_0xe681("0x372")](x[_0xe681("0x373")],_0xe681("0x37b"),!0),x[_0xe681("0x37c")]=_[_0xe681("0x372")](x[_0xe681("0x373")],_0xe681("0x12a"),null);var t=_[_0xe681("0x372")](x[_0xe681("0x373")],"size",1);x.url_=_[_0xe681("0x372")](x.opts_,"url",_0xe681("0x37d"));var i=t instanceof Object?{x:t.x||1,y:t.y||1,z:t.z||1}:{x:t,y:t,z:t};x[_0xe681("0x37e")]=i,x[_0xe681("0x37f")]=_[_0xe681("0x372")](x[_0xe681("0x373")],_0xe681("0x380"),20),this[_0xe681("0x381")]=this[_0xe681("0x382")][_0xe681("0xa4")](this),e.on(_0xe681("0xc6"),this[_0xe681("0x381")])}},{key:"animate",value:function(x){esmap[_0xe681("0x383")][_0xe681("0x20")][_0xe681("0x384")].call(this,x)}},{key:_0xe681("0x80"),value:function(x){this.o3d_[_0xe681("0x80")](x)}},{key:"stop",value:function(){this[_0xe681("0x17d")][_0xe681("0x385")]()}},{key:_0xe681("0x386"),value:function(x){this[_0xe681("0x17d")][_0xe681("0x386")](x)}},{key:_0xe681("0x387"),value:function(){this[_0xe681("0x17d")][_0xe681("0x387")]()}},{key:_0xe681("0x388"),value:function(x){this[_0xe681("0x17d")][_0xe681("0x388")](x)}},{key:_0xe681("0x389"),value:function(x){this[_0xe681("0x17d")][_0xe681("0x389")](x)}},{key:_0xe681("0x34f"),value:function(x){this.o3d_[_0xe681("0x34f")](x)}},{key:_0xe681("0x38a"),value:function(x){this.o3d_[_0xe681("0x38a")](x)}},{key:_0xe681("0x38b"),value:function(x){this[_0xe681("0x17d")].jump(x)}},{key:_0xe681("0x38c"),value:function(){var x=this;x.parent&&x[_0xe681("0xc7")][_0xe681("0x82")](x),x[_0xe681("0x24c")]&&x[_0xe681("0x24c")]()}},{key:_0xe681("0x376"),get:function(){return THREE[_0xe681("0x1b3")][_0xe681("0x38d")](this.o3d_[_0xe681("0x38e")].y)},set:function(x){var e={x:0,y:THREE[_0xe681("0x1b3")][_0xe681("0x375")](x),z:0};this[_0xe681("0x17d")][_0xe681("0x38e")][_0xe681("0xfc")](e.x,e.y,e.z)}},{key:_0xe681("0x95"),get:function(){return this[_0xe681("0x373")][_0xe681("0x38f")]},set:function(x){this[_0xe681("0x373")][_0xe681("0x38f")]=x}},{key:_0xe681("0x210"),get:function(){return this.o3d_[_0xe681("0x210")]},set:function(x){this[_0xe681("0x17d")][_0xe681("0x210")]=x}},{key:"ID",get:function(){return this[_0xe681("0x378")]}},{key:_0xe681("0x40"),get:function(){return this.name_},set:function(x){this[_0xe681("0x377")]=x}},{key:"x",get:function(){return this.opts_.x},set:function(x){this.x_=x}},{key:"y",get:function(){return this.opts_.y},set:function(x){this.y_=x}}]),e}(esmap[_0xe681("0x390")]);e[_0xe681("0x9d")]=g,Object[_0xe681("0x391")](g[_0xe681("0x20")],{_update:{value:function(x){this[_0xe681("0x17d")]&&this[_0xe681("0x17d")][_0xe681("0x392")]&&this[_0xe681("0x17d")][_0xe681("0x392")]()}}})},function(x,e){function _(x,e){if(!(x instanceof e))throw new TypeError(_0xe681("0x77"))}function t(x,e){if(!x)throw new ReferenceError(_0xe681("0x36b"));return!e||_0xe681("0x24")!=typeof e&&"function"!=typeof e?x:e}function i(x,e){if(_0xe681("0x32")!=typeof e&&null!==e)throw new TypeError(_0xe681("0x36c")+typeof e);x[_0xe681("0x20")]=Object.create(e&&e[_0xe681("0x20")],{constructor:{value:x,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object[_0xe681("0x36d")]?Object[_0xe681("0x36d")](x,e):x[_0xe681("0x36e")]=e)}_0xe681("0x3d"),Object[_0xe681("0x22")](e,_0xe681("0x94"),{value:!0});var n=function(x){function e(x){_(this,e),x=x||{};var i=x[_0xe681("0x96")],n=t(this,(e[_0xe681("0x36e")]||Object[_0xe681("0x36f")](e))[_0xe681("0x1a")](this,esmap[_0xe681("0x1e0")][_0xe681("0x2a3")],i,x.o3d||new(THREE[_0xe681("0x32f")]),x[_0xe681("0x172")]||esmap[_0xe681("0x162")][_0xe681("0x163")][_0xe681("0x13d")]));return n.params=x,i&&void 0!=i[_0xe681("0x291")]&&(n[_0xe681("0x291")]=x.data[_0xe681("0x291")]),n[_0xe681("0x19e")]=x[_0xe681("0x4")]||esmap[_0xe681("0x393")][_0xe681("0x1e6")],n}return i(e,x),e}(esmap[_0xe681("0x390")]);e[_0xe681("0x9d")]=n},function(x,e){function _(x,e){if(!(x instanceof e))throw new TypeError(_0xe681("0x77"))}function t(x,e){if(!x)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!e||"object"!=typeof e&&_0xe681("0x32")!=typeof e?x:e}function i(x,e){if(_0xe681("0x32")!=typeof e&&null!==e)throw new TypeError(_0xe681("0x36c")+typeof e);x.prototype=Object[_0xe681("0xda")](e&&e[_0xe681("0x20")],{constructor:{value:x,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object[_0xe681("0x36d")]?Object.setPrototypeOf(x,e):x[_0xe681("0x36e")]=e)}_0xe681("0x3d"),Object[_0xe681("0x22")](e,_0xe681("0x94"),{value:!0});var n=function(){function x(x,e){for(var _=0;_<e[_0xe681("0x25")];_++){var t=e[_];t[_0xe681("0x7c")]=t[_0xe681("0x7c")]||!1,t.configurable=!0,_0xe681("0x7d")in t&&(t[_0xe681("0x7e")]=!0),Object[_0xe681("0x22")](x,t[_0xe681("0x7f")],t)}}return function(e,_,t){return _&&x(e[_0xe681("0x20")],_),t&&x(e,t),e}}(),g=function(x){function e(x,i,n){var g,a;return _(this,e),g=a=t(this,(e[_0xe681("0x36e")]||Object.getPrototypeOf(e))[_0xe681("0x1a")](this,esmap.ESNodeType[_0xe681("0x29e")],x,i,n)),a[_0xe681("0x386")]=function(x){return this[_0xe681("0x17d")][_0xe681("0x386")](x)},a[_0xe681("0x38b")]=function(x){return this[_0xe681("0x17d")][_0xe681("0x38b")](x)},a[_0xe681("0x394")]=function(x){this[_0xe681("0x17d")][_0xe681("0x394")](x)},a[_0xe681("0x17d")][_0xe681("0x395")]=a[_0xe681("0x17d")][_0xe681("0x210")],a}return i(e,x),n(e,[{key:"ID",get:function(){return this[_0xe681("0x396")][_0xe681("0x397")]}},{key:_0xe681("0x40"),get:function(){return this[_0xe681("0x396")].name}},{key:"typeID",get:function(){return this[_0xe681("0x396")].Typeid}},{key:"x",get:function(){return this[_0xe681("0x398")].x},set:function(x){}},{key:"y",get:function(){return this.coord_.y},set:function(x){}},{key:"z",get:function(){return this[_0xe681("0x398")].z},set:function(x){}},{key:_0xe681("0x1d8"),get:function(){if(!this.coord_){var x=this[_0xe681("0x396")];this.coord_=new esmap.ESMapCoord(-x.X,x.Y,this.o3d_[_0xe681("0xc7")][_0xe681("0x399")](new(THREE[_0xe681("0x232")])(0,6,0)).y)}return this[_0xe681("0x398")]}},{key:_0xe681("0x210"),get:function(){return this[_0xe681("0x17d")][_0xe681("0x395")]},set:function(x){this[_0xe681("0x17d")][_0xe681("0x395")]=x,this[_0xe681("0x17d")][_0xe681("0x210")]=x}}]),e}(esmap[_0xe681("0x390")]);e.default=g},function(x,e){function _(x,e){if(!(x instanceof e))throw new TypeError(_0xe681("0x77"))}function t(x,e){if(!x)throw new ReferenceError(_0xe681("0x36b"));return!e||_0xe681("0x24")!=typeof e&&"function"!=typeof e?x:e}function i(x,e){if("function"!=typeof e&&null!==e)throw new TypeError(_0xe681("0x36c")+typeof e);x.prototype=Object[_0xe681("0xda")](e&&e[_0xe681("0x20")],{constructor:{value:x,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object[_0xe681("0x36d")]?Object[_0xe681("0x36d")](x,e):x[_0xe681("0x36e")]=e)}Object[_0xe681("0x22")](e,_0xe681("0x94"),{value:!0});var n=function(){function x(x,e){for(var _=0;_<e.length;_++){var t=e[_];t.enumerable=t[_0xe681("0x7c")]||!1,t.configurable=!0,_0xe681("0x7d")in t&&(t[_0xe681("0x7e")]=!0),Object[_0xe681("0x22")](x,t[_0xe681("0x7f")],t)}}return function(e,_,t){return _&&x(e.prototype,_),t&&x(e,t),e}}(),g=function(x){function e(x,i){_(this,e);var n=t(this,(e[_0xe681("0x36e")]||Object[_0xe681("0x36f")](e))[_0xe681("0x1a")](this,0,i,new(THREE[_0xe681("0x32f")]),x));return n.isShowSlots=!1,n}return i(e,x),n(e,[{key:_0xe681("0x39a"),value:function(x){return!x instanceof esmap[_0xe681("0x165")]?void console[_0xe681("0x39b")]("Only ESLayer acceptable!"):void this[_0xe681("0x17d")][_0xe681("0x80")](x[_0xe681("0x17d")])}},{key:_0xe681("0x39c"),value:function(x,e){var _=this[_0xe681("0x39d")](x);if(!_){switch(e){case _0xe681("0x39e"):_=new esmap.ESLayer(esmap.ESLayerType.IMAGE_MARKER);break;case _0xe681("0x39f"):_=new(esmap[_0xe681("0x165")])(esmap[_0xe681("0x166")][_0xe681("0x16a")]);break;case _0xe681("0x3a0"):_=new(esmap[_0xe681("0x165")])(esmap[_0xe681("0x166")][_0xe681("0x3a1")]);break;case _0xe681("0x3a2"):_=new(esmap[_0xe681("0x165")])(esmap[_0xe681("0x166")][_0xe681("0x3a3")]);case _0xe681("0x3a4"):_=new(esmap[_0xe681("0x165")])(esmap[_0xe681("0x166")][_0xe681("0x1e3")]);break;case _0xe681("0x2a4"):_=new esmap.ESLayer(esmap[_0xe681("0x166")].MODEL_IMAGE);break;case _0xe681("0x3a5"):_=new(esmap[_0xe681("0x165")])(esmap[_0xe681("0x166")][_0xe681("0x3a6")]);break;case _0xe681("0x3a7"):_=new(esmap[_0xe681("0x165")])(esmap[_0xe681("0x166")][_0xe681("0x3a8")])}_[_0xe681("0x40")]=x,this[_0xe681("0x39a")](_)}return _}},{key:_0xe681("0x3a9"),value:function(x,e){x=[].concat(x);for(var _=!1,t=[],i=0;i<this[_0xe681("0x1a1")][_0xe681("0x25")];i++){var n=this[_0xe681("0x1a1")][i];if(n[_0xe681("0x19e")]&&x[_0xe681("0x1d")](n[_0xe681("0x19e")])>-1&&(e&&(_=e(n,n._type_)),t[_0xe681("0x1e")](n)),_)return 0==t[_0xe681("0x25")]?null:1==t[_0xe681("0x25")]?t[0]:t}return 0==t[_0xe681("0x25")]?null:1==t[_0xe681("0x25")]?t[0]:t}},{key:_0xe681("0x39d"),value:function(x,e){x=[].concat(x);for(var _=[],t=0;t<this[_0xe681("0x1a1")].length;t++){var i=this[_0xe681("0x1a1")][t];i[_0xe681("0x40")]&&x[_0xe681("0x1d")](i.name)>-1&&(e&&e(i,i[_0xe681("0x40")])&&t--,_[_0xe681("0x1e")](i))}return 0==_[_0xe681("0x25")]?null:1==_[_0xe681("0x25")]?_[0]:_}},{key:_0xe681("0x3aa"),value:function(x,e){var _=[];return this[_0xe681("0x3a9")](x,function(x){if(void 0!=e)for(var t=x[_0xe681("0x17d")].children,i=0;i<t;i++)e(x[_0xe681("0x17d")][_0xe681("0x1f")][i])&&_[_0xe681("0x1e")](x[_0xe681("0x17d")][_0xe681("0x1f")][i]);else _[_0xe681("0x1e")].apply(_,x[_0xe681("0x17d")][_0xe681("0x1f")])}),_}},{key:_0xe681("0x3ab"),value:function(x){var e=esmap[_0xe681("0x197")][_0xe681("0x3a9")](x);return e?e.length?e[0]:e:null}},{key:_0xe681("0x3ac"),value:function(x){x[_0xe681("0x17d")][_0xe681("0x210")]=!1;for(var e=0;x[_0xe681("0x17d")][_0xe681("0x1f")][_0xe681("0x25")]>e;){var _=x.o3d_[_0xe681("0x1f")][e];_.em&&_.em[_0xe681("0x24c")]?_.em[_0xe681("0x24c")]():e++}this[_0xe681("0x17d")].remove(x[_0xe681("0x17d")])}},{key:_0xe681("0x3ad"),value:function(x){for(var e=[][_0xe681("0x19b")](x),_=0;_<this[_0xe681("0x1a1")].length;_++){var t=this[_0xe681("0x1a1")][_];if(t[_0xe681("0x19e")]&&this[_0xe681("0x3ae")](e,t[_0xe681("0x19e")])){t[_0xe681("0x17d")][_0xe681("0x210")]=!1;for(var i=0;t[_0xe681("0x17d")][_0xe681("0x1f")][_0xe681("0x25")]>i;){var n=t[_0xe681("0x17d")][_0xe681("0x1f")][i];n.em&&n.em[_0xe681("0x24c")]?n.em[_0xe681("0x24c")]():i++}this[_0xe681("0x17d")][_0xe681("0x82")](t[_0xe681("0x17d")]),_--}}}},{key:_0xe681("0x3af"),value:function(x){for(var e=[][_0xe681("0x19b")](x),_=0;_<this[_0xe681("0x1a1")].length;_++){var t=this.layers[_];if(t[_0xe681("0x40")]&&this[_0xe681("0x3ae")](e,t[_0xe681("0x40")])){t[_0xe681("0x17d")][_0xe681("0x210")]=!1;for(var i=0;t[_0xe681("0x17d")][_0xe681("0x1f")][_0xe681("0x25")]>i;){var n=t.o3d_.children[i];n.em&&n.em[_0xe681("0x24c")]?n.em[_0xe681("0x24c")]():i++}this[_0xe681("0x17d")][_0xe681("0x82")](t[_0xe681("0x17d")]),_--}}}},{key:_0xe681("0x3ae"),value:function(x,e){for(var _=0;_<x[_0xe681("0x25")];_++)if(x[_]==e)return!0;return!1}},{key:_0xe681("0x3b0"),value:function(x){x&&this[_0xe681("0x396")][_0xe681("0x1f4")]&&x.renderToMap(this[_0xe681("0x396")][_0xe681("0x1f4")])}},{key:_0xe681("0x3b1"),value:function(x){x&&this[_0xe681("0x396")].floornum&&x[_0xe681("0x3b2")](this[_0xe681("0x396")][_0xe681("0x1f4")])}},{key:_0xe681("0x290"),value:function(x){return this[_0xe681("0x3b3")](x,this[_0xe681("0x17d")],!1)}},{key:_0xe681("0x3b3"),value:function(x,e,_){if(e[_0xe681("0x17a")]&&(_=x(e[_0xe681("0x17a")])),_)return!0;for(var t=0;t<e[_0xe681("0x1f")][_0xe681("0x25")];t++){var i=this[_0xe681("0x3b3")](x,e[_0xe681("0x1f")][t],_);if(i)return!0}}},{key:"FloorNum",get:function(){return this[_0xe681("0x396")][_0xe681("0x1f4")]}},{key:_0xe681("0x3b4"),get:function(){return this[_0xe681("0x396")].Alias}},{key:_0xe681("0x3b5"),get:function(){return this[_0xe681("0x396")][_0xe681("0x40")]}},{key:_0xe681("0x3b6"),get:function(){return this.data_[_0xe681("0x231")]}},{key:_0xe681("0x3b7"),get:function(){return this[_0xe681("0x396")][_0xe681("0x3b8")]}},{key:_0xe681("0x1d8"),get:function(){return new(esmap[_0xe681("0x259")])(-this[_0xe681("0x13d")][_0xe681("0x1af")],this.mapScene[_0xe681("0x1ad")],this[_0xe681("0x17d")][_0xe681("0x20c")].Elevation)}},{key:"layers",get:function(){for(var x=[],e=0;e<this[_0xe681("0x17d")].children[_0xe681("0x25")];e++){var _=this.o3d_[_0xe681("0x1f")][e],t=_[_0xe681("0x17a")];t&&x[_0xe681("0x1e")](t)}return x}}]),e}(esmap.ESNode);e.default=g},function(x,e){function _(x,e){if(!(x instanceof e))throw new TypeError(_0xe681("0x77"))}function t(x,e){if(!x)throw new ReferenceError(_0xe681("0x36b"));return!e||_0xe681("0x24")!=typeof e&&_0xe681("0x32")!=typeof e?x:e}function i(x,e){if("function"!=typeof e&&null!==e)throw new TypeError(_0xe681("0x36c")+typeof e);x[_0xe681("0x20")]=Object[_0xe681("0xda")](e&&e[_0xe681("0x20")],{constructor:{value:x,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object[_0xe681("0x36d")](x,e):x[_0xe681("0x36e")]=e)}_0xe681("0x3d"),Object[_0xe681("0x22")](e,_0xe681("0x94"),{value:!0});var n=function(){function x(x,e){for(var _=0;_<e[_0xe681("0x25")];_++){var t=e[_];t[_0xe681("0x7c")]=t.enumerable||!1,t[_0xe681("0xc8")]=!0,_0xe681("0x7d")in t&&(t[_0xe681("0x7e")]=!0),Object.defineProperty(x,t[_0xe681("0x7f")],t)}}return function(e,_,t){return _&&x(e[_0xe681("0x20")],_),t&&x(e,t),e}}(),g=function(x){function e(x){var i,n;return _(this,e),i=n=t(this,(e[_0xe681("0x36e")]||Object[_0xe681("0x36f")](e))[_0xe681("0x1a")](this,esmap.ESNodeType[_0xe681("0x16b")],{},new(THREE[_0xe681("0x32f")]))),n[_0xe681("0x3b9")]=function(x,e){this[_0xe681("0x17d")][_0xe681("0x3b9")](x,e)},n.moveTo=function(x){this[_0xe681("0x17d")][_0xe681("0x34f")](x)},n[_0xe681("0x386")]=function(x){return this[_0xe681("0x17d")][_0xe681("0x386")](x)},n[_0xe681("0x38b")]=function(x){return this.o3d_[_0xe681("0x38b")](x)},n[_0xe681("0x394")]=function(x){this[_0xe681("0x17d")][_0xe681("0x394")](x)},n[_0xe681("0x387")]=function(){this[_0xe681("0x17d")][_0xe681("0x387")]()},n[_0xe681("0x3ba")]=function(x){this[_0xe681("0x17d")][_0xe681("0x3ba")](x)},n.fade=function(x){this[_0xe681("0x17d")][_0xe681("0x3bb")](x)},n[_0xe681("0x3bc")]=function(x){this.oc||(this.oc=this[_0xe681("0x17d")][_0xe681("0x17e")][_0xe681("0x19c")]);var e=new(THREE[_0xe681("0x196")])(x);this[_0xe681("0x17d")][_0xe681("0x17e")][_0xe681("0x19c")]=e},n[_0xe681("0x3bd")]=function(){this.o3d_[_0xe681("0x17e")][_0xe681("0x19c")]=this.oc},n[_0xe681("0x17d")][_0xe681("0x395")]=n[_0xe681("0x17d")][_0xe681("0x210")],n.alias=_0xe681("0x39e"),n[_0xe681("0x373")]=x||{},n.createMarker_(),n.oc=null,n}return i(e,x),n(e,[{key:"createMarker_",value:function(){if(!(!this[_0xe681("0x17d")]instanceof THREE.Object3D)){var x=esmap[_0xe681("0x162")][_0xe681("0x163")],e=x[_0xe681("0x13d")],_=esmap[_0xe681("0x123")][_0xe681("0x86")];this.x_=_[_0xe681("0x372")](this[_0xe681("0x373")],"x",x[_0xe681("0x27d")].x),this.y_=_[_0xe681("0x372")](this[_0xe681("0x373")],"y",x.center.y),this[_0xe681("0x373")].url=_[_0xe681("0x372")](this[_0xe681("0x373")],_0xe681("0x95"),_0xe681("0x3be")),this[_0xe681("0x373")][_0xe681("0x376")]=_[_0xe681("0x372")](this[_0xe681("0x373")],"angle",null),this[_0xe681("0x377")]=_[_0xe681("0x372")](this[_0xe681("0x373")],_0xe681("0x40"),null),this.id_=_[_0xe681("0x372")](this.opts_,"id",esmap[_0xe681("0x123")].id++),this[_0xe681("0x3bf")]=_[_0xe681("0x372")](this[_0xe681("0x373")],_0xe681("0x26c"),32),this[_0xe681("0x3c0")]=_[_0xe681("0x372")](this[_0xe681("0x373")],"up",!0),this[_0xe681("0x37a")]=_[_0xe681("0x372")](this[_0xe681("0x373")],_0xe681("0x37b"),!0),this.showLevel_=_[_0xe681("0x372")](this.opts_,_0xe681("0x380"),18);var t=this,i=this[_0xe681("0x17d")][_0xe681("0x395")];0==this[_0xe681("0x373")][_0xe681("0x376")]||this.opts_[_0xe681("0x376")]?this[_0xe681("0x17d")]=new(esmap[_0xe681("0x3c1")])(this[_0xe681("0x378")],{vertex:[this.x_,this.y_],name:this[_0xe681("0x377")],size_:this.size_,ShowLevel:this[_0xe681("0x37f")]},this[_0xe681("0x373")][_0xe681("0x95")],function(x){setTimeout(function(){t[_0xe681("0x210")]=i;var x=0;x=void 0!=t.opts_[_0xe681("0x184")]?t[_0xe681("0x373")][_0xe681("0x184")]:void 0!=t.opts_.z?t[_0xe681("0x373")].z:3,t[_0xe681("0x17d")][_0xe681("0x185")][_0xe681("0xfc")](-(t.x_+e[_0xe681("0x1af")]),x,t.y_-e[_0xe681("0x1ad")]),t[_0xe681("0x17d")][_0xe681("0x38e")].set(0,0,0,_0xe681("0x3c2")),t.up_?t[_0xe681("0x17d")][_0xe681("0x38e")].y=THREE[_0xe681("0x1b3")].degToRad(t[_0xe681("0x373")].angle):(t.o3d_[_0xe681("0x38e")][_0xe681("0xfc")](-Math.PI/2,0,Math.PI,"XYZ"),t[_0xe681("0x17d")][_0xe681("0x38e")].z=THREE[_0xe681("0x1b3")][_0xe681("0x375")](t[_0xe681("0x373")][_0xe681("0x376")])),t[_0xe681("0x17d")][_0xe681("0x3c3")]=x,t[_0xe681("0x17d")][_0xe681("0x3c4")]=!1,t[_0xe681("0x373")].callback&&t[_0xe681("0x373")].callback(t)},0)}):this[_0xe681("0x17d")]=new(esmap[_0xe681("0x3c5")])({id:this[_0xe681("0x378")],vertex:[this.x_,this.y_],name:this.name_,size_:this[_0xe681("0x3bf")],ShowLevel:this[_0xe681("0x37f")]},this[_0xe681("0x373")][_0xe681("0x95")],function(){t[_0xe681("0x210")]=i;var _=0;_=void 0!=t[_0xe681("0x373")][_0xe681("0x184")]?t[_0xe681("0x373")][_0xe681("0x184")]:void 0!=t[_0xe681("0x373")].z?t[_0xe681("0x373")].z:6,t[_0xe681("0x17d")][_0xe681("0x185")][_0xe681("0xfc")](-(t.x_+e[_0xe681("0x1af")]),_,t.y_-e[_0xe681("0x1ad")]),t[_0xe681("0x17d")].initY_=_,t[_0xe681("0x373")].callback&&t.opts_.callback(t),x[_0xe681("0x17f")](!0)}),this[_0xe681("0x17d")][_0xe681("0x395")]=!1,this[_0xe681("0x17d")][_0xe681("0x210")]=!1,this[_0xe681("0x17d")][_0xe681("0x17a")]=this,this[_0xe681("0x17d")].material[_0xe681("0x3c6")]=!1}}},{key:_0xe681("0x95"),get:function(){return this[_0xe681("0x373")][_0xe681("0x95")]},set:function(x){this.opts_.url=x,this.o3d_[_0xe681("0x3c7")](x)}},{key:_0xe681("0x210"),get:function(){return this[_0xe681("0x395")]},set:function(x){this[_0xe681("0x17d")][_0xe681("0x395")]=x,this.o3d_[_0xe681("0x210")]=x}},{key:"ID",get:function(){return this[_0xe681("0x378")]}},{key:_0xe681("0x40"),get:function(){return this.name_},set:function(x){this[_0xe681("0x377")]=x}},{key:"x",get:function(){return this.x_},set:function(x){this.x_=x}},{key:"y",get:function(){return this.y_},set:function(x){this.y_=x}}]),e}(esmap.ESNode);e[_0xe681("0x9d")]=g,g[_0xe681("0x20")][_0xe681("0x395")]={get:function(){return this[_0xe681("0x17d")][_0xe681("0x395")]},set:function(x){this.o3d_[_0xe681("0x395")]=x}}},function(x,e){function _(x,e){if(!(x instanceof e))throw new TypeError(_0xe681("0x77"))}function t(x,e){if(!x)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!e||_0xe681("0x24")!=typeof e&&_0xe681("0x32")!=typeof e?x:e}function i(x,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);x[_0xe681("0x20")]=Object[_0xe681("0xda")](e&&e[_0xe681("0x20")],{constructor:{value:x,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object[_0xe681("0x36d")]?Object[_0xe681("0x36d")](x,e):x.__proto__=e)}_0xe681("0x3d"),Object[_0xe681("0x22")](e,_0xe681("0x94"),{value:!0});var n=function(){function x(x,e){for(var _=0;_<e[_0xe681("0x25")];_++){var t=e[_];t.enumerable=t[_0xe681("0x7c")]||!1,t[_0xe681("0xc8")]=!0,_0xe681("0x7d")in t&&(t[_0xe681("0x7e")]=!0),Object[_0xe681("0x22")](x,t.key,t)}}return function(e,_,t){return _&&x(e[_0xe681("0x20")],_),t&&x(e,t),e}}(),g=function(x){function e(x,i,n){var g;return _(this,e),g=t(this,(e[_0xe681("0x36e")]||Object.getPrototypeOf(e))[_0xe681("0x1a")](this,esmap[_0xe681("0x1e0")][_0xe681("0x29f")],x,i,n)),g[_0xe681("0x17d")][_0xe681("0x395")]=g[_0xe681("0x17d")][_0xe681("0x210")],g}return i(e,x),n(e,[{key:"ID",get:function(){return this[_0xe681("0x396")].oid}},{key:"name",get:function(){return this.data_[_0xe681("0x40")]}},{key:"x",get:function(){return this[_0xe681("0x398")].x},set:function(x){}},{key:"y",get:function(){return this[_0xe681("0x398")].y},set:function(x){}},{key:"z",get:function(){return this.coord_.z},set:function(x){}},{key:"mapCoord",get:function(){if(!this[_0xe681("0x398")]){var x=this.data_;this[_0xe681("0x398")]=new(esmap[_0xe681("0x259")])(-x.X,x.Y,this[_0xe681("0x17d")][_0xe681("0xc7")][_0xe681("0x399")](new(THREE[_0xe681("0x232")])(0,6,0)).y);
}return this.coord_}},{key:_0xe681("0x210"),get:function(){return this[_0xe681("0x395")]},set:function(x){this[_0xe681("0x17d")][_0xe681("0x395")]=x,this[_0xe681("0x17d")][_0xe681("0x210")]=x}}]),e}(esmap[_0xe681("0x390")]);e[_0xe681("0x9d")]=g},function(x,e){function _(x,e){if(!(x instanceof e))throw new TypeError("Cannot call a class as a function")}function t(x,e){if(!x)throw new ReferenceError(_0xe681("0x36b"));return!e||_0xe681("0x24")!=typeof e&&_0xe681("0x32")!=typeof e?x:e}function i(x,e){if(_0xe681("0x32")!=typeof e&&null!==e)throw new TypeError(_0xe681("0x36c")+typeof e);x.prototype=Object[_0xe681("0xda")](e&&e[_0xe681("0x20")],{constructor:{value:x,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object[_0xe681("0x36d")](x,e):x[_0xe681("0x36e")]=e)}_0xe681("0x3d"),Object[_0xe681("0x22")](e,_0xe681("0x94"),{value:!0});var n=function(){function x(x,e){for(var _=0;_<e[_0xe681("0x25")];_++){var t=e[_];t[_0xe681("0x7c")]=t[_0xe681("0x7c")]||!1,t[_0xe681("0xc8")]=!0,_0xe681("0x7d")in t&&(t.writable=!0),Object.defineProperty(x,t[_0xe681("0x7f")],t)}}return function(e,_,t){return _&&x(e[_0xe681("0x20")],_),t&&x(e,t),e}}(),g=function(x){function e(x,i){_(this,e);var n=t(this,(e[_0xe681("0x36e")]||Object[_0xe681("0x36f")](e))[_0xe681("0x1a")](this,0,i,new THREE.Object3D));switch(n[_0xe681("0x19e")]=x||esmap.ESLayerType[_0xe681("0x1e6")],n[_0xe681("0x40")]="",x){case esmap[_0xe681("0x166")][_0xe681("0x16b")]:case esmap[_0xe681("0x166")][_0xe681("0x16a")]:n[_0xe681("0x17d")][_0xe681("0x3c8")]=new(esmap[_0xe681("0x3c9")]),n.requireCollide_=!1;break;case esmap.ESLayerType[_0xe681("0x168")]:break;case esmap[_0xe681("0x166")].FLOOR_BASE:case esmap.ESLayerType.MODEL_POI:case esmap[_0xe681("0x166")][_0xe681("0x169")]:n[_0xe681("0x3ca")]=!0}return n}return i(e,x),n(e,[{key:_0xe681("0x3cb"),value:function(x){var e=esmap[_0xe681("0x162")][_0xe681("0x163")],_=this;if(this.checkType(x.nodeType))switch(x[_0xe681("0xce")]){case esmap.ESNodeType[_0xe681("0x16b")]:this[_0xe681("0x17d")][_0xe681("0x80")](x.o3d_),e[_0xe681("0xc4")][_0xe681("0x248")](x[_0xe681("0x17d")]);break;case esmap[_0xe681("0x1e0")][_0xe681("0x16a")]:this.o3d_[_0xe681("0x80")](x[_0xe681("0x17d")]),e.mapPicker.addUserLabel(x[_0xe681("0x17d")]);break;case esmap[_0xe681("0x1e0")][_0xe681("0x1e3")]:_[_0xe681("0x3cc")](x,_);break;case esmap[_0xe681("0x1e0")].WEBVIEW_MARKER:if((e[_0xe681("0x13f")][_0xe681("0x1db")].o1||0)<=1)return void console[_0xe681("0x3cd")](esmap.ESInfo.AUTHO_REQUIRED);this[_0xe681("0x17d")][_0xe681("0x80")](x[_0xe681("0x17d")]),e[_0xe681("0xc4")].addUserPOI(x[_0xe681("0x17d")]);break;case esmap[_0xe681("0x1e0")].POLYGON_MARKER:this.o3d_[_0xe681("0x80")](x[_0xe681("0x17d")]);break;case esmap.ESNodeType[_0xe681("0x3a8")]:if((e.mapService[_0xe681("0x1db")].o1||0)<=1)return;this.o3d_[_0xe681("0x80")](x),x.datas_={name:_0xe681("0x3ce"),nodeType:esmap[_0xe681("0x1e0")][_0xe681("0x3a8")]},e.on(_0xe681("0xc6"),function(){x[_0xe681("0x392")]()})}else console[_0xe681("0x3cd")](_0xe681("0x3cf"));x[_0xe681("0x3d0")]&&x[_0xe681("0x3d0")]()}},{key:_0xe681("0x3d1"),value:function(){this.loadqueue[_0xe681("0xc5")]()}},{key:_0xe681("0x3cc"),value:function(x,e){this[_0xe681("0x24d")].addModel({name:x[_0xe681("0x377")],scale:x[_0xe681("0x37e")],rotate:x[_0xe681("0x374")],url:x[_0xe681("0x38f")],position:{x:x.x_,y:6+x[_0xe681("0x379")],z:x.y_},parent:e[_0xe681("0x17d")],id:x[_0xe681("0x378")],bclick:1,self:x,spritify:x[_0xe681("0x37a")],callback:x.callback_}),e.show3D()}},{key:_0xe681("0x3d2"),value:function(x){var e=this[_0xe681("0x19e")],_=null;for(var t in esmap[_0xe681("0x166")])if(esmap[_0xe681("0x166")][t]==e){_=t;break}return esmap[_0xe681("0x1e0")][_]==x||(console[_0xe681("0x3cd")](_0xe681("0x3d3")),!1)}},{key:_0xe681("0x80"),value:function(x){this[_0xe681("0x17d")][_0xe681("0x80")](x.o3d_)}},{key:_0xe681("0x82"),value:function(x){x.dispose()}},{key:_0xe681("0x3d4"),value:function(){for(var x=0;this[_0xe681("0x17d")][_0xe681("0x1f")][_0xe681("0x25")]>x;){var e=this[_0xe681("0x17d")][_0xe681("0x1f")][x];e.datas_&&e.datas_.dispose?e[_0xe681("0x17a")].dispose():x++}}},{key:_0xe681("0x290"),value:function(x){return this[_0xe681("0x3b3")](x,this[_0xe681("0x17d")],!1)}},{key:_0xe681("0x3b3"),value:function(x,e,_){if(e[_0xe681("0x17a")]&&(_=x(e.datas_)),_)return!0;for(var t=0;t<e[_0xe681("0x1f")].length;t++){var i=this[_0xe681("0x3b3")](x,e[_0xe681("0x1f")][t],_);if(i)return!0}}},{key:_0xe681("0x24d"),get:function(){var x=esmap[_0xe681("0x162")][_0xe681("0x163")];return x.mapScene[_0xe681("0x24d")]}}]),e}(esmap[_0xe681("0x390")]);e[_0xe681("0x9d")]=g},function(x,e){Object[_0xe681("0x22")](e,_0xe681("0x94"),{value:!0});var _="function"==typeof Symbol&&_0xe681("0x79")==typeof Symbol[_0xe681("0x7a")]?function(x){return typeof x}:function(x){return x&&_0xe681("0x32")==typeof Symbol&&x[_0xe681("0x7b")]===Symbol&&x!==Symbol[_0xe681("0x20")]?_0xe681("0x79"):typeof x},t=function(x,e,t,i){var n=esmap[_0xe681("0x162")][_0xe681("0x163")];this[_0xe681("0x19e")]=_0xe681("0x3d5"),esmap[_0xe681("0x3d6")][_0xe681("0x1a")](this,n[_0xe681("0x3d7")],this),this[_0xe681("0x190")]=x[0][_0xe681("0x190")];var g=x.map(function(x){return x[_0xe681("0x1cc")]()});this.ind_=i,this[_0xe681("0xbd")]=n,this[_0xe681("0xcc")]=e;var a=e;this[_0xe681("0x3d8")]=void 0==a[_0xe681("0x3d8")]||a[_0xe681("0x3d8")],this[_0xe681("0xce")]=esmap.ESNodeType[_0xe681("0x3d9")],t=t||{},t.up=t.up||e.up||new(THREE[_0xe681("0x232")])(0,1,0),this[_0xe681("0xcc")][_0xe681("0x16d")]=void 0==this.style[_0xe681("0x16d")]||e[_0xe681("0x16d")];var r=1;switch(_(a.color)){case"number":a.color=this._colorToStr(a[_0xe681("0x19c")])}a[_0xe681("0x26b")]||(a.dash={size:2,gap:1}),a.type=_0xe681("0x2bb"),a[_0xe681("0x3da")]=esmap[_0xe681("0x3db")].CIRCLE,"arrow"!=a.lineType&&_0xe681("0x3dc")!=a.lineType||(a[_0xe681("0x4")]=a.lineType,a[_0xe681("0x3da")]=esmap[_0xe681("0x3db")][_0xe681("0x3dd")]),a[_0xe681("0x3de")]=a[_0xe681("0x3de")]||a[_0xe681("0x3df")]&&this[_0xe681("0x3e0")](a[_0xe681("0x3df")])||[a[_0xe681("0x26b")][_0xe681("0x26c")],a[_0xe681("0x26b")][_0xe681("0x26d")]],a[_0xe681("0x269")]=esmap[_0xe681("0x123")][_0xe681("0x86")][_0xe681("0x124")](a,_0xe681("0x269"),_0xe681("0x292"),8),a[_0xe681("0x3de")]&&(this[_0xe681("0x3e1")]=a[_0xe681("0x3de")][_0xe681("0x3e2")](function(x,e){return x+e})),r=this.textureLength;var A=JSON[_0xe681("0x16")](JSON[_0xe681("0x3e3")](a));delete A.height,this.naviMap=new esmap.ESNaviMap(A);var C=new(THREE[_0xe681("0x3e4")])(this.naviMap.canvas);C.minFilter=THREE[_0xe681("0x3e5")],C[_0xe681("0x199")]=!0;var I=new(esmap[_0xe681("0x3e6")])({radius:a[_0xe681("0x269")],pathVertices:g,uvBaseLen:r,up:a.up||t.up,notCenter:t[_0xe681("0x3e7")]||e[_0xe681("0x3e7")],lineMode:a[_0xe681("0x3da")],yScale:a[_0xe681("0x3e8")],smooth:a[_0xe681("0x189")],billboard:a[_0xe681("0x3e9")]});C.wrapS=C[_0xe681("0x299")]=THREE[_0xe681("0x29a")],this.baseRepeatX=Math[_0xe681("0x102")](I[_0xe681("0x25")]/I[_0xe681("0x3ea")]),C[_0xe681("0x29c")].x=this.baseRepeatX,C[_0xe681("0x29c")].y=1,C[_0xe681("0x199")]=!0;var o=new(THREE[_0xe681("0x221")]);o.transparent=!0,o[_0xe681("0x297")]=void 0==a[_0xe681("0x26a")]?1:a[_0xe681("0x26a")],o.map=C,o[_0xe681("0x199")]=!0,o[_0xe681("0x210")]=!1,this[_0xe681("0x210")]=!1,o.depthWrite=!0,a[_0xe681("0x3eb")]&&(o[_0xe681("0x3ec")]=!1),THREE[_0xe681("0x21f")][_0xe681("0x1a")](this,I,o),this[_0xe681("0x185")].copy(I[_0xe681("0x27d")]),this[_0xe681("0x3ed")]=esmap.ESRenderOrder[_0xe681("0x3ee")],this[_0xe681("0x3ef")](),this[_0xe681("0x146")](_0xe681("0x330"),this[_0xe681("0x24c")]),this._update=this[_0xe681("0xc6")][_0xe681("0xa4")](this),this[_0xe681("0xbd")].on(_0xe681("0xc6"),this._update),this[_0xe681("0x3f0")]=this[_0xe681("0x187")][_0xe681("0xa4")](this),this[_0xe681("0xbd")].on(_0xe681("0x187"),this._visibleFloorNumsChanged);var s=new(THREE[_0xe681("0x21f")])(this.geometry,this[_0xe681("0x17e")]);s[_0xe681("0x3ed")]=esmap[_0xe681("0x3f1")][_0xe681("0x3f2")],this.add(s),this[_0xe681("0x3f3")]=s};t[_0xe681("0x20")]=Object[_0xe681("0xda")](THREE[_0xe681("0x21f")][_0xe681("0x20")],{height:{get:function(){return this.position.y},set:function(x){this.position.y=x}},color:{get:function(){return this[_0xe681("0xcc")][_0xe681("0x19c")]},set:function(x){_0xe681("0x28")==typeof x&&(x=this[_0xe681("0x3f4")](x)),this[_0xe681("0x3f5")][_0xe681("0xc6")]({color:x}),this[_0xe681("0x17e")][_0xe681("0xbd")][_0xe681("0x199")]=!0}},lineStyle:{get:function(){return this[_0xe681("0xcc")]},set:function(x){this[_0xe681("0x2a0")](x)}},alpha:{get:function(){return this[_0xe681("0x17e")][_0xe681("0x297")]},set:function(x){this[_0xe681("0x17e")][_0xe681("0x297")]=x}},lineWidth:{get:function(){return this[_0xe681("0xcc")][_0xe681("0x269")]},set:function(x){this[_0xe681("0x2a0")]({lineWidth:x})}}}),Object.assign(t[_0xe681("0x20")],esmap[_0xe681("0x3d6")][_0xe681("0x20")],{_colorToStr:function(x){if(_0xe681("0x28")==typeof x){for(var e=x[_0xe681("0x3f6")](16);e[_0xe681("0x25")]<6;)e="0"+e;return"#"+e}return x},getDashArrayByLineType:function(x){if(x instanceof Array)return x;switch(x){case esmap.ESLineType[_0xe681("0x3f7")]:return[1,0];case esmap[_0xe681("0x3f8")][_0xe681("0x3f9")]:return[1,1];case esmap[_0xe681("0x3f8")].DOT_DASH:return[2.5,1,.5,1];case esmap[_0xe681("0x3f8")][_0xe681("0x3fa")]:return[3,1,1.5,1];case esmap[_0xe681("0x3f8")][_0xe681("0x3fb")]:return[2,1];case esmap.ESLineType[_0xe681("0x3fc")]:return[2.5,.5,.5,.5,.5,.5];case esmap[_0xe681("0x3f8")].TRI_DOT_DASH:return[2.5,.5,.5,.5,.5,.5,.5,.5];case esmap[_0xe681("0x3f8")][_0xe681("0x3fd")]:return[5,0];case esmap[_0xe681("0x3f8")].ESARROW:return[7,0]}},visibleFloorNumsChanged:function(x){var e=this.fnum,_=!0;_0xe681("0x28")==typeof e?x[_0xe681("0x1d")](e)==-1&&(_=!1):e instanceof Array&&e[_0xe681("0xc3")](function(e){x[_0xe681("0x1d")](e)==-1&&(_=!1)}),this.visible=_},updateStyle:function(x){x[_0xe681("0x19c")]&&_0xe681("0x28")==typeof x.color&&(x[_0xe681("0x19c")]=this[_0xe681("0x3f4")](x[_0xe681("0x19c")])),Object.assign(this[_0xe681("0xcc")],x),this[_0xe681("0xcc")][_0xe681("0x4")]=_0xe681("0x2bb"),_0xe681("0x3fe")!=this[_0xe681("0xcc")][_0xe681("0x3df")]&&"esarrow"!=this.style[_0xe681("0x3df")]||(this[_0xe681("0xcc")][_0xe681("0x4")]=this[_0xe681("0xcc")].lineType),x[_0xe681("0x3df")]&&!x[_0xe681("0x3de")]&&(this.style[_0xe681("0x3de")]=this[_0xe681("0x3e0")](x.lineType)),delete this[_0xe681("0xcc")][_0xe681("0x184")],this[_0xe681("0x3f5")].update(this[_0xe681("0xcc")]),this[_0xe681("0x3ef")](),this[_0xe681("0x17e")].map[_0xe681("0x199")]=!0,this[_0xe681("0x3e1")]=this.style.dashArray.reduce(function(x,e){return x+e}),this[_0xe681("0x3ff")]&&this[_0xe681("0x3ff")][_0xe681("0x25")]>0&&this[_0xe681("0x3ff")].forEach(function(e){e[_0xe681("0x2a0")](x)})},_updateMaterialByNaviMap:function(){var x=this[_0xe681("0x3f5")].materialInfo;this[_0xe681("0x17e")][_0xe681("0xbd")][_0xe681("0x1ac")].y=x[_0xe681("0x1ac")],this[_0xe681("0x17e")][_0xe681("0x400")]=esmap[_0xe681("0x123")][_0xe681("0x86")][_0xe681("0x124")](x,_0xe681("0x400"),0)},_firstUpdate:!0,update:function(x){this.map[_0xe681("0x12e")][_0xe681("0x401")]&&!this[_0xe681("0xcc")][_0xe681("0x402")]&&(this[_0xe681("0x17e")][_0xe681("0xbd")][_0xe681("0x1ac")].x-=x*(this[_0xe681("0xcc")][_0xe681("0x26b")].speed||this[_0xe681("0xcc")][_0xe681("0x403")]||1));var e=this.map[_0xe681("0x12b")],_=(e.camera,1),t=this[_0xe681("0xbd")][_0xe681("0x13b")][_0xe681("0x404")];if(this[_0xe681("0x405")],_=esmap.ESMapUtil[_0xe681("0x406")](this[_0xe681("0xbd")],this),this[_0xe681("0xcc")][_0xe681("0x16d")]){if("3d"==e[_0xe681("0x407")][_0xe681("0x149")]){if(0==e.h_)return;this.fixedWidth&&this[_0xe681("0x193")][_0xe681("0x408")](_*this[_0xe681("0xcc")][_0xe681("0x269")]*.7),this[_0xe681("0x409")]()}else this.fixedWidth&&(1==t?this[_0xe681("0x193")][_0xe681("0x408")](_*this[_0xe681("0xcc")][_0xe681("0x269")]*.7/e[_0xe681("0x407")][_0xe681("0x254")][_0xe681("0x280")]):this[_0xe681("0x193")][_0xe681("0x408")](_*this[_0xe681("0xcc")][_0xe681("0x269")]*.7));this.material[_0xe681("0xbd")][_0xe681("0x29c")].x=this.geometry[_0xe681("0x25")]/(this[_0xe681("0x3e1")]*_*7*(1==t?2:1))}},_upVec:new(THREE[_0xe681("0x232")])(0,1,0),_zVec:new(THREE[_0xe681("0x232")])(0,0,1),_billboard:function(){if(this[_0xe681("0xcc")].billboard&&2==this.geometry[_0xe681("0x40a")][_0xe681("0x25")]){var x=this[_0xe681("0x193")][_0xe681("0x40a")],e=x[1].clone().sub(x[0])[_0xe681("0x285")](),_=e[_0xe681("0x40b")](this[_0xe681("0x40c")]),t=Math[_0xe681("0x122")](_),i=t*this[_0xe681("0xbd")][_0xe681("0x134")][_0xe681("0x1b1")][_0xe681("0x227")]();this.quaternion[_0xe681("0x40d")](e,i)}},alwaysShow:esmap.ESMapLabel[_0xe681("0x20")][_0xe681("0x3b9")],picked:function(){},dispose:function(){this.brothers&&this[_0xe681("0x3ff")][_0xe681("0x25")]>0&&this[_0xe681("0x3ff")][_0xe681("0xc3")](function(x){x[_0xe681("0x24c")]()}),esmap[_0xe681("0x3d6")][_0xe681("0x20")][_0xe681("0x24c")][_0xe681("0x1a")](this),this.map.off(_0xe681("0xc6"),this[_0xe681("0x382")]),this[_0xe681("0xbd")][_0xe681("0x108")]("visibleFloorNumsChanged",this[_0xe681("0x3f0")]),this[_0xe681("0xc7")]&&this[_0xe681("0xc7")][_0xe681("0x82")](this),this.geometry.dispose(),this[_0xe681("0x17e")][_0xe681("0xbd")][_0xe681("0x24c")](),this[_0xe681("0x17e")].dispose()}}),e.default=t},function(x,e){function _(x,e){if(!(x instanceof e))throw new TypeError(_0xe681("0x77"))}Object.defineProperty(e,"__esModule",{value:!0});var t=function x(e,t,i){_(this,x),this[_0xe681("0x407")]=esmap[_0xe681("0x162")][_0xe681("0x163")],this.id=e||0,this[_0xe681("0x18c")]=t||[],this[_0xe681("0xcc")]=i||this[_0xe681("0x407")][_0xe681("0x13b")][_0xe681("0x268")],this[_0xe681("0x17d")]=new(THREE[_0xe681("0x32f")]),this[_0xe681("0x17d")].datas_=this};e[_0xe681("0x9d")]=t},function(x,e){function _(x,e){if(!(x instanceof e))throw new TypeError(_0xe681("0x77"))}function t(x,e){if(!x)throw new ReferenceError(_0xe681("0x36b"));return!e||_0xe681("0x24")!=typeof e&&_0xe681("0x32")!=typeof e?x:e}function i(x,e){if(_0xe681("0x32")!=typeof e&&null!==e)throw new TypeError(_0xe681("0x36c")+typeof e);x[_0xe681("0x20")]=Object[_0xe681("0xda")](e&&e[_0xe681("0x20")],{constructor:{value:x,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object[_0xe681("0x36d")]?Object[_0xe681("0x36d")](x,e):x[_0xe681("0x36e")]=e)}_0xe681("0x3d"),Object[_0xe681("0x22")](e,_0xe681("0x94"),{value:!0});var n=_0xe681("0x32")==typeof Symbol&&_0xe681("0x79")==typeof Symbol.iterator?function(x){return typeof x}:function(x){return x&&"function"==typeof Symbol&&x[_0xe681("0x7b")]===Symbol&&x!==Symbol[_0xe681("0x20")]?_0xe681("0x79"):typeof x},g=function(){function x(x,e){for(var _=0;_<e[_0xe681("0x25")];_++){var t=e[_];t.enumerable=t[_0xe681("0x7c")]||!1,t[_0xe681("0xc8")]=!0,_0xe681("0x7d")in t&&(t[_0xe681("0x7e")]=!0),Object[_0xe681("0x22")](x,t[_0xe681("0x7f")],t)}}return function(e,_,t){return _&&x(e.prototype,_),t&&x(e,t),e}}(),a=function(x){function e(x){var i,n;return _(this,e),i=n=t(this,(e[_0xe681("0x36e")]||Object[_0xe681("0x36f")](e))[_0xe681("0x1a")](this,esmap[_0xe681("0x1e0")][_0xe681("0x40e")],{},new(THREE[_0xe681("0x32f")]))),n[_0xe681("0x187")]=esmap.ESLine[_0xe681("0x20")].visibleFloorNumsChanged,n[_0xe681("0x3b9")]=esmap[_0xe681("0x383")].prototype[_0xe681("0x3b9")],n[_0xe681("0x34f")]=function(x){this[_0xe681("0x17d")][_0xe681("0x34f")](x)},n[_0xe681("0x17d")][_0xe681("0x395")]=n[_0xe681("0x17d")].visible,n[_0xe681("0x373")]=x,n[_0xe681("0x190")]=1,n[_0xe681("0x371")](),n}return i(e,x),g(e,[{key:_0xe681("0x371"),value:function(x){if(this[_0xe681("0x17d")]instanceof THREE[_0xe681("0x32f")]){var e=esmap.ESUtil[_0xe681("0x86")],_=this[_0xe681("0x373")][_0xe681("0xbd")]||esmap[_0xe681("0x162")][_0xe681("0x163")];this.x_=e[_0xe681("0x372")](this[_0xe681("0x373")],"x",0),this.y_=e[_0xe681("0x372")](this[_0xe681("0x373")],"y",0),this[_0xe681("0x379")]=e[_0xe681("0x372")](this[_0xe681("0x373")],_0xe681("0x184"),0),this[_0xe681("0x38f")]=e.getValue(this.opts_,_0xe681("0x95"),"../image/user.png"),this.name_=e[_0xe681("0x372")](this[_0xe681("0x373")],_0xe681("0x40"),null),this[_0xe681("0x378")]=e[_0xe681("0x372")](this[_0xe681("0x373")],"id",esmap[_0xe681("0x123")].id++),this[_0xe681("0x3bf")]=e[_0xe681("0x372")](this[_0xe681("0x373")],"size",128),this[_0xe681("0x37a")]=!0;var t=this;if(this[_0xe681("0x17d")][_0xe681("0x395")],this[_0xe681("0x17d")]=new(esmap[_0xe681("0x3c1")])(0,{id:this[_0xe681("0x378")],vertex:[0,0],name:this.name_,size_:this[_0xe681("0x3bf")]},this[_0xe681("0x38f")],function(x){t[_0xe681("0x40f")]=!0,t[_0xe681("0x17d")].material[_0xe681("0x210")]=!0,t[_0xe681("0x373")][_0xe681("0x410")]&&(t[_0xe681("0x410")]=t.opts_[_0xe681("0x410")]),t[_0xe681("0x3f0")]=t[_0xe681("0x187")][_0xe681("0xa4")](t),_.on(_0xe681("0x187"),t[_0xe681("0x3f0")]),t[_0xe681("0x373")][_0xe681("0x12a")]&&t[_0xe681("0x373")][_0xe681("0x12a")](t)}),t[_0xe681("0x17d")][_0xe681("0x3c3")]=0,t.opts_[_0xe681("0x184")]&&(t[_0xe681("0x17d")][_0xe681("0x3c3")]=t[_0xe681("0x373")][_0xe681("0x184")]),t.opts_[_0xe681("0x190")]){var i=_.getFloorHeight(t[_0xe681("0x373")][_0xe681("0x1f4")]);t[_0xe681("0x17d")][_0xe681("0x3c3")]+=i}this[_0xe681("0x17d")].x=this.x_,this[_0xe681("0x17d")].y=this.y_,this[_0xe681("0x17d")].material[_0xe681("0x210")]=!1,this[_0xe681("0x17d")].notAddImageHeight=!0,this[_0xe681("0x17d")][_0xe681("0x395")]=!0,this.o3d_[_0xe681("0x17a")]=this,this[_0xe681("0x17d")].up[_0xe681("0x286")](-1),this[_0xe681("0x381")]=this[_0xe681("0x382")][_0xe681("0xa4")](this),_.on(_0xe681("0xc6"),this[_0xe681("0x381")])}}},{key:_0xe681("0x410"),get:function(){return this[_0xe681("0x17d")].rotation.z/Math.PI*180-180},set:function(x){this.o3d_[_0xe681("0x38e")].set(-Math.PI/2,0,x/180*Math.PI+Math.PI,_0xe681("0x3c2"))}},{key:_0xe681("0x210"),get:function(){return this[_0xe681("0x17d")].forceVisible_},set:function(x){this.o3d_[_0xe681("0x395")]=x,this.o3d_.visible=x}},{key:_0xe681("0x184"),set:function(x){this[_0xe681("0x17d")][_0xe681("0x3c3")]=x},get:function(){return this[_0xe681("0x17d")][_0xe681("0x185")].y}},{key:_0xe681("0x1f4"),get:function(){return this[_0xe681("0x190")]},set:function(x){this.fnum=x}},{key:"position",get:function(){return this[_0xe681("0x17d")][_0xe681("0x185")]}},{key:"ID",get:function(){return this[_0xe681("0x378")]}},{key:_0xe681("0x40"),get:function(){return this[_0xe681("0x377")]}}]),e}(esmap[_0xe681("0x390")]);e[_0xe681("0x9d")]=a,Object[_0xe681("0x391")](a.prototype,{_update:{value:function(x){this[_0xe681("0x17d")][_0xe681("0x392")](esmap[_0xe681("0x162")][_0xe681("0x163")][_0xe681("0x12b")])}},setPosition:{value:function(x,e,_,t){var i=esmap[_0xe681("0x162")][_0xe681("0x163")];_0xe681("0x24")==(_0xe681("0xa")==typeof x?"undefined":n(x))&&(e=x.y,_=esmap[_0xe681("0x123")][_0xe681("0x86")][_0xe681("0x124")](x,_0xe681("0x190"),"floornum",_0xe681("0x411"),1),t=esmap[_0xe681("0x123")][_0xe681("0x86")][_0xe681("0x124")](x,_0xe681("0x184"),_0xe681("0x412"),_0xe681("0x1ac"),_0xe681("0x186"),0),x=x.x),this.x=x,this.y=e,this instanceof esmap.ESLocationMarker?(_=_||this.fnum||i[_0xe681("0x25a")],this[_0xe681("0x190")]=_,this[_0xe681("0x17d")][_0xe681("0x3c3")]=i.getFloorHeight(_)+(t||0),this[_0xe681("0x185")][_0xe681("0xfc")](-(x+i.mapScene[_0xe681("0x1af")]),this.o3d_[_0xe681("0x3c3")],e-i.mapScene[_0xe681("0x1ad")])):void 0!=_&&(this[_0xe681("0x17d")][_0xe681("0x3c3")]=_)}},getPosition:{value:function(){var x=esmap[_0xe681("0x162")][_0xe681("0x163")];return{x:-x[_0xe681("0x13d")][_0xe681("0x1af")]-this[_0xe681("0x185")].x,y:this[_0xe681("0x185")].z+x[_0xe681("0x13d")][_0xe681("0x1ad")],z:this.o3d_[_0xe681("0x3c3")]||0,fnum:this.fnum}}},dispose:{value:function(){if(this[_0xe681("0x17d")][_0xe681("0xc7")]){var x=esmap[_0xe681("0x162")].instance;x.off(_0xe681("0xc6"),this[_0xe681("0x381")]),this[_0xe681("0x17d")][_0xe681("0xc7")].remove(this[_0xe681("0x17d")])}}},rotateTo:{value:function(x){var e=this;_0xe681("0x28")==typeof x&&(x={to:x});var _,t=esmap[_0xe681("0x123")].Option.getValues(x,"time",_0xe681("0x125"),.3),i=e.direction,n=esmap[_0xe681("0x197")][_0xe681("0x413")](i,x.to);return clearInterval(e[_0xe681("0x126")]),e[_0xe681("0x126")]=THREE.Tween[_0xe681("0x128")](t,function(x){_=i+n*x,_<=0?_=360+_:_>=360&&(_-=360),e[_0xe681("0x410")]=_},function(){x[_0xe681("0x12a")]&&x.callback()}),e._rotateToID}}})},function(x,e){function _(x,e){if(!(x instanceof e))throw new TypeError(_0xe681("0x77"))}Object[_0xe681("0x22")](e,_0xe681("0x94"),{value:!0});var t=function(){function x(x,e){for(var _=0;_<e[_0xe681("0x25")];_++){var t=e[_];t[_0xe681("0x7c")]=t[_0xe681("0x7c")]||!1,t[_0xe681("0xc8")]=!0,_0xe681("0x7d")in t&&(t[_0xe681("0x7e")]=!0),Object.defineProperty(x,t[_0xe681("0x7f")],t)}}return function(e,_,t){return _&&x(e.prototype,_),t&&x(e,t),e}}(),i=function(){function x(e,t){_(this,x),this[_0xe681("0x414")]=e,this.controls_=t,this[_0xe681("0x415")]=!0,this[_0xe681("0x416")]=!0,this[_0xe681("0x417")]=!0,this[_0xe681("0x418")]=!0,this.enableMapSingleTap_=!0,this[_0xe681("0x419")]=!0}return t(x,[{key:_0xe681("0x41a"),get:function(){return this[_0xe681("0x415")]},set:function(x){x!=this[_0xe681("0x415")]&&(this[_0xe681("0x415")]=x,this[_0xe681("0x41b")][_0xe681("0x41c")]=x)}},{key:_0xe681("0x41d"),get:function(){return this[_0xe681("0x416")]},set:function(x){x!=this[_0xe681("0x416")]&&(this[_0xe681("0x416")]=x,this[_0xe681("0x41b")][_0xe681("0x41e")]=x)}},{key:_0xe681("0x41f"),get:function(){return this.enableCompassTap_},set:function(x){x!=this[_0xe681("0x419")]&&(this[_0xe681("0x419")]=x)}},{key:_0xe681("0x420"),get:function(){return this.enableMapIncline_},set:function(x){x!=this.enableMapIncline_&&(this[_0xe681("0x417")]=x,this.controls_[_0xe681("0x421")]=x)}},{key:_0xe681("0x422"),get:function(){return this.enableMapPinch_},set:function(x){x!=this[_0xe681("0x418")]&&(this[_0xe681("0x418")]=x,this[_0xe681("0x41b")][_0xe681("0x423")]=x)}},{key:"enableMapSingleTap",get:function(){return this[_0xe681("0x424")]},set:function(x){x!=this[_0xe681("0x424")]&&(this[_0xe681("0x424")]=x,this[_0xe681("0x414")][_0xe681("0xbf")]=x)}}]),x}();e[_0xe681("0x9d")]=i},function(x,e){function _(x,e){if(!(x instanceof e))throw new TypeError(_0xe681("0x77"))}_0xe681("0x3d"),Object[_0xe681("0x22")](e,_0xe681("0x94"),{value:!0});var t=function(){function x(x,e){for(var _=0;_<e[_0xe681("0x25")];_++){var t=e[_];t[_0xe681("0x7c")]=t[_0xe681("0x7c")]||!1,t[_0xe681("0xc8")]=!0,_0xe681("0x7d")in t&&(t[_0xe681("0x7e")]=!0),Object[_0xe681("0x22")](x,t[_0xe681("0x7f")],t)}}return function(e,_,t){return _&&x(e.prototype,_),t&&x(e,t),e}}(),i=function(){function x(e,t,i){_(this,x),this[_0xe681("0x278")]=i,this[_0xe681("0x425")]=null,this[_0xe681("0x426")]=e,this.sceneOrtho_=t,this.w_,this.h_,this[_0xe681("0x427")]=8,this[_0xe681("0x428")]=15}return t(x,[{key:"sl",value:function(x){for(var e=x[_0xe681("0x25")],_=0,t=0;t<e;t++)_+=x[t][_0xe681("0x113")]();return parseInt(_,16)}},{key:"updateHUD",value:function(x,e){if(null!=this.sprite_){var _=x/2,t=e/2;this[_0xe681("0x425")][_0xe681("0x185")][_0xe681("0xfc")](_-this.w_/2-this[_0xe681("0x427")],-t+this.h_/2+this[_0xe681("0x428")],1)}this[_0xe681("0x426")]&&null==this[_0xe681("0x425")]&&(this[_0xe681("0x132")](),this.sprite_[_0xe681("0x210")]=!0)}},{key:_0xe681("0x429"),value:function(x,e){if(null!=this[_0xe681("0x42a")]){var _=x/2,t=e/2;this[_0xe681("0x42a")][_0xe681("0x185")].set(_-this.w_/2-this[_0xe681("0x427")],-t+this.h_/2+this[_0xe681("0x428")],1)}this[_0xe681("0x426")]&&null==this[_0xe681("0x42a")]&&(this[_0xe681("0x132")](),this[_0xe681("0x42a")].visible=!0)}},{key:_0xe681("0x132"),value:function(){if(null==this[_0xe681("0x425")]){var x=document[_0xe681("0x2")](_0xe681("0x42b"));x[_0xe681("0x7")]=_0xe681("0x42c");var e=new(THREE[_0xe681("0x3e4")])(x),_=esmap[_0xe681("0x197")][_0xe681("0x352")]()[_0xe681("0x357")];this.w_=_?96:60,this.h_=_?25:15,e[_0xe681("0x42d")]=THREE[_0xe681("0x42e")],e.needsUpdate=!0,this.sprite_=new(THREE[_0xe681("0x42f")])(new(THREE[_0xe681("0x430")])({map:e})),this[_0xe681("0x425")][_0xe681("0x27c")][_0xe681("0xfc")](this.w_,this.h_,1),this[_0xe681("0x431")][_0xe681("0x80")](this[_0xe681("0x425")]);var t=this[_0xe681("0x278")].container,i=t[_0xe681("0x432")],n=t[_0xe681("0x433")];this[_0xe681("0x22d")](i,n)}}},{key:"initUserLogo",value:function(){var x=esmap[_0xe681("0x162")][_0xe681("0x163")];if(window[_0xe681("0x434")]&&window[_0xe681("0x435")]&&x[_0xe681("0x13f")][_0xe681("0x1db")]&&x.mapService.sourceData.ul){var e=document[_0xe681("0x2")](_0xe681("0x42b")),_=userLogoBase64[_0xe681("0x23a")](","),t=this.sl(_[2]),i=_[0];if(1==i){var n=esmap[_0xe681("0x197")].encode64(i+t+window[_0xe681("0x434")]+_0xe681("0x250"));if(n!=_[1])return}e[_0xe681("0x7")]=_0xe681("0x436")+_[2];var g,a,r=new(THREE[_0xe681("0x3e4")])(e),A=esmap[_0xe681("0x197")][_0xe681("0x352")]()[_0xe681("0x357")],g=this.w_,a=this.h_;window.userLogoConfig&&(g=A?window[_0xe681("0x437")].w:.7*window.userLogoConfig.w,a=A?window[_0xe681("0x437")].h:.7*window[_0xe681("0x437")].h),r[_0xe681("0x42d")]=THREE[_0xe681("0x42e")],r[_0xe681("0x199")]=!0,this.sprite_2=new THREE.Sprite(new THREE.SpriteMaterial({map:r})),this.sprite_2[_0xe681("0x27c")][_0xe681("0xfc")](g,a,1),this[_0xe681("0x42a")].name=_0xe681("0x438"),this[_0xe681("0x431")][_0xe681("0x80")](this[_0xe681("0x42a")]);var C=this[_0xe681("0x278")].container,I=C[_0xe681("0x432")],o=C.clientHeight+20;this[_0xe681("0x429")](A?I-180:I-120,o-25)}}},{key:_0xe681("0x210"),set:function(x){x!=this.visible_&&(this[_0xe681("0x426")]=x,x?(this[_0xe681("0x132")](),this[_0xe681("0x425")][_0xe681("0x210")]=!0):null!=this[_0xe681("0x425")]&&(this[_0xe681("0x425")].visible=!1))},get:function(){return this.visible_}}]),x}();e[_0xe681("0x9d")]=i},function(x,e){function _(x,e){if(!(x instanceof e))throw new TypeError(_0xe681("0x77"))}function t(x,e){if(!x)throw new ReferenceError(_0xe681("0x36b"));return!e||"object"!=typeof e&&_0xe681("0x32")!=typeof e?x:e}function i(x,e){if(_0xe681("0x32")!=typeof e&&null!==e)throw new TypeError(_0xe681("0x36c")+typeof e);x[_0xe681("0x20")]=Object[_0xe681("0xda")](e&&e[_0xe681("0x20")],{constructor:{value:x,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object[_0xe681("0x36d")]?Object[_0xe681("0x36d")](x,e):x[_0xe681("0x36e")]=e)}_0xe681("0x3d"),Object.defineProperty(e,_0xe681("0x94"),{value:!0});var n=function(){function x(x,e){for(var _=0;_<e[_0xe681("0x25")];_++){var t=e[_];t[_0xe681("0x7c")]=t[_0xe681("0x7c")]||!1,t[_0xe681("0xc8")]=!0,_0xe681("0x7d")in t&&(t[_0xe681("0x7e")]=!0),Object[_0xe681("0x22")](x,t[_0xe681("0x7f")],t)}}return function(e,_,t){return _&&x(e[_0xe681("0x20")],_),t&&x(e,t),e}}(),g=function(x){function e(x,i,n){return _(this,e),t(this,(e[_0xe681("0x36e")]||Object.getPrototypeOf(e))[_0xe681("0x1a")](this,esmap[_0xe681("0x1e0")][_0xe681("0x168")],x,i,n))}return i(e,x),n(e,[{key:"ID",get:function(){return this[_0xe681("0x396")][_0xe681("0x397")]}},{key:_0xe681("0x411"),get:function(){return this.data_[_0xe681("0x1f4")]}},{key:"name",get:function(){return this[_0xe681("0x396")][_0xe681("0x40")]}},{key:"x",get:function(){return this[_0xe681("0x398")].x},set:function(x){}},{key:"y",get:function(){return this[_0xe681("0x398")].y},set:function(x){}},{key:"z",get:function(){return this[_0xe681("0x398")].z},set:function(x){}},{key:"mapCoord",get:function(){if(!this.coord_){this[_0xe681("0x17d")][_0xe681("0x193")][_0xe681("0x439")]||this[_0xe681("0x17d")][_0xe681("0x193")][_0xe681("0x43a")]();var x=this[_0xe681("0x17d")][_0xe681("0x193")][_0xe681("0x439")][_0xe681("0x27d")];this[_0xe681("0x398")]=new(esmap[_0xe681("0x259")])(-(this[_0xe681("0x13d")][_0xe681("0x1af")]+x.x),this[_0xe681("0x13d")][_0xe681("0x1ad")]+x.y,this[_0xe681("0x17d")][_0xe681("0xc7")][_0xe681("0x399")](new THREE.Vector3).y)}return this[_0xe681("0x398")]}},{key:_0xe681("0x291"),get:function(){return this[_0xe681("0x396")].Typeid}}]),e}(esmap.ESNode);e.default=g},function(x,e){function _(x,e){if(!(x instanceof e))throw new TypeError(_0xe681("0x77"))}function t(x,e){if(!x)throw new ReferenceError(_0xe681("0x36b"));return!e||_0xe681("0x24")!=typeof e&&_0xe681("0x32")!=typeof e?x:e}function i(x,e){if(_0xe681("0x32")!=typeof e&&null!==e)throw new TypeError(_0xe681("0x36c")+typeof e);x[_0xe681("0x20")]=Object.create(e&&e[_0xe681("0x20")],{constructor:{value:x,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object[_0xe681("0x36d")]?Object[_0xe681("0x36d")](x,e):x[_0xe681("0x36e")]=e)}Object.defineProperty(e,_0xe681("0x94"),{value:!0});var n=function(){function x(x,e){for(var _=0;_<e.length;_++){var t=e[_];t.enumerable=t[_0xe681("0x7c")]||!1,t.configurable=!0,_0xe681("0x7d")in t&&(t[_0xe681("0x7e")]=!0),Object[_0xe681("0x22")](x,t[_0xe681("0x7f")],t)}}return function(e,_,t){return _&&x(e[_0xe681("0x20")],_),t&&x(e,t),e}}(),g=function(x){function e(x){var i;_(this,e),i=t(this,(e[_0xe681("0x36e")]||Object.getPrototypeOf(e))[_0xe681("0x1a")](this,x)),i[_0xe681("0x19e")]=esmap.ESElementType[_0xe681("0x43b")];var n=new(THREE[_0xe681("0x43c")])(1,1,1,1),g=new THREE.MeshLambertMaterial({transparent:!0,side:THREE[_0xe681("0x43d")],depthWrite:!1});return g[_0xe681("0x210")]=!1,i[_0xe681("0x17d")]=new(THREE[_0xe681("0x21f")])(n,g),i[_0xe681("0x17d")][_0xe681("0x17a")]=i,1==x.style[_0xe681("0x376")]?i[_0xe681("0x17d")][_0xe681("0x38e")][_0xe681("0xfc")](-Math.PI/2,0,Math.PI-x[_0xe681("0xcc")][_0xe681("0x38a")]*THREE.Math[_0xe681("0x239")],"XZY"):i[_0xe681("0x17d")][_0xe681("0x38e")].set(Math.PI,-x[_0xe681("0xcc")].rotate*THREE[_0xe681("0x1b3")].DEG2RAD,Math.PI,_0xe681("0x43e")),i.o3d_[_0xe681("0x3ed")]=esmap[_0xe681("0x3f1")][_0xe681("0x43f")],i.updateStyle(i[_0xe681("0x440")][_0xe681("0xcc")]),i}return i(e,x),n(e,[{key:_0xe681("0x2a0"),value:function(x){var e=this;e[_0xe681("0x441")]=setInterval(function(){e[_0xe681("0x17d")]&&(x[_0xe681("0x200")],x[_0xe681("0x200")][_0xe681("0x200")]&&(clearInterval(e[_0xe681("0x441")]),e[_0xe681("0x17d")][_0xe681("0x17e")].visible=!0,e[_0xe681("0x17d")].material[_0xe681("0xbd")]=x[_0xe681("0x200")],e[_0xe681("0x17d")][_0xe681("0x17e")][_0xe681("0xbd")][_0xe681("0x42d")]=THREE[_0xe681("0x42e")],e[_0xe681("0x17d")][_0xe681("0x17e")][_0xe681("0xbd")][_0xe681("0x442")]=16))},0),this[_0xe681("0x17d")].scale[_0xe681("0xfc")](x[_0xe681("0x26c")][_0xe681("0x2ba")],x[_0xe681("0x26c")].height,1),this[_0xe681("0x17d")][_0xe681("0x185")][_0xe681("0xfc")](-(x.coord.x+this[_0xe681("0x440")].sx)+x.offset.x,x[_0xe681("0x184")]+x.offset.z,x[_0xe681("0x443")].y-this[_0xe681("0x440")].sz+x.offset.y)}}]),e}(esmap.ESElement);e[_0xe681("0x9d")]=g},function(x,e){function _(x,e){if(!(x instanceof e))throw new TypeError("Cannot call a class as a function")}_0xe681("0x3d"),Object.defineProperty(e,_0xe681("0x94"),{value:!0});var t=function(){function x(x,e){for(var _=0;_<e[_0xe681("0x25")];_++){var t=e[_];t[_0xe681("0x7c")]=t[_0xe681("0x7c")]||!1,t[_0xe681("0xc8")]=!0,_0xe681("0x7d")in t&&(t[_0xe681("0x7e")]=!0),Object[_0xe681("0x22")](x,t[_0xe681("0x7f")],t)}}return function(e,_,t){return _&&x(e[_0xe681("0x20")],_),t&&x(e,t),e}}(),i=function(){function x(e,t,i,n){_(this,x),i[_0xe681("0x17a")]=this,Object.defineProperties(this,{nodeType:{enumerable:!0,get:function(){return e}},mapScene:{get:function(){return n},set:function(x){n=x}},o3d_:{get:function(){return i},set:function(x){i=x},configurable:!0,enumerable:!1},data_:{enumerable:!0,get:function(){return t}}})}return t(x,[{key:"x",get:function(){return this[_0xe681("0x13d")]?-this[_0xe681("0x17d")][_0xe681("0x185")].x-this[_0xe681("0x13d")][_0xe681("0x1af")]:0},set:function(x){this.mapScene?this[_0xe681("0x17d")][_0xe681("0x185")][_0xe681("0x444")](-x-this[_0xe681("0x13d")][_0xe681("0x1af")]):(this[_0xe681("0x373")]=this[_0xe681("0x373")]||{},this[_0xe681("0x373")].x=x)}},{key:"y",get:function(){return this[_0xe681("0x13d")]?this[_0xe681("0x17d")][_0xe681("0x185")].z+this[_0xe681("0x13d")][_0xe681("0x1ad")]:0},set:function(x){this[_0xe681("0x13d")]?this[_0xe681("0x17d")].position.setZ(x-this[_0xe681("0x13d")][_0xe681("0x1ad")]):(this.opts_=this[_0xe681("0x373")]||{},this[_0xe681("0x373")].y=x)}},{key:"z",get:function(){
return this[_0xe681("0x13d")]?this[_0xe681("0x17d")][_0xe681("0x185")].y:0},set:function(x){}},{key:_0xe681("0x1d8"),get:function(){return new(esmap[_0xe681("0x259")])(this.x,this.y,this.z)}},{key:"parent",get:function(){return this[_0xe681("0x17d")][_0xe681("0xc7")]?this[_0xe681("0x17d")][_0xe681("0xc7")][_0xe681("0x17a")]:null}},{key:_0xe681("0x210"),set:function(x){this[_0xe681("0x17d")].visible=x},get:function(){return this[_0xe681("0x17d")][_0xe681("0x210")]}},{key:_0xe681("0x51"),get:function(){if(this instanceof esmap.ESFloorManager)return this;var x=this[_0xe681("0xc7")];if(x){if(x instanceof esmap[_0xe681("0x295")])return x;var e=x.parent;if(e&&e instanceof esmap[_0xe681("0x295")])return e}return null}},{key:_0xe681("0x411"),get:function(){return this[_0xe681("0x51")]?this[_0xe681("0x51")][_0xe681("0x411")]:null}}]),t(x,[{key:_0xe681("0x24c"),value:function(){if(this[_0xe681("0x17d")]){this.o3d_[_0xe681("0x210")]=!1;var x=this[_0xe681("0x17d")].parent;return x?(x[_0xe681("0x82")](this[_0xe681("0x17d")]),!0):void 0}}},{key:_0xe681("0x386"),value:function(x,e){this[_0xe681("0x17d")].flash&&this[_0xe681("0x17d")][_0xe681("0x386")]({scale:e,time:x})}}]),x}();e[_0xe681("0x9d")]=i},function(x,e){_0xe681("0x3d"),Object[_0xe681("0x22")](e,_0xe681("0x94"),{value:!0});var _="function"==typeof Symbol&&"symbol"==typeof Symbol[_0xe681("0x7a")]?function(x){return typeof x}:function(x){return x&&"function"==typeof Symbol&&x[_0xe681("0x7b")]===Symbol&&x!==Symbol[_0xe681("0x20")]?_0xe681("0x79"):typeof x},t=function(x){this._geo=null,x=x||{},this[_0xe681("0x370")]=_0xe681("0x3a0"),this.map=x[_0xe681("0xbd")]||esmap[_0xe681("0x162")][_0xe681("0x163")],Object[_0xe681("0x366")](this,{color:15881754,alpha:.5,lineWidth:1,height:6,points:{type:_0xe681("0x445"),center:this[_0xe681("0xbd")][_0xe681("0x27d")],width:30,height:30}},x),this.o3d_=new THREE.Mesh,this[_0xe681("0x17d")][_0xe681("0x17e")].transparent=!0,this[_0xe681("0x17d")][_0xe681("0x17e")][_0xe681("0x3c6")]=!0,this.o3d_[_0xe681("0x17e")][_0xe681("0x400")]=THREE[_0xe681("0x43d")],this[_0xe681("0x17d")][_0xe681("0x17a")]=this,this.nodeType=esmap[_0xe681("0x1e0")].POLYGON_MARKER,this[_0xe681("0x446")]&&this[_0xe681("0xbd")][_0xe681("0xc4")].addModel(this[_0xe681("0x17d")]),this[_0xe681("0xc6")](this,!0)};t[_0xe681("0x20")]=Object[_0xe681("0xda")](esmap[_0xe681("0x393")][_0xe681("0x20")],{height:{get:function(){return this._height},set:function(x){this[_0xe681("0x447")]=x,this[_0xe681("0x17d")]&&(this[_0xe681("0x17d")][_0xe681("0x185")].y=x)}}}),Object[_0xe681("0x366")](t[_0xe681("0x20")],{_init_:function(){this[_0xe681("0x17d")][_0xe681("0x185")].y=this[_0xe681("0x447")]},_dispose_:function(){this[_0xe681("0x446")]&&this[_0xe681("0xbd")][_0xe681("0xc4")][_0xe681("0x448")](this[_0xe681("0x17d")])},alwaysShow:function(x,e){esmap[_0xe681("0x383")][_0xe681("0x20")][_0xe681("0x3b9")][_0xe681("0x1a")](this[_0xe681("0x17d")],x,e),esmap.ESMapLabel.prototype[_0xe681("0x3b9")].call(this[_0xe681("0x449")],x,e)},setColor:function(x){this[_0xe681("0xc6")]({color:x})},setLineWidth:function(x){this.update({lineWidth:x})},setAlpha:function(x){this.update({alpha:x})},_normalizePoints:function(x){var e=this;return x[_0xe681("0xbd")](function(x){return new(THREE[_0xe681("0x44a")])(e[_0xe681("0xbd")][_0xe681("0x27d")].x-x.x,e[_0xe681("0xbd")][_0xe681("0x27d")].y-x.y)})},_createLine:function(x){var e=this;e[_0xe681("0x449")]&&(e[_0xe681("0x449")][_0xe681("0x24c")](),e[_0xe681("0x449")]=null);var x=e.o3d_[_0xe681("0x193")][_0xe681("0x44b")][_0xe681("0xbd")](function(x){return x[_0xe681("0x1cc")]()});x[_0xe681("0x1e")](x[0]),e[_0xe681("0x449")]=new(esmap[_0xe681("0x191")])(x,{color:e[_0xe681("0x19c")],lineWidth:e[_0xe681("0x269")],lineType:esmap[_0xe681("0x3f8")][_0xe681("0x3f7")]},{up:new(THREE[_0xe681("0x232")])(0,0,1),notCenter:!0}),e[_0xe681("0x17d")][_0xe681("0x80")](e.line),e[_0xe681("0x449")][_0xe681("0x185")][_0xe681("0xfc")](0,0,0),e[_0xe681("0x449")][_0xe681("0x17e")].visible=!0,e[_0xe681("0x449")][_0xe681("0x3ed")]=esmap.ESRenderOrder[_0xe681("0x3a0")]},_createPoints:function(x){switch(x[_0xe681("0x4")]){case _0xe681("0x44c"):if(x.center&&x[_0xe681("0x44d")]){for(var e=x[_0xe681("0x27d")],_=x[_0xe681("0x44d")]||30,t=x.segments||40,i=[],n=0;n<t;n++)i[_0xe681("0x1e")]({x:e.x+_*Math[_0xe681("0x44e")](2*Math.PI/t*n),y:e.y+_*Math.sin(2*Math.PI/t*n)});return i}break;case _0xe681("0x445"):if(x.width&&x[_0xe681("0x184")]&&(x[_0xe681("0x44f")]||x[_0xe681("0x27d")])){var e=x[_0xe681("0x27d")]||this[_0xe681("0xbd")][_0xe681("0x27d")],g=x[_0xe681("0x44f")];if(!g)var g={x:e.x-x[_0xe681("0x2ba")]/2,y:e.y-x[_0xe681("0x184")]/2};return[{x:g.x,y:g.y},{x:g.x+x[_0xe681("0x2ba")],y:g.y},{x:g.x+x[_0xe681("0x2ba")],y:g.y+x[_0xe681("0x184")]},{x:g.x,y:g.y+x[_0xe681("0x184")]}]}}},update:function(x,e){var t=this;if(e||Object[_0xe681("0x366")](t,x),x.points){var i=null;if(x.points instanceof Array){if(i=x[_0xe681("0x18c")],i.length<3)return}else if(_0xe681("0x24")==_(x[_0xe681("0x18c")])&&(i=t._createPoints(x[_0xe681("0x18c")]),!i))return;t[_0xe681("0x17d")][_0xe681("0x193")].dispose();var n=t[_0xe681("0x450")](i),g=new(THREE[_0xe681("0x451")])(new(THREE[_0xe681("0x452")])(n));t.o3d_[_0xe681("0x193")]=g,x[_0xe681("0x269")]||t[_0xe681("0x453")](n),e&&(t[_0xe681("0x17d")].rotateX(-Math.PI/2),t[_0xe681("0x17d")][_0xe681("0x185")].y=t[_0xe681("0x184")]),t[_0xe681("0x17d")][_0xe681("0x3ed")]=esmap[_0xe681("0x3f1")][_0xe681("0x3a0")]}x.lineWidth&&t[_0xe681("0x453")](n),x[_0xe681("0x19c")]&&(t[_0xe681("0x17d")].material.color[_0xe681("0xfc")](t[_0xe681("0x19c")]),t[_0xe681("0x449")][_0xe681("0x19c")]=t[_0xe681("0x19c")]),void 0!=x[_0xe681("0x26a")]&&t[_0xe681("0x17d")][_0xe681("0x17e")].opacity&&(t[_0xe681("0x17d")][_0xe681("0x17e")].opacity=t[_0xe681("0x26a")])},contain:function(x){var e=Object[_0xe681("0x366")](x);e=this[_0xe681("0x450")]([e])[0];var _=new(THREE[_0xe681("0x232")])(e.x,this.o3d_[_0xe681("0x454")]().y+30,-e.y),t=new(THREE[_0xe681("0x232")])(0,-1,0),i=new(THREE[_0xe681("0x255")])(_,t),n=i[_0xe681("0x258")](this.o3d_);return n[_0xe681("0x25")]>0}}),e[_0xe681("0x9d")]=t},function(x,e){function _(x,e){if(!(x instanceof e))throw new TypeError(_0xe681("0x77"))}Object.defineProperty(e,_0xe681("0x94"),{value:!0});var t="function"==typeof Symbol&&_0xe681("0x79")==typeof Symbol[_0xe681("0x7a")]?function(x){return typeof x}:function(x){return x&&_0xe681("0x32")==typeof Symbol&&x[_0xe681("0x7b")]===Symbol&&x!==Symbol[_0xe681("0x20")]?_0xe681("0x79"):typeof x},i=function x(e){_(this,x);var t=esmap[_0xe681("0x162")][_0xe681("0x163")];this[_0xe681("0x278")]=e,this.options_[_0xe681("0x26c")]="normal",_0xe681("0x2bb")==this[_0xe681("0x278")].size?(this.w_=this[_0xe681("0x278")].width?this[_0xe681("0x278")][_0xe681("0x2ba")]:300,this.h_=this[_0xe681("0x278")][_0xe681("0x184")]?this[_0xe681("0x278")][_0xe681("0x184")]:150,this[_0xe681("0x2bc")]=10):(this.w_=32,this.h_=32,this[_0xe681("0x2bc")]=8),this[_0xe681("0x455")]=this[_0xe681("0x278")][_0xe681("0x456")]?this[_0xe681("0x278")][_0xe681("0x456")]:0,this[_0xe681("0x2c6")]=_0xe681("0x2c7"),this.defaultRadius_=this[_0xe681("0x278")][_0xe681("0x457")]?this.options_[_0xe681("0x457")]:_0xe681("0x458"),this.screenCoord_=this[_0xe681("0x278")].screenCoord?this.options_[_0xe681("0x459")]:null,this[_0xe681("0x32a")]=this[_0xe681("0x278")][_0xe681("0x32a")]?this.options_.className:null,this[_0xe681("0x45a")]=this[_0xe681("0x278")][_0xe681("0x1d8")]?this[_0xe681("0x278")].mapCoord:null,this[_0xe681("0x45a")]&&this.mapCoord_[_0xe681("0x184")]&&(this[_0xe681("0x45a")].z=this[_0xe681("0x45a")][_0xe681("0x184")]),this.screenCoord_&&this[_0xe681("0x45b")].height&&(this[_0xe681("0x45b")].z=this[_0xe681("0x45b")][_0xe681("0x184")]),(this[_0xe681("0x45b")]||this[_0xe681("0x45a")])&&(this.IsScreenCoord=!!this[_0xe681("0x45b")],this.$=function(x){return document[_0xe681("0x2ca")](x)},this[_0xe681("0x2d2")]=this[_0xe681("0x278")][_0xe681("0x45c")]?this[_0xe681("0x278")][_0xe681("0x45c")]:20,this[_0xe681("0x45d")]=this.h_-2*this[_0xe681("0x2d2")],this[_0xe681("0x45e")]=this[_0xe681("0x278")][_0xe681("0x45f")]?this[_0xe681("0x278")].content:_0xe681("0x460"),this[_0xe681("0x45e")]=_0xe681("0x461")+this[_0xe681("0x45d")]+"px;'>"+this[_0xe681("0x45e")]+"</div>",this.borderStyle_=this[_0xe681("0x278")].borderStyle?this.options_[_0xe681("0x462")]:"1px solid rgba(0,0,0,.2)",this[_0xe681("0x463")]=this[_0xe681("0x278")][_0xe681("0x463")]?this[_0xe681("0x278")][_0xe681("0x463")]:_0xe681("0x464"),this.backgroundColor=this[_0xe681("0x278")][_0xe681("0x2da")]?this[_0xe681("0x278")][_0xe681("0x2da")]:_0xe681("0x465"),this[_0xe681("0x297")]=1,this[_0xe681("0x407")]=t,this[_0xe681("0x466")]=null,t&&this[_0xe681("0x467")](t))};e.default=i,i[_0xe681("0x20")]={_tryInit:function(x){var e=document[_0xe681("0x2")](_0xe681("0x2d6"));if(e[_0xe681("0xcc")][_0xe681("0x2ba")]=this.w_+"px",e[_0xe681("0xcc")][_0xe681("0x184")]=this.h_+"px",e[_0xe681("0xcc")].position=_0xe681("0x2d9"),this.className)e[_0xe681("0xd2")]("class",this[_0xe681("0x32a")]);else{e.setAttribute("class",_0xe681("0x468")),e.style[_0xe681("0x45c")]=this[_0xe681("0x2d2")]+"px",e[_0xe681("0xcc")][_0xe681("0x2da")]=_0xe681("0x469")+this.backgroundColor+","+this[_0xe681("0x297")]+")",e[_0xe681("0xcc")][_0xe681("0x46a")]=this[_0xe681("0x46b")],e[_0xe681("0xcc")][_0xe681("0x457")]=this[_0xe681("0x2c8")];var _=document[_0xe681("0x2")](_0xe681("0x31a"));_[_0xe681("0xd2")]("class","es-control-popmarker-bot"),_[_0xe681("0xcc")][_0xe681("0x2ba")]=0,_.style.height=0,_[_0xe681("0xcc")][_0xe681("0x2e0")]=0,_[_0xe681("0xcc")][_0xe681("0x2f9")]=_0xe681("0x33e"),_[_0xe681("0xcc")][_0xe681("0x185")]=_0xe681("0x2d9"),_[_0xe681("0xcc")][_0xe681("0x46c")]=_0xe681("0x46d"),_[_0xe681("0xcc")][_0xe681("0x462")]=_0xe681("0x46e"),_[_0xe681("0xcc")][_0xe681("0x463")]=this.borderColor+_0xe681("0x46f"),_[_0xe681("0xcc")].left=this.w_/2-25+"px",_[_0xe681("0xcc")][_0xe681("0x283")]=_0xe681("0x470");var t=document[_0xe681("0x2")]("span");t[_0xe681("0xd2")]("class",_0xe681("0x471")),t.style[_0xe681("0x2ba")]=0,t[_0xe681("0xcc")].height=0,t[_0xe681("0xcc")][_0xe681("0x2e0")]=0,t.style[_0xe681("0x2f9")]="auto",t[_0xe681("0xcc")][_0xe681("0x185")]=_0xe681("0x2d9"),t.style[_0xe681("0x462")]=_0xe681("0x46e"),t[_0xe681("0xcc")][_0xe681("0x46c")]="20px",t[_0xe681("0xcc")][_0xe681("0x463")]=_0xe681("0x469")+this[_0xe681("0x2da")]+","+this.opacity+") transparent transparent",t[_0xe681("0xcc")][_0xe681("0x302")]=this.w_/2-25+"px",t.style.bottom=_0xe681("0x472");var i=document[_0xe681("0x2")](_0xe681("0x473"));i[_0xe681("0x4")]=_0xe681("0x474"),i[_0xe681("0x7d")]="",i.style[_0xe681("0x185")]=_0xe681("0x2d9"),i[_0xe681("0xcc")][_0xe681("0x281")]="10px",i[_0xe681("0xcc")][_0xe681("0x282")]=_0xe681("0x475"),i[_0xe681("0xcc")].background="0 0 #eee",i.style[_0xe681("0x2ba")]=_0xe681("0x476"),i.style[_0xe681("0x184")]=_0xe681("0x476"),i[_0xe681("0xcc")][_0xe681("0x46a")]=0,i.style[_0xe681("0x477")]=_0xe681("0x218"),i[_0xe681("0xcc")][_0xe681("0x45c")]="0",i[_0xe681("0x2f7")]=this.bindCloseClick_.bind(this),e[_0xe681("0x9")](i),e[_0xe681("0x9")](_),e.appendChild(t)}var n=x[_0xe681("0x12b")][_0xe681("0x12c")][_0xe681("0x0")](_0xe681("0x2ee"))[0];if(x.mapView.container_.insertBefore(e,n),e[_0xe681("0x478")](_0xe681("0x479"),this[_0xe681("0x45e")]),this.IsScreenCoord){var g=this[_0xe681("0x407")][_0xe681("0x12b")].container_[_0xe681("0x47a")]();this.screenCoord_.x-=g[_0xe681("0x302")],this[_0xe681("0x45b")].y-=g[_0xe681("0x282")],this[_0xe681("0x45a")]=this[_0xe681("0x47b")](this[_0xe681("0x45b")]),this[_0xe681("0x2fb")](e,this[_0xe681("0x45b")])}else this[_0xe681("0x45a")].z=this[_0xe681("0x47c")](this[_0xe681("0x45a")][_0xe681("0x190")],this[_0xe681("0x45a")].z),this[_0xe681("0x2fb")](e,this[_0xe681("0x47d")](this[_0xe681("0x45a")]));this.popDiv_=e,this.controlPositionListener();var a=this;a.options_[_0xe681("0x47e")]&&a.options_[_0xe681("0x47e")](a[_0xe681("0x278")][_0xe681("0x45f")])},getMapCoord_Z:function(x,e){return e=e?this[_0xe681("0x407")].getFloorHeight(x)+e:this[_0xe681("0x407")][_0xe681("0x1ab")](x)+this[_0xe681("0x407")][_0xe681("0x47f")]},getMapCoord_:function(x){if(_0xe681("0x24")!=(_0xe681("0xa")==typeof x?_0xe681("0xa"):t(x))||!x.x||!x.y||!x.fnum)return null;var e={x:x.x,y:x.y,z:this.getMapCoord_Z(x[_0xe681("0x190")],x.z)};return map.coordScreenToMap(e.x,e.y,e.z)},getScreenCoord_:function(x){return _0xe681("0x24")==(_0xe681("0xa")==typeof x?_0xe681("0xa"):t(x))&&x.x&&x.y&&x.z?this[_0xe681("0x407")][_0xe681("0x25b")](x.x,x.y,x.z):null},bindCloseClick_:function(){this[_0xe681("0x480")]()},close:function(){this.popDiv_&&(this[_0xe681("0x407")][_0xe681("0x12b")].container_[_0xe681("0x12d")](this[_0xe681("0x466")]),this.popDiv_=null,this[_0xe681("0x278")][_0xe681("0x481")]&&_0xe681("0x32")==typeof this[_0xe681("0x278")][_0xe681("0x481")]&&this.options_[_0xe681("0x481")](!0))},hide:function(){this[_0xe681("0x466")]&&(this.popDiv_[_0xe681("0xcc")].display="none")},show:function(){this[_0xe681("0x466")]&&(this[_0xe681("0x466")].style[_0xe681("0x2f1")]=_0xe681("0x2ff"))},toggle:function(){this[_0xe681("0x466")]&&("none"==this[_0xe681("0x466")][_0xe681("0xcc")][_0xe681("0x2f1")]?this.popDiv_[_0xe681("0xcc")][_0xe681("0x2f1")]=_0xe681("0x2ff"):this[_0xe681("0x466")][_0xe681("0xcc")][_0xe681("0x2f1")]=_0xe681("0x218"))},setPosition_:function(x,e){x&&e&&_0xe681("0x24")==(_0xe681("0xa")==typeof e?_0xe681("0xa"):t(e))&&e.x&&e.y&&(x[_0xe681("0xcc")][_0xe681("0x282")]=e.y-this.h_-35-this[_0xe681("0x455")]+"px",x[_0xe681("0xcc")][_0xe681("0x302")]=e.x-this.w_/2+2+"px")},controlPositionListener:function(){if(this[_0xe681("0x407")]){var x=this;x[_0xe681("0x2fb")](x[_0xe681("0x466")],x[_0xe681("0x47d")](x[_0xe681("0x45a")])),this[_0xe681("0x407")].on("update",function(){x[_0xe681("0x466")]&&x[_0xe681("0x2fb")](x[_0xe681("0x466")],x[_0xe681("0x47d")](x[_0xe681("0x45a")]))})}}}},function(x,e){function _(x,e){if(!(x instanceof e))throw new TypeError(_0xe681("0x77"))}function t(x,e){if(!x)throw new ReferenceError(_0xe681("0x36b"));return!e||_0xe681("0x24")!=typeof e&&_0xe681("0x32")!=typeof e?x:e}function i(x,e){if(_0xe681("0x32")!=typeof e&&null!==e)throw new TypeError(_0xe681("0x36c")+typeof e);x[_0xe681("0x20")]=Object[_0xe681("0xda")](e&&e[_0xe681("0x20")],{constructor:{value:x,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object[_0xe681("0x36d")]?Object[_0xe681("0x36d")](x,e):x[_0xe681("0x36e")]=e)}_0xe681("0x3d"),Object[_0xe681("0x22")](e,_0xe681("0x94"),{value:!0});var n=function(){function x(x,e){for(var _=0;_<e[_0xe681("0x25")];_++){var t=e[_];t[_0xe681("0x7c")]=t[_0xe681("0x7c")]||!1,t[_0xe681("0xc8")]=!0,_0xe681("0x7d")in t&&(t[_0xe681("0x7e")]=!0),Object[_0xe681("0x22")](x,t[_0xe681("0x7f")],t)}}return function(e,_,t){return _&&x(e[_0xe681("0x20")],_),t&&x(e,t),e}}(),g=function(x){function e(x){var i,n;_(this,e),i=n=t(this,(e[_0xe681("0x36e")]||Object[_0xe681("0x36f")](e))[_0xe681("0x1a")](this,esmap[_0xe681("0x1e0")][_0xe681("0x16a")],{},new(THREE[_0xe681("0x32f")]))),n.moveTo=function(x){this[_0xe681("0x17d")][_0xe681("0x34f")](x)},n[_0xe681("0x17d")].forceVisible_=n.o3d_.visible,n.opts_=x||{};var g={};return g[_0xe681("0x482")]=x[_0xe681("0x482")]||12,g[_0xe681("0x483")]=x[_0xe681("0x483")]||_0xe681("0x484"),g[_0xe681("0x485")]=x.strokecolor||_0xe681("0x465"),g[_0xe681("0x26a")]=x[_0xe681("0x26a")]||1,g[_0xe681("0x486")]=x[_0xe681("0x487")]||_0xe681("0x302"),g.imagesize=x[_0xe681("0x488")]||32,g[_0xe681("0x489")]=x[_0xe681("0x489")]||0,g[_0xe681("0x48a")]=x[_0xe681("0x48a")]||4,n[_0xe681("0x2a2")]=g,n[_0xe681("0x371")](),n}return i(e,x),n(e,[{key:_0xe681("0x371"),value:function(){var x=this;if(x[_0xe681("0x17d")]instanceof THREE.Object3D)var e=esmap[_0xe681("0x162")][_0xe681("0x163")];var _=e.mapScene,t=esmap[_0xe681("0x123")].Option;x.x_=t[_0xe681("0x372")](x.opts_,"x",e[_0xe681("0x27d")].x),x.y_=t[_0xe681("0x372")](x[_0xe681("0x373")],"y",e[_0xe681("0x27d")].y),x.z_=t.getValue(x.opts_,_0xe681("0x184"),6),x[_0xe681("0x377")]=t[_0xe681("0x372")](x[_0xe681("0x373")],"name",_0xe681("0x48b")),x[_0xe681("0x378")]=t[_0xe681("0x372")](x.opts_,"id",esmap[_0xe681("0x123")].id++),x.img_=t[_0xe681("0x372")](x[_0xe681("0x373")],_0xe681("0x200"),""),x[_0xe681("0x37e")]=t[_0xe681("0x372")](x[_0xe681("0x373")],_0xe681("0x27c"),1),x[_0xe681("0x37a")]=t.getValue(x[_0xe681("0x373")],_0xe681("0x37b"),!0),x[_0xe681("0x374")]=t[_0xe681("0x372")](x[_0xe681("0x373")],_0xe681("0x376"),90),x.showLevel_=t.getValue(x[_0xe681("0x373")],_0xe681("0x380"),18);var i=x.o3d_[_0xe681("0x395")];x[_0xe681("0x17d")]=new(esmap[_0xe681("0x383")])(e[_0xe681("0x411")],{oid:x[_0xe681("0x378")],vertex:[x.x_,x.y_],name:x[_0xe681("0x377")],spritify:x[_0xe681("0x37a")],image:x.img_,ShowLevel:x[_0xe681("0x37f")],scale:x[_0xe681("0x37e")]},x[_0xe681("0x2a2")]),x[_0xe681("0x17d")][_0xe681("0x395")]=!1,x[_0xe681("0x17d")][_0xe681("0x210")]=!1,x[_0xe681("0x17d")][_0xe681("0x17a")]=x,x[_0xe681("0x17d")][_0xe681("0x185")].set(-(x.x_+_[_0xe681("0x1af")]),x.z_,x.y_-_[_0xe681("0x1ad")]),setTimeout(function(){x[_0xe681("0x17d")]&&(x[_0xe681("0x17d")][_0xe681("0x395")]=i)},0)}},{key:_0xe681("0x40"),get:function(){if(this[_0xe681("0x373")]&&this[_0xe681("0x373")][_0xe681("0x40")])return this[_0xe681("0x373")][_0xe681("0x40")]},set:function(x){this.o3d_.setname(x),this[_0xe681("0x373")]=this.opts_||{},this[_0xe681("0x373")][_0xe681("0x40")]=x}},{key:"fontsize",get:function(){if(this[_0xe681("0x2a2")]&&this[_0xe681("0x2a2")].fontsize)return this[_0xe681("0x2a2")][_0xe681("0x482")]},set:function(x){this[_0xe681("0x17d")][_0xe681("0x48c")](x),this[_0xe681("0x2a2")]=this[_0xe681("0x2a2")]||{},this[_0xe681("0x2a2")][_0xe681("0x482")]=x}},{key:"fillcolor",get:function(){if(this[_0xe681("0x2a2")]&&this[_0xe681("0x2a2")].fillcolor)return this[_0xe681("0x2a2")].fillcolor},set:function(x){this.o3d_[_0xe681("0x48d")](x),this[_0xe681("0x2a2")]=this[_0xe681("0x2a2")]||{},this[_0xe681("0x2a2")][_0xe681("0x483")]=x}},{key:_0xe681("0x485"),get:function(){if(this[_0xe681("0x2a2")]&&this[_0xe681("0x2a2")][_0xe681("0x485")])return this[_0xe681("0x2a2")].strokecolor},set:function(x){this[_0xe681("0x17d")][_0xe681("0x48e")](x),this.style_=this[_0xe681("0x2a2")]||{},this[_0xe681("0x2a2")].strokecolor=x}},{key:_0xe681("0xcc"),get:function(){return this[_0xe681("0x2a2")]}},{key:_0xe681("0x210"),get:function(){return this[_0xe681("0x395")]},set:function(x){this[_0xe681("0x17d")].forceVisible_=x,this[_0xe681("0x17d")][_0xe681("0x210")]=x}},{key:"ID",get:function(){return this[_0xe681("0x378")]}},{key:"x",get:function(){return this.x_},set:function(x){this.x_=x}},{key:"y",get:function(){return this.y_},set:function(x){this.y_=x}}]),e}(esmap[_0xe681("0x390")]);e[_0xe681("0x9d")]=g},function(x,e){function _(x,e){if(!(x instanceof e))throw new TypeError(_0xe681("0x77"))}_0xe681("0x3d"),Object[_0xe681("0x22")](e,_0xe681("0x94"),{value:!0});var t=function(){function x(x,e){for(var _=0;_<e[_0xe681("0x25")];_++){var t=e[_];t[_0xe681("0x7c")]=t[_0xe681("0x7c")]||!1,t[_0xe681("0xc8")]=!0,_0xe681("0x7d")in t&&(t[_0xe681("0x7e")]=!0),Object[_0xe681("0x22")](x,t[_0xe681("0x7f")],t)}}return function(e,_,t){return _&&x(e.prototype,_),t&&x(e,t),e}}(),i=function(){function x(){_(this,x)}return t(x,null,[{key:_0xe681("0x131"),value:function(x){var e={};return x.on=function(_,t){return(e[_]=e[_]||[]).push(t),x},x[_0xe681("0x48f")]=function(e,_){function t(){_[_0xe681("0x37")](x[_0xe681("0x108")](e,t),arguments)}return t.h=_,x.on(e,t)},x[_0xe681("0x108")]=function(_,t){for(var i=e[_],n=0;t&&i&&i[n];n++)i[n]!=t&&i[n].h!=t||i[_0xe681("0x2b")](n--,1);return n||delete e[_],x},x[_0xe681("0x150")]=function(_){for(var t=e[_],i=0;t&&t[i];)t[i++][_0xe681("0x37")](x,t[_0xe681("0x2e")][_0xe681("0x1a")](arguments,1));return x},x}}]),x}();e[_0xe681("0x9d")]=i},function(x,e){_0xe681("0x3d"),THREE[_0xe681("0x35a")]={uniforms:{tDiffuse:{value:null},resolution:{value:new(THREE[_0xe681("0x44a")])(1/1024,1/512)}},vertexShader:[_0xe681("0x490"),"gl_Position = projectionMatrix * modelViewMatrix * vec4( position, 1.0 );","}"][_0xe681("0x105")]("\n"),fragmentShader:[_0xe681("0x491"),_0xe681("0x492"),_0xe681("0x493"),_0xe681("0x494"),_0xe681("0x495"),_0xe681("0x490"),_0xe681("0x496"),_0xe681("0x497"),_0xe681("0x498"),_0xe681("0x499"),_0xe681("0x49a"),_0xe681("0x49b"),"vec3 luma = vec3( 0.299, 0.587, 0.114 );",_0xe681("0x49c"),"float lumaNE = dot( rgbNE, luma );","float lumaSW = dot( rgbSW, luma );",_0xe681("0x49d"),"float lumaM  = dot( rgbM,  luma );",_0xe681("0x49e"),_0xe681("0x49f"),_0xe681("0x4a0"),"dir.x = -((lumaNW + lumaNE) - (lumaSW + lumaSE));",_0xe681("0x4a1"),_0xe681("0x4a2"),_0xe681("0x4a3"),"dir = min( vec2( FXAA_SPAN_MAX,  FXAA_SPAN_MAX),",_0xe681("0x4a4"),_0xe681("0x4a5"),_0xe681("0x4a6"),_0xe681("0x4a7"),_0xe681("0x4a8"),_0xe681("0x4a9"),_0xe681("0x4aa"),_0xe681("0x4ab"),_0xe681("0x4ac"),_0xe681("0x4ad"),_0xe681("0x4ae"),_0xe681("0x4af"),_0xe681("0x4b0"),"}","}"].join("\n")}},function(x,e){function _(x,e){if(!(x instanceof e))throw new TypeError(_0xe681("0x77"))}Object[_0xe681("0x22")](e,_0xe681("0x94"),{value:!0});var t=function(){function x(x,e){for(var _=0;_<e[_0xe681("0x25")];_++){var t=e[_];t[_0xe681("0x7c")]=t[_0xe681("0x7c")]||!1,t.configurable=!0,_0xe681("0x7d")in t&&(t[_0xe681("0x7e")]=!0),Object[_0xe681("0x22")](x,t[_0xe681("0x7f")],t)}}return function(e,_,t){return _&&x(e.prototype,_),t&&x(e,t),e}}(),i=function(){function x(){_(this,x),this[_0xe681("0x4b1")],this[_0xe681("0x4b2")]}return t(x,[{key:_0xe681("0x16"),value:function(x){if(this[_0xe681("0x4b1")]=[],this.holes_=[],x.indexOf(_0xe681("0x4b3"))>=0)for(var e=x[_0xe681("0x71")](n[_0xe681("0x4b4")],x[_0xe681("0x25")]-3)[_0xe681("0x23a")](/\),\(/),_=0;_<e.length;_++){var t=e[_].split(/,/);if(0==_)for(var i=0;i<t[_0xe681("0x25")];i++){var g=t[i][_0xe681("0x23a")](" "),a={x:-parseFloat(g[0]),y:parseFloat(g[1])};this[_0xe681("0x4b1")][_0xe681("0x1e")](a)}else{for(var r=[],i=0;i<t[_0xe681("0x25")];i++){var g=t[i][_0xe681("0x23a")](" "),a={x:-parseFloat(g[0]),y:parseFloat(g[1])};r.push(a)}this[_0xe681("0x4b2")].push(r)}}return this}},{key:_0xe681("0x4b5"),value:function(){return null!=this[_0xe681("0x4b2")]&&this[_0xe681("0x4b2")][_0xe681("0x25")]>0}}]),x}(),n=function x(){_(this,x)};n[_0xe681("0x4b4")]=_0xe681("0x4b3").length,n[_0xe681("0x4b6")]=i,e[_0xe681("0x9d")]=n},function(x,e){function _(x,e){if(!(x instanceof e))throw new TypeError(_0xe681("0x77"))}Object[_0xe681("0x22")](e,_0xe681("0x94"),{value:!0});var t=function(){function x(x,e){for(var _=0;_<e[_0xe681("0x25")];_++){var t=e[_];t[_0xe681("0x7c")]=t[_0xe681("0x7c")]||!1,t[_0xe681("0xc8")]=!0,_0xe681("0x7d")in t&&(t[_0xe681("0x7e")]=!0),Object.defineProperty(x,t[_0xe681("0x7f")],t)}}return function(e,_,t){return _&&x(e[_0xe681("0x20")],_),t&&x(e,t),e}}(),i=function(){function x(e,t){_(this,x),this.map_=e,this[_0xe681("0x4b7")](t),this[_0xe681("0x4b8")]={}}return t(x,[{key:"getDeviceWH",value:function(x){var e=this[_0xe681("0x407")][_0xe681("0x21a")]-this[_0xe681("0x407")][_0xe681("0x21b")],_=this[_0xe681("0x407")][_0xe681("0x271")]-this[_0xe681("0x407")][_0xe681("0x21c")],t={w:Math[_0xe681("0x10c")](e),h:Math.round(_)},i=esmap[_0xe681("0x197")][_0xe681("0x4b9")]();t.w=t.w*i[0]/15,t.h=t.h*i[1]/15;var n=1,g=x.maxSize||8192;return(e>500||_>500)&&g>=8192&&(g=2048),(t.w>=g||t.h>=g)&&(t.w>=t.h?(n=t.h/t.w,t.w=g,t.h=g*n):(n=t.w/t.h,t.h=g,t.w=g*n)),t}},{key:_0xe681("0x4ba"),value:function(x,e){var _=(x-this[_0xe681("0x407")][_0xe681("0x21b")])/(this.map_[_0xe681("0x21a")]-this[_0xe681("0x407")].minX),t=(e-this[_0xe681("0x407")].minY)/(this[_0xe681("0x407")][_0xe681("0x271")]-this.map_.minY),i={x:1-_,y:1-t};return i.x=i.x*this[_0xe681("0x12e")][_0xe681("0x2ba")],i.y=i.y*this[_0xe681("0x12e")].height,i}},{key:"config",value:function(x){var e=this,_=e[_0xe681("0x4bb")](x),t=_.w,i=_.h;e[_0xe681("0x12e")]={width:t,height:i,opacity:x.opacity?255*x[_0xe681("0x297")]:25500,radius:x[_0xe681("0x44d")]?x[_0xe681("0x44d")]:30,bshadow:x[_0xe681("0x44d")]?x.radius/20:1.5,maxSize:x.maxSize||8192,boundVal:15e3,shadowBlur:15,points:{max:x.max?x[_0xe681("0x4bc")]:100,data:[]},gradient:x[_0xe681("0x4bd")]?x[_0xe681("0x4bd")]:{.45:_0xe681("0x4be"),.55:_0xe681("0x4bf"),.65:"rgb(0,255,0)",.95:_0xe681("0x4c0"),1:_0xe681("0x4c1")}};var n=document.createElement(_0xe681("0x2ee")),g=n[_0xe681("0x4c2")]("2d");n[_0xe681("0x2ba")]=t,n[_0xe681("0x184")]=i,e[_0xe681("0x12e")].ctx=g,e[_0xe681("0x12e")].canvas=n}},{key:"renderShadow",value:function(x,e,_,t){var i=this,n=i[_0xe681("0x12e")][_0xe681("0x109")],g=(i[_0xe681("0x12e")][_0xe681("0x44d")],i[_0xe681("0x12e")][_0xe681("0x4c3")]),a=parseFloat(_/i[_0xe681("0x12e")][_0xe681("0x18c")][_0xe681("0x4bc")],10);n[_0xe681("0x4c4")]=_0xe681("0x4c5")+a+")",n[_0xe681("0x4c6")]=g,n[_0xe681("0x4c7")]=g,n[_0xe681("0x4c8")]=i[_0xe681("0x12e")][_0xe681("0x4c8")],n.beginPath(),n[_0xe681("0x4c9")](x-g,e-g,i[_0xe681("0x12e")][_0xe681("0x44d")],0,2*Math.PI,!0),n[_0xe681("0x351")](),n[_0xe681("0x4ca")]()}},{key:_0xe681("0x4cb"),value:function(){for(var x=this,e=x[_0xe681("0x12e")][_0xe681("0x2ba")],_=x[_0xe681("0x12e")][_0xe681("0x184")],t=x[_0xe681("0x12e")][_0xe681("0x109")],i=t.getImageData(0,0,e,_),n=i[_0xe681("0x96")],g=n.length,a=x[_0xe681("0x4cc")](),r=x.options[_0xe681("0x297")],A=3;A<g;A+=4){var C=n[A],I=4*C;if(I){var o=C<r?C:r;n[A-3]=a[I],n[A-2]=a[I+1],n[A-1]=a[I+2],n[A]=o}}i[_0xe681("0x96")][_0xe681("0xfc")](n),t[_0xe681("0x4cd")](i,0,0)}},{key:_0xe681("0x4ce"),value:function(x){var e=this,_=e[_0xe681("0x12e")][_0xe681("0x2ee")],t=new(THREE[_0xe681("0x3e4")])(_),i=e[_0xe681("0x407")].getFloor(x),n=!1;x!=e[_0xe681("0x407")][_0xe681("0x25a")]&&e[_0xe681("0x407")][_0xe681("0x12e")].focusAlphaMode&&(n=!0);for(var g=i[_0xe681("0x3aa")]("floorBase"),a=0;a<g.length;a++){var r=g[a],A=null,C=null;r.material[_0xe681("0x194")]?(C=r[_0xe681("0x17e")][_0xe681("0x194")][0],A=r.material[_0xe681("0x194")][1]):(C=r[_0xe681("0x17e")],A=C[_0xe681("0x1cc")]()),r[_0xe681("0x4cf")]&&(this.disposeHeatMap(x),C[_0xe681("0xbd")]&&(C[_0xe681("0xbd")][_0xe681("0x24c")](),C.map=void 0)),r[_0xe681("0x4cf")]=!0;var I=C[_0xe681("0x4d0")];C[_0xe681("0xbd")]&&(e[_0xe681("0x4b8")][I]={},e[_0xe681("0x4b8")][I][_0xe681("0xbd")]=C[_0xe681("0xbd")],C[_0xe681("0xbd")]&&C.map[_0xe681("0x24c")](),C.map=void 0),C[_0xe681("0xbd")]=t,C[_0xe681("0x19c")].set(16777215),C.transparent=!!n,C[_0xe681("0x4d1")]=!0,C[_0xe681("0xbd")][_0xe681("0x199")]=!0,C[_0xe681("0x199")]=!0,r[_0xe681("0x17e")]=new(THREE[_0xe681("0x1a4")])([C,A])}var o=i[_0xe681("0x3aa")]([_0xe681("0x37d"),_0xe681("0x4d2")]);o[_0xe681("0xc3")](function(x){var e=x[_0xe681("0x17a")][_0xe681("0x3ff")][0][_0xe681("0x396")][_0xe681("0x205")];if(e<9900||e>9999)if(x[_0xe681("0x17e")]&&x[_0xe681("0x17e")][_0xe681("0x194")])for(var _=x[_0xe681("0x17e")][_0xe681("0x194")].length,i=0,g=3;i<_;){var a=x[_0xe681("0x17e")][_0xe681("0x194")][i];a[_0xe681("0xbd")]?(a.map.dispose(),a.map=void 0):a[_0xe681("0x4d3")]=a[_0xe681("0x19c")][_0xe681("0x1cc")](),a[_0xe681("0xbd")]=t,a.color.set(16777215),a[_0xe681("0x4d4")]=!!n,a[_0xe681("0x4d1")]=!0,a[_0xe681("0xbd")][_0xe681("0x199")]=!0,a[_0xe681("0x199")]=!0,g=0==i?3:2,i+=g}else{var r=x.material,A=r[_0xe681("0x1cc")]();r[_0xe681("0xbd")]?(r[_0xe681("0xbd")][_0xe681("0x24c")](),r[_0xe681("0xbd")]=void 0):r[_0xe681("0x4d3")]=r[_0xe681("0x19c")][_0xe681("0x1cc")](),r.map=t,r.color.set(16777215),r[_0xe681("0x4d4")]=!!n,r[_0xe681("0x4d1")]=!0,r.map.needsUpdate=!0,r.needsUpdate=!0,x.material=new(THREE[_0xe681("0x1a4")])([r,A])}})}},{key:_0xe681("0x3b2"),value:function(x){var e=this;if(x){for(var _=e[_0xe681("0x407")][_0xe681("0x19d")](x),t=_.getObjectsByAlias(_0xe681("0x4d5")),i=0;i<t[_0xe681("0x25")];i++){var n=t[i];if(n[_0xe681("0x4cf")]){n._hasHeatMap=null;var g=n[_0xe681("0x17e")][_0xe681("0x194")][0],a=n[_0xe681("0x17e")][_0xe681("0x194")][1];g.map&&g[_0xe681("0xbd")][_0xe681("0x24c")](),g[_0xe681("0xbd")]=void 0;var r=g[_0xe681("0x4d0")];e.matInfos[r]?e[_0xe681("0x4b8")][r][_0xe681("0xbd")]?(g[_0xe681("0xbd")]=e[_0xe681("0x4b8")][r].map,g[_0xe681("0xbd")].needsUpdate=!0,g[_0xe681("0x4d4")]=!0,g[_0xe681("0x199")]=!0):(g&&g.dispose(),g=void 0,n[_0xe681("0x17e")]=a,n[_0xe681("0x17e")][_0xe681("0x4d4")]=!0,n[_0xe681("0x17e")][_0xe681("0x199")]=!0):n[_0xe681("0x17e")]=a;var A=_[_0xe681("0x3aa")]([_0xe681("0x37d"),_0xe681("0x4d2")]);A.forEach(function(x){var e=x[_0xe681("0x17a")][_0xe681("0x3ff")][0][_0xe681("0x396")][_0xe681("0x205")];if(e<9900||e>9999)if(x[_0xe681("0x17e")]&&x[_0xe681("0x17e")][_0xe681("0x194")])for(var _=x[_0xe681("0x17e")][_0xe681("0x194")][_0xe681("0x25")],t=0,i=3;t<_;){var n=x.material[_0xe681("0x194")][t];n[_0xe681("0xbd")]&&n[_0xe681("0xbd")][_0xe681("0x24c")](),n.map=void 0,n[_0xe681("0x19c")][_0xe681("0x233")](x.material[_0xe681("0x194")][t][_0xe681("0x4d3")]),n[_0xe681("0x4d4")]=!0,n[_0xe681("0x199")]=!0,i=0==t?3:2,t+=i}else{var n=x[_0xe681("0x17e")];n.map&&(n[_0xe681("0xbd")][_0xe681("0x24c")](),n[_0xe681("0xbd")]=void 0),n[_0xe681("0x19c")][_0xe681("0x233")](n[_0xe681("0x4d3")]),n[_0xe681("0x4d4")]=!0,n.needsUpdate=!0}})}}e[_0xe681("0x4b8")]={}}}},{key:_0xe681("0x4cc"),value:function(){var x=document[_0xe681("0x2")](_0xe681("0x2ee")),e=x[_0xe681("0x4c2")]("2d");x[_0xe681("0x2ba")]=1,x.height=256;var _=this,t=_[_0xe681("0x12e")][_0xe681("0x4bd")],i=e[_0xe681("0x4d6")](0,0,1,256);for(var n in t)i[_0xe681("0x4d7")](n,t[n]);return e[_0xe681("0x4d8")]=i,e.fillRect(0,0,1,256),e[_0xe681("0x4d9")](0,0,1,256).data}},{key:"cachePoint",value:function(x,e,_){var t=this,i=t[_0xe681("0x12e")][_0xe681("0x18c")],n=i[_0xe681("0x96")];_>i[_0xe681("0x4bc")]&&(i.max=_),n[_0xe681("0x1e")]([x,e,_])}},{key:_0xe681("0x4da"),value:function(){this.options[_0xe681("0x18c")][_0xe681("0x96")]=[],this[_0xe681("0x173")]()}},{key:"addPoint",value:function(x,e,_){if(x&&e&&_){var t=this.getPixXY(x,e);if(t){var i=this;i[_0xe681("0x4db")](t.x,t.y,_),i[_0xe681("0x4cb")]()}}}},{key:_0xe681("0x173"),value:function(){var x=this[_0xe681("0x12e")][_0xe681("0x109")];x[_0xe681("0x4dc")](0,0,this[_0xe681("0x12e")][_0xe681("0x2ba")],this[_0xe681("0x12e")][_0xe681("0x184")])}},{key:_0xe681("0x4dd"),value:function(x){var e=this;e[_0xe681("0x173")]();for(var _=x.length,t=0;t<_;t++){var i=x[t].value;if(i){var n=this[_0xe681("0x4ba")](x[t].x,x[t].y);if(!n)return!0;e[_0xe681("0x4db")](n.x,n.y,i,!1)}}e[_0xe681("0x4cb")]()}},{key:_0xe681("0x4de"),value:function(x){var e=this,_=e[_0xe681("0x12e")][_0xe681("0x2ba")],t=e[_0xe681("0x12e")].height,i=e[_0xe681("0x12e")][_0xe681("0x18c")][_0xe681("0x4bc")];e[_0xe681("0x173")]();for(var n=0;n<x;n++){var g=Math[_0xe681("0x51")](Math[_0xe681("0x4df")]()*_+1),a=Math[_0xe681("0x51")](Math[_0xe681("0x4df")]()*t+1),r=Math[_0xe681("0x51")](Math[_0xe681("0x4df")]()*i+1);e[_0xe681("0x4db")](g,a,r)}e[_0xe681("0x4cb")]()}}]),x}();e[_0xe681("0x9d")]=i},function(x,e){function _(x,e){if(!(x instanceof e))throw new TypeError("Cannot call a class as a function")}_0xe681("0x3d"),Object[_0xe681("0x22")](e,_0xe681("0x94"),{value:!0});var t=function(){function x(x,e){for(var _=0;_<e.length;_++){var t=e[_];t[_0xe681("0x7c")]=t[_0xe681("0x7c")]||!1,t[_0xe681("0xc8")]=!0,"value"in t&&(t[_0xe681("0x7e")]=!0),Object[_0xe681("0x22")](x,t[_0xe681("0x7f")],t)}}return function(e,_,t){return _&&x(e.prototype,_),t&&x(e,t),e}}(),i=function(){function x(){_(this,x),this[_0xe681("0x15d")]=new THREE.JSONLoader}return t(x,[{key:_0xe681("0x4e0"),value:function(x,e){this[_0xe681("0x15d")][_0xe681("0x4e0")](x,function(x,_){var t;if(t=_[_0xe681("0x25")]>1?new(THREE[_0xe681("0x1a4")])(_):_[0],t[_0xe681("0x194")])for(var i=0;i<t[_0xe681("0x194")][_0xe681("0x25")];i++)1!=t[_0xe681("0x194")][i][_0xe681("0x297")]&&(t.materials[i][_0xe681("0x3c6")]=!1);var n=new THREE.Mesh(x,t);e&&e(n)})}},{key:_0xe681("0x4e1"),value:function(x){this[_0xe681("0x15d")][_0xe681("0x4e1")](x)}}]),x}();e.default=i},function(x,e){function _(x,e){if(!(x instanceof e))throw new TypeError(_0xe681("0x77"))}Object[_0xe681("0x22")](e,"__esModule",{value:!0});var t=function(){function x(x,e){for(var _=0;_<e[_0xe681("0x25")];_++){var t=e[_];t[_0xe681("0x7c")]=t[_0xe681("0x7c")]||!1,
t[_0xe681("0xc8")]=!0,_0xe681("0x7d")in t&&(t[_0xe681("0x7e")]=!0),Object[_0xe681("0x22")](x,t[_0xe681("0x7f")],t)}}return function(e,_,t){return _&&x(e.prototype,_),t&&x(e,t),e}}(),i=function(){function x(){_(this,x),this[_0xe681("0x4e2")]}return t(x,[{key:_0xe681("0x173"),value:function(){this[_0xe681("0x4e2")]=[]}},{key:_0xe681("0x1e"),value:function(x,e){if(0==this[_0xe681("0x4e2")][_0xe681("0x25")])return this[_0xe681("0x4e2")][_0xe681("0x1e")](e),!1;for(var _ in this[_0xe681("0x4e2")]){var t=this[_0xe681("0x4e2")][_];if(this[_0xe681("0x4e3")](t,e))return!0}return this[_0xe681("0x4e2")][_0xe681("0x1e")](e),!1}},{key:_0xe681("0x4e3"),value:function(x,e){return x.x<e.x+e.w&&x.x+x.w>e.x&&x.y<e.y+e.h&&x.h+x.y>e.y}}]),x}();e.default=i},function(x,e){function _(x,e){if(!(x instanceof e))throw new TypeError(_0xe681("0x77"))}Object[_0xe681("0x22")](e,_0xe681("0x94"),{value:!0});var t=function(){function x(x,e){for(var _=0;_<e[_0xe681("0x25")];_++){var t=e[_];t.enumerable=t[_0xe681("0x7c")]||!1,t[_0xe681("0xc8")]=!0,_0xe681("0x7d")in t&&(t[_0xe681("0x7e")]=!0),Object[_0xe681("0x22")](x,t[_0xe681("0x7f")],t)}}return function(e,_,t){return _&&x(e[_0xe681("0x20")],_),t&&x(e,t),e}}(),i=function(){function x(e,t,i){_(this,x),this.options_=i,this[_0xe681("0x279")]=null,this.spritePt_=null,this.materialPt_=null,this[_0xe681("0x4e4")]=null,this[_0xe681("0x426")]=e,this.sceneOrtho_=t,this.w_=Math[_0xe681("0x4e5")](i.compassSize,128),this.h_=Math.min(i[_0xe681("0x27b")],128)}return t(x,[{key:"updateHUD",value:function(x,e,_){if(null!=this[_0xe681("0x279")]&&null!=this[_0xe681("0x27a")]){var t=x/2,i=e/2,n=_?_:this[_0xe681("0x278")][_0xe681("0x277")];this[_0xe681("0x279")][_0xe681("0x185")].set(-t+this.w_/2+n[0],i-this.h_/2-n[1],.5),this[_0xe681("0x27a")][_0xe681("0x185")][_0xe681("0xfc")](-t+this.w_/2+n[0],i-this.h_/2-n[1],1)}}},{key:_0xe681("0x2aa"),value:function(x){null!=this[_0xe681("0x4e4")]&&(this[_0xe681("0x4e6")][_0xe681("0x38e")]=Math.PI+x)}},{key:_0xe681("0x132"),value:function(){if(null==this.spriteBg_&&null==this[_0xe681("0x27a")]){var x=document[_0xe681("0x2")](_0xe681("0x42b"));x[_0xe681("0x7")]="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAEAAAABACAYAAACqaXHeAAAAGXRFWHRTb2Z0d2FyZQBBZG9iZSBJbWFnZVJlYWR5ccllPAAAAyZpVFh0WE1MOmNvbS5hZG9iZS54bXAAAAAAADw/eHBhY2tldCBiZWdpbj0i77u/IiBpZD0iVzVNME1wQ2VoaUh6cmVTek5UY3prYzlkIj8+IDx4OnhtcG1ldGEgeG1sbnM6eD0iYWRvYmU6bnM6bWV0YS8iIHg6eG1wdGs9IkFkb2JlIFhNUCBDb3JlIDUuNi1jMTM4IDc5LjE1OTgyNCwgMjAxNi8wOS8xNC0wMTowOTowMSAgICAgICAgIj4gPHJkZjpSREYgeG1sbnM6cmRmPSJodHRwOi8vd3d3LnczLm9yZy8xOTk5LzAyLzIyLXJkZi1zeW50YXgtbnMjIj4gPHJkZjpEZXNjcmlwdGlvbiByZGY6YWJvdXQ9IiIgeG1sbnM6eG1wPSJodHRwOi8vbnMuYWRvYmUuY29tL3hhcC8xLjAvIiB4bWxuczp4bXBNTT0iaHR0cDovL25zLmFkb2JlLmNvbS94YXAvMS4wL21tLyIgeG1sbnM6c3RSZWY9Imh0dHA6Ly9ucy5hZG9iZS5jb20veGFwLzEuMC9zVHlwZS9SZXNvdXJjZVJlZiMiIHhtcDpDcmVhdG9yVG9vbD0iQWRvYmUgUGhvdG9zaG9wIENDIDIwMTcgKFdpbmRvd3MpIiB4bXBNTTpJbnN0YW5jZUlEPSJ4bXAuaWlkOjRCMjc1MTQ0M0NCMzExRTg4NzZCRDZBQ0I1QjlCOTk3IiB4bXBNTTpEb2N1bWVudElEPSJ4bXAuZGlkOjRCMjc1MTQ1M0NCMzExRTg4NzZCRDZBQ0I1QjlCOTk3Ij4gPHhtcE1NOkRlcml2ZWRGcm9tIHN0UmVmOmluc3RhbmNlSUQ9InhtcC5paWQ6NEIyNzUxNDIzQ0IzMTFFODg3NkJENkFDQjVCOUI5OTciIHN0UmVmOmRvY3VtZW50SUQ9InhtcC5kaWQ6NEIyNzUxNDMzQ0IzMTFFODg3NkJENkFDQjVCOUI5OTciLz4gPC9yZGY6RGVzY3JpcHRpb24+IDwvcmRmOlJERj4gPC94OnhtcG1ldGE+IDw/eHBhY2tldCBlbmQ9InIiPz4Bj/RUAAATkElEQVR42pRbT2xex3Gf/fiJ/yKKlEhbov5YduvGdgoURe1DhSY9G+3Bl7aH/IFdo4kLBIiLJI2AXpL0UrR2CiSXQmgQJSjqQ3Qo2qBteisQ2G6BKocAjmPFbizHEmWLIk3RIinK30xmdmdmZ9/7KMkf8fje27dv3+7s7sxvfjubfvBvPwBKAAmI/+TMN/wjItDLnCoPk93zNSWCRPoMLK+/kEtL5b1jnPEUnx/h5w/zex/l1COcZZ6PuZyLYJMzbvDlFc5zgfP+jK9f5VJf5jyXktYnn5PViGtMep30ebJva53kGZUM3pxEEH9DAsylkjYME5kIytessZKCoY1UPkGcmFKyG3v+KB+fZCH8Aac/TF4RynkoCCrfJ5gTYfCD45zwmKVrYT/jq//g8wsIdF4yJxVwrUfJS9YIvbc6Nv9NalqHYS1A5UredyU9QSgIXKr1PlnDpTef4es/5cSPQeiFIsQUGlX7KEGT3Py0Dg/zWYT4Rb79Kaec5fMZvt/0V+q/0D9VzLX8IHj9+gBBe4XKWe6JyGVG/qwUKqMAqX6TUxaQ6Kuc500eDc9x1o8VIaNLPN8jad+g/4fQ5vJ5anox/8morH3IZdNzXNSbfP9VTl+wukH4lrchlkkUxo2NRIIB5AaVB6hCMIHEwmWogzZMC+CBQE/x+eec8DVEOOQfaRqdL0rZWKSHWK5xVA4pmxC98bXyWL6X82taqY1862vl2/QUl5hQOw+BfJTrXelYKVO+Ecvhi0GdS1Z5lX0jwXCNuWIPcoE/4sLO8rEkhZp0iWqD5Q8JvGEYe5yPG1s38mEVovweeuPzGWMdSBvgxxKfzvLxI37w666HYv5Oe6qAizCGRJ2J1/1RUP8l6x/z+dt8c6B5s1cMNY3tZ2PVv7mZr2ZnZ6tC2PPNoFL6Vf49Pn7MT/6Mj3PRGsUyZDykTqUH1JFWK73aq6Kr+fw8H9/n4wBBJ5/n3yO99wzg/fffz8cd37u740CuG4DUMXWf90dGOYZA0QZU5dT5TfIj0b6f7Ak29bt4jEIvtrpTuDTeMQeMswDjy7r9iIUv8TvL/I5Yo907VXeIjiayXhv3uUk+/pWPx3sVTKoTYexI7c2k9p5ga2urDE1ULBFAFZF1yZjSvJppbNOodNQhPp6IQhgnjDoCaGzVJc93uo3vZv/QvcQ/abw03K6zHgi4YW9R7vW8l/dxrftnbvdGHQFdhVd+f8PHp+486nr4Iuq0zk07/O16ZmZmXLY9vpb2+FDvW1L3S3yc3qsstwIZOTVTgP6Ix/jpfo0q7KwYvFMRClq3gZK1/Bs3blQB8PXS0qIOeYgOh/op4TsByHRhuYtFoZ9i2q9w3v/jl89VWJ9aHZCiH4C5Zb/GKd92zRlgZLnEgL0NsKTOlDBBYRlUuSWkgm4FsMXXeTZwud4JJlOx+wqj3UHTshzGk2lZqyYFc5oT/5HrcZ5v/r84UeQO4DADi1SkRgWzS47v8dW8VSYrx1w51Xnq2KSufVbpotYkFeOpTlSpqJQ54hzb29suALkmHBWvzfwEF0QBP+6daF2Ko4bVxIgE5X2k6MCaNp3nenyPE36fzK3EMtoGBkPRbTE+yfcfL4gLFfcX1IQRq1OBtKhQuiA4yorNkBYSVuSmcFbStre2XQGaFdja3nE8UASIjtYolG9p0OAWbPIY7DUorvX4OCc/RY4HSvl5BPhwI1jg09+1/lTHFbQp0czVOL2p43U1U9q1ft8q3IDp6ameIdhLz1fdNT4zxbpVbPq3XIV/4Vffs7QBWk8VqTzLArkHK+ZXJ4XqNVAYDYrNod6j4/gWt9sokVET57/9JK2+g+03Qhk9fwApjEAM76KmhzIJ7+HrZ33Uiy9QtF+Wzn6e/19IhE4plAlfFFCZz8khZRWuskUihFT4BASdpxCBkipRfh7nf6MHzON0pwWcpSKlpEjNT3LdlUJvp8bd9X7XeqljxG2Evxc+QYb8ENHHyJ9zjkN1SKXArtRh14CeVCEeNewMjXWOsqw5/87OzlgBjEYYTN0Yt4raM0Ur0DhRfe8pPJE2PsPn5yVxqCZMRPs5CPa8mKsKjCjqBVUYpJrezVKEo/5qavgZafxoNBoDlYtgpqemgxEtTFIKzaumPzWCjw6rI4Ae/tC6JHiGn35DbgoOIDrFN7/ROCVOJqJ/wGm91h4WXNBRgAZeSEcJ0giuXbsGG+9twF4u+FtvvQXz8/OwuLgEE4OBu68GqLJJdSlQoOZSwAOVAiOdmgV/qKkv/suDfHWKR9tLBQeIj9/1XJTHc4k6cUoNAVxJ1YD6GvBNsL6+Du+++y588MEHwTtMsG/fvmwCZUTYCJBjdXUVDh8+DAcPHgSqkKqn7aMwvP2V3dWGp9ayVGL3T/ibLw2xgInHtavqUHJXzyGZo7+CRYJuSO1sNbFJ2SuXV7IAssnhXj3EjTqwMM9DfQYGKkl5f5tN48bGdc67Brdu3YK33347W4ajR5e5ToNCqaWWtk+xcRGE2SShODKoQavS5pR1ANJxvnnY+pCC9gRHXZXWSnWA9Hxd6tjgy5cve+P3798Px44dg+FwH0CgR62w6enpfCwuHoJLly5lB2ltbS3X5+jRoz6tovNGHcPfVYI9pUgNyHiITyfEGfrdyMOaqcpNTVTNmgowTAql0ccwGPxbX1vPcz6r3UOHYHl5ucxjxKq1MDonRRATEwM4ceIErKysZAFIGVNTU1wGT4cwrFPDoZkW9BZAMIhhEaXqDXXgTrEZxN8ey8YnwwfQ8vuN+TMlV5WmICGZ0ytXVnLvSc/LfCanojtkPVGnJ0uBhw8fgd2bN2GTR8KVK1dg7sAcK8aJihF6/jfu2fe9xZGKJH9rwD3ySFaEaLTxCEZjMXiL9x35BcRmfsBVVmIyj+W3fGTZ8T42KE7yjhoUF6lrkf6R5fKulHX13dU+O4yG/UcBbUbUiH6mMaiSv/uITIGTpMs9iSrN1cgwBdbINWtfyiLUmzd3YI2HrTRYtPjEcKKsAzSjhcYDqTCEy3SYyGZRpsHa2jWYm5vj6TAJaZDG4P86betUT77AssfvpOCA5Tx8DGb6FEhhaUnnnWGArOEpN1YQ3M4Wn3e2swmLXt78gfnSU6nqlg7/3RCy0ECeorhFAFevXuVv3YQLF17LlkSU5cwMH9MzMDM7m3VEqquktTT7XjDn0C6gLYkOmIPQuz24qdc7XAFprB3dxvbIRP7oJPeWLXC44kxhEdUUSopLYuBr1ELQSOOc2tapZHR6/JZQavHIQqk2PV9jWHZTWe0XKDzXMCy5Z29mlzU2+I4LKF0qeXKyVJjMXmDD5HSX3mMfNFMOylTY3d297ffuJJRZHSmgI7vwAmmuOEOpIKekbm1BZlgUlx4fVgBSho+QFJ0zAzB1NAQWLAM4Ra8+h5uy7vKXe9zqnombkdPv1CFFN/k8VypSumZqeio7JfPzB32xJMPU7S0eGXc3KqTHnO8naOCs6YQyJlNQtKmjFwr6lLJu963Y29LTZQpMs75I1WxawzEGfsAmI0HcJAlOiH6/m3Xz+CCzNTM8hBYWDqrZ5amyU5Tglhw6ZWJFheycyXx/J3KD2mWM1CBQCISnuMlbjfdojbWGyiFKUeBytCpSBmpjk1FnyjkGjuL94YhohfMcjSExjqLUUzYy0t1j/cYkS3mSP77A5q66tNvwi1+8mXvtGiO5o1zB1CHsu8sPvmiZKDgy5Y1ralJFp9z/wAOs+afLFOogz7p8H2BxSlWvp04bykurAoQulvmFSiRiS3bqvVNPHb1g5Gcug++nRCDzC7nXxAPcvblbwRK2lFchY/WbUIGLlSdIUMqQssQcZs4QrF41XwVjem+oExWcAfp3UYWlwOyicIKvOqKzF3LmkSKuwAn21uc5bUQBNVK+X1xazENV3N+LF9/MCkjSMSO/Us7IGjtSwXIjR1KOBkzIO/KulCFlLS0u5fqNsHJ/GOthHaV1HoW6RxRalKF3xKuyPP4Tb7iFmDjZiF4ghrPR3YhB6qFHxaFZZg9O0sUbFKIjC8EgKEbIq+VZz2QLQvzOL/nd93IZ4hJPDAe1F53IRR8J5BrfRmMZCaVuoMLAQvbmUZLz/WTIPfNydek6oQkYfH1fRCXX2NQLjKtLU4vsAUoAxDX2C955551sRU6ePJlJkEhcdS3ErQ92uecvwsbGRi51cXGRPcFFh9MBkzdcY5eRpw5fHheAQ6DY/wgU/iWnvMbj7CGIjIotQYUwtNTxvVPE3QHjkCrO+44fz0N69dpqHgnXr1+He5aW4CD7/LMzH2kWv2+wFVlbX4PVq6uu9aXx97FrXFzoAGRTYRMy4ZGCi9tA4MobOiuZmuX2CwnTW0qKwg+5JQ/1V57pdvRCu+ZP0HF1y+++k/fB7EdmM8MjXt1l9vPlEEwvo0GmhaRHMzgcDuE4C2+JhVXjjmgMr9HS86T+O411hHuBGP9JBQjll87x+88SmJmoPJdzfU4sVo7eHI+UbCG0jpTYW8LyLLAWF40uptGY4S47XBihRbj33nsz/M09n2qcYYrMrq9HgENtc+CcAIXqa3i9bF0B4FyJD8DsGLzE77/Ow+nBilCDnya0GLasX/EgjdIK/GGuCFT+0Lg87vHDR47AARbEK6+8MhbR3X//AxngJFVeHlaji58tx4PNqgV1o0ahAiLAGiKr64nc1vSSCGmoml+Sz/D/5yIeqYzreO6/tyBBFOjoqkFtjT/jhKkp9+rir7i5U2p+U89/6HJ9qRuTHNYtE3SCPiA1Cp1TzkgUFZYRgKY+zrCk/4ofHnTiA6vDlgg6DaeOU5faFalUR1EK8cGitGSod9cHJY0MfaqCc//AqXmtaYKKTktUIjQRxL34IooIe52vzpCyP0PyENLEThF+U6I+e8tjYQkqjWHkxvdSVI6pIeQFv1uMoP1yiAxioEdIBddRZA1XWUcDNgHSNDa8Sn2Rb3HBmzYthmZilJT4Jnfk5znhnvGBioUh7i7f1VWXMaYyLrGr2ZyVxnYENjszC0gUBKwhO2ncEmMM544hL3SbuKX87yr/+5ZCmVz20HCzDrT3+PI0V+47JpQm/ohU+TiTU2OLCDq9RZXpSTHWAMSbm+0JQCiugt6Sx/igj4KwaEP1uxCDut0atXHjiRrYdZrv14wDlc8MSAlQg4sMK7/L6S9ChLvBiXHWFQx6gq/FV3gMGuGhON1cy+xzIUzPFLrKfAq5FifKWWGPMYhlWKQ6tbjfYhIgOEWogdotZH6R6/dd1LLs/WF1I8MWBKIn+fp8ktia3kRIzZJ0/ynUcHvqAhBq5rwpQrkuMqI6z2mcLqE9eP7OuqEh1Pq5Da7XkxTX1TVvP1i6lPUGv/BZPn/ftW3cfZC6Tn1kdDsmdI/IP7H3JgC59pCXEA5Xl75bNreuUneneFjRaxvFbUlv9OJ1Ug6RoYY7KyMin8/J5oQSkBQWLQBrMBN1Q1W0DPO/LdS9WQwp19brbgHUU3Qa3nZmWKQIwZ2DspEqF1Dr/DyfzlUvVM9a/6Ht5Ehh2FQDgqczW5TSp5IrKGi8Mgoh7mUd0Xwp9GUuY2JCOF/m9FsTqK5xhNhQ9xilGOqSKh70dYBUPVbSD3HqP7NAvpLCXick8gDPjANiEEII/zQqTEp8mjMvcsLjBMEr0zGYQgV8ATLFzQnBtVCFJZeTjPoE/UlFJoX7B2wWMAt4s6ajeuEah6Sd1tpcTUO1BkQ/REpPlwKxQmqqgErSB+XFsJXEFFGNudvluyf4+gWP4rPdHDodsl5FbFkj3y1CDYNj21eSor88FYxNAtPeRphAiE2ESmeZcHuEjDNTL/D1E5ywC7Yw01iYSsx4kFT1mUk/EBcQJOScPs3nFe7JL1lvxICLqksxIDLsBDZT4f1VCU2z7XfSMg86dD/AoTbV6C8nOtWM9YOjMwL8Br/yl7Jnoi6IYd2r5qG7paxsBlPTkKRmKMw90LhlSl/mq//ldIkjPuBNJuoHIoFpbzJdVoOrsyBIA6LqpgOKC6eUgo6p0QvZMdXQXne8SmOu8/+8ZcYaSimEy0DHPJZoC5kCtg2OfIjZEhnZ5iedGoUPZD8a6VHO9SI1GhrrBiXdKRaDG6EJrCy4aHq6cPql7Br2hmgbnSrHhxpJErf1oQZb8N+LnPY7IJYLwxY9MucqLN9rKC6qtRpQ2C2W6em8o436zAuYacqQ8XV+7xN8+TSbvtXa7MjSajlEvoENw7Y6OctS99TUvqKAA4okMJI2TK1AbFqcsvD6LLynOekTfH4DjdCFsEfI4pxDGrg5h7JtDiniavSGdLefxY2pmuFsDq9D+jonrtkHzM76tjWEpjwLZOhHidQgZxM8Omtc0SV/j/E8/TXKtwHP5lKJoN23WPc9YrASXpaO8onHHnvsDquMd9wPI2Gf/83HP3BWcTROVG/yrsu429+rGswt22D+S7/94TdahQxDWzOzLu7G+rWx+1U5Wcha2NW9yZfP5xBUSI/yk8/wkz/k+we97MDytFsRO/uQ23jQ1znl3/ninzjhfEVTnTJTDO6kdm9z4GwgjOa8aYoqDdNwbJXoDP45prqTPAY3UbOiKM/Py05vTvkLTj/Giaf42W/yKw/x449yRY7wFJBV1lnOe0u2EHL6On9znc8XWFu/xuW/wj7By/zsEvkGjO4O8OoQxH0M7j5TCkE3VHkjC5jg618JMAD1kaihzbRwnwAAAABJRU5ErkJggg==";var e=new(THREE[_0xe681("0x3e4")])(x),_=document[_0xe681("0x2")](_0xe681("0x42b"));_[_0xe681("0x7")]=_0xe681("0x4e7");var t=new(THREE[_0xe681("0x3e4")])(_);this.w_=THREE.Math[_0xe681("0x4e8")](this.w_),this.h_=THREE[_0xe681("0x1b3")][_0xe681("0x4e8")](this.h_),this.lw_=this.w_,this[_0xe681("0x4e9")]=this.h_,e[_0xe681("0x199")]=!0,t.needsUpdate=!0,this[_0xe681("0x4e4")]=new(THREE[_0xe681("0x430")])({map:e}),this[_0xe681("0x279")]=new(THREE[_0xe681("0x42f")])(this[_0xe681("0x4e4")]),this[_0xe681("0x279")][_0xe681("0x27c")].set(this.w_,this.h_,1),this[_0xe681("0x4e6")]=new(THREE[_0xe681("0x430")])({map:t}),this[_0xe681("0x27a")]=new(THREE[_0xe681("0x42f")])(this[_0xe681("0x4e6")]),this.spritePt_[_0xe681("0x27c")][_0xe681("0xfc")](this[_0xe681("0x4ea")],this[_0xe681("0x4e9")],1),this.sceneOrtho_.add(this[_0xe681("0x279")]),this[_0xe681("0x431")][_0xe681("0x80")](this[_0xe681("0x27a")]);var i=this[_0xe681("0x278")][_0xe681("0x4eb")],n=i[_0xe681("0x432")],g=i[_0xe681("0x433")];this[_0xe681("0x22d")](n,g)}}},{key:"visible",set:function(x){x!=this.visible_&&(this[_0xe681("0x426")]=x,x?(this[_0xe681("0x132")](),this.spriteBg_[_0xe681("0x210")]=this[_0xe681("0x27a")][_0xe681("0x210")]=!0):null!=this.spriteBg_&&null!=this[_0xe681("0x27a")]&&(this[_0xe681("0x279")][_0xe681("0x210")]=this[_0xe681("0x27a")][_0xe681("0x210")]=!1))},get:function(){return this[_0xe681("0x426")]}}]),x}();e.default=i},function(x,e){function _(x,e){if(!(x instanceof e))throw new TypeError(_0xe681("0x77"))}_0xe681("0x3d"),Object[_0xe681("0x22")](e,_0xe681("0x94"),{value:!0});var t=function(){function x(x,e){for(var _=0;_<e.length;_++){var t=e[_];t[_0xe681("0x7c")]=t.enumerable||!1,t[_0xe681("0xc8")]=!0,_0xe681("0x7d")in t&&(t.writable=!0),Object[_0xe681("0x22")](x,t[_0xe681("0x7f")],t)}}return function(e,_,t){return _&&x(e[_0xe681("0x20")],_),t&&x(e,t),e}}(),i=function(){function x(e,t,i){_(this,x),this.x=e,this.y=t,this.z=i}return t(x,[{key:_0xe681("0x4ec"),value:function(x){this.x=x.x,this.y=x.y}}]),x}();e[_0xe681("0x9d")]=i},function(x,e){function _(x,e){if(!(x instanceof e))throw new TypeError(_0xe681("0x77"))}_0xe681("0x3d"),Object[_0xe681("0x22")](e,"__esModule",{value:!0});var t=function(){function x(x,e){for(var _=0;_<e[_0xe681("0x25")];_++){var t=e[_];t[_0xe681("0x7c")]=t[_0xe681("0x7c")]||!1,t[_0xe681("0xc8")]=!0,_0xe681("0x7d")in t&&(t[_0xe681("0x7e")]=!0),Object.defineProperty(x,t[_0xe681("0x7f")],t)}}return function(e,_,t){return _&&x(e[_0xe681("0x20")],_),t&&x(e,t),e}}(),i=function(){function x(){_(this,x)}return t(x,[{key:_0xe681("0x4ed"),value:function(x){var e=document[_0xe681("0x2")](_0xe681("0x2d6"));e[_0xe681("0x303")]=_0xe681("0x4ee"),e[_0xe681("0xd2")](_0xe681("0x2d7"),_0xe681("0x4ed")),x[_0xe681("0x9")](e)}}]),x}();e.default=i},function(x,e){function _(x,e){if(!(x instanceof e))throw new TypeError("Cannot call a class as a function")}function t(x,e){if(!x)throw new ReferenceError(_0xe681("0x36b"));return!e||_0xe681("0x24")!=typeof e&&_0xe681("0x32")!=typeof e?x:e}function i(x,e){if(_0xe681("0x32")!=typeof e&&null!==e)throw new TypeError(_0xe681("0x36c")+typeof e);x[_0xe681("0x20")]=Object[_0xe681("0xda")](e&&e[_0xe681("0x20")],{constructor:{value:x,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object[_0xe681("0x36d")]?Object.setPrototypeOf(x,e):x.__proto__=e)}_0xe681("0x3d"),Object[_0xe681("0x22")](e,_0xe681("0x94"),{value:!0});var n=function(){function x(x,e){for(var _=0;_<e.length;_++){var t=e[_];t[_0xe681("0x7c")]=t[_0xe681("0x7c")]||!1,t[_0xe681("0xc8")]=!0,_0xe681("0x7d")in t&&(t.writable=!0),Object.defineProperty(x,t[_0xe681("0x7f")],t)}}return function(e,_,t){return _&&x(e[_0xe681("0x20")],_),t&&x(e,t),e}}(),g=function(x){function e(){return _(this,e),t(this,(e[_0xe681("0x36e")]||Object[_0xe681("0x36f")](e))[_0xe681("0x37")](this,arguments))}return i(e,x),n(e,[{key:_0xe681("0x386"),value:function(x){this[_0xe681("0x361")]||(this[_0xe681("0x361")]={width:this[_0xe681("0x4ef")],height:this[_0xe681("0x379")]}),this[_0xe681("0x4ef")]=this[_0xe681("0x361")][_0xe681("0x2ba")],this[_0xe681("0x379")]=this.originSize[_0xe681("0x184")],x=x||{},x[_0xe681("0x243")]=void 0==x[_0xe681("0x243")]?.6:x[_0xe681("0x243")];var e=this,_=esmap[_0xe681("0x123")][_0xe681("0x86")][_0xe681("0x124")];if(!this[_0xe681("0x4f0")]||x[_0xe681("0x4f1")])return e[_0xe681("0x4f0")]=!0,x[_0xe681("0x27c")]=_(x,_0xe681("0x27c"),1.5),x[_0xe681("0x4f2")]=_(x,_0xe681("0x4f2"),1),x[_0xe681("0x4f3")]=_(x,_0xe681("0x4f3"),0),0==x.times&&(x[_0xe681("0x4f2")]=Number[_0xe681("0x4f4")]),x.time=void 0==x[_0xe681("0x243")]?.6:x[_0xe681("0x243")],clearInterval(this[_0xe681("0x4f5")]),this[_0xe681("0x4f5")]=THREE[_0xe681("0x127")][_0xe681("0x1cd")](this,.2*x.time,{width_:this[_0xe681("0x4ef")]*x.scale,height_:this[_0xe681("0x379")]*x[_0xe681("0x27c")]},THREE[_0xe681("0x127")][_0xe681("0x4f6")],function(){e[_0xe681("0x4f5")]=THREE[_0xe681("0x127")][_0xe681("0x1cd")](e,.8*x[_0xe681("0x243")],{width_:e[_0xe681("0x361")][_0xe681("0x2ba")],height_:e[_0xe681("0x361")].height},THREE[_0xe681("0x127")][_0xe681("0x4f6")],function(){x[_0xe681("0x4f2")]--,x[_0xe681("0x4f2")]>0?e.flashId=setTimeout(function(){x.force=!0,e[_0xe681("0x386")](x)},1e3*x[_0xe681("0x4f3")]):(e[_0xe681("0x4f0")]=!1,x[_0xe681("0x12a")]&&x[_0xe681("0x12a")]())})}),x}},{key:_0xe681("0x4f7"),value:function(x){var e,_,t=this;x=x||{};var i=esmap.ESUtil[_0xe681("0x86")][_0xe681("0x124")];if(!this[_0xe681("0x4f0")]||x[_0xe681("0x4f1")])return t[_0xe681("0x4f0")]=!0,x.scale=i(x,_0xe681("0x27c"),1.5),x[_0xe681("0x4f2")]=i(x,_0xe681("0x4f2"),1),x.delay=i(x,_0xe681("0x4f3"),0),0==x[_0xe681("0x4f2")]&&(x.times=Number.MAX_VALUE),x[_0xe681("0x243")]=void 0==x[_0xe681("0x243")]?.6:x.time,clearInterval(this[_0xe681("0x4f5")]),e=new THREE.Vector3(x[_0xe681("0x27c")],x[_0xe681("0x27c")],x[_0xe681("0x27c")]),_=new(THREE[_0xe681("0x232")])(1,1,1),this[_0xe681("0x4f5")]=THREE[_0xe681("0x127")].action(this,.2*x[_0xe681("0x243")],{scale:e},THREE[_0xe681("0x127")].easeInOutQuad,function(){t[_0xe681("0x4f5")]=THREE[_0xe681("0x127")][_0xe681("0x1cd")](t,.8*x.time,{scale:_},THREE[_0xe681("0x127")][_0xe681("0x4f6")],function(){x.times--,x[_0xe681("0x4f2")]>0?t[_0xe681("0x4f5")]=setTimeout(function(){x.force=!0,t[_0xe681("0x386")](x)},1e3*x.delay):(t[_0xe681("0x4f0")]=!1,x[_0xe681("0x12a")]&&x[_0xe681("0x12a")]())})}),x}},{key:"alwaysShow",value:function(x,e){var _=esmap[_0xe681("0x197")][_0xe681("0x4f8")](this[_0xe681("0x17a")]),t=esmap.ESRenderOrder[_];e=void 0==e?void 0==t?10:t:e,x=void 0==x||x,this[_0xe681("0x17e")][_0xe681("0x3c6")]=!x,this[_0xe681("0x17e")][_0xe681("0x3ec")]=!x,this[_0xe681("0x3ed")]=x?e:0}},{key:_0xe681("0x384"),value:function(x){function e(n){function f(e,n,r){x[_0xe681("0x4f9")],g.position.x=t[_0xe681("0x1d9")].x+a[_0xe681("0x185")].x,g[_0xe681("0x185")].z=t[_0xe681("0x1d9")].z+a.position.z;var A={x:-e-map[_0xe681("0x13d")].sceneX_,z:n+map[_0xe681("0x13d")][_0xe681("0x1ad")]};if(_[_0xe681("0x150")](_0xe681("0x4fa"),{x:A.x,y:A.z}),x[_0xe681("0x4f9")]&&l){var C=new(THREE[_0xe681("0x232")])(1,0,0),o=C[_0xe681("0x1cc")](),s=g[_0xe681("0x4fb")].clone();s[_0xe681("0x4fc")](new(THREE[_0xe681("0x232")])),o[_0xe681("0x4fd")](s);var c=o[_0xe681("0x1cc")]()[_0xe681("0x4fe")](C),c=c.y<0?-1:1,f=C[_0xe681("0x4ff")](o),h=Math.PI-f*c-I;i[_0xe681("0x134")].object instanceof THREE.PerspectiveCamera&&(h+=Math.PI),i.controls[_0xe681("0xc6")]({forceTheta:h})}x[_0xe681("0x500")]&&l&&i[_0xe681("0x34f")]({x:A.x,y:A.z,time:0,FloorNum:1,callback:null}),g[_0xe681("0x501")][_0xe681("0x502")](u,.2)}var l=!1;if(i[_0xe681("0x160")][i[_0xe681("0x160")][_0xe681("0x25")]-1]==e&&(l=!0),o+=n*r,t=getPointByDistance(c,o,C),t&&t[_0xe681("0x1d9")]){var u=null,h=g[_0xe681("0x4fb")][_0xe681("0x1cc")]();h[_0xe681("0x503")](g[_0xe681("0x185")],new(THREE[_0xe681("0x232")])(t.point.x+a[_0xe681("0x185")].x,g[_0xe681("0x185")].y,t[_0xe681("0x1d9")].z+a[_0xe681("0x185")].z),g.up),h[_0xe681("0x504")]((new(THREE[_0xe681("0x33d")]))[_0xe681("0x505")](new(THREE[_0xe681("0x506")])(0,I,0))),u=(new(THREE[_0xe681("0x507")]))[_0xe681("0x508")](h)}t[_0xe681("0x509")]?A?o=0:(g[_0xe681("0x385")](),g[_0xe681("0x385")]=null,_[_0xe681("0x150")](_0xe681("0x50a"),{_this:_})):f(g[_0xe681("0x185")].x,g[_0xe681("0x185")].z,s)}var _=this;if(x&&x[_0xe681("0x18c")]){var t,i=esmap[_0xe681("0x162")].instance,n=x[_0xe681("0x18c")][_0xe681("0xbd")](function(x){return new(THREE[_0xe681("0x232")])(-i[_0xe681("0x13d")][_0xe681("0x1af")]-x.x,0,x.y-i[_0xe681("0x13d")][_0xe681("0x1ad")])}),g=this[_0xe681("0x17d")],a=n,r=x.speed||12,A=x[_0xe681("0x50b")],C=x.offset||0,I=x[_0xe681("0x376")]*THREE.Math[_0xe681("0x239")],o=x.startDistance||0,s=(new THREE.Vector3(1,0,0),void 0===x[_0xe681("0x50c")]?Math.PI/2:x[_0xe681("0x50c")]),c=a;a[_0xe681("0x185")]={x:0,y:0,z:0},i[_0xe681("0x160")][_0xe681("0x1e")](e),g[_0xe681("0x385")]&&g[_0xe681("0x385")](),i.on(_0xe681("0xc6"),e),g[_0xe681("0x385")]=function(){g[_0xe681("0x50d")]&&g[_0xe681("0x50d")](),i[_0xe681("0x108")](_0xe681("0xc6"),e)}}}},{key:_0xe681("0x392"),value:function(x){if(void 0===this[_0xe681("0x3c4")]&&(this[_0xe681("0x3c4")]=!0),this[_0xe681("0x3c4")]){x=x||esmap.ESMap.instance[_0xe681("0x12b")];var e=x[_0xe681("0x407")][_0xe681("0x254")],_=esmap[_0xe681("0x162")][_0xe681("0x163")][_0xe681("0x1b7")];this[_0xe681("0x50e")]||(this.originPosition=this.position[_0xe681("0x1cc")]()),(void 0==this[_0xe681("0x3c3")]||isNaN(this[_0xe681("0x3c3")]))&&(isNaN(this.position.y)&&(this[_0xe681("0x185")].y=0),this[_0xe681("0x3c3")]=this[_0xe681("0x185")].y);var t=this.data_?0==this.data_.ShowLevel?0:this.data_.ShowLevel:0==this[_0xe681("0x17a")][_0xe681("0x37f")]?0:this[_0xe681("0x17a")].showLevel_;if((t||0==t)&&(_>t?this[_0xe681("0x210")]=!1:this.visible=!0),"3d"==x[_0xe681("0x407")].viewMode){if(0==x.h_)return;this[_0xe681("0x50f")]=void 0;var i=this[_0xe681("0x17a")]instanceof esmap[_0xe681("0x510")]&&!this[_0xe681("0x17a")].spritify_?16:2,n=esmap[_0xe681("0x383")][_0xe681("0x511")](this,x),g=this[_0xe681("0x379")]?this[_0xe681("0x379")]*n[_0xe681("0x512")]/i:0,a=this[_0xe681("0x513")]?0:g;if(this[_0xe681("0x185")][_0xe681("0x514")](this[_0xe681("0x3c3")]+a),this[_0xe681("0x182")]&&(_0xe681("0x183")==this[_0xe681("0x182")]||_0xe681("0x515")==this[_0xe681("0x182")]||_0xe681("0x516")==this.type_)&&(this[_0xe681("0x17a")].unspritify_||void 0!=this[_0xe681("0x17a")][_0xe681("0x37a")]&&!this[_0xe681("0x17a")][_0xe681("0x37a")]))return;this[_0xe681("0x27c")].copy(n[_0xe681("0x27c")])}else{if(this.type_&&(_0xe681("0x183")==this[_0xe681("0x182")]||_0xe681("0x515")==this[_0xe681("0x182")]||_0xe681("0x516")==this.type_)&&(void 0!=this.datas_[_0xe681("0x37a")]&&!this[_0xe681("0x17a")][_0xe681("0x37a")]||this[_0xe681("0x17a")][_0xe681("0x517")]))return;this[_0xe681("0x50f")]=esmap[_0xe681("0x383")][_0xe681("0x511")](this,x)[_0xe681("0x27c")],this.scale.copy(this[_0xe681("0x50f")][_0xe681("0x1cc")]()[_0xe681("0x286")](1/e[_0xe681("0x280")]))}}}},{key:_0xe681("0x518"),value:function(x,e){function _(x,e){if(j[x]&&""!=j[x]){if("color"==e)return esmap[_0xe681("0x197")][_0xe681("0x519")](j[x]);if(_0xe681("0x28")==e)return parseFloat(j[x])}return 0}if(x&&x[_0xe681("0x1d")]("\\n")>-1){var t=x[_0xe681("0x23a")]("\\n"),i="";t.forEach(function(x){i+=x+"\n"}),x=i}var n,g=this;void 0===e&&(e={}),g[_0xe681("0x396")]&&g[_0xe681("0x396")][_0xe681("0x200")]&&esmap[_0xe681("0x197")][_0xe681("0x51a")](g[_0xe681("0x396")][_0xe681("0x200")],function(x){g[_0xe681("0x396")][_0xe681("0x51b")]=x});var a=e[_0xe681("0x21")](_0xe681("0x51c"))?e.fontface:_0xe681("0x51d"),r=e[_0xe681("0x21")]("fontsize")?e[_0xe681("0x482")]:36;r=Math.ceil(r*(this[_0xe681("0x51e")]||1));var A=e.hasOwnProperty(_0xe681("0x19c"))?e.color:_0xe681("0x51f"),C=e[_0xe681("0x21")](_0xe681("0x520"))?e.borderThickness:2,I=e[_0xe681("0x21")]("borderColor")?e[_0xe681("0x463")]:_0xe681("0x521"),o=esmap.ESMapUtil[_0xe681("0x352")]()[_0xe681("0x357")];C*=o?3:2;var s,c,f=Math[_0xe681("0x102")](r*(o&&r<=36?1.1:1)),l=f+_0xe681("0x522")+a;g[_0xe681("0x2ee")]||(g.canvas=document[_0xe681("0x2")](_0xe681("0x2ee"))),g[_0xe681("0x523")]||(g[_0xe681("0x523")]=g[_0xe681("0x2ee")][_0xe681("0x4c2")]("2d")),s=g[_0xe681("0x2ee")],c=g[_0xe681("0x523")],c.font=l;for(var u=C/2,h=x[_0xe681("0x23a")]("\n"),d=[],b=0,p=0,v=0;v<h[_0xe681("0x25")];v++)if(""==h[v])h[_0xe681("0x2b")](v,1),v--;else{var m=c[_0xe681("0x524")](h[v])[_0xe681("0x2ba")];b=Math.max(b,m),p+=f+C,d.push({text:h[v],width:m})}e.lineheight=e[_0xe681("0x48a")]||4,p+=e[_0xe681("0x48a")]*(h[_0xe681("0x25")]-1);var y=null,w=!1,E={x:u,y:-C},k={x:0,y:0},T=b+C,S=void 0==x||""==x?0:p,R=e.imagesize||f,O=e[_0xe681("0x525")]||0,M=b,L=50,P=0,j=g[_0xe681("0x396")]&&g[_0xe681("0x396")][_0xe681("0x526")]&&g[_0xe681("0xbd")][_0xe681("0x13b")].fontStyleThemeDic?g[_0xe681("0xbd")][_0xe681("0x13b")][_0xe681("0x527")][g[_0xe681("0x396")][_0xe681("0x526")]]:void 0;if(j){var D=_(_0xe681("0x482"),_0xe681("0x28")),H=_(_0xe681("0x528"),_0xe681("0x28")),N=_(_0xe681("0x529"),_0xe681("0x19c")),F=_(_0xe681("0x52a"),_0xe681("0x19c"));if(H){var z=4*(H-D);b+=2*z,p+=z,T=b+C,S=p,R=e[_0xe681("0x29b")]||R+z}}if(g[_0xe681("0x396")]&&g[_0xe681("0x396")][_0xe681("0x200")])switch(w=!0,e[_0xe681("0x486")]){case _0xe681("0x302"):case _0xe681("0x281"):R>p?(E.y=(R-p)/2,S=R):(E.y=-C,k.y=(p-R)/2),"left"==e[_0xe681("0x486")]?(E.x=R+O,T=b+E.x):(k.x=0!=b?b+O:0,T=b+R+O);break;case"top":case _0xe681("0x283"):if(M=Math[_0xe681("0x4bc")](b,R)+C,b>=R?k.x=Math[_0xe681("0x102")]((b+u-R)/2):E.x=Math[_0xe681("0x102")]((R-b+u)/2),_0xe681("0x282")==e[_0xe681("0x486")])S=S+R+O,T=M,E.y=R+O-u;else{var Y=S;S=S+R+O,T=M,k.y=Y+O}}if(T+=e[_0xe681("0x489")]*x[_0xe681("0x25")],s[_0xe681("0x2ba")]=T,s.height=S,g[_0xe681("0x52b")]=new(THREE[_0xe681("0x232")])(s[_0xe681("0x2ba")]/2,0,s.height/2),g[_0xe681("0x52c")]=g.originPivot[_0xe681("0x1cc")](),w)var X=setInterval(function(){P==L&&clearInterval(X),y=g.data_[_0xe681("0x51b")][_0xe681("0x200")],y&&(c[_0xe681("0x52d")](y,k.x,k.y,R,R),g.iconPivot=new(THREE[_0xe681("0x232")])(k.x+R/2,0,k.y+R/2),_0xe681("0x52e")==e.pivottype&&(g[_0xe681("0x52f")]=g.iconPivot),n&&(n.needsUpdate=!0),clearInterval(X)),P++},100);if(void 0!=x&&x){if(c[_0xe681("0x530")]=l,c[_0xe681("0x531")]=!0,H){c[_0xe681("0x532")]=F,c[_0xe681("0x269")]=4;var Z=0;_0xe681("0x282")==e[_0xe681("0x486")]&&(Z=R+O),c[_0xe681("0x34e")](E.x+4,4+Z,b-8,p-8,10).stroke(),c[_0xe681("0x4d8")]=N,c.roundRect(E.x+4,4+Z,b-8,p-8,10).fill()}for(var B=0,v=0;v<d[_0xe681("0x25")];v++){var G=(b-d[v].width)/2+E.x,W=(v+1)*(f+e[_0xe681("0x48a")]+u)+E.y-e.lineheight;H?B=z/2:(B=0,c[_0xe681("0x532")]=I,c[_0xe681("0x269")]=C),c[_0xe681("0x4d8")]=A,c[_0xe681("0x533")](d[v][_0xe681("0x534")],G,W,B,e[_0xe681("0x489")])}}return this.width_=s[_0xe681("0x2ba")],this[_0xe681("0x379")]=s[_0xe681("0x184")],n=new(THREE[_0xe681("0x3e4")])(s)[_0xe681("0x1cc")](),n.minFilter=THREE[_0xe681("0x42e")],n[_0xe681("0x442")]=esmap[_0xe681("0x535")][_0xe681("0x163")][_0xe681("0x1bf")][_0xe681("0x536")](),n[_0xe681("0x537")]=!1,n[_0xe681("0x199")]=!0,e[_0xe681("0x538")]||this.material_||(this.material_=new(THREE[_0xe681("0x430")])({map:n,depthWrite:!1})),n}},{key:"updateStyle",value:function(x){x=x||this[_0xe681("0xcc")],this[_0xe681("0x518")](this[_0xe681("0x3e")],{fontsize:2*x[_0xe681("0x482")],borderThickness:2,color:esmap[_0xe681("0x197")][_0xe681("0x519")](x.fillcolor||"0,0,0"),borderColor:esmap.ESMapUtil[_0xe681("0x519")](x[_0xe681("0x485")]||_0xe681("0x465")),imagealign:x[_0xe681("0x486")]||_0xe681("0x302"),imagesize:x[_0xe681("0x29b")],imagespace:x[_0xe681("0x525")],lineheight:x[_0xe681("0x48a")]||4,fontspace:x[_0xe681("0x489")]||0,pivottype:x[_0xe681("0x539")]||_0xe681("0x27d")})}},{key:_0xe681("0x53a"),value:function(x){this.message=x,this[_0xe681("0x2a0")]()}},{key:_0xe681("0x48c"),value:function(x){this.style[_0xe681("0x482")]=x,this.updateStyle()}},{key:"setfillcolor",value:function(x){this[_0xe681("0xcc")].fillcolor=x,this[_0xe681("0x2a0")]()}},{key:_0xe681("0x48e"),value:function(x){this.style.strokecolor=x,this[_0xe681("0x2a0")]()}},{key:_0xe681("0x387"),value:function(){if(clearInterval(this[_0xe681("0x4f5")]),this.originSize)this[_0xe681("0x4ef")]=this[_0xe681("0x361")][_0xe681("0x2ba")],this[_0xe681("0x379")]=this[_0xe681("0x361")][_0xe681("0x184")];else{var x=new(THREE[_0xe681("0x232")])(1,1,1);this[_0xe681("0x4f5")]=em[_0xe681("0x127")].action(this,.1,{scale:x},em[_0xe681("0x127")][_0xe681("0x53b")])}this[_0xe681("0x4f0")]=!1}},{key:_0xe681("0x394"),value:function(){clearInterval(this[_0xe681("0x53c")],this.initY_=this[_0xe681("0x53d")],this[_0xe681("0x4f0")]=!1)}},{key:_0xe681("0x3ba"),value:function(x){clearInterval(this[_0xe681("0x53e")]),this[_0xe681("0x4f0")]=!1}},{key:_0xe681("0x38b"),value:function(x){var e=this;x=x||{};var _=esmap[_0xe681("0x123")][_0xe681("0x86")][_0xe681("0x124")];if(!this[_0xe681("0x4f0")]||x[_0xe681("0x4f1")])return e[_0xe681("0x4f0")]=!0,void 0==x[_0xe681("0x53d")]&&(e[_0xe681("0x53d")]=e[_0xe681("0x3c3")]),x[_0xe681("0x4f2")]=_(x,_0xe681("0x4f2"),1),0==x[_0xe681("0x4f2")]&&(x[_0xe681("0x4f2")]=Number[_0xe681("0x4f4")]),x.delay=_(x,_0xe681("0x4f3"),0),x[_0xe681("0x184")]=_(x,_0xe681("0x184"),8),x.duration=_(x,_0xe681("0x243"),_0xe681("0x125"),1),clearInterval(this[_0xe681("0x53c")]),this[_0xe681("0x53c")]=THREE[_0xe681("0x127")][_0xe681("0x1cd")](this,.2*x[_0xe681("0x125")],{initY_:e[_0xe681("0x53d")]+x.height},THREE[_0xe681("0x127")][_0xe681("0x53f")],function(){e._jumpID=THREE[_0xe681("0x127")][_0xe681("0x1cd")](e,.8*x[_0xe681("0x125")],{initY_:e[_0xe681("0x53d")]},THREE[_0xe681("0x127")].bounce,function(){x[_0xe681("0x4f2")]--,x[_0xe681("0x4f2")]>0?e._jumpID=setTimeout(function(){x[_0xe681("0x4f1")]=!0,e[_0xe681("0x38b")](x)},1e3*x[_0xe681("0x4f3")]):(e[_0xe681("0x4f0")]=!1,x[_0xe681("0x12a")]&&x[_0xe681("0x12a")]())})}),x}},{key:_0xe681("0x34f"),value:function(x){var e=this,_=esmap[_0xe681("0x123")].Option.getValues(x,"time",_0xe681("0x125"),1),t=esmap[_0xe681("0x162")][_0xe681("0x163")].mapScene;if(e instanceof esmap.ESMapPoi3){var i=esmap[_0xe681("0x162")][_0xe681("0x163")],n=esmap[_0xe681("0x123")][_0xe681("0x86")][_0xe681("0x124")](x,_0xe681("0x190"),null),g=esmap[_0xe681("0x123")][_0xe681("0x86")][_0xe681("0x124")](x,"height","zOffset",_0xe681("0x1ac"),"offsetHeight",0);n&&(e.initY_=i[_0xe681("0x1ab")](n)+(g||0),e[_0xe681("0x185")][_0xe681("0x514")](e[_0xe681("0x3c3")]))}return e[_0xe681("0x4f0")]=!0,THREE[_0xe681("0x127")][_0xe681("0x540")](e[_0xe681("0x53e")]),e[_0xe681("0x53e")]=THREE[_0xe681("0x127")][_0xe681("0x1cd")](e.position,_,{x:-t[_0xe681("0x1af")]-x.x,z:x.y-t.sceneZ_},x[_0xe681("0x541")]||THREE[_0xe681("0x127")][_0xe681("0x53b")],function(){e[_0xe681("0x4f0")]=!1,x[_0xe681("0x12a")]&&x[_0xe681("0x12a")]()},function(_){x.update&&x[_0xe681("0xc6")]({x:e.x,y:e.y})}),x}},{key:_0xe681("0x38a"),value:function(x){var e=this,_=esmap.ESUtil[_0xe681("0x86")][_0xe681("0x124")](x,"time",_0xe681("0x125"),1),t=!1;return e[_0xe681("0x17a")]&&e[_0xe681("0x17a")].alias&&"es3dmarker"==e[_0xe681("0x17a")][_0xe681("0x370")]&&(t=!0),THREE.Tween.kill(e[_0xe681("0x542")]),e[_0xe681("0x542")]=THREE[_0xe681("0x127")][_0xe681("0x1cd")](t?e[_0xe681("0x38e")]:e,_,{y:THREE[_0xe681("0x1b3")].degToRad(x[_0xe681("0x376")])},x[_0xe681("0x541")]||THREE.Tween[_0xe681("0x53b")],function(){x[_0xe681("0x12a")]&&x[_0xe681("0x12a")]()}),x}},{key:"fade",value:function(x){var e=this;if(e.material&&!e._isFading){e._isFading=!0,x=x||{},x[_0xe681("0x543")]||(e[_0xe681("0x210")]=!0);var _=esmap[_0xe681("0x123")].Option[_0xe681("0x124")](x,_0xe681("0x243"),_0xe681("0x125"),.2);THREE.Tween[_0xe681("0x540")](e[_0xe681("0x544")]),e[_0xe681("0x544")]=THREE[_0xe681("0x127")][_0xe681("0x1cd")](e.material,_,{opacity:x.out?0:1},null,function(){e[_0xe681("0x545")]=!1,x.out&&(e[_0xe681("0x210")]=!1),x[_0xe681("0x12a")]&&x[_0xe681("0x12a")]()})}}},{key:"fade3dOut",value:function(x){function e(e,_){THREE[_0xe681("0x127")][_0xe681("0x1cd")](e,.5,{opacity:0},THREE.Tween[_0xe681("0x53b")],function(){_&&x&&x()})}var _=this;if(_[_0xe681("0x17e")]&&_.material[_0xe681("0x194")])for(var t=0;t<_[_0xe681("0x17e")][_0xe681("0x194")][_0xe681("0x25")];t++){var i=_[_0xe681("0x17e")][_0xe681("0x194")][t];e(i,t==_[_0xe681("0x17e")][_0xe681("0x194")].length-1)}else e(_[_0xe681("0x17e")],!0)}},{key:_0xe681("0x546"),value:function(x){function e(e,_){THREE[_0xe681("0x127")][_0xe681("0x1cd")](e,.5,{opacity:1},THREE[_0xe681("0x127")][_0xe681("0x53b")],function(){_&&x&&x()})}var _=this;if(_[_0xe681("0x17e")]&&_[_0xe681("0x17e")][_0xe681("0x194")])for(var t=0;t<_[_0xe681("0x17e")].materials[_0xe681("0x25")];t++){var i=_[_0xe681("0x17e")][_0xe681("0x194")][t];e(i,t==_[_0xe681("0x17e")][_0xe681("0x194")][_0xe681("0x25")]-1)}else e(_[_0xe681("0x17e")],!0)}},{key:_0xe681("0x52f"),get:function(){return this[_0xe681("0x52c")]},set:function(x){if(x instanceof THREE[_0xe681("0x232")]){this[_0xe681("0x52c")]=x,this.pivotOffset=new(THREE[_0xe681("0x232")])(this[_0xe681("0x4ef")]/2-x.x,0,x.y-this[_0xe681("0x379")]/2);var e=new(THREE[_0xe681("0x506")])(this[_0xe681("0xbd")][_0xe681("0x134")][_0xe681("0x288")](),this[_0xe681("0xbd")][_0xe681("0x134")][_0xe681("0x227")](),0,_0xe681("0x547")),_=(new(THREE[_0xe681("0x33d")]))[_0xe681("0x505")](e);this.position[_0xe681("0x233")](this[_0xe681("0x50e")][_0xe681("0x1cc")]()[_0xe681("0x80")](this[_0xe681("0x548")][_0xe681("0x1cc")]()[_0xe681("0x286")](this[_0xe681("0x549")]).applyMatrix4(_)))}}}]),e}(THREE[_0xe681("0x42f")]),a=function(){function x(e,t,i){_(this,x),this[_0xe681("0xbd")]=esmap[_0xe681("0x162")][_0xe681("0x163")],this.data_=t,this[_0xe681("0x396")][_0xe681("0x1f4")]=e,t[_0xe681("0x54a")]&&(this[_0xe681("0x396")].x_=t[_0xe681("0x54a")][0],this[_0xe681("0x396")].y_=t[_0xe681("0x54a")][1]),this[_0xe681("0x4ef")],this[_0xe681("0x379")],this[_0xe681("0x1ce")]=null,this.scaleRatio_=1,this[_0xe681("0x3c4")]=!0,this[_0xe681("0x3e")]=t[_0xe681("0x40")],this.spritify=t.spritify,i=i||{},i[_0xe681("0x486")]=i[_0xe681("0x486")]||_0xe681("0x302"),i[_0xe681("0x29b")]=i[_0xe681("0x29b")]||null,
i[_0xe681("0x525")]=i[_0xe681("0x525")]||.5,i[_0xe681("0x48a")]=i[_0xe681("0x48a")]||4,i[_0xe681("0x489")]=i[_0xe681("0x489")]||0,i[_0xe681("0x539")]=i[_0xe681("0x539")]||"center",this[_0xe681("0xcc")]=i,this[_0xe681("0x50e")]=null,this[_0xe681("0x548")]=null,this.pivot_=null,this[_0xe681("0x52b")]=null,this[_0xe681("0x54b")]=null,this[_0xe681("0x2a0")](i),THREE.Sprite[_0xe681("0x1a")](this,this[_0xe681("0x1ce")]);var n=t[_0xe681("0x27c")]||1;if(!this[_0xe681("0x37b")]){var g=174.22169477307486/this.map[_0xe681("0x12b")].h_*.3,a=(this.scaleRatio_||1,this[_0xe681("0x4ef")]*g),r=this.height_*g;this[_0xe681("0x27c")].set(a*n,r*n,1)}}return n(x,null,[{key:"getPerspectiveScale",value:function(x,e){var _=x[_0xe681("0x454")](),t="top"==e[_0xe681("0x407")][_0xe681("0x21d")];t&&(_.y=e[_0xe681("0x407")][_0xe681("0x234")].y);var i=_,n=e[_0xe681("0x133")][_0xe681("0x185")],g=e[_0xe681("0x407")][_0xe681("0x134")][_0xe681("0x235")][_0xe681("0x1cc")](),a=i[_0xe681("0x284")](n),r=g[_0xe681("0x1cc")]()[_0xe681("0x241")](n)[_0xe681("0x285")](),A=i[_0xe681("0x1cc")]()[_0xe681("0x241")](n)[_0xe681("0x285")](),C=r[_0xe681("0x40b")](A);a*=C;var I=a/e.h_*.3,o=(x[_0xe681("0x51e")]||1,x.width_*I),s=x[_0xe681("0x379")]*I;x[_0xe681("0x549")]=I;var c={scale:6==x[_0xe681("0x17a")][_0xe681("0xce")]?new THREE.Vector3(o,s,o):new THREE.Vector3(o,s,1),meterperpixel:I};return c}}]),x}();e[_0xe681("0x9d")]=a,a[_0xe681("0x20")]=new g,esmap[_0xe681("0x197")][_0xe681("0x54c")](a[_0xe681("0x20")],_0xe681("0x50e")),CanvasRenderingContext2D[_0xe681("0x20")][_0xe681("0x533")]=function(x,e,_,t,i){var n=this,g=n[_0xe681("0x2ee")],a=_+t;if(!i&&g){var r=window[_0xe681("0x54d")](g);i=parseFloat(r[_0xe681("0x54e")])}if(!i)return this[_0xe681("0x54f")](x,e,_),this[_0xe681("0x550")](x,e,a);var A=x[_0xe681("0x23a")](""),C=n[_0xe681("0x2dd")]||"left",I=n[_0xe681("0x524")](x)[_0xe681("0x2ba")],o=I+i*(A[_0xe681("0x25")]-1);_0xe681("0x27d")==C?e-=o/2:"right"==C&&(e-=o),n[_0xe681("0x2dd")]=_0xe681("0x302"),A[_0xe681("0xc3")](function(x){var t=n.measureText(x).width;n[_0xe681("0x54f")](x,e,_),n[_0xe681("0x550")](x,e,a),e=e+t+i}),n[_0xe681("0x2dd")]=C}},function(x,e){function _(x,e){if(!(x instanceof e))throw new TypeError(_0xe681("0x77"))}function t(x,e){if(!x)throw new ReferenceError(_0xe681("0x36b"));return!e||_0xe681("0x24")!=typeof e&&_0xe681("0x32")!=typeof e?x:e}function i(x,e){if(_0xe681("0x32")!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);x[_0xe681("0x20")]=Object[_0xe681("0xda")](e&&e[_0xe681("0x20")],{constructor:{value:x,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object[_0xe681("0x36d")]?Object.setPrototypeOf(x,e):x[_0xe681("0x36e")]=e)}function n(x){for(var e,_=[],t=2*Math.PI/x[_0xe681("0x18a")],i=0;i<x[_0xe681("0x18a")];i++){var n=new(THREE[_0xe681("0x232")])(0,x[_0xe681("0x44d")]*x[_0xe681("0x3e8")]*Math[_0xe681("0x551")](t*i),x[_0xe681("0x44d")]*Math.cos(t*i));_[_0xe681("0x1e")](n),0==i&&(e=n)}_[_0xe681("0x1e")](e);var g,a,I,o,c=x[_0xe681("0x40a")][_0xe681("0x25")],f=r(x[_0xe681("0x40a")]);x[_0xe681("0x25")]=f.length,x[_0xe681("0x27d")]=f[_0xe681("0x27d")],x[_0xe681("0x3e7")]||A(x[_0xe681("0x40a")],x[_0xe681("0x27d")]),x[_0xe681("0x552")]=2*Math.PI*x[_0xe681("0x44d")];var l,u=0,h=0,d=x[_0xe681("0x552")]/x[_0xe681("0x18a")];x[_0xe681("0x553")]=[],s=x.up[_0xe681("0x1cc")](),x[_0xe681("0x554")]=null;for(var i=0;i<c;i++){g=0==i?null:x[_0xe681("0x40a")][i-1],I=i==c-1?null:x[_0xe681("0x40a")][i+1],a=x[_0xe681("0x40a")][i],o=C(g,a,I),x._up_||(x[_0xe681("0x554")]=new THREE.Vector3(0,1,0)[_0xe681("0x4fd")](o)[_0xe681("0x285")]()),i>0&&(u+=a[_0xe681("0x284")](g)),h=0,x[_0xe681("0x555")][i]=[];var b=a[_0xe681("0x1cc")]();b.y=0;for(var p=0,v=0;v<_[_0xe681("0x25")];v++)l=_[v][_0xe681("0x1cc")]()[_0xe681("0x4fd")](o),x[_0xe681("0x44b")][_0xe681("0x1e")](l),x[_0xe681("0x555")][i][_0xe681("0x1e")](l),x[_0xe681("0x553")][_0xe681("0x1e")](new(THREE[_0xe681("0x44a")])((u+p)/x[_0xe681("0x25")],1-h/x.perimeter)),h+=d}}function g(x){for(var e,_=x.pathVertices[_0xe681("0x25")],t=x[_0xe681("0x18a")]+1,i=0;i<_-1;i++){e=i*t;for(var n=0;n<t-1;n++)x[_0xe681("0x1a7")][_0xe681("0x1e")](new THREE.Face3(e+n+1,e+n,e+t+n)),x[_0xe681("0x1a7")][_0xe681("0x1e")](new(THREE[_0xe681("0x556")])(e+n+1,e+n+t,e+t+n+1))}}function a(x){for(var e=x[_0xe681("0x1a7")][_0xe681("0x25")],_=0;_<e;_++){var t=x.faces[_];x[_0xe681("0x557")][0][_0xe681("0x1e")]([x[_0xe681("0x553")][t.a],x[_0xe681("0x553")][t.b],x[_0xe681("0x553")][t.c]])}x[_0xe681("0x558")]=!0}function r(x){for(var e=0,_=x[0][_0xe681("0x1cc")](),t=1;t<x[_0xe681("0x25")];t++)e+=x[t].distanceTo(x[t-1]),_.add(x[t]);return{length:e,center:_[_0xe681("0x559")](x[_0xe681("0x25")])}}function A(x,e){x.forEach(function(x){x[_0xe681("0x241")](e)})}function C(x,e,_){var t,i=x&&x[_0xe681("0x1cc")](),n=e.clone(),g=_&&_[_0xe681("0x1cc")](),a=1,r=null;if(x)if(_){var A=n[_0xe681("0x1cc")]()[_0xe681("0x241")](i).normalize(),C=g[_0xe681("0x241")](n)[_0xe681("0x285")]();r=A[_0xe681("0x4ff")](C)/2,a=1/Math[_0xe681("0x44e")](r),a=THREE[_0xe681("0x1b3")][_0xe681("0x1b4")](a,1,2),t=A[_0xe681("0x80")](C)[_0xe681("0x285")]()}else t=n[_0xe681("0x241")](i)[_0xe681("0x285")]();else t=g[_0xe681("0x241")](n)[_0xe681("0x285")]();var I=s[_0xe681("0x1cc")](),o=(new THREE.Vector3)[_0xe681("0x55a")](t,I).normalize(),c=(new(THREE[_0xe681("0x232")]))[_0xe681("0x55a")](o,t)[_0xe681("0x285")]();s=c[_0xe681("0x1cc")](),o[_0xe681("0x286")](a);var f=(new(THREE[_0xe681("0x33d")]))[_0xe681("0x55b")](t,c,o)[_0xe681("0x4fc")](e);return f[_0xe681("0x376")]=r,f.vz=o,f}_0xe681("0x3d"),Object[_0xe681("0x22")](e,_0xe681("0x94"),{value:!0});var I=function(){function x(x,e){for(var _=0;_<e[_0xe681("0x25")];_++){var t=e[_];t.enumerable=t[_0xe681("0x7c")]||!1,t[_0xe681("0xc8")]=!0,_0xe681("0x7d")in t&&(t.writable=!0),Object[_0xe681("0x22")](x,t[_0xe681("0x7f")],t)}}return function(e,_,t){return _&&x(e[_0xe681("0x20")],_),t&&x(e,t),e}}(),o=function(x){!x[_0xe681("0x40a")]||x[_0xe681("0x40a")].length<2||(n(x),g(x),a(x),x[_0xe681("0x55c")]())},s=null,c=function(x){function e(x){_(this,e);var i=t(this,(e[_0xe681("0x36e")]||Object[_0xe681("0x36f")](e))[_0xe681("0x1a")](this)),n=i;return n[_0xe681("0x40a")]=null,n[_0xe681("0x44d")]=1,n[_0xe681("0x18a")]=12,n.uvBaseLen=1,Object[_0xe681("0x366")](n,x),n[_0xe681("0x3e8")]||(n[_0xe681("0x3da")]==esmap.ESLineMode[_0xe681("0x3dd")]?n[_0xe681("0x3e8")]=.3:n.lineMode==esmap.ESLineMode[_0xe681("0x55d")]&&(n[_0xe681("0x3e8")]=1)),n[_0xe681("0x189")]=esmap[_0xe681("0x123")][_0xe681("0x86")][_0xe681("0x124")](n,"smooth",!0),n.up||(n.up=new(THREE[_0xe681("0x232")])(0,1,0)),i[_0xe681("0x553")]=[],i[_0xe681("0x555")]=[],o(n),i}return i(e,x),I(e,[{key:_0xe681("0x408"),value:function(x){for(var e,_,t=this,i=0,n=t[_0xe681("0x555")],g=(x instanceof Array,1),a=0;a<n[_0xe681("0x25")];a++){var r=n[a],A=t[_0xe681("0x40a")][a];if(A)for(var C=0;C<r.length;C++){var I=r[C];0==C&&1!=t[_0xe681("0x3e8")]&&(e=r[0][_0xe681("0x1cc")]()[_0xe681("0x241")](A)[_0xe681("0x25")]()),1!=t.yScale&&(_=I[_0xe681("0x1cc")]().sub(A),g=_.length()/e);var o=A[_0xe681("0x1cc")]()[_0xe681("0x80")](I.clone()[_0xe681("0x241")](A)[_0xe681("0x285")]().multiplyScalar(x*g));t.vertices[i][_0xe681("0x233")](o),i++}}x<.1&&(x=.1),t[_0xe681("0x44d")]=x,t[_0xe681("0x55e")]=!0}}]),e}(THREE[_0xe681("0x55f")]);e.default=c},function(x,e){function _(x,e){if(!(x instanceof e))throw new TypeError(_0xe681("0x77"))}_0xe681("0x3d"),Object[_0xe681("0x22")](e,_0xe681("0x94"),{value:!0});var t={dataUrlPrefix:_0xe681("0x560"),themeUrlPrefix:"data/theme/"},i=function x(e){_(this,x),this[_0xe681("0x272")]=t[_0xe681("0x561")],this[_0xe681("0x273")]=t[_0xe681("0x562")],this[_0xe681("0x4eb")]=document[_0xe681("0x8d")],this[_0xe681("0x277")]=[10,20],this[_0xe681("0x27b")]=64,this.scalerOffet=[10,40],this[_0xe681("0x563")]="60",this.scalerBgColor=_0xe681("0x564"),this[_0xe681("0x565")]=_0xe681("0x566"),this[_0xe681("0x567")]=null,this[_0xe681("0x1c4")]=0,this.focusAnimateMode=!0,this[_0xe681("0x245")]=.3,this[_0xe681("0x212")]=!0,this[_0xe681("0x215")]=.4,this[_0xe681("0x289")]=!0,this[_0xe681("0x28a")]=.3,this[_0xe681("0x568")]=!0,this[_0xe681("0x569")]=.3,this[_0xe681("0x56a")]=!0,this[_0xe681("0x1ca")]=!0,this[_0xe681("0x1e2")]=!0,this[_0xe681("0x1ee")]=0,this[_0xe681("0x1ba")]=null,this[_0xe681("0x1f0")]=null,this[_0xe681("0x56b")]=20,this[_0xe681("0x1f7")]=null,this[_0xe681("0x1f8")]=null,this.viewMode="3d",this[_0xe681("0x56c")]=!1,this.lightAngleX=45,this[_0xe681("0x2b1")]=45,this[_0xe681("0x56d")]=2048,this[_0xe681("0x56e")]=.6,this[_0xe681("0x401")]=!0,this[_0xe681("0x56f")]=.04,this.controlsScaleThreshold=.05,this.defaultControlsPose=null,this[_0xe681("0x22e")]=null,this[_0xe681("0x23b")]=180,this[_0xe681("0x23c")]=null,this[_0xe681("0x570")]=0,this.mapFloorSpan=0,this[_0xe681("0x571")]=1,this[_0xe681("0x572")]=1,this[_0xe681("0x573")]=1,this[_0xe681("0x574")]=null,this[_0xe681("0x575")]=null,this[_0xe681("0x576")]=!1,this[_0xe681("0x346")]=!1,this[_0xe681("0x577")]=!1,this.modelLines=!0,this[_0xe681("0x578")]=!1,this[_0xe681("0x579")]=0;var i=esmap[_0xe681("0x197")].getPlatform()[_0xe681("0x357")];if(this.compassOffset=i?this[_0xe681("0x277")]:[5,5],this[_0xe681("0x27b")]=i?this[_0xe681("0x27b")]:30,this.scalerWidth=i?this[_0xe681("0x563")]:"50",e)for(var n in e)this[n]=e[n]};e[_0xe681("0x9d")]=i},function(x,e){function _(x,e){if(!(x instanceof e))throw new TypeError(_0xe681("0x77"))}_0xe681("0x3d"),Object[_0xe681("0x22")](e,_0xe681("0x94"),{value:!0});var t=function(){function x(x,e){for(var _=0;_<e.length;_++){var t=e[_];t[_0xe681("0x7c")]=t[_0xe681("0x7c")]||!1,t[_0xe681("0xc8")]=!0,_0xe681("0x7d")in t&&(t[_0xe681("0x7e")]=!0),Object[_0xe681("0x22")](x,t[_0xe681("0x7f")],t)}}return function(e,_,t){return _&&x(e[_0xe681("0x20")],_),t&&x(e,t),e}}(),i=function(){function x(){_(this,x),this[_0xe681("0x407")]=null,this.raycaster_=new(THREE[_0xe681("0x255")]),this.compassRaycaster_=new THREE.Raycaster,this[_0xe681("0x57a")]=null,this[_0xe681("0x181")]=[],this[_0xe681("0x1d5")]=!1,this[_0xe681("0x1df")]=!1,this.container=null,this[_0xe681("0x57b")]=!0,this[_0xe681("0x57c")]={levelFrom:null,levelTo:null,scale_offset:null,cameraFrom:null,cameraTo:null},em[_0xe681("0x130")][_0xe681("0x131")](this),this[_0xe681("0x357")]=esmap[_0xe681("0x197")].getPlatform()[_0xe681("0x357")],this[_0xe681("0x159")]=new(THREE[_0xe681("0x15a")])}return t(x,[{key:_0xe681("0xc5"),value:function(x,e){this[_0xe681("0x407")]=x,this[_0xe681("0x4eb")]=x[_0xe681("0x12b")][_0xe681("0x12c")],this[_0xe681("0x57d")]=e,this[_0xe681("0x1d5")]||(this[_0xe681("0x1d5")]=!0,e[_0xe681("0x146")]("mousedown",this[_0xe681("0x57e")].bind(this)),e.addEventListener(_0xe681("0x57f"),this[_0xe681("0x580")][_0xe681("0xa4")](this)),e[_0xe681("0x146")]("mouseup",this[_0xe681("0x581")][_0xe681("0xa4")](this)),e[_0xe681("0x146")](_0xe681("0x2eb"),this[_0xe681("0x57e")][_0xe681("0xa4")](this)),e.addEventListener(_0xe681("0x2ec"),this[_0xe681("0x580")][_0xe681("0xa4")](this)),e[_0xe681("0x146")](_0xe681("0x2ed"),this[_0xe681("0x581")][_0xe681("0xa4")](this))),this[_0xe681("0x181")]=[]}},{key:"addModel",value:function(x){x[_0xe681("0x182")]="Model",this.objects_[_0xe681("0x1e")](x)}},{key:_0xe681("0x582"),value:function(x){x.type_="ModelBase",this[_0xe681("0x181")].push(x)}},{key:_0xe681("0x583"),value:function(){if(this.mouse_&&this[_0xe681("0x407")].gestureController[_0xe681("0x41f")]){if(this[_0xe681("0x584")][_0xe681("0x256")](this[_0xe681("0x57a")],this.map_[_0xe681("0x12b")][_0xe681("0x585")]),!this[_0xe681("0x407")][_0xe681("0x144")][_0xe681("0x279")])return;this[_0xe681("0x584")].intersectObject(this[_0xe681("0x407")][_0xe681("0x144")][_0xe681("0x279")])[_0xe681("0x25")]>0&&this.map_.rotateTo({to:this[_0xe681("0x407")][_0xe681("0x12e")][_0xe681("0x579")],duration:.3,callback:function(){}})}}},{key:_0xe681("0x586"),value:function(x){var e;x=[][_0xe681("0x19b")](x),e=this[_0xe681("0x181")];for(var _=0;_<e[_0xe681("0x25")];_++){var t=e[_];x.indexOf(t)>-1&&(e[_0xe681("0x2b")](_,1),_--)}}},{key:"addUserPOI",value:function(x){x.type_=_0xe681("0x183"),this[_0xe681("0x181")][_0xe681("0x1e")](x)}},{key:_0xe681("0x587"),value:function(x){x[_0xe681("0x182")]=_0xe681("0x516"),this.objects_[_0xe681("0x1e")](x)}},{key:_0xe681("0x588"),value:function(x){x.type_=_0xe681("0x589"),this[_0xe681("0x181")][_0xe681("0x1e")](x)}},{key:_0xe681("0x58a"),value:function(x){x.type_="Label",this.objects_[_0xe681("0x1e")](x)}},{key:"addModel3D",value:function(x){x.type_=_0xe681("0x515"),this[_0xe681("0x181")][_0xe681("0x1e")](x)}},{key:_0xe681("0x58b"),value:function(x){x[_0xe681("0x182")]=_0xe681("0x51"),this.objects_[_0xe681("0x1e")](x)}},{key:_0xe681("0x58c"),value:function(x){if(!x[_0xe681("0x210")])return!1;var e=!0;return x.traverseAncestors(function(x){x.visible||(e=!1)}),e}},{key:_0xe681("0xc6"),value:function(x){if(this[_0xe681("0x57b")]&&this[_0xe681("0x57a")]){this[_0xe681("0x58d")][_0xe681("0x256")](this.mouse_,this.map_.currentCamera_),this.isPickedObject=!1,this[_0xe681("0x58e")]=[],this[_0xe681("0x58f")]=[];for(var e=[],_=0;_<this[_0xe681("0x181")][_0xe681("0x25")];_++){var t=this[_0xe681("0x181")][_];this[_0xe681("0x58c")](t)&&e[_0xe681("0x1e")](t)}for(var i=this.raycaster_[_0xe681("0x590")](e),n=null,g=0;g<i.length;g++)if(i[g][_0xe681("0x24")][_0xe681("0x4d0")]!=n){n=i[g][_0xe681("0x24")][_0xe681("0x4d0")];var a=i[g][_0xe681("0x24")][_0xe681("0x17a")];if(a&&a[_0xe681("0xce")]==esmap[_0xe681("0x1e0")][_0xe681("0x293")]){i.splice(g+1,i[_0xe681("0x25")]);break}}else i[_0xe681("0x2b")](g,1),g--;if(i[_0xe681("0x25")]>0&&(this[_0xe681("0x58e")]=i,this[_0xe681("0x591")]=!0),this[_0xe681("0x357")]&&x)if(this[_0xe681("0x58e")][_0xe681("0x25")]>0){var r=this[_0xe681("0x58e")][0].object;r&&(_0xe681("0x183")==r.type_||r[_0xe681("0x17a")]&&r[_0xe681("0x17a")][_0xe681("0x370")]&&"es3dmarker"==r[_0xe681("0x17a")][_0xe681("0x370")])?(document[_0xe681("0x8d")][_0xe681("0xcc")][_0xe681("0x2de")]="pointer",this.over_=r[_0xe681("0x17a")]||r,this[_0xe681("0x407")][_0xe681("0x150")]("onOver",this[_0xe681("0x592")])):(document[_0xe681("0x8d")][_0xe681("0xcc")][_0xe681("0x2de")]=_0xe681("0x593"),this[_0xe681("0x592")]&&this[_0xe681("0x407")][_0xe681("0x150")](_0xe681("0x594"),this.over_),this[_0xe681("0x592")]=null)}else document[_0xe681("0x8d")][_0xe681("0xcc")][_0xe681("0x2de")]=_0xe681("0x593"),this[_0xe681("0x592")]&&this[_0xe681("0x407")][_0xe681("0x150")](_0xe681("0x594"),this[_0xe681("0x592")]),this[_0xe681("0x592")]=null}}},{key:_0xe681("0x57e"),value:function(x){var e=this;this[_0xe681("0x57b")]&&(this[_0xe681("0x159")][_0xe681("0xc5")](),this.istaped=!0,this[_0xe681("0x57a")]=this[_0xe681("0x595")](x),this[_0xe681("0x596")]=this[_0xe681("0x57a")][_0xe681("0x1cc")](),this[_0xe681("0x57c")][_0xe681("0x597")]=this[_0xe681("0x407")].controls[_0xe681("0x1b1")].getScaleRate(),this[_0xe681("0x57c")][_0xe681("0x598")]=this[_0xe681("0x407")][_0xe681("0x254")][_0xe681("0x185")].clone(),this.update(),x[_0xe681("0x30b")](),x[_0xe681("0x599")](),setTimeout(function(){if(1==e[_0xe681("0x59a")]){var x=e[_0xe681("0x59b")]();if(x)return;e[_0xe681("0xc6")](!1),e[_0xe681("0x150")](_0xe681("0x1d6"),{intersects:e[_0xe681("0x58e")],mouse:e[_0xe681("0x596")]})}},800))}},{key:_0xe681("0x580"),value:function(x){this[_0xe681("0x57b")]&&(this.mouse_=this[_0xe681("0x595")](x),this[_0xe681("0x596")]=this.getPick_(x),this[_0xe681("0x59c")]=this[_0xe681("0x159")][_0xe681("0x360")](),this[_0xe681("0x407")][_0xe681("0x12e")][_0xe681("0x576")]&&this[_0xe681("0xc6")](!0),this[_0xe681("0x59a")]&&(this[_0xe681("0x57c")][_0xe681("0x59d")]=this[_0xe681("0x407")][_0xe681("0x254")][_0xe681("0x185")][_0xe681("0x1cc")]()))}},{key:_0xe681("0x59b"),value:function(){return!!(this[_0xe681("0x57c")].cameraFrom&&this.staped[_0xe681("0x59d")]&&(Math[_0xe681("0x121")](this[_0xe681("0x57c")][_0xe681("0x598")].x-this[_0xe681("0x57c")][_0xe681("0x59d")].x)>.8||Math[_0xe681("0x121")](this[_0xe681("0x57c")].cameraFrom.z-this[_0xe681("0x57c")][_0xe681("0x59d")].z)>.8))}},{key:_0xe681("0x581"),value:function(x){var e=!1,_=this;this[_0xe681("0x59a")]=!1,this[_0xe681("0x159")][_0xe681("0x385")](),this[_0xe681("0x57c")][_0xe681("0x59e")]=_[_0xe681("0x407")][_0xe681("0x134")][_0xe681("0x1b1")][_0xe681("0x275")](),this[_0xe681("0x57c")][_0xe681("0x59d")]=_.map_[_0xe681("0x254")].position[_0xe681("0x1cc")]();var t=_[_0xe681("0x59b")]();if(this.staped.scale_offset=this[_0xe681("0x57c")].levelFrom-this[_0xe681("0x57c")][_0xe681("0x59e")],0!==this[_0xe681("0x57c")][_0xe681("0x59f")]&&(e=!0),this[_0xe681("0x57b")]){if(x[_0xe681("0x30c")]||(this[_0xe681("0x596")]=this[_0xe681("0x595")](x)),this[_0xe681("0x596")]&&(0==x[_0xe681("0x474")]||x[_0xe681("0x30c")])&&this[_0xe681("0x596")].distanceTo(this[_0xe681("0x57a")])<.01){if(this[_0xe681("0x583")]())return;this[_0xe681("0x591")]||this[_0xe681("0x5a0")]?!e&&!t&&this.isPickedObject&&this[_0xe681("0x150")](_0xe681("0x1de"),{intersects:this.objectIntersects_,mouse:this[_0xe681("0x596")]}):!e&&!t&&this[_0xe681("0x150")](_0xe681("0x1e5"),this[_0xe681("0x596")])}x.preventDefault(),this[_0xe681("0x57c")][_0xe681("0x59d")]=null}}},{key:_0xe681("0x595"),value:function(x){var e=this[_0xe681("0x4eb")][_0xe681("0x47a")](),_=new(THREE[_0xe681("0x44a")]);return _.x=((x[_0xe681("0x30c")]?x.touches[0].clientX:x[_0xe681("0x5a1")])-e[_0xe681("0x302")])/e.width*2-1,_.y=2*-(((x[_0xe681("0x30c")]?x.touches[0].clientY:x[_0xe681("0x5a2")])-e[_0xe681("0x282")])/e[_0xe681("0x184")])+1,_}},{key:"enabled",get:function(){return this[_0xe681("0x57b")]},set:function(x){this.enabled_=x}}]),x}();e[_0xe681("0x9d")]=i},function(x,e){function _(x,e){if(!x)throw new ReferenceError(_0xe681("0x36b"));return!e||_0xe681("0x24")!=typeof e&&_0xe681("0x32")!=typeof e?x:e}function t(x,e){if("function"!=typeof e&&null!==e)throw new TypeError(_0xe681("0x36c")+typeof e);x[_0xe681("0x20")]=Object[_0xe681("0xda")](e&&e[_0xe681("0x20")],{constructor:{value:x,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object[_0xe681("0x36d")]?Object[_0xe681("0x36d")](x,e):x[_0xe681("0x36e")]=e)}function i(x,e){if(!(x instanceof e))throw new TypeError(_0xe681("0x77"))}_0xe681("0x3d"),Object.defineProperty(e,"__esModule",{value:!0});var n=function x(e,_,t){i(this,x),this[_0xe681("0x396")]=_,this[_0xe681("0x396")][_0xe681("0x1f4")]=e;var n,g=_.Typeid;_[_0xe681("0x200")]&&""!=_[_0xe681("0x200")]&&(g=_[_0xe681("0x200")]),esmap[_0xe681("0x1d3")][_0xe681("0x1d4")]=esmap[_0xe681("0x1d3")][_0xe681("0x1d4")]||{},n=esmap[_0xe681("0x1d3")][_0xe681("0x1d4")][e+"_"+g],n||(n=t[_0xe681("0x5a3")](g),esmap[_0xe681("0x1d3")][_0xe681("0x1d4")][e+"_"+g]=n),THREE[_0xe681("0x42f")][_0xe681("0x1a")](this,n),this[_0xe681("0x27c")][_0xe681("0xfc")](10,10,10),this[_0xe681("0x4ef")]=parseFloat(_.w),this[_0xe681("0x379")]=parseFloat(_.h)};e[_0xe681("0x9d")]=n;var g=function(x){function e(){var x,t,n,g;i(this,e);for(var a=arguments[_0xe681("0x25")],r=Array(a),A=0;A<a;A++)r[A]=arguments[A];return t=n=_(this,(x=e.__proto__||Object[_0xe681("0x36f")](e)).call[_0xe681("0x37")](x,[this][_0xe681("0x19b")](r))),n[_0xe681("0x392")]=esmap[_0xe681("0x383")].prototype[_0xe681("0x392")],n[_0xe681("0x386")]=esmap[_0xe681("0x383")][_0xe681("0x20")].flash,n[_0xe681("0x38b")]=esmap[_0xe681("0x383")][_0xe681("0x20")][_0xe681("0x38b")],n[_0xe681("0x394")]=esmap.ESMapLabel[_0xe681("0x20")][_0xe681("0x394")],g=t,_(n,g)}return t(e,x),e}(THREE[_0xe681("0x42f")]);n[_0xe681("0x20")]=new g,esmap.ESMapUtil[_0xe681("0x54c")](n[_0xe681("0x20")])},function(x,e){function _(x,e){if(!x)throw new ReferenceError(_0xe681("0x36b"));return!e||_0xe681("0x24")!=typeof e&&_0xe681("0x32")!=typeof e?x:e}function t(x,e){if(_0xe681("0x32")!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);x.prototype=Object[_0xe681("0xda")](e&&e[_0xe681("0x20")],{constructor:{value:x,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object[_0xe681("0x36d")]?Object.setPrototypeOf(x,e):x[_0xe681("0x36e")]=e)}function i(x,e){if(!(x instanceof e))throw new TypeError(_0xe681("0x77"))}_0xe681("0x3d"),Object[_0xe681("0x22")](e,_0xe681("0x94"),{value:!0});var n=function x(e,_,t){i(this,x),this[_0xe681("0x3c7")]=esmap[_0xe681("0x5a4")][_0xe681("0x3c7")],this[_0xe681("0x396")]=e,this[_0xe681("0x210")]=!1;var n=new(THREE[_0xe681("0x430")]);THREE[_0xe681("0x42f")].call(this,n);var g=this;esmap[_0xe681("0x197")][_0xe681("0x51a")](_,function(x){n[_0xe681("0xbd")]=x,g.visible=!0;var _={};e[_0xe681("0x3bf")]instanceof Object?(_.w=e.size_.w,_.h=e.size_.h):_.w=_.h=e[_0xe681("0x3bf")];var i=_.w/32*10,a=_.h/32*10;g[_0xe681("0x3ed")]=esmap[_0xe681("0x3f1")][_0xe681("0x39e")],g.scale[_0xe681("0xfc")](i,a,1),g[_0xe681("0x4ef")]=_.w,g[_0xe681("0x379")]=_.h,t&&t(x)})};e[_0xe681("0x9d")]=n;var g=function(x){function e(){var x,t,n,g;i(this,e);for(var a=arguments[_0xe681("0x25")],r=Array(a),A=0;A<a;A++)r[A]=arguments[A];return t=n=_(this,(x=e[_0xe681("0x36e")]||Object.getPrototypeOf(e))[_0xe681("0x1a")].apply(x,[this][_0xe681("0x19b")](r))),n[_0xe681("0x392")]=esmap[_0xe681("0x383")][_0xe681("0x20")][_0xe681("0x392")],n[_0xe681("0x386")]=esmap[_0xe681("0x383")][_0xe681("0x20")][_0xe681("0x386")],n[_0xe681("0x3b9")]=esmap.ESMapLabel.prototype[_0xe681("0x3b9")],n[_0xe681("0x34f")]=esmap[_0xe681("0x383")].prototype.moveTo,n[_0xe681("0x3bb")]=esmap[_0xe681("0x383")][_0xe681("0x20")][_0xe681("0x3bb")],n[_0xe681("0x38b")]=esmap[_0xe681("0x383")][_0xe681("0x20")][_0xe681("0x38b")],n[_0xe681("0x394")]=esmap[_0xe681("0x383")][_0xe681("0x20")].stopJump,n[_0xe681("0x387")]=esmap[_0xe681("0x383")].prototype[_0xe681("0x387")],g=t,_(n,g)}return t(e,x),e}(THREE[_0xe681("0x42f")]);n[_0xe681("0x20")]=new g,esmap[_0xe681("0x197")][_0xe681("0x54c")](n.prototype)},function(x,e){function _(x,e){if(!(x instanceof e))throw new TypeError(_0xe681("0x77"))}function t(x,e){if(!x)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!e||"object"!=typeof e&&_0xe681("0x32")!=typeof e?x:e}function i(x,e){if(_0xe681("0x32")!=typeof e&&null!==e)throw new TypeError(_0xe681("0x36c")+typeof e);x.prototype=Object[_0xe681("0xda")](e&&e[_0xe681("0x20")],{constructor:{value:x,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(x,e):x[_0xe681("0x36e")]=e)}Object[_0xe681("0x22")](e,"__esModule",{value:!0});var n=function(x){function e(x,i,n,g){_(this,e);var a=new THREE.MeshLambertMaterial({transparent:!0}),r=new(THREE[_0xe681("0x43c")])(1,1,1,1),A=t(this,(e[_0xe681("0x36e")]||Object[_0xe681("0x36f")](e))[_0xe681("0x1a")](this,r,a));A[_0xe681("0x3c7")]=esmap[_0xe681("0x5a4")][_0xe681("0x3c7")],A.updateScreenSize=esmap[_0xe681("0x383")][_0xe681("0x20")][_0xe681("0x392")],A.flash=esmap[_0xe681("0x383")][_0xe681("0x20")][_0xe681("0x386")],A[_0xe681("0x3b9")]=esmap[_0xe681("0x383")][_0xe681("0x20")][_0xe681("0x3b9")],A[_0xe681("0x34f")]=esmap[_0xe681("0x383")][_0xe681("0x20")].moveTo,A.fade=esmap[_0xe681("0x383")][_0xe681("0x20")][_0xe681("0x3bb")],A.data_=i,A[_0xe681("0x210")]=!1;var C=A;return esmap[_0xe681("0x197")][_0xe681("0x51a")](n,function(x){a.map=x,a.doubleSided=!0,a.depthWrite=!1,a[_0xe681("0x3ec")]=!1,a[_0xe681("0x400")]=THREE[_0xe681("0x43d")],C[_0xe681("0x3ed")]=esmap[_0xe681("0x3f1")][_0xe681("0x5a5")];var e=i.size_/32;C[_0xe681("0x27c")].set(10*e,10*e,10*e*5),C[_0xe681("0x38e")][_0xe681("0xfc")](-Math.PI/2,0,Math.PI,_0xe681("0x3c2")),C[_0xe681("0x4ef")]=32*e,C[_0xe681("0x379")]=32*e,C[_0xe681("0x210")]=!0,g&&g(x)}),A}return i(e,x),e}(THREE[_0xe681("0x21f")]);e[_0xe681("0x9d")]=n,esmap[_0xe681("0x197")][_0xe681("0x54c")](n[_0xe681("0x20")])},function(x,e){function _(x,e){if(!(x instanceof e))throw new TypeError(_0xe681("0x77"))}function t(x,e){if(!x)throw new ReferenceError(_0xe681("0x36b"));return!e||_0xe681("0x24")!=typeof e&&_0xe681("0x32")!=typeof e?x:e}function i(x,e){if(_0xe681("0x32")!=typeof e&&null!==e)throw new TypeError(_0xe681("0x36c")+typeof e);x[_0xe681("0x20")]=Object.create(e&&e[_0xe681("0x20")],{constructor:{value:x,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object[_0xe681("0x36d")]?Object[_0xe681("0x36d")](x,e):x.__proto__=e)}_0xe681("0x3d"),Object[_0xe681("0x22")](e,_0xe681("0x94"),{value:!0});var n=new(THREE[_0xe681("0x220")])(1,1,1,1),g=function(x){function e(x,i,g,a){_(this,e);var r=new(THREE[_0xe681("0x5a6")])({transparent:!0}),A={fontsize:2*g[_0xe681("0x482")],borderThickness:.1,color:esmap[_0xe681("0x197")].toRgba(g[_0xe681("0x483")]||_0xe681("0x484")),borderColor:esmap[_0xe681("0x197")].toRgba(g[_0xe681("0x485")]||_0xe681("0x465")),imagealign:g[_0xe681("0x486")]||_0xe681("0x302"),imagesize:g[_0xe681("0x29b")],imagespace:g[_0xe681("0x525")],textspace:g[_0xe681("0x5a7")]||4,pivottype:g.pivottype||"center"},C=(g[_0xe681("0x482")],t(this,(e[_0xe681("0x36e")]||Object[_0xe681("0x36f")](e))[_0xe681("0x1a")](this,n,r)));C.setUrl=esmap[_0xe681("0x5a4")][_0xe681("0x3c7")],C[_0xe681("0x392")]=esmap[_0xe681("0x383")][_0xe681("0x20")][_0xe681("0x392")],C[_0xe681("0x386")]=esmap[_0xe681("0x383")].prototype[_0xe681("0x386")],C[_0xe681("0x3b9")]=esmap.ESMapLabel.prototype[_0xe681("0x3b9")],C[_0xe681("0x34f")]=esmap[_0xe681("0x383")][_0xe681("0x20")][_0xe681("0x34f")],C[_0xe681("0x3bb")]=esmap[_0xe681("0x383")][_0xe681("0x20")][_0xe681("0x3bb")];var I=esmap[_0xe681("0x383")][_0xe681("0x20")].makeTextSprite_[_0xe681("0x1a")](C,i[_0xe681("0x40")],A),o=I[_0xe681("0x200")].width,s=I[_0xe681("0x200")][_0xe681("0x184")];I[_0xe681("0x199")]=!0,C[_0xe681("0x17e")][_0xe681("0xbd")]=I,C.material[_0xe681("0xbd")][_0xe681("0x199")]=!0,C[_0xe681("0x17e")][_0xe681("0x5a8")]=!0,C[_0xe681("0x17e")].needsUpdate=!0,C[_0xe681("0x193")]=new(THREE[_0xe681("0x220")])(o,s,1,1),C[_0xe681("0x396")]=i,C[_0xe681("0x210")]=!1;var c=C;return c.rotation.set(-Math.PI/2,0,Math.PI,"XYZ"),c.rotateZ(THREE[_0xe681("0x1b3")][_0xe681("0x375")](Number(i[_0xe681("0x376")]))),c[_0xe681("0x3ed")]=esmap.ESRenderOrder[_0xe681("0x5a5")],c[_0xe681("0x27c")][_0xe681("0xfc")](.04,.04,1),a&&a(),C}return i(e,x),e}(THREE.Mesh);e[_0xe681("0x9d")]=g,esmap.ESMapUtil[_0xe681("0x54c")](g[_0xe681("0x20")])},function(x,e,_){function t(x){return x&&x.__esModule?x:{default:x}}function i(x,e){if(!(x instanceof e))throw new TypeError(_0xe681("0x77"))}_0xe681("0x3d"),Object[_0xe681("0x22")](e,_0xe681("0x94"),{value:!0});var n=function(){function x(x,e){for(var _=0;_<e.length;_++){var t=e[_];t[_0xe681("0x7c")]=t[_0xe681("0x7c")]||!1,t[_0xe681("0xc8")]=!0,_0xe681("0x7d")in t&&(t.writable=!0),Object[_0xe681("0x22")](x,t[_0xe681("0x7f")],t)}}return function(e,_,t){return _&&x(e.prototype,_),t&&x(e,t),e}}(),g=_(81),a=t(g),r=function(){function x(e,_){i(this,x),this[_0xe681("0x1fe")]=null,this[_0xe681("0x1af")]=0,this[_0xe681("0x1ad")]=0,this.floors_={},this[_0xe681("0x5a9")]=0,this[_0xe681("0x222")]=null,this[_0xe681("0x240")]={},this.userFloors_={},this[_0xe681("0x179")]=null,this[_0xe681("0x22f")]=null,this[_0xe681("0x26e")]=0,this.minY_=0,this[_0xe681("0x26f")]=0,this[_0xe681("0x5aa")]=0,this[_0xe681("0x5ab")]=0,this[_0xe681("0x407")]=e,this[_0xe681("0x5ac")]=_,this.loadqueue=new(esmap[_0xe681("0x5ad")])(e);var _=esmap[_0xe681("0x197")][_0xe681("0x352")]();this[_0xe681("0x357")]=_[_0xe681("0x357")],this[_0xe681("0x5ae")]=new(a[_0xe681("0x9d")])(this)}return n(x,[{key:_0xe681("0x173"),value:function(){function x(e){if(null!==e){e[_0xe681("0x17a")]&&e.datas_.o3d_&&(e.datas_[_0xe681("0x17d")]=void 0,e.datas_=void 0);for(var _=0;_<e[_0xe681("0x1f")][_0xe681("0x25")];_++)x(e.children[_]);e[_0xe681("0x193")]&&(e[_0xe681("0x193")][_0xe681("0x24c")](),e[_0xe681("0x193")]=void 0),e[_0xe681("0x17e")]&&(e[_0xe681("0x17e")].materials?e[_0xe681("0x17e")][_0xe681("0x194")][_0xe681("0xc3")](function(x){x[_0xe681("0xbd")]&&(x[_0xe681("0xbd")].dispose(),x.map=void 0),x[_0xe681("0x24c")](),x=void 0}):(e[_0xe681("0x17e")][_0xe681("0x24c")](),e[_0xe681("0x17e")]=void 0))}e=void 0}x(this.o3dScene_)}},{key:_0xe681("0x1e9"),value:function(x,e){var _=x[_0xe681("0x1ea")]<32503514?x[_0xe681("0x1ea")]:x.maptime/1e3;if(!((new Date)[_0xe681("0x1eb")]()>1e6*_)){var t=esmap[_0xe681("0x197")][_0xe681("0x5af")](x.token+x[_0xe681("0x5b0")]+x[_0xe681("0x5b1")]+(x.o1||0)+_0xe681("0x5b2")+(x.o2||0));t!=x.Hash&&x[_0xe681("0x5b3")]!=x[_0xe681("0x575")]&&"share"!=x[_0xe681("0x575")]||(this[_0xe681("0x1fe")]=x,this[_0xe681("0x5a9")]=e,this[_0xe681("0x1af")]=this[_0xe681("0x1fe")][_0xe681("0x5b4")],this[_0xe681("0x1ad")]=this[_0xe681("0x1fe")][_0xe681("0x5b5")],this[_0xe681("0x222")]=new(THREE[_0xe681("0x32f")]),this[_0xe681("0x240")]={},this.userFloors_={},this[_0xe681("0x179")]=new(THREE[_0xe681("0x32f")]),this[_0xe681("0x222")].add(this[_0xe681("0x179")]),this.box3_=esmap[_0xe681("0x18d")][_0xe681("0x5b6")](this[_0xe681("0x1fe")]),this[_0xe681("0x26e")]=this[_0xe681("0x1fe")].minX,this[_0xe681("0x26f")]=this[_0xe681("0x1fe")].maxX,this[_0xe681("0x270")]=this[_0xe681("0x1fe")][_0xe681("0x21c")],this[_0xe681("0x5aa")]=this[_0xe681("0x1fe")][_0xe681("0x271")])}}},{key:_0xe681("0x5b7"),value:function(){return esmap[_0xe681("0x18d")][_0xe681("0x5b7")](this[_0xe681("0x22f")])}},{key:_0xe681("0x171"),value:function(){return this[_0xe681("0x222")]}},{key:_0xe681("0x20a"),value:function(x,e,_){if(_==this[_0xe681("0x407")][_0xe681("0x161")]){var t=this.floors_[x];t[_0xe681("0x5b8")]=e;var i=new(esmap[_0xe681("0x295")])(this,t),n=i[_0xe681("0x17d")];n[_0xe681("0x210")]=!1,n[_0xe681("0x20c")]=t,n[_0xe681("0x185")][_0xe681("0xfc")](0,t[_0xe681("0x231")],0),this[_0xe681("0x240")][x]=n,this[_0xe681("0x222")][_0xe681("0x80")](n)}}},{key:_0xe681("0x5b9"),value:function(x,e){}},{key:"setFloorPoiVisible",value:function(x,e){}},{key:_0xe681("0x20f"),value:function(x){return this[_0xe681("0x240")][x]}},{key:_0xe681("0x5ba"),value:function(x,e,_,t,i){var n=this[_0xe681("0x20f")](x);if(n){var g=this.floors_[x][_0xe681("0x5b8")],a=this,r=null,A=null;if(this[_0xe681("0x407")][_0xe681("0x13f")][_0xe681("0x1db")][_0xe681("0x404")]>esmap[_0xe681("0x5bb")]||this[_0xe681("0x407")][_0xe681("0x13f")][_0xe681("0x1db")][_0xe681("0x404")]<esmap[_0xe681("0x5bc")])return;a[_0xe681("0x5bd")](g,n,x)[_0xe681("0x5be")](function(){_(),t&&t(),r=a[_0xe681("0x5ae")][_0xe681("0x5bf")](g,x),A=a[_0xe681("0x5ae")][_0xe681("0x5c0")](g,x)})[_0xe681("0x5be")](a[_0xe681("0x5c1")][_0xe681("0xa4")](a,g,n,x))[_0xe681("0x5be")](a[_0xe681("0x5c2")].bind(a,g,n,x))[_0xe681("0x5be")](a[_0xe681("0x5c3")][_0xe681("0xa4")](a,g,n,x))[_0xe681("0x5be")](function(){a.meshHandler[_0xe681("0x5c4")](r),a.meshHandler[_0xe681("0x5c4")](A),i&&a[_0xe681("0x5ae")][_0xe681("0xad")]()})}}},{key:"asyncBuidExtents",value:function(x,e,_){var t=this,i=new(THREE[_0xe681("0x5c5")]),n=(x[_0xe681("0x5c6")],t[_0xe681("0x208")][_]);return n[_0xe681("0x5c7")],setTimeout(function(){t[_0xe681("0x5ae")][_0xe681("0x5c8")](x,_),i[_0xe681("0x5c9")](),t[_0xe681("0x407")][_0xe681("0x257")]()},t[_0xe681("0x5ab")]),i}},{key:_0xe681("0x5c1"),value:function(x,e,_){var t=this,i=new(THREE[_0xe681("0x5c5")]);if(t.map_[_0xe681("0x12e")].loadPoi)return t[_0xe681("0x5ca")]=null,setTimeout(function(){for(var n in x[_0xe681("0x5cb")]){var g=x[_0xe681("0x5cb")][n],a=new(esmap[_0xe681("0x165")])(esmap[_0xe681("0x166")][_0xe681("0x5cc")]);e[_0xe681("0x80")](a[_0xe681("0x17d")]),a[_0xe681("0x17d")][_0xe681("0x3c8")]=new(esmap[_0xe681("0x3c9")]);var r=g[_0xe681("0x5cd")];for(var A in r){var C=r[A],I=new esmap.ESMapPoi(_,C,t[_0xe681("0x5ac")]);new(esmap[_0xe681("0x5ce")])(C,I,t),a.o3d_[_0xe681("0x80")](I);var o=C[_0xe681("0x5cf")]||3;I.position[_0xe681("0xfc")](C.X-t[_0xe681("0x1af")],o,C.Y-t[_0xe681("0x1ad")]),I[_0xe681("0x3c3")]=o,t[_0xe681("0x407")][_0xe681("0xc4")][_0xe681("0x588")](I)}}t.map_[_0xe681("0x150")](_0xe681("0x5d0"),_,_0xe681("0x5d1")),i[_0xe681("0x5c9")]()},t[_0xe681("0x5ab")]),i}},{key:_0xe681("0x5c2"),value:function(x,e,_){var t=this,i=new(THREE[_0xe681("0x5c5")]);if(t[_0xe681("0x407")][_0xe681("0x12e")].loadLabel)return setTimeout(function(){for(var n in x[_0xe681("0x5d2")]){var g=x[_0xe681("0x5d2")][n],a=new(esmap[_0xe681("0x165")])(esmap[_0xe681("0x166")][_0xe681("0x169")]);e[_0xe681("0x80")](a[_0xe681("0x17d")]),
a[_0xe681("0x17d")][_0xe681("0x3c8")]=new(esmap[_0xe681("0x3c9")]);var r=g[_0xe681("0x5d3")];for(var A in r){var C=r[A];if(""!=C.name){var I=C[_0xe681("0x5cf")]||2.5,o=new(esmap[_0xe681("0x383")])(_,C,t.mapTheme_[_0xe681("0x2a1")]);new esmap.ESLabel(C,o,t),o[_0xe681("0x210")]=!1,a[_0xe681("0x17d")].add(o),o[_0xe681("0x185")][_0xe681("0xfc")](C.X-t[_0xe681("0x1af")],I,C.Y-t.sceneZ_),t[_0xe681("0x407")].mapPicker[_0xe681("0x58a")](o)}}}t[_0xe681("0x407")][_0xe681("0x150")](_0xe681("0x5d0"),_,_0xe681("0x314")),i[_0xe681("0x5c9")]()},t[_0xe681("0x5ab")]),i}},{key:_0xe681("0x5c3"),value:function(x,e,_){var t=this,i=t[_0xe681("0x208")][_][_0xe681("0x5c7")]-t[_0xe681("0x407")].options[_0xe681("0x5d4")];return new(THREE[_0xe681("0x5c5")]),x[_0xe681("0x5d5")].forEach(function(x){var _=new(esmap[_0xe681("0x165")])(esmap.ESLayerType[_0xe681("0x19f")]);_[_0xe681("0x40")]=_0xe681("0x5d6"),e[_0xe681("0x80")](_.o3d_);var n=x;for(var g in n[_0xe681("0x5d6")])if(t[_0xe681("0x407")][_0xe681("0x12e")][_0xe681("0x571")]){var a=n[_0xe681("0x5d6")][g];if(a.LM&&a.LM[_0xe681("0x25")]>2&&_0xe681("0xa")!=a.LM){var r=t[_0xe681("0x407")].mapScene,A=a.LS.split(",");if(A[_0xe681("0x25")]>2)var C=new(THREE[_0xe681("0x232")])(parseFloat(A[0]),parseFloat(A[1]),parseFloat(A[2]));if(a.LR)var I=Math.PI/180,o=a.LR[_0xe681("0x23a")](","),s=new(THREE[_0xe681("0x506")])(parseFloat(o[0])*I,parseFloat(o[1])*I,parseFloat(o[2])*I);var c=a.LO[_0xe681("0x23a")](",");if(c.length>2)var f=new(THREE[_0xe681("0x232")])(-a.X1-r[_0xe681("0x1af")]+parseFloat(c[0]),i/2-parseFloat(c[1]),a.Y1-r[_0xe681("0x1ad")]+parseFloat(c[2]));else var f=new(THREE[_0xe681("0x232")])(-a.X1-r[_0xe681("0x1af")],i/2,a.Y1-r[_0xe681("0x1ad")]);var l=t[_0xe681("0x407")][_0xe681("0x12e")][_0xe681("0x272")]+"/"+t[_0xe681("0x407")].sceneId_,u=l+_0xe681("0x5d7")+a.LM+".js";t[_0xe681("0x24d")][_0xe681("0x20e")]({name:a.LM,url:u,scale:C,rotate:s,position:f,parent:_[_0xe681("0x17d")],id:a[_0xe681("0x441")]})}}})}},{key:_0xe681("0x5d8"),value:function(x,e){var _=this.map_[_0xe681("0x5d9")],t=e[_0xe681("0x3c8")],i=e[_0xe681("0x17a")][_0xe681("0x3ca")];t[_0xe681("0x173")]();for(var n in e[_0xe681("0x1f")]){var g=e.children[n];if(g.forceVisible_){var a=this[_0xe681("0x407")][_0xe681("0x25f")](g),r=g[_0xe681("0x4ef")]/2,A=g[_0xe681("0x379")]/2;i&&t[_0xe681("0x1e")](g,{x:a.x-r/2,y:a.y-A/2,w:r,h:A})?g[_0xe681("0x210")]=!_:(g[_0xe681("0x210")]=!0,g[_0xe681("0x392")](x))}}}},{key:_0xe681("0x229"),value:function(x){for(var e in this.o3dFloors_){var _=this[_0xe681("0x240")][e];if(_[_0xe681("0x210")])for(var t=0;t<_[_0xe681("0x1f")][_0xe681("0x25")];t++){var i=_[_0xe681("0x1f")][t],n=i.datas_;n&&n.visible&&(n[_0xe681("0x19e")]==esmap[_0xe681("0x166")][_0xe681("0x169")]||n[_0xe681("0x19e")]==esmap[_0xe681("0x166")][_0xe681("0x16a")]?this.collideLabel_(x,i):(n._type_==esmap[_0xe681("0x166")][_0xe681("0x5cc")]||n[_0xe681("0x19e")]==esmap.ESLayerType.IMAGE_MARKER)&&this[_0xe681("0x5d8")](x,i))}}}}]),x}();e[_0xe681("0x9d")]=r},function(x,e){function _(x,e){if(!(x instanceof e))throw new TypeError(_0xe681("0x77"))}Object[_0xe681("0x22")](e,"__esModule",{value:!0});var t=function(){function x(x,e){for(var _=0;_<e[_0xe681("0x25")];_++){var t=e[_];t[_0xe681("0x7c")]=t[_0xe681("0x7c")]||!1,t[_0xe681("0xc8")]=!0,_0xe681("0x7d")in t&&(t[_0xe681("0x7e")]=!0),Object[_0xe681("0x22")](x,t[_0xe681("0x7f")],t)}}return function(e,_,t){return _&&x(e[_0xe681("0x20")],_),t&&x(e,t),e}}(),i=function(){function x(){_(this,x)}return t(x,null,[{key:_0xe681("0x5b6"),value:function(x){var e=Number[_0xe681("0x5da")],_=Number[_0xe681("0x5db")],t=x.floors;for(var i in t){var n=t[i].Elevation;e=Math.min(e,n),_=Math.max(_,n)}return new(THREE[_0xe681("0x5dc")])(new(THREE[_0xe681("0x232")])(x[_0xe681("0x21b")],e,x[_0xe681("0x21c")]),new(THREE[_0xe681("0x232")])(x[_0xe681("0x21a")],_,x.maxY))}},{key:_0xe681("0x5b7"),value:function(x){var e=x[_0xe681("0x27d")](),_=x[_0xe681("0x26c")]();return{target:new THREE.Vector3(0,e.y,0),position:new(THREE[_0xe681("0x232")])(1*_.x,e.y+.75*_.x,1*-_.x)}}},{key:_0xe681("0x18e"),value:function(x,e,_){if(x[_0xe681("0x25")]>=3){var t=Math.PI/20,i=Math.PI-t,n=_||1,g=void 0==e?8:e;if(0==g)return x;var a=1/g;x[_0xe681("0x1e")](x[x[_0xe681("0x25")]-1]);for(var r=[],A=0;A<x[_0xe681("0x25")]-2;){var C=x[A][_0xe681("0x1cc")](),I=x[A+1][_0xe681("0x1cc")](),o=x[A+2][_0xe681("0x1cc")](),s=C.clone()[_0xe681("0x241")](I),c=o[_0xe681("0x1cc")]().sub(I),f=s.angleTo(c),l=s[_0xe681("0x25")](),u=c[_0xe681("0x25")]();if(C[_0xe681("0x190")]=x[A].fnum,I[_0xe681("0x190")]=x[A+1][_0xe681("0x190")],o[_0xe681("0x190")]=x[A+2].fnum,r.push(C),f>t&&f<i&&l>n&&u>n){var h=I.clone()[_0xe681("0x5dd")](C,n/l),d=I[_0xe681("0x1cc")]()[_0xe681("0x5dd")](o,n/u);h[_0xe681("0x190")]=I[_0xe681("0x190")],r[_0xe681("0x1e")](h);for(var b=a;b<.999999;b+=a){var p=b,v=h[_0xe681("0x1cc")]()[_0xe681("0x5dd")](I,p),m=I[_0xe681("0x1cc")]()[_0xe681("0x5dd")](d,p),y=v[_0xe681("0x5dd")](m,p);y[_0xe681("0x190")]=h[_0xe681("0x190")],r[_0xe681("0x1e")](y)}x[A+1]=d,d[_0xe681("0x190")]=I[_0xe681("0x190")],A++}else A++;A==x[_0xe681("0x25")]-2&&r[_0xe681("0x1e")](o)}return r}return x}}]),x}();e.default=i},function(x,e,_){function t(x){return x&&x[_0xe681("0x94")]?x:{default:x}}function i(x,e){if(!(x instanceof e))throw new TypeError(_0xe681("0x77"))}_0xe681("0x3d"),Object.defineProperty(e,"__esModule",{value:!0});var n=function(){function x(x,e){for(var _=0;_<e[_0xe681("0x25")];_++){var t=e[_];t[_0xe681("0x7c")]=t[_0xe681("0x7c")]||!1,t[_0xe681("0xc8")]=!0,_0xe681("0x7d")in t&&(t[_0xe681("0x7e")]=!0),Object[_0xe681("0x22")](x,t[_0xe681("0x7f")],t)}}return function(e,_,t){return _&&x(e[_0xe681("0x20")],_),t&&x(e,t),e}}(),g=_(33),a=t(g),r=_(42),A=t(r),C=_(3),I=t(C),o=function(){function x(e){i(this,x),this[_0xe681("0x407")]=e,this[_0xe681("0x278")]=e[_0xe681("0x12e")]}return n(x,[{key:_0xe681("0x5de"),value:function(x,e,t,i){var n=this,g=this.options_.mapDataSrc+"/"+x+"/"+x+_0xe681("0x5df");this[_0xe681("0x278")].s&&this[_0xe681("0x278")].k?g=this[_0xe681("0x278")].s+"map/mapdata!getmap.action?bids="+x+_0xe681("0x5e0")+this.options_.k+_0xe681("0x5e1")+Date.parse(new Date):this[_0xe681("0x278")].isRandom&&(g+="?t="+Date[_0xe681("0x16")](new Date));var a=_(77);new XMLHttpRequest,I[_0xe681("0x9d")][_0xe681("0xb1")](g,!0)[_0xe681("0xaf")](function(x){var _=new Uint8Array(x),t=a[_0xe681("0x5e2")][_0xe681("0xfd")](_),g=n.versionCheck(t[_0xe681("0x404")]),r=[t[_0xe681("0x5b0")],t[_0xe681("0x575")]],A=[n[_0xe681("0x278")][_0xe681("0x5b0")],n[_0xe681("0x278")][_0xe681("0x575")]],C=t.Remark;if(!g)return void console[_0xe681("0x3cd")](esmap[_0xe681("0x5e3")][_0xe681("0x5e4")]);if(A[0]&&r[0]){var I=esmap[_0xe681("0x197")][_0xe681("0x5af")](_0xe681("0x5e5")+t.bid+A[0]);r[0]&&I==r[0]&&(n[_0xe681("0x407")][_0xe681("0x141")][_0xe681("0x210")]=!1)}var o=0,s=document[_0xe681("0x5e6")],c=s.split("."),f=c[_0xe681("0x25")];f>=2&&(s=c[f-2]+"."+c[f-1]);var l=esmap.ESMapUtil[_0xe681("0x5af")](s);if(_0xe681("0x5e7")!=l&&"Wi1zW29wWi5DWA=="!=l&&_0xe681("0x5e8")!=l&&"Ti4xTjg="!=l){if(r[1]&&_0xe681("0x5e9")!=r[1]){if(C.length>1&&C[_0xe681("0x1d")](s)==-1)return void console[_0xe681("0x3cd")](esmap.ESInfo[_0xe681("0x5ea")]);if(n[_0xe681("0x278")].k&&n.options_.s){var I=esmap[_0xe681("0x197")][_0xe681("0x5af")](r[1]+_0xe681("0x5eb")),u=n[_0xe681("0x278")].k[_0xe681("0x1d")]("&"),h=n[_0xe681("0x278")].k;if(u>0&&(h=h[_0xe681("0x71")](0,u),I=esmap[_0xe681("0x197")][_0xe681("0x5af")](r[1]+_0xe681("0x5ec"))),I!=h)return void console[_0xe681("0x3cd")](h);o=n[_0xe681("0x278")].showBase,Object[_0xe681("0x22")](n.map_,"_ca",{value:o,writable:!1,enumerable:!1,configurable:!0})}else{var d=t.maptime<32503514?t[_0xe681("0x1ea")]:t[_0xe681("0x1ea")]/1e3;if((new Date)[_0xe681("0x1eb")]()>1e6*d)return void console[_0xe681("0x3cd")](esmap[_0xe681("0x5e3")][_0xe681("0x5ed")]);if(!A[1])return void console.info(esmap[_0xe681("0x5e3")][_0xe681("0x5ee")]);var I=esmap[_0xe681("0x197")][_0xe681("0x5af")](t._id+A[1]);if(I!=r[1])return void console.info(esmap[_0xe681("0x5e3")][_0xe681("0x5ef")])}}}else o=n[_0xe681("0x278")][_0xe681("0x570")],Object[_0xe681("0x22")](n[_0xe681("0x407")],"_ca",{value:o,writable:!1,enumerable:!1,configurable:!0});var b=esmap[_0xe681("0x197")].encode64(r[1]+r[0]+C+t.o1+"ABC"+t.o2);b!=t[_0xe681("0x5b3")]&&t[_0xe681("0x5b3")]!=r[1]&&_0xe681("0x5e9")!=r[1]||(Object.defineProperty(n[_0xe681("0x407")],_0xe681("0x5f0"),{value:t[_0xe681("0x5f1")]?t.adcode:null,writable:!1,enumerable:!1,configurable:!0}),n[_0xe681("0x407")].prepare_(function(){esmap[_0xe681("0x162")][_0xe681("0x1fc")]||(esmap.ESMap[_0xe681("0x1fc")]=!0);var x=n[_0xe681("0x5f2")](t);esmap[_0xe681("0x162")][_0xe681("0x5f3")]&&(x[_0xe681("0x5b4")]=-x[_0xe681("0x5b4")],x.x=-x.x,n[_0xe681("0x5f3")](x)),e(x,i)},t.styleid))}).error(t)}},{key:_0xe681("0x5f4"),value:function(x){return!(x>esmap[_0xe681("0x5bb")]||x<esmap[_0xe681("0x5bc")])}},{key:"queryFloor",value:function(x,e,_,t){var i=this,n=i[_0xe681("0x5f5")](e);esmap.ESMap.tempFlipX_&&i[_0xe681("0x5f3")](n),_(n)}},{key:_0xe681("0x1c3"),value:function(x,e){var _=this[_0xe681("0x278")][_0xe681("0x273")]+"/"+x+"/"+x+_0xe681("0x5f6");I[_0xe681("0x9d")][_0xe681("0xb2")]({url:_})[_0xe681("0xaf")](e)}},{key:_0xe681("0x5f7"),value:function(x){var e="";for(var _ in x)e.length>0&&(e+="&"),e+=_+"="+x[_];return e}},{key:_0xe681("0x5f2"),value:function(x){this.sourceData=x;var e=x[_0xe681("0x1ea")];Object[_0xe681("0x22")](this.sourceData,_0xe681("0x1ea"),{value:e,writable:!1});var _,t=this[_0xe681("0x278")].visibleFloors;if(t){if(!Array.isArray(t)&&_0xe681("0x1f6")!=t)return void console[_0xe681("0x3cd")](_0xe681("0x5f8")+esmap[_0xe681("0x5e3")][_0xe681("0x5f9")]+_0xe681("0x5fa"));_=1==t[_0xe681("0x25")]?t[0]:this[_0xe681("0x278")][_0xe681("0x5fb")]?this.options_[_0xe681("0x5fb")]:this[_0xe681("0x278")].focusFloor?this.options_[_0xe681("0x1f8")]:x[_0xe681("0x5fc")]?x[_0xe681("0x5fc")]:1}else _=this[_0xe681("0x278")][_0xe681("0x5fb")]?this[_0xe681("0x278")][_0xe681("0x5fb")]:this[_0xe681("0x278")][_0xe681("0x1f8")]?this[_0xe681("0x278")][_0xe681("0x1f8")]:x[_0xe681("0x5fc")]?x[_0xe681("0x5fc")]:1,t=[_];this[_0xe681("0x278")].focusFloor=_,(Array[_0xe681("0x56")](t)&&t[_0xe681("0x25")]==x[_0xe681("0x1ff")][_0xe681("0x25")]||_0xe681("0x1f6")==t)&&this[_0xe681("0x278")][_0xe681("0x21d")]==esmap.ESViewMode[_0xe681("0x238")]&&(console[_0xe681("0x3cd")](esmap[_0xe681("0x5e3")][_0xe681("0x5fd")]),t=[_]),this[_0xe681("0x278")].visibleFloors=t,this.map_[_0xe681("0x188")]=t;for(var i=this[_0xe681("0x278")][_0xe681("0x5d4")],n=0,g=0;n<x[_0xe681("0x1ff")][_0xe681("0x25")];n++){this[_0xe681("0x407")][_0xe681("0x211")].indexOf(n+1)<0&&this[_0xe681("0x407")].visibleNoFloorNums_[_0xe681("0x1e")](n+1);var a=x[_0xe681("0x1ff")][n];g=(n+1)*i+a[_0xe681("0x231")],a[_0xe681("0x231")]=g,a[_0xe681("0x5c7")]=i+x[_0xe681("0x5fe")]}return this[_0xe681("0x1db")]}},{key:_0xe681("0x5ff"),value:function(x){for(var e=x[_0xe681("0x1f4")],_=(new(A[_0xe681("0x9d")][_0xe681("0x4b6")]),[]),t=[],i=[],n=[],g=[],a=this[_0xe681("0x600")](x[_0xe681("0x601")]),r=(esmap[_0xe681("0x162")].instance,0);r<a.length;r++){var C=this[_0xe681("0x602")](a[r]);_.push(C)}x[_0xe681("0x601")]=null;var I=x[_0xe681("0x603")];for(r in I){var o=I[r],C=this[_0xe681("0x602")](o[_0xe681("0x601")]);C[_0xe681("0x1f4")]=e,C[_0xe681("0x282")]=o.BC>>1&1||1,C[_0xe681("0x397")]=o[_0xe681("0x441")],C.RoomStyle=o.RS,C[_0xe681("0x604")]=o.RC||"",C[_0xe681("0x605")]=o[_0xe681("0x605")],C[_0xe681("0x606")]=o.CenY,C.RModel=o.RM,C.Typeid=o[_0xe681("0x204")]||o[_0xe681("0x205")]||0,C[_0xe681("0x607")]=1&o.BC||0,C[_0xe681("0x608")]=o.FS||0,C[_0xe681("0x40")]=o[_0xe681("0x40")],o[_0xe681("0x609")]&&(C[_0xe681("0x1ac")]=o.RMO),C[_0xe681("0x60a")]=void 0==o.RH?5:o.RH,C.RoomHigh<1&&(C[_0xe681("0x282")]=1),C[_0xe681("0x60b")]=void 0==o.RL?"":o.RL,C.RoomLogoSize=void 0==o[_0xe681("0x60c")]?"":o[_0xe681("0x60c")],C[_0xe681("0x60d")]=o.SL,o.RM&&(o[_0xe681("0x60e")]&&(C[_0xe681("0x27c")]=o[_0xe681("0x60e")]),o[_0xe681("0x60f")]&&(C[_0xe681("0x38a")]=o.RMR)),o.BC&&1&o.BC?t.push(C):(C[_0xe681("0x60a")]=void 0==o.RH?.25:o.RH,g[_0xe681("0x1e")](C))}var s=x.Labels;for(var c in s){var f=x[_0xe681("0x610")][c];i[_0xe681("0x1e")]({oid:f[_0xe681("0x441")],Typeid:f[_0xe681("0x204")],name:f.name||"",fontstyleid:f.FSId,Height:f.SH,X:-f.X,Y:f.Y,image:f[_0xe681("0x200")],w:void 0==f.w?32:f.w,h:void 0==f.h?32:f.h,ShowLevel:f.SL?f.SL:0,texture:void 0==f[_0xe681("0x200")]?"":""==f[_0xe681("0x200")]?"":esmap[_0xe681("0x197")][_0xe681("0x51a")](this[_0xe681("0x278")][_0xe681("0x272")]+"/"+this[_0xe681("0x407")][_0xe681("0x16f")]+_0xe681("0x611")+f[_0xe681("0x200")])})}var l=x[_0xe681("0x203")];if(x[_0xe681("0x203")])for(var u in l){var h=l[u];n[_0xe681("0x1e")]({oid:h[_0xe681("0x441")],X:-h.X,Y:h.Y,Height:h.SH,image:void 0==h[_0xe681("0x200")]?"":h[_0xe681("0x200")],w:void 0==h.w||""==h.w?32:h.w,h:void 0==h.h||""==h.h?32:h.h,name:h[_0xe681("0x40")],ShowLevel:h.SL?h.SL:0,Typeid:h[_0xe681("0x204")]})}var d=[],b=x[_0xe681("0x612")];if(x.Lifts)for(var p in b){var v=b[p];d[_0xe681("0x1e")](v)}var m={fnum:e,floorBaseLayers:[{lid:2,floorBases:_}],modellayers:[{lid:3,models:t}],labellayers:[{lid:5,labels:i}],poilayers:[{lid:4,pois:n}],liftlayers:[{lid:6,lifts:d}],modelbaselayer:[{lid:9,modelbases:g}]};return m}},{key:"_convertFloorFromSourceData",value:function(x){for(var e=this.sourceData[_0xe681("0x1ff")],_=0;_<e[_0xe681("0x25")];_++){var t=e[_];if(t[_0xe681("0x1f4")]==x)return this[_0xe681("0x5ff")](t)}return null}},{key:_0xe681("0x602"),value:function(x){var e=(new(A[_0xe681("0x9d")][_0xe681("0x4b6")]))[_0xe681("0x16")](x),_={points:e.points_,holes:e[_0xe681("0x4b2")]};return _}},{key:_0xe681("0x5f3"),value:function(x){if(x&&_0xe681("0x53")!=typeof x)for(var e in x){var _=x[e];if("vertices"==e||"vertex"==e)for(var t in _)t%2==0&&(_[t]=-_[t]);else this[_0xe681("0x5f3")](_)}}},{key:_0xe681("0x600"),value:function(x){var e=new Array;if(null!=x&&x.length>10)for(var _=x.split("&&"),t=0;t<_[_0xe681("0x25")];t++){var i=_[t][_0xe681("0x1d")]("&");i>0&&(_[t]=_[t][_0xe681("0x71")](0,i)),_[t][_0xe681("0x25")]>10&&e[_0xe681("0x1e")](_[t])}return e}}]),x}();o[_0xe681("0x142")]=a[_0xe681("0x9d")],e[_0xe681("0x9d")]=o},function(x,e,_){function t(x){return x&&x[_0xe681("0x94")]?x:{default:x}}function i(x,e){if(!(x instanceof e))throw new TypeError(_0xe681("0x77"))}Object.defineProperty(e,_0xe681("0x94"),{value:!0});var n=function(){function x(x,e){for(var _=0;_<e[_0xe681("0x25")];_++){var t=e[_];t[_0xe681("0x7c")]=t[_0xe681("0x7c")]||!1,t[_0xe681("0xc8")]=!0,_0xe681("0x7d")in t&&(t[_0xe681("0x7e")]=!0),Object[_0xe681("0x22")](x,t[_0xe681("0x7f")],t)}}return function(e,_,t){return _&&x(e[_0xe681("0x20")],_),t&&x(e,t),e}}(),g=_(2),a=t(g),r=function(){function x(e){i(this,x),this[_0xe681("0x28e")]=_0xe681("0x613"),this[_0xe681("0x28f")]=null,this[_0xe681("0x614")]=null,this[_0xe681("0x296")]=null,this[_0xe681("0x527")]=null,this[_0xe681("0x615")]={color_:16777215,alpha:1,strokeColor_:16777215,strokeWidth:2},this[_0xe681("0x1c6")]=16777215,this.modelOpacity_=.875,this[_0xe681("0x294")]=16776960,this[_0xe681("0x616")]=.875,this[_0xe681("0x617")]=16750950,this[_0xe681("0x618")]=16711680,this[_0xe681("0x268")]={color:16711680,lineWidth:8,alpha:.8,dash:{size:1,gap:1}},this[_0xe681("0x278")]=e,this[_0xe681("0x28e")]=this[_0xe681("0x278")].themeID||this[_0xe681("0x28e")]}return n(x,[{key:_0xe681("0x20b"),value:function(x,e){var _=new(THREE[_0xe681("0x5a6")])({color:e||x.color_,opacity:x.alpha,transparent:!0,side:THREE[_0xe681("0x43d")]});return _}},{key:_0xe681("0x619"),value:function(x){var e=this[_0xe681("0x28f")][x];return a[_0xe681("0x9d")][_0xe681("0x93")](e?e:this[_0xe681("0x615")])}},{key:"getFontTheme",value:function(x){for(var e in this[_0xe681("0x527")])if(1*this.fontStyleThemeDic[e].typeid==x)return this[_0xe681("0x527")][e]}},{key:_0xe681("0x61a"),value:function(x,e){var _;if(e[_0xe681("0x25")]<1){var t=this[_0xe681("0x614")][x]||this[_0xe681("0x20b")](this[_0xe681("0x615")]);_=t[_0xe681("0x1cc")]()}else _=this[_0xe681("0x20b")](this[_0xe681("0x619")](x),esmap.ESMapUtil[_0xe681("0x198")](e)),_[_0xe681("0x61b")]=esmap[_0xe681("0x197")][_0xe681("0x198")](e);return _?_:this[_0xe681("0x61c")]}},{key:_0xe681("0x5a3"),value:function(x){var e=this[_0xe681("0x28f")][x];if(e&&void 0!=e[_0xe681("0x1ce")]){var _=e[_0xe681("0x1ce")].clone();return _}return new(THREE[_0xe681("0x430")])({color:16711680})}},{key:"initPoiMateriaByData",value:function(x,e){var _=esmap[_0xe681("0x162")][_0xe681("0x163")];for(var t in x){var i={};if(i.id=t,i[_0xe681("0x184")]=e,!this[_0xe681("0x28f")][i.id]&&12e4!=i.id){var n=this[_0xe681("0x278")][_0xe681("0x273")]+"/"+this[_0xe681("0x28e")]+"/"+i.id+_0xe681("0x202");i.id&&i.id.toString().indexOf(_0xe681("0x202"))>0&&(n=this[_0xe681("0x278")][_0xe681("0x272")]+"/"+_[_0xe681("0x16f")]+"/imagelabel/"+i.id);var g=esmap[_0xe681("0x197")][_0xe681("0x51a")](n);g[_0xe681("0x42d")]=THREE.LinearFilter,g[_0xe681("0x61d")]=THREE[_0xe681("0x3e5")],i[_0xe681("0x1ce")]=new(THREE[_0xe681("0x430")])({map:g}),i.material_[_0xe681("0x26c")]=e,this[_0xe681("0x28f")][i.id]=i}}}},{key:_0xe681("0x1c5"),get:function(){return this[_0xe681("0x28e")]},set:function(x){this[_0xe681("0x28e")]=x}},{key:_0xe681("0x61e"),set:function(x){this.model3DSelectedColor_=esmap[_0xe681("0x197")].toColor(x)},get:function(){return this.model3DSelectedColor_}},{key:"data",set:function(x){this[_0xe681("0x1c6")]=esmap[_0xe681("0x197")][_0xe681("0x198")](x[_0xe681("0x61f")][_0xe681("0x620")]),this[_0xe681("0x28f")]={},this[_0xe681("0x614")]={};for(var e=x[_0xe681("0x621")],_=0;_<e[_0xe681("0x25")];_++){var t=e[_];t[_0xe681("0x61b")]=esmap[_0xe681("0x197")][_0xe681("0x198")](t[_0xe681("0x19c")]),1==t[_0xe681("0x622")]&&(this.selectedColor_=t.color_),t[_0xe681("0x623")]=esmap[_0xe681("0x197")][_0xe681("0x198")](t[_0xe681("0x485")]),t.alpha=t[_0xe681("0x4d4")],this[_0xe681("0x614")][t[_0xe681("0x622")]]=this[_0xe681("0x20b")](t),this.themeList_[t.typeid]=t}var i={},n=x[_0xe681("0x624")],g=this;if(this[_0xe681("0x296")]={},n&&n[_0xe681("0x25")]>0){var a=n[0];this[_0xe681("0x294")]=esmap[_0xe681("0x197")][_0xe681("0x198")](a[_0xe681("0x19c")]),a[_0xe681("0x4d4")]&&(this[_0xe681("0x616")]=1-parseFloat(a[_0xe681("0x4d4")])),n[_0xe681("0xc3")](function(x){g.floorStyleBase[x[_0xe681("0x1f4")]]={height:x[_0xe681("0x625")],opacity:1-parseFloat(x[_0xe681("0x4d4")]),color:esmap[_0xe681("0x197")][_0xe681("0x198")](x[_0xe681("0x19c")]),image:x[_0xe681("0x200")]||"",imagesize:x[_0xe681("0x29b")]||""};var e=x[_0xe681("0x200")];e&&!i[e[_0xe681("0x201")](_0xe681("0x202"),"")]&&(i[e[_0xe681("0x201")](_0xe681("0x202"),"")]=1)})}g[_0xe681("0x206")](i,32),this[_0xe681("0x527")]={};var r=x[_0xe681("0x626")];if(r){r[0]&&(this[_0xe681("0x2a1")]=r[0],r[1]&&(this[_0xe681("0x627")]=r[1]));for(var A,C=this[_0xe681("0x278")][_0xe681("0x273")]+this.themeID_+"/",_=0;_<r.length;_++){A=r[_],void 0!=A[_0xe681("0x200")]&&""!=A[_0xe681("0x200")]&&(A[_0xe681("0x51b")]=esmap[_0xe681("0x197")].loadTexture(C+A[_0xe681("0x200")]));for(var I=A[_0xe681("0x622")][_0xe681("0x23a")](","),o=0;o<I.length;o++)this[_0xe681("0x527")][I[o]]=A}}this[_0xe681("0x1a5")]||(this.selectModelMat=new THREE.MeshLambertMaterial({color:this[_0xe681("0x617")],emissive:this[_0xe681("0x617")],transparent:!0,name:"selectMat"})),this[_0xe681("0x1a5")][_0xe681("0x19c")]=new(THREE[_0xe681("0x196")])(this[_0xe681("0x617")]),this[_0xe681("0x61c")]=this[_0xe681("0x20b")](this[_0xe681("0x615")])}}]),x}();e[_0xe681("0x9d")]=r},function(x,e,_){function t(x){return x&&x[_0xe681("0x94")]?x:{default:x}}function i(x){if(Array[_0xe681("0x56")](x)){for(var e=0,_=Array(x[_0xe681("0x25")]);e<x[_0xe681("0x25")];e++)_[e]=x[e];return _}return Array[_0xe681("0x66")](x)}function n(x,e){if(!(x instanceof e))throw new TypeError(_0xe681("0x77"))}Object[_0xe681("0x22")](e,_0xe681("0x94"),{value:!0});var g=function(){function x(x,e){for(var _=0;_<e.length;_++){var t=e[_];t[_0xe681("0x7c")]=t.enumerable||!1,t[_0xe681("0xc8")]=!0,_0xe681("0x7d")in t&&(t[_0xe681("0x7e")]=!0),Object[_0xe681("0x22")](x,t[_0xe681("0x7f")],t)}}return function(e,_,t){return _&&x(e[_0xe681("0x20")],_),t&&x(e,t),e}}(),r=_(3),A=t(r),C=1e-5,I=function(){function x(){n(this,x)}return g(x,null,[{key:_0xe681("0x198"),value:function(x){var e=x[_0xe681("0x23a")](",");if(e[_0xe681("0x25")]<3){var _=esmap[_0xe681("0x197")][_0xe681("0x19a")](x);if(e=_[_0xe681("0x23a")](","),e[_0xe681("0x25")]<3)return 0}return parseInt(e[0])<<16|parseInt(e[1])<<8|parseInt(e[2])}},{key:_0xe681("0x628"),value:function(x){var e=x.split(","),_=parseInt(e[0]),t=parseInt(e[1]),i=parseInt(e[2]),n="#"+((1<<24)+(_<<16)+(t<<8)+i).toString(16).slice(1);return n}},{key:_0xe681("0x19a"),value:function(x){var e=x[_0xe681("0x70")](),_=/^#([0-9a-fA-f]{3}|[0-9a-fA-f]{6})$/;if(e&&_.test(e)){if(4===e[_0xe681("0x25")]){for(var t="#",i=1;i<4;i+=1)t+=e[_0xe681("0x2e")](i,i+1)[_0xe681("0x19b")](e[_0xe681("0x2e")](i,i+1));e=t}for(var n=[],i=1;i<7;i+=2)n.push(parseInt("0x"+e[_0xe681("0x2e")](i,i+2)));return n[_0xe681("0x105")](",")}return e}},{key:_0xe681("0x519"),value:function(x){var e=x[_0xe681("0x23a")](",");return e[_0xe681("0x25")]>=3?_0xe681("0x469")+parseInt(e[0])+","+parseInt(e[1])+","+parseInt(e[2])+_0xe681("0x629"):0}},{key:_0xe681("0x62a"),value:function(x){return x&&x instanceof esmap[_0xe681("0x295")]?x[_0xe681("0x13d")]:x[_0xe681("0x17d")]&&x[_0xe681("0x17d")][_0xe681("0xc7")]?esmap[_0xe681("0x197")][_0xe681("0x62a")](x[_0xe681("0x17d")][_0xe681("0xc7")][_0xe681("0x17a")]):null}},{key:_0xe681("0x4f8"),value:function(x){return x[_0xe681("0x19e")]||null}},{key:_0xe681("0x62b"),value:function(){var x=esmap[_0xe681("0x162")][_0xe681("0x163")][_0xe681("0x134")];return{target:x[_0xe681("0x235")].x.toFixed(3)+","+x[_0xe681("0x235")].y[_0xe681("0x62c")](3)+","+x.target.z[_0xe681("0x62c")](3),position:x[_0xe681("0x24")][_0xe681("0x185")].x.toFixed(3)+","+x[_0xe681("0x24")][_0xe681("0x185")].y[_0xe681("0x62c")](3)+","+x[_0xe681("0x24")][_0xe681("0x185")].z[_0xe681("0x62c")](3)}}},{key:_0xe681("0x413"),value:function(x,e){var _=e-x;return Math.abs(_)>180&&(_=-1*Math[_0xe681("0x122")](_)*360+_),_}},{key:_0xe681("0x62d"),value:function(x){var e=esmap[_0xe681("0x162")].instance.controls,_=x.target[_0xe681("0x23a")](","),t=x[_0xe681("0x185")].split(","),i=new(THREE[_0xe681("0x232")])(parseFloat(_[0]),parseFloat(_[1]),parseFloat(_[2])),n=new(THREE[_0xe681("0x232")])(parseFloat(t[0]),parseFloat(t[1]),parseFloat(t[2]));e[_0xe681("0x235")][_0xe681("0x233")](i),e[_0xe681("0x24")][_0xe681("0x185")][_0xe681("0x233")](n),e[_0xe681("0xc6")]()}},{key:"getPlatform",value:function(){for(var x=navigator[_0xe681("0x342")],e=new Array(_0xe681("0x62e"),_0xe681("0x62f"),_0xe681("0x630"),"Windows Phone",_0xe681("0x631"),_0xe681("0x632")),_=!0,t="PC",i=!1,n=0;n<e.length;n++)if(x.indexOf(e[n])>0){_=!1,t=e[n],x[_0xe681("0x1d")](_0xe681("0x633"))>0&&(i=!0);break}return{isPC:_,isWX:i,platform:t}}},{key:_0xe681("0x634"),value:function(){var x=esmap.ESMap.instance,e=x[_0xe681("0x16f")],_=_0xe681("0x635"),t=esmap[_0xe681("0x197")][_0xe681("0x5af")](e+_0xe681("0x636")),i=_+_0xe681("0x637")+e+_0xe681("0x638")+t,n=null;return A[_0xe681("0x9d")][_0xe681("0xb2")]({url:i,async:!1})[_0xe681("0xaf")](function(x){x=JSON[_0xe681("0x16")](x),1==x[_0xe681("0x12")]&&(n=x.t)}),n?(x[_0xe681("0x639")]=n,n):console[_0xe681("0x3cd")](esmap[_0xe681("0x5e3")][_0xe681("0x63a")])}},{key:_0xe681("0x63b"),value:function(x){if(x){var e=function(){return navigator[_0xe681("0x342")].indexOf("MicroMessenger")>0},_=function(){var _=_0xe681("0x63c"),n=t[_0xe681("0x639")]?t[_0xe681("0x639")]:esmap[_0xe681("0x197")][_0xe681("0x634")]();return _+=_0xe681("0x63d")+x+_0xe681("0x63e")+n+_0xe681("0x63f"),i[_0xe681("0x7")]=_,e()?WeixinJSBridge?WeixinJSBridge.invoke(_0xe681("0x640"),{},function(x){i[_0xe681("0x641")]()}):wx[_0xe681("0x640")]&&wx[_0xe681("0x640")]({success:function(x){},complete:function(){i[_0xe681("0x641")]()}}):i[_0xe681("0x641")](),!0},t=esmap[_0xe681("0x162")][_0xe681("0x163")],i=t[_0xe681("0x642")]||(t[_0xe681("0x642")]=new Audio,t.mapView[_0xe681("0x12c")][_0xe681("0x9")](t.audio)),n=arguments[_0xe681("0x25")]>1&&void 0!==arguments[1]?arguments[1]:2;if(x){if(0===i[_0xe681("0x11")])return _();if(2===n){if(i[_0xe681("0x643")])return _();_()}}}}},{key:_0xe681("0x406"),value:function(x,e){var _=null,t=100;if("3d"==x[_0xe681("0x21d")]){if(_0xe681("0x28")==typeof e)t=e;else{var i=void 0!=e?e[_0xe681("0x454")]():x[_0xe681("0x134")][_0xe681("0x235")];t=x[_0xe681("0x12b")][_0xe681("0x133")][_0xe681("0x185")][_0xe681("0x284")](i)}var n=esmap.ESMapUtil[_0xe681("0x27f")](x.mapView[_0xe681("0x133")],x[_0xe681("0x134")],t);_=2*n[_0xe681("0x282")]/x[_0xe681("0x184")]}else(_0xe681("0x282")==x.viewMode||"2d"==x.viewMode)&&(_=2*x[_0xe681("0x134")][_0xe681("0x24")][_0xe681("0x282")]/x[_0xe681("0x134")][_0xe681("0x24")][_0xe681("0x280")]/x[_0xe681("0x184")]);return _}},{key:_0xe681("0x56"),value:function(x){return _0xe681("0x644")==Object.prototype[_0xe681("0x3f6")][_0xe681("0x1a")](x)}},{key:_0xe681("0x27f"),value:function(x,e,_){x instanceof esmap[_0xe681("0x162")]&&(_=e,e=x[_0xe681("0x134")],x=x[_0xe681("0x12b")][_0xe681("0x133")]);var t=x[_0xe681("0x344")],i=x[_0xe681("0x645")],n=void 0!=_?_:e[_0xe681("0x235")][_0xe681("0x284")](x.position),g=Math[_0xe681("0x646")](t*THREE[_0xe681("0x1b3")][_0xe681("0x239")]/2)*n,a=2*g,r=a*i,A=r/2;return{top:g||1,right:A}}},{key:_0xe681("0x647"),value:function(x,e){var _=esmap[_0xe681("0x162")].instance;_[_0xe681("0x1a3")][_0xe681("0xc3")](function(t){var i=_[_0xe681("0x19d")](t);i[_0xe681("0x3a9")](x,e)})}},{key:_0xe681("0x648"),value:function(x,e,_,t){function i(x){if(_&&_(x)&&n[_0xe681("0x1e")](x),t)return t==n[_0xe681("0x25")]}var n=[],g=!1,a=esmap.ESMap.instance,r=a[_0xe681("0x19d")](x);return r&&r[_0xe681("0x3a9")](e,function(x){if(void 0!=_)for(var e=x[_0xe681("0x17d")][_0xe681("0x1f")][_0xe681("0x25")],t=0;t<e;t++){var a=x[_0xe681("0x17d")].children[t].datas_,r=a.brothers;if(r){for(var A=r[_0xe681("0x25")],C=0;C<A;C++)if(g=i(r[C]))return!0}else if(g=i(a))return!0}else n=x[_0xe681("0x17d")][_0xe681("0x1f")][_0xe681("0x3e2")](function(x,e){return x[_0xe681("0x1e")].apply(x,void 0!=e.datas_[_0xe681("0x3ff")]?e[_0xe681("0x17a")][_0xe681("0x3ff")]:[e[_0xe681("0x17a")]]),x},[])}),n}},{key:"setFloorAlpha",value:function(x,e,_){var t=esmap[_0xe681("0x162")][_0xe681("0x163")];void 0==_&&(_=!0),_&&esmap[_0xe681("0x197")][_0xe681("0x213")](x);var i=t[_0xe681("0x13d")][_0xe681("0x240")][x];i&&(i.lastAlpha||(i[_0xe681("0x649")]={}),i[_0xe681("0x290")](function(x){if(x[_0xe681("0x17e")]){var _=null;_=x[_0xe681("0x17e")][_0xe681("0x194")]?x[_0xe681("0x17e")][_0xe681("0x194")]:[x[_0xe681("0x17e")]];for(var t=0;t<_.length;t++){var n=_[t];if(n[_0xe681("0x297")]<=.1)break;if(n[_0xe681("0x297")]<=.5&&e>n[_0xe681("0x297")])break;if(i.lastAlpha[n[_0xe681("0x4d0")]]||(i[_0xe681("0x649")][n[_0xe681("0x4d0")]]=n[_0xe681("0x297")]),n[_0xe681("0x40")]&&_0xe681("0x64a")==n[_0xe681("0x40")])break;n[_0xe681("0x297")]=e,n[_0xe681("0x4d4")]=!0}}}))}},{key:_0xe681("0x213"),value:function(x){var e=esmap[_0xe681("0x162")][_0xe681("0x163")],_=e[_0xe681("0x13d")][_0xe681("0x240")][x];_&&_[_0xe681("0x649")]&&_[_0xe681("0x290")](function(x){if(x[_0xe681("0x17e")]){var e=null;e=x[_0xe681("0x17e")][_0xe681("0x194")]?x.material[_0xe681("0x194")]:[x[_0xe681("0x17e")]],e[_0xe681("0xc3")](function(x){_[_0xe681("0x649")][x[_0xe681("0x4d0")]]&&(x[_0xe681("0x297")]=_[_0xe681("0x649")][x[_0xe681("0x4d0")]]),x.antitrans_&&(x[_0xe681("0x4d4")]=!1)})}})}},{key:_0xe681("0x64b"),value:function(x,e,_){for(var t="number"==typeof e,i=t||void 0!=e.datas_?e[_0xe681("0x17a")]:e,_=t?_:i[_0xe681("0x396")][_0xe681("0x397")],n=t?e:i[_0xe681("0x411")],g=x.getFloor(n),a=g[_0xe681("0x3aa")]("label"),r=a.length,A=0;A<r;A++)if(a[A][_0xe681("0x396")][_0xe681("0x397")]==_)return a[A];return null}},{key:_0xe681("0x64c"),value:function(x,e){var _=[],t=esmap[_0xe681("0x162")][_0xe681("0x163")],n=(_[_0xe681("0x25")],[][_0xe681("0x19b")](i(x.fnum?[x[_0xe681("0x190")]]:t[_0xe681("0x1a3")]))),g=x.key||"ID",a=[][_0xe681("0x19b")](x[_0xe681("0x96")]),r=a[_0xe681("0x25")],A=!0,C=!1,I=void 0;try{for(var o,s=n[Symbol[_0xe681("0x7a")]]();!(A=(o=s[_0xe681("0xeb")]()).done);A=!0){var c=o.value;_[_0xe681("0x1e")][_0xe681("0x37")](_,esmap[_0xe681("0x197")][_0xe681("0x648")](c,[_0xe681("0x37d")],function(x){return a.includes(x[g])},_0xe681("0x40")==g?void 0:r))}}catch(x){C=!0,I=x}finally{try{!A&&s[_0xe681("0x64d")]&&s[_0xe681("0x64d")]()}finally{if(C)throw I}}return e&&e(_),_}},{key:"m",value:function(x){return x>C}},{key:"n",value:function(x){return x<-C}},{key:"l",value:function(x){return x<C&&x>-C}},{key:"o",value:function x(e,_,t,i){var n=_.x,g=_.y,a=t.x,r=t.y,A=e.x,C=e.y,I=a-n,x=r-g,o=Math[_0xe681("0x64e")](I*I+x*x),s=A-n,c=C-g,f=Math[_0xe681("0x64e")](s*s+c*c);if(esmap.ESMapUtil.l(o))return l(f)?(i.x=_.x,i.y=_.y,0):(i.x=_.x,i.y=_.y,f);var u=I/o,h=x/o,d=u*s+h*c;if(!esmap[_0xe681("0x197")].m(d))return i.x=_.x,i.y=_.y,f;if(!esmap[_0xe681("0x197")].n(d-o)){var b=A-a,p=C-r,v=Math[_0xe681("0x64e")](b*b+p*p);return i.x=t.x,i.y=t.y,v}var m=n+d*u,y=g+d*h,w=A-m,E=C-y,k=Math[_0xe681("0x64e")](w*w+E*E);return i.x=m,i.y=y,k}},{key:_0xe681("0x64f"),value:function(x){var e=new(THREE[_0xe681("0x650")]);return x[_0xe681("0x651")]&&e[_0xe681("0x652")]("position",new(THREE[_0xe681("0x653")])(parmas.positions,3)),x.indexes&&e.setIndex(new(THREE[_0xe681("0x653")])(x[_0xe681("0x654")],6)),e}},{key:_0xe681("0x5af"),value:function(x){var e,_,t,i,n,g=_0xe681("0x655"),a="",r="",A="",C=0;do e=x[_0xe681("0x113")](C++),_=x.charCodeAt(C++),r=x[_0xe681("0x113")](C++),t=e>>4,i=(3&e)<<4|_>>4,n=(15&_)<<2|r>>6,A=63&r,isNaN(_)?n=A=64:isNaN(r)&&(A=64),a=a+g[_0xe681("0x6f")](t)+g[_0xe681("0x6f")](i)+g.charAt(n)+g[_0xe681("0x6f")](A),e=_=r="",t=i=n=A="";while(C<x[_0xe681("0x25")]);return a}},{key:_0xe681("0x656"),value:function(x,e){var _=new(THREE[_0xe681("0x232")])(0,0,1),t=new THREE.Vector3(x.x,0,x.y),i=new(THREE[_0xe681("0x232")])(e.x,0,e.y),n=i.clone()[_0xe681("0x241")](t)[_0xe681("0x285")](),g=n[_0xe681("0x4ff")](_)*THREE[_0xe681("0x1b3")].RAD2DEG;return n[_0xe681("0x1cc")]()[_0xe681("0x4fe")](_).y>0?360-g:g}},{key:"getDeviceDPI",value:function(){var x=new Array;if(void 0!=window[_0xe681("0x657")][_0xe681("0x658")])x[0]=window.screen[_0xe681("0x658")],x[1]=window[_0xe681("0x657")].deviceYDPI;else{var e=document[_0xe681("0x2")](_0xe681("0x659"));e[_0xe681("0xcc")].cssText=_0xe681("0x65a"),document[_0xe681("0x8d")].appendChild(e),x[0]=parseInt(e[_0xe681("0x65b")]),x[1]=parseInt(e.offsetHeight),e[_0xe681("0x331")][_0xe681("0x12d")](e)}return x}}]),x}();I.search=function(x,e,_,t){var i=[],n=null,g=null,r=null,A=[],C=_[_0xe681("0x65c")]||[_0xe681("0x37d"),_0xe681("0x314"),"facility",_0xe681("0x39e"),_0xe681("0x39f"),"locationMarker"];_0xe681("0x28")==typeof e?n=0==e?x[_0xe681("0x1a3")]:[e]:_0xe681("0x1f6")==e?n=x[_0xe681("0x1a3")]:e instanceof Array&&(n=e);for(var I=0;I<n[_0xe681("0x25")];I++){var o=n[I];i[_0xe681("0x1e")][_0xe681("0x37")](i,esmap[_0xe681("0x197")][_0xe681("0x648")](o,C,function(e){if(_[_0xe681("0xce")]&&_[_0xe681("0xce")]!=esmap.ESNodeType.ALL&&_.nodeType!=e[_0xe681("0xce")])return!1;if(_[_0xe681("0x40")]&&(!e[_0xe681("0x40")]||_[_0xe681("0x40")]!=e[_0xe681("0x40")]))return!1;if(_[_0xe681("0x65d")]&&(!e.name||e[_0xe681("0x40")][_0xe681("0x1d")](_[_0xe681("0x65d")])<0))return!1;if(_.ID&&_.ID!=e.ID)return!1;if(_[_0xe681("0x411")]&&_[_0xe681("0x411")]!=e[_0xe681("0x411")])return!1;if(_.typeID&&_[_0xe681("0x291")]!=e[_0xe681("0x291")])return!1;if(_[_0xe681("0x1d8")]&&_[_0xe681("0x44d")]){if(_[_0xe681("0xce")]==esmap[_0xe681("0x1e0")][_0xe681("0x168")]){var t=e.data_.points,i=[];g=null;for(var n=x.getFloorHeight(o),C=0;C<t[_0xe681("0x25")];C+=2)i[_0xe681("0x1e")](new(esmap[_0xe681("0x259")])(-t[C].x,t[C].y,n));if(i.length<2)g=p(_[_0xe681("0x1d8")],i[0]);else for(var I=new(esmap[_0xe681("0x259")]),C=0;C<i[_0xe681("0x25")]-1;C++)r=esmap.ESMapUtil.o(_[_0xe681("0x1d8")],i[C],i[C+1],I),(!g||r<g)&&(g=r);if(g>_[_0xe681("0x44d")])return;
A.push({node:e,distance:g})}if(_[_0xe681("0xce")]==esmap[_0xe681("0x1e0")][_0xe681("0x29e")]){if((g=esmap[_0xe681("0x65e")][_0xe681("0x65f")](a,_.mapCoord,e[_0xe681("0x1d8")]))>_[_0xe681("0x44d")])return;A[_0xe681("0x1e")]({node:e,distance:g})}}return!0}))}return A.length>0&&(A[_0xe681("0x1f3")](function(x,e){return x.distance-e[_0xe681("0x660")]}),i=A[_0xe681("0xbd")](function(x){return x[_0xe681("0x4f")]})),t&&t(i),i},I[_0xe681("0x51a")]=function(){var x=new(THREE[_0xe681("0x661")]);return x[_0xe681("0x662")]="anonymous",function(e,_,t,i){return x[_0xe681("0x4e0")](e,_,t,i)}}(),I[_0xe681("0x54c")]=function(x,e,_,t){e=e||_0xe681("0x185"),_=_||_0xe681("0x3c3"),Object.defineProperties(x,{x:{get:function(){var x=esmap[_0xe681("0x162")][_0xe681("0x163")][_0xe681("0x27d")].x;return x-this[e].x},set:function(x){var _=esmap[_0xe681("0x162")][_0xe681("0x163")][_0xe681("0x27d")].x;this[e].x=_-x}},y:{get:function(){var x=esmap[_0xe681("0x162")][_0xe681("0x163")][_0xe681("0x27d")].y;return this[e].z+x},set:function(x){var _=esmap[_0xe681("0x162")][_0xe681("0x163")][_0xe681("0x27d")].y;this[e].z=x-_}},height:t||{get:function(){return this[_]},set:function(x){this[_]=x}}})},e[_0xe681("0x9d")]=I},function(x,e){function _(x,e){if(!(x instanceof e))throw new TypeError(_0xe681("0x77"))}_0xe681("0x3d"),Object[_0xe681("0x22")](e,_0xe681("0x94"),{value:!0});var t=function(){function x(x,e){for(var _=0;_<e[_0xe681("0x25")];_++){var t=e[_];t[_0xe681("0x7c")]=t[_0xe681("0x7c")]||!1,t[_0xe681("0xc8")]=!0,_0xe681("0x7d")in t&&(t[_0xe681("0x7e")]=!0),Object[_0xe681("0x22")](x,t.key,t)}}return function(e,_,t){return _&&x(e[_0xe681("0x20")],_),t&&x(e,t),e}}(),i=function(){function x(e){_(this,x),this[_0xe681("0x172")]=null,this[_0xe681("0x133")]=null,this[_0xe681("0x143")]=null,this[_0xe681("0x585")]=null,this[_0xe681("0x1bf")]=null,this[_0xe681("0x357")]=esmap[_0xe681("0x197")].getPlatform().isPC,this[_0xe681("0x407")]=e,esmap[_0xe681("0x535")][_0xe681("0x163")]||(esmap[_0xe681("0x535")][_0xe681("0x163")]=this)}return t(x,[{key:_0xe681("0x132"),value:function(){var x=this;this[_0xe681("0x12c")]=this[_0xe681("0x407")][_0xe681("0x12e")].container;try{this[_0xe681("0x1bf")]=new(THREE[_0xe681("0x663")])({antialias:!0,precision:_0xe681("0x664"),alpha:!0}),this[_0xe681("0x1bf")][_0xe681("0x665")]=!1}catch(x){return(new(esmap[_0xe681("0x666")])).noWebGL(this.container_),!1}this.renderer[_0xe681("0x1c0")](16777215),this[_0xe681("0x1bf")][_0xe681("0x667")](window[_0xe681("0x668")]),this[_0xe681("0x1bf")][_0xe681("0x669")]=!1,this[_0xe681("0x1bf")][_0xe681("0x66a")][_0xe681("0xbf")]=!0,this[_0xe681("0x1bf")][_0xe681("0x66a")][_0xe681("0x4")]=THREE[_0xe681("0x66b")],this[_0xe681("0x407")][_0xe681("0x12e")][_0xe681("0x346")]&&this[_0xe681("0x1bf")][_0xe681("0x66c")](0),this[_0xe681("0x66d")]=this.renderer[_0xe681("0x24f")],this[_0xe681("0x12c")][_0xe681("0x9")](this[_0xe681("0x66d")]);var e=this[_0xe681("0x12c")].clientWidth,_=this.container_[_0xe681("0x433")];this[_0xe681("0x133")]=new(THREE[_0xe681("0x66e")])(35,e/_,2,2e4),this.scene=new THREE.Scene,this[_0xe681("0x28b")]=new THREE.OrthographicCamera(-e/2,e/2,-_/2,_/2,1,1e5),this[_0xe681("0x28b")][_0xe681("0x38e")][_0xe681("0xfc")](-Math.PI/2,0,0,_0xe681("0x3c2")),this[_0xe681("0x28b")][_0xe681("0x66f")]=!1,this[_0xe681("0x28b")][_0xe681("0x185")][_0xe681("0xfc")](0,1e5,0),this[_0xe681("0x354")]=new(esmap[_0xe681("0x670")])(this[_0xe681("0x407")]),this.cameraOrtho=new(THREE[_0xe681("0x671")])(-e/2,e/2,_/2,-_/2,1,10),this[_0xe681("0x585")][_0xe681("0x185")][_0xe681("0x672")](10),this[_0xe681("0x143")]=new(THREE[_0xe681("0x673")]),this[_0xe681("0x674")]=new(THREE[_0xe681("0x675")])(7829367),this[_0xe681("0x172")][_0xe681("0x80")](this[_0xe681("0x674")]),this[_0xe681("0x676")]=new THREE.DirectionalLight(8947848,1.4),this[_0xe681("0x676")][_0xe681("0x185")][_0xe681("0xfc")](1,1,1)[_0xe681("0x285")](),this[_0xe681("0x676")][_0xe681("0x235")][_0xe681("0x185")][_0xe681("0x233")](new THREE.Vector3),this.scene[_0xe681("0x80")](this[_0xe681("0x676")]);var t=new(THREE[_0xe681("0x677")])(0,.1);return this[_0xe681("0x172")][_0xe681("0x80")](t),t.castShadow=this[_0xe681("0x407")][_0xe681("0x12e")][_0xe681("0x56c")],t[_0xe681("0x678")][_0xe681("0x133")][_0xe681("0x679")]=.1,t[_0xe681("0x678")][_0xe681("0x133")].far=2e3,t[_0xe681("0x678")].mapSize.set(this.map_[_0xe681("0x12e")][_0xe681("0x56d")],this[_0xe681("0x407")].options[_0xe681("0x56d")]),t[_0xe681("0x678")][_0xe681("0x67a")]=1e-4,this[_0xe681("0x2ad")]=t,this._shadowAngleX=this[_0xe681("0x407")][_0xe681("0x12e")][_0xe681("0x2af")],this[_0xe681("0x67b")]=this[_0xe681("0x407")].options[_0xe681("0x2b1")],Object[_0xe681("0x391")](this,{shadowAngleX:{get:function(){return this._shadowAngleX},set:function(x){this._shadowAngleX=x,this[_0xe681("0x246")]()}},shadowAngleY:{get:function(){return this[_0xe681("0x67b")]},set:function(x){this[_0xe681("0x67b")]=x,this[_0xe681("0x246")]()}}}),x[_0xe681("0x407")].on("loadComplete",function(){var e=Math.max(x.map_.maxX-x[_0xe681("0x407")][_0xe681("0x21b")],x.map_.maxY-x[_0xe681("0x407")][_0xe681("0x21c")])/2;t[_0xe681("0x678")][_0xe681("0x133")][_0xe681("0x282")]=e,t[_0xe681("0x678")].camera[_0xe681("0x283")]=-e,t[_0xe681("0x678")][_0xe681("0x133")][_0xe681("0x281")]=e,t[_0xe681("0x678")][_0xe681("0x133")][_0xe681("0x302")]=-e,t.shadow.camera[_0xe681("0x287")](),x[_0xe681("0x246")]()}),this.secondLight=new THREE.DirectionalLight(3355443),this[_0xe681("0x67c")][_0xe681("0x185")][_0xe681("0xfc")](-1,.5,-1)[_0xe681("0x285")](),this[_0xe681("0x172")][_0xe681("0x80")](this[_0xe681("0x67c")]),!0}},{key:_0xe681("0x246"),value:function(x){x||(x=this.shadowLight[_0xe681("0x678")][_0xe681("0x133")][_0xe681("0x282")]/1.5),this[_0xe681("0x67d")]=new(THREE[_0xe681("0x232")])(1,0,0),this.shadowDirection[_0xe681("0x67e")](new(THREE[_0xe681("0x506")])(0,this._shadowAngleY*THREE.Math[_0xe681("0x239")],this[_0xe681("0x67f")]*THREE[_0xe681("0x1b3")].DEG2RAD,"YZX")),this[_0xe681("0x676")][_0xe681("0x185")][_0xe681("0x233")](this[_0xe681("0x67d")]),this[_0xe681("0x2ad")][_0xe681("0x185")][_0xe681("0x233")](this[_0xe681("0x407")].controls[_0xe681("0x235")][_0xe681("0x1cc")]()[_0xe681("0x80")](this.shadowDirection[_0xe681("0x286")](x))),this[_0xe681("0x2ad")][_0xe681("0x235")][_0xe681("0x185")][_0xe681("0x233")](this[_0xe681("0x407")][_0xe681("0x134")][_0xe681("0x235")]),this.shadowLight.lookAt(this.shadowLight[_0xe681("0x235")])}},{key:_0xe681("0x22b"),value:function(x){var e=this[_0xe681("0x12c")][_0xe681("0x432")],_=this[_0xe681("0x12c")][_0xe681("0x433")];return x||e!=this.w_||_!=this.h_?{w:e,h:_}:null}},{key:"updateCssScene",value:function(){this[_0xe681("0x680")].forEach(function(x){x()})}},{key:_0xe681("0x681"),value:function(){var x=[],e=1e3;this[_0xe681("0x682")]=e;var _=new(THREE[_0xe681("0x334")]);this[_0xe681("0x683")]=_;var t=this[_0xe681("0x133")],i=new THREE.PerspectiveCamera(t[_0xe681("0x344")],t[_0xe681("0x645")],t.near*e,t[_0xe681("0x684")]*e);x[_0xe681("0x1e")](function(){i[_0xe681("0x501")][_0xe681("0x233")](t[_0xe681("0x501")]),i[_0xe681("0x185")][_0xe681("0x233")](t.position)[_0xe681("0x286")](e)});var n=new(THREE[_0xe681("0x673")]);this.cssScene=n,this[_0xe681("0x685")]=!0,x.push(function(){this[_0xe681("0x685")]===!0&&n.traverse(function(x){if(x instanceof THREE[_0xe681("0x673")]!=1){var e=x.userData[_0xe681("0x686")];void 0!==e&&e[_0xe681("0xc6")]()}})}[_0xe681("0xa4")](this)),x[_0xe681("0x1e")](function(x,e){_[_0xe681("0x22a")](n,i)}),this[_0xe681("0x680")]=x}},{key:_0xe681("0x22c"),value:function(x,e){this[_0xe681("0x262")]=x/2,this.h_2_=e/2,this[_0xe681("0x354")][_0xe681("0x362")](x,e),this[_0xe681("0x1bf")][_0xe681("0x364")](x,e),this[_0xe681("0x683")]&&this.rendererCss.setSize(x,e),this[_0xe681("0x133")][_0xe681("0x645")]=x/e,this[_0xe681("0x133")][_0xe681("0x287")]();var _=esmap[_0xe681("0x197")][_0xe681("0x27f")](this.camera,this[_0xe681("0x407")].controls);this.cameraTop[_0xe681("0x302")]=-_[_0xe681("0x281")],this[_0xe681("0x28b")][_0xe681("0x281")]=_[_0xe681("0x281")],this.cameraTop[_0xe681("0x282")]=_[_0xe681("0x282")],this.cameraTop[_0xe681("0x283")]=-_[_0xe681("0x282")],this[_0xe681("0x28b")][_0xe681("0x287")](),this[_0xe681("0x585")].left=-this[_0xe681("0x262")],this[_0xe681("0x585")][_0xe681("0x281")]=this[_0xe681("0x262")],this[_0xe681("0x585")].top=this.h_2_,this[_0xe681("0x585")][_0xe681("0x283")]=-this[_0xe681("0x25d")],this[_0xe681("0x585")][_0xe681("0x287")](),this.w_=this[_0xe681("0x12c")].clientWidth,this.h_=this[_0xe681("0x12c")][_0xe681("0x433")]}},{key:_0xe681("0x22a"),value:function(x){this.renderer[_0xe681("0x173")](),"3d"==x?this[_0xe681("0x354")][_0xe681("0x22a")]():this[_0xe681("0x354")][_0xe681("0x687")](),this[_0xe681("0x1bf")][_0xe681("0x688")](),this[_0xe681("0x1bf")][_0xe681("0x22a")](this[_0xe681("0x143")],this[_0xe681("0x585")])}}]),x}();e.default=i},function(x,e){function _(x,e){if(!(x instanceof e))throw new TypeError("Cannot call a class as a function")}function t(x,e){if(!x)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!e||_0xe681("0x24")!=typeof e&&"function"!=typeof e?x:e}function i(x,e){if(_0xe681("0x32")!=typeof e&&null!==e)throw new TypeError(_0xe681("0x36c")+typeof e);x[_0xe681("0x20")]=Object.create(e&&e[_0xe681("0x20")],{constructor:{value:x,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object[_0xe681("0x36d")](x,e):x[_0xe681("0x36e")]=e)}_0xe681("0x3d"),Object.defineProperty(e,_0xe681("0x94"),{value:!0});var n=function(){function x(x,e){for(var _=0;_<e[_0xe681("0x25")];_++){var t=e[_];t[_0xe681("0x7c")]=t[_0xe681("0x7c")]||!1,t.configurable=!0,_0xe681("0x7d")in t&&(t.writable=!0),Object[_0xe681("0x22")](x,t[_0xe681("0x7f")],t)}}return function(e,_,t){return _&&x(e[_0xe681("0x20")],_),t&&x(e,t),e}}(),g=function(x){function e(x,i){_(this,e);var n=t(this,(e[_0xe681("0x36e")]||Object[_0xe681("0x36f")](e))[_0xe681("0x1a")](this,x));return n[_0xe681("0x5ac")]=i,n[_0xe681("0x689")]=!1,n.selected_=!1,n[_0xe681("0x68a")]=null,n[_0xe681("0x68b")]=null,n}return i(e,x),n(e,[{key:_0xe681("0x68c"),value:function(){this[_0xe681("0x17e")][_0xe681("0x19c")]=new THREE.Color(this[_0xe681("0x5ac")][_0xe681("0x61b")])}},{key:"setSelectedTheme_",value:function(x){var e=void 0==x?this[_0xe681("0x5ac")][_0xe681("0x617")]:x;this.material.color=new(THREE[_0xe681("0x196")])(e)}},{key:"selectedColor",set:function(x){x=new(THREE[_0xe681("0x196")])(x),this[_0xe681("0x68d")](x)},get:function(){return this[_0xe681("0x68b")]?this[_0xe681("0x68b")][_0xe681("0x19c")]:this[_0xe681("0x5ac")][_0xe681("0x617")]}}]),e}(THREE[_0xe681("0x21f")]);e.default=g},function(x,e){_0xe681("0x3d"),Object[_0xe681("0x22")](e,_0xe681("0x94"),{value:!0});var _=function(x){Object.assign(this,{type:_0xe681("0x2bb"),width:128,height:128,color:_0xe681("0x68e"),arrowHeightPercent:.4,arrowWidthPercent:.7,arrowPercent:.1,lineType:null,dashArray:[2,1],godHeightPercent:.5,godEdgePercent:.2,godArrowPercent:.3,godColor:_0xe681("0x68f"),godEdgeColor:_0xe681("0x690"),godArrowColor:_0xe681("0x691"),godArrowXScale:.6,godArrowWidthPercent:.07},x),this[_0xe681("0x692")]={offset:0},this[_0xe681("0x109")]=document[_0xe681("0x2")](_0xe681("0x2ee"))[_0xe681("0x4c2")]("2d"),this[_0xe681("0xc6")]()};_[_0xe681("0x20")]={constructor:_,get"canvas"(){return this[_0xe681("0x109")][_0xe681("0x2ee")]},update:function(x){var e=this;switch(Object[_0xe681("0x366")](e,x),e[_0xe681("0x693")](),e[_0xe681("0x109")][_0xe681("0x2ee")][_0xe681("0x2ba")]=e[_0xe681("0x2ba")],e[_0xe681("0x109")][_0xe681("0x2ee")].height=e[_0xe681("0x184")],e[_0xe681("0x4")]){case _0xe681("0x2bb"):e[_0xe681("0x694")]();break;case _0xe681("0x3fe"):e._drawArrow();break;case"esarrow":e[_0xe681("0x695")]()}},_doColor:function(){var x=this,e=["color","godColor",_0xe681("0x696"),_0xe681("0x697")];e.forEach(function(e){_0xe681("0x28")==typeof x[e]&&(x[e]=esmap[_0xe681("0x191")][_0xe681("0x20")][_0xe681("0x3f4")](x[e]))})},_setMaterialInfo:function(){var x=this;x.materialInfo[_0xe681("0x1ac")]=esmap[_0xe681("0x123")][_0xe681("0x86")].getValues(arguments,0,0),x.materialInfo[_0xe681("0x400")]=esmap.ESUtil[_0xe681("0x86")].getValues(arguments,1,0)},_drawNormal:function(){var x=this,e=x[_0xe681("0x3de")].reduce(function(x,e){return x+e}),_=0;x[_0xe681("0x3de")][_0xe681("0xc3")](function(t,i){i%2==0&&(x[_0xe681("0x109")][_0xe681("0x4d8")]=x[_0xe681("0x19c")],x[_0xe681("0x109")].fillRect(_/e*x[_0xe681("0x2ba")],0,t/e*x[_0xe681("0x2ba")],x.height)),_+=t}),x[_0xe681("0x698")](0)},_drawArrow:function(){var x=this,e=(1-x[_0xe681("0x699")])*x.height/2,_=x[_0xe681("0x184")]*x[_0xe681("0x699")];x.ctx[_0xe681("0x69a")](),x[_0xe681("0x109")][_0xe681("0x34f")](0,e);var t=x[_0xe681("0x2ba")]*(x[_0xe681("0x69b")]-x[_0xe681("0x69c")]);x[_0xe681("0x109")][_0xe681("0x69d")](t,e),x[_0xe681("0x109")].lineTo(x.width*x.arrowWidthPercent,e+_/2),x[_0xe681("0x109")][_0xe681("0x69d")](t,e+_),x[_0xe681("0x109")][_0xe681("0x69d")](0,e+_),x[_0xe681("0x109")][_0xe681("0x69d")](x[_0xe681("0x2ba")]*x[_0xe681("0x69c")],e+_/2),x[_0xe681("0x109")].closePath(),x[_0xe681("0x109")][_0xe681("0x4d8")]=x[_0xe681("0x19c")],x[_0xe681("0x109")][_0xe681("0x4ca")](),x[_0xe681("0x698")](-.25,2)},_drawGodArrow:function(){var x=this;x[_0xe681("0x109")][_0xe681("0x4d8")]=x[_0xe681("0x696")],x[_0xe681("0x109")][_0xe681("0x69e")](0,(1-x[_0xe681("0x69f")])*x[_0xe681("0x184")]/2,x[_0xe681("0x2ba")],x[_0xe681("0x69f")]*x[_0xe681("0x184")]),x[_0xe681("0x109")].fillStyle=x[_0xe681("0x19c")];var e=(1-x.godHeightPercent+x[_0xe681("0x6a0")])*x[_0xe681("0x184")]/2,_=(x[_0xe681("0x69f")]-x[_0xe681("0x6a0")])*x[_0xe681("0x184")];x[_0xe681("0x109")][_0xe681("0x69e")](0,e,x[_0xe681("0x2ba")],_),x[_0xe681("0x109")][_0xe681("0x4d8")]=_0xe681("0x6a1"),x[_0xe681("0x109")][_0xe681("0x4c6")]=-2,x[_0xe681("0x109")][_0xe681("0x4c7")]=2,x[_0xe681("0x109")][_0xe681("0x4c8")]=4,x[_0xe681("0x109")][_0xe681("0x4c4")]=_0xe681("0x6a2");var t={x:x[_0xe681("0x2ba")]/2,y:x[_0xe681("0x184")]/2},i=x[_0xe681("0x2ba")]*x[_0xe681("0x6a3")],n=x[_0xe681("0x2ba")]*x[_0xe681("0x6a4")],g=x[_0xe681("0x2ba")]*(x[_0xe681("0x6a3")]-x.godArrowWidthPercent)*x[_0xe681("0x6a5")],a=t.x-i/2*x[_0xe681("0x6a5")],r=t.y-i/2;x[_0xe681("0x109")][_0xe681("0x69a")](),x[_0xe681("0x109")][_0xe681("0x34f")](a,r),x[_0xe681("0x109")][_0xe681("0x69d")](a+n,r),x[_0xe681("0x109")][_0xe681("0x69d")](a+n+g,r+i/2),x[_0xe681("0x109")].lineTo(a+n,r+i),x[_0xe681("0x109")].lineTo(a,r+i),x[_0xe681("0x109")][_0xe681("0x69d")](a+g,r+i/2),x[_0xe681("0x109")][_0xe681("0x351")](),x.ctx[_0xe681("0x4d8")]=x[_0xe681("0x697")],x[_0xe681("0x109")][_0xe681("0x4ca")](),x[_0xe681("0x698")](-.25,2)}},e[_0xe681("0x9d")]=_},function(x,e){_0xe681("0x3d"),!function(x,e,_){function t(t,i){this.object=t,this[_0xe681("0xbd")]=i,this[_0xe681("0x235")]=new _.Vector3,this[_0xe681("0x6a6")]=0,this.maxDistance=1/0,this[_0xe681("0x6a7")]=0,this[_0xe681("0x6a8")]=1/0,this[_0xe681("0x135")]=0,this[_0xe681("0x136")]=Math.PI,this[_0xe681("0x6a9")]=-(1/0),this.maxAzimuthAngle=1/0,this[_0xe681("0x6aa")]=!1,this[_0xe681("0x6ab")]=.25,this[_0xe681("0x155")];var n=this,g=1e-6;this.EPS=g;var a,r,A=0,C=0,I=1,o=new(_[_0xe681("0x232")]),s=!1;this[_0xe681("0x288")]=function(){return r},this.getAzimuthalAngle=function(){return a},this[_0xe681("0x6ac")]=function(x){C-=x},this[_0xe681("0x6ad")]=function(x){A-=x},this[_0xe681("0x6ae")]=function(){var x=new _.Vector3;return function(e){var _=this.object[_0xe681("0x4fb")][_0xe681("0x335")];x[_0xe681("0xfc")](_[0],_[1],_[2]),x[_0xe681("0x286")](-e),o[_0xe681("0x80")](x)}}(),this[_0xe681("0x6af")]=function(){var x=new(_[_0xe681("0x232")]);return function(e){var _=this[_0xe681("0x24")][_0xe681("0x4fb")][_0xe681("0x335")];x[_0xe681("0xfc")](_[4],0,_[6]),x[_0xe681("0x285")](),x.multiplyScalar(e),o[_0xe681("0x80")](x)}}(),this[_0xe681("0x6b0")]=function(x,e,t,i){if(n[_0xe681("0x24")]instanceof _[_0xe681("0x66e")]){var g=n[_0xe681("0x24")].position,a=g[_0xe681("0x1cc")]()[_0xe681("0x241")](n[_0xe681("0x235")]),r=a.length();r*=Math[_0xe681("0x646")](n[_0xe681("0x24")].fov/2*Math.PI/180),n[_0xe681("0x6ae")](2*x*r/i),n.panUp(2*e*r/i)}else n.object instanceof _[_0xe681("0x671")]?(n[_0xe681("0x6ae")](x*(n[_0xe681("0x24")][_0xe681("0x281")]-n[_0xe681("0x24")][_0xe681("0x302")])/t/n[_0xe681("0x24")][_0xe681("0x280")]),n[_0xe681("0x6af")](e*(n[_0xe681("0x24")].top-n[_0xe681("0x24")][_0xe681("0x283")])/i/n[_0xe681("0x24")][_0xe681("0x280")])):console.warn(_0xe681("0x6b1"))},this[_0xe681("0x6b2")]=-1,this[_0xe681("0x275")]=function(){var x;return x=n.object instanceof _.PerspectiveCamera?n[_0xe681("0x6b3")]()/n[_0xe681("0x6b4")]:n[_0xe681("0x24")][_0xe681("0x282")]/n[_0xe681("0x24")][_0xe681("0x280")]/n[_0xe681("0x6b5")]},this[_0xe681("0x6b6")]=function(){for(var x=(n.getDistance(),n[_0xe681("0x275")]()),e=0;e<this.map[_0xe681("0x156")][_0xe681("0x25")];e++)if(x<this[_0xe681("0xbd")][_0xe681("0x156")][e])return e-1;return e-1},this[_0xe681("0x1b0")]=function(e,t){t=t||{};var i=t[_0xe681("0x6b7")]?e:n.map[_0xe681("0x156")][e];i=_[_0xe681("0x1b3")][_0xe681("0x1b4")](i,n[_0xe681("0xbd")].scaleLevels_[0],n.map[_0xe681("0x156")][n[_0xe681("0xbd")][_0xe681("0x156")][_0xe681("0x25")]-1]);var g,a;t=t||{},t[_0xe681("0x243")]=void 0==t[_0xe681("0x243")]?.3:t.time,g=n[_0xe681("0x275")](),a=i-g,clearInterval(this[_0xe681("0x6b8")]),n[_0xe681("0x6b8")]=x.Tween.fadeTo(t[_0xe681("0x243")],function(x){n[_0xe681("0x276")](g+a*x,1!=x),n[_0xe681("0x6b9")]()},null,t.callback)},this[_0xe681("0x6b9")]=function(){this[_0xe681("0xbd")][_0xe681("0x14e")][_0xe681("0x6ba")]();var x=this.getCurrentScaleLevel();x!=this.__lastScaleLevel&&(this.__lastScaleLevel=x,x>-1&&this[_0xe681("0x150")]("scaleLevelChanged",x))},this[_0xe681("0x6bb")]=function(x){if(this[_0xe681("0xbd")].scaleLevel_=this[_0xe681("0x6b6")](),n[_0xe681("0x24")]instanceof _[_0xe681("0x66e")])I/=x;else if(n[_0xe681("0x24")]instanceof _[_0xe681("0x671")]){var e=this[_0xe681("0x24")][_0xe681("0x280")]*x,t=n[_0xe681("0xbd")][_0xe681("0x12b")].cameraTop.top,i=t/e;i<n[_0xe681("0x6bc")][_0xe681("0x4bc")]&&(n[_0xe681("0x24")][_0xe681("0x280")]=e,n[_0xe681("0x24")][_0xe681("0x287")](),s=!0)}this.checkScaleLevel()},this[_0xe681("0x6bd")]=function(x){if(this.map[_0xe681("0x157")]=this[_0xe681("0x6b6")](),n[_0xe681("0x24")]instanceof _[_0xe681("0x66e")])I*=x;else if(n.object instanceof _[_0xe681("0x671")]){var e=this[_0xe681("0x24")].zoom/x,t=n[_0xe681("0xbd")].mapView[_0xe681("0x28b")][_0xe681("0x282")],i=t/e;i>n[_0xe681("0x6bc")][_0xe681("0x4e5")]&&(n[_0xe681("0x24")][_0xe681("0x280")]=e,n[_0xe681("0x24")][_0xe681("0x287")](),s=!0)}this[_0xe681("0x6b9")]()},this[_0xe681("0x6b3")]=function(){return n[_0xe681("0xbd")][_0xe681("0x12b")][_0xe681("0x133")][_0xe681("0x185")][_0xe681("0x1cc")]()[_0xe681("0x241")](n.target).length()},this[_0xe681("0x6b4")]=null,this[_0xe681("0x1b6")]=function(x){return this[_0xe681("0x6b4")]&&!x||(n[_0xe681("0x6b4")]=this[_0xe681("0x6b3")](),n[_0xe681("0x6b5")]=e[_0xe681("0x197")][_0xe681("0x27f")](n[_0xe681("0xbd")].mapView.camera,n,n[_0xe681("0x6b4")])[_0xe681("0x282")]),n[_0xe681("0x6b4")]},this[_0xe681("0x276")]=function(x,t){var i=n[_0xe681("0xbd")].mapView[_0xe681("0x133")],g=(n[_0xe681("0xbd")].mapView[_0xe681("0x28b")],i[_0xe681("0x185")][_0xe681("0x1cc")]()[_0xe681("0x241")](n[_0xe681("0x235")])[_0xe681("0x285")]());g[_0xe681("0x286")](this[_0xe681("0x6b4")]*x);var a=n[_0xe681("0x235")].clone()[_0xe681("0x80")](g);if(n[_0xe681("0x24")]instanceof _[_0xe681("0x66e")])i[_0xe681("0x185")][_0xe681("0x233")](a);else if(n[_0xe681("0x24")]instanceof _[_0xe681("0x671")]){var r=a[_0xe681("0x284")](n[_0xe681("0x235")]),A=e[_0xe681("0x197")][_0xe681("0x27f")](i,n,r),C=n[_0xe681("0x24")][_0xe681("0x282")]/A[_0xe681("0x282")];n[_0xe681("0x24")][_0xe681("0x280")]=C,n[_0xe681("0x24")][_0xe681("0x287")]()}t||(this[_0xe681("0x6b2")]=this[_0xe681("0x6b6")]())};var c,f,l,u,h,d=!0;this[_0xe681("0x6be")]=function(x){d=!1,f=c*x[_0xe681("0x660")],h=n[_0xe681("0x24")].zoom*(1/x[_0xe681("0x660")]),l=r+x[_0xe681("0x6bf")],u=a+x[_0xe681("0x6c0")]},this[_0xe681("0x6c1")]=function(x,e,t,i,g){if(i&&(c=f/x[_0xe681("0x660")]),n[_0xe681("0x24")]instanceof _[_0xe681("0x671")]&&i){var A=h/(1/x.distance),C=n.map[_0xe681("0x12b")][_0xe681("0x28b")][_0xe681("0x282")],I=C/A;I>n.orthoLimitSize[_0xe681("0x4e5")]&&I<n.orthoLimitSize.max&&(n[_0xe681("0x24")].zoom=A,n.object[_0xe681("0x287")](),s=!0)}g&&(e&&(r=l-x.phi),t&&(a=u-x[_0xe681("0x6c0")]))},this[_0xe681("0x6c2")]=function(){d=!0};var b=0;this.pushPhi_=function(){b=r,r=0},this.popPhi_=function(){return r=b},this[_0xe681("0xc6")]=function(x){var e=new(_[_0xe681("0x232")]),i=(new(_[_0xe681("0x507")]))[_0xe681("0x6c3")](t.up,new(_[_0xe681("0x232")])(0,1,0)),f=i[_0xe681("0x1cc")]()[_0xe681("0x6c4")](),l=new _.Vector3,u=new(_[_0xe681("0x507")]);return function(x){var t=this[_0xe681("0x24")].position;e[_0xe681("0x233")](t)[_0xe681("0x241")](this.target),e[_0xe681("0x6c5")](i),d&&(a=Math[_0xe681("0x6c6")](e.x,e.z),r=Math[_0xe681("0x6c6")](Math[_0xe681("0x64e")](e.x*e.x+e.z*e.z),e.y),a+=C,r+=A),a=Math[_0xe681("0x4bc")](this[_0xe681("0x6a9")],Math[_0xe681("0x4e5")](this[_0xe681("0x6c7")],a)),x&&(x[_0xe681("0x21")](_0xe681("0x6c8"))&&(r=x[_0xe681("0x6c8")],A=0),x[_0xe681("0x21")](_0xe681("0x6c9"))&&(a=x[_0xe681("0x6c9")],C=0)),r=Math[_0xe681("0x4bc")](this[_0xe681("0x135")],Math[_0xe681("0x4e5")](this.maxPolarAngle,r)),r=Math[_0xe681("0x4bc")](g,Math[_0xe681("0x4e5")](Math.PI-g,r)),d&&(c=e[_0xe681("0x25")]()*I),c=Math[_0xe681("0x4bc")](this[_0xe681("0x6a6")],Math[_0xe681("0x4e5")](this[_0xe681("0x6ca")],c));var h=this[_0xe681("0x235")][_0xe681("0x1cc")](),b=this[_0xe681("0xbd")][_0xe681("0x12b")].camera[_0xe681("0x185")][_0xe681("0x1cc")]();d&&(b[_0xe681("0x80")](o),h[_0xe681("0x80")](o),I=1,o[_0xe681("0xfc")](0,0,0)),e.x=c*Math[_0xe681("0x551")](r)*Math[_0xe681("0x551")](a),e.y=c*Math.cos(r),e.z=c*Math[_0xe681("0x551")](r)*Math[_0xe681("0x44e")](a),e.applyQuaternion(f);var p=e.add(h);return(void 0===this.validRange_||this[_0xe681("0x155")](p,h[_0xe681("0x1cc")]()))&&(n[_0xe681("0x24")]instanceof _[_0xe681("0x671")]?(t[_0xe681("0x233")](p),this.target[_0xe681("0x233")](h),this[_0xe681("0xbd")][_0xe681("0x12b")][_0xe681("0x133")].position[_0xe681("0x233")](b),this[_0xe681("0x24")].up=new(_[_0xe681("0x232")])(Math.sin(a),0,Math[_0xe681("0x44e")](a)),this[_0xe681("0x24")][_0xe681("0x503")](this[_0xe681("0x235")])):(t[_0xe681("0x233")](p),this[_0xe681("0x235")][_0xe681("0x233")](h),this[_0xe681("0x24")][_0xe681("0x503")](this[_0xe681("0x235")]))),this[_0xe681("0x6aa")]===!0?(C*=1-this[_0xe681("0x6ab")],A*=1-this[_0xe681("0x6ab")]):(C=0,A=0),!!(s||l[_0xe681("0x6cb")](this[_0xe681("0x24")][_0xe681("0x185")])>g||8*(1-u[_0xe681("0x40b")](this[_0xe681("0x24")][_0xe681("0x501")]))>g)&&(l[_0xe681("0x233")](this.object[_0xe681("0x185")]),u[_0xe681("0x233")](this.object[_0xe681("0x501")]),s=!1,!0)}}(),x[_0xe681("0x130")][_0xe681("0x131")](this)}x[_0xe681("0x6cc")]=function(x,i,n){function g(x,e){var _=b[_0xe681("0x24f")]===document?b[_0xe681("0x24f")].body:b[_0xe681("0x24f")];d[_0xe681("0x6b0")](x,e,_[_0xe681("0x432")],_[_0xe681("0x433")])}function a(){return 2*Math.PI/60/60*b[_0xe681("0x6cd")]}function r(x){return void 0===x?Math.pow(.95,b[_0xe681("0x6ce")]):Math.pow(.95,b.zoomSpeed*x)}function A(x){if(b[_0xe681("0xbf")]!==!1){if(x[_0xe681("0x30b")](),x[_0xe681("0x474")]===b[_0xe681("0x6cf")][_0xe681("0x6d0")]){if(b.enableRotate===!1)return;O=R.ROTATE,p[_0xe681("0xfc")](x[_0xe681("0x5a1")],x[_0xe681("0x5a2")])}else if(x[_0xe681("0x474")]===b[_0xe681("0x6cf")][_0xe681("0x6d1")]){if(b[_0xe681("0x423")]===!1)return;O=R[_0xe681("0x6d2")],k[_0xe681("0xfc")](x[_0xe681("0x5a1")],x[_0xe681("0x5a2")])}else if(x[_0xe681("0x474")]===b[_0xe681("0x6cf")][_0xe681("0x6d3")]){if(b[_0xe681("0x41c")]===!1)return;O=R[_0xe681("0x6d3")],y[_0xe681("0xfc")](x[_0xe681("0x5a1")],x[_0xe681("0x5a2")])}O!==R[_0xe681("0x1e6")]&&(document[_0xe681("0x146")](_0xe681("0x57f"),C,!1),document[_0xe681("0x146")](_0xe681("0x6d4"),I,!1),b[_0xe681("0x6d5")](L))}}function C(x){if(b[_0xe681("0xbf")]!==!1){x[_0xe681("0x30b")]();var e=b[_0xe681("0x24f")]===document?b[_0xe681("0x24f")].body:b.domElement;if(O===R[_0xe681("0x6d6")]){if(b.enableRotate===!1)return;v[_0xe681("0xfc")](x.clientX,x[_0xe681("0x5a2")]),m[_0xe681("0x6d7")](v,p),b[_0xe681("0x41e")]&&d.rotateLeft(2*Math.PI*m.x/e[_0xe681("0x432")]*b[_0xe681("0x6d8")]),b[_0xe681("0x421")]&&d[_0xe681("0x6ad")](2*Math.PI*m.y/e[_0xe681("0x433")]*b[_0xe681("0x6d8")]),p.copy(v)}else if(O===R[_0xe681("0x6d2")]){if(b[_0xe681("0x423")]===!1)return;T[_0xe681("0xfc")](x.clientX,x[_0xe681("0x5a2")]),S[_0xe681("0x6d7")](T,k),S.y>0?d[_0xe681("0x6bb")](r()):S.y<0&&d[_0xe681("0x6bd")](r()),k[_0xe681("0x233")](T)}else if(O===R[_0xe681("0x6d3")]){if(b[_0xe681("0x41c")]===!1)return;w.set(x[_0xe681("0x5a1")],x[_0xe681("0x5a2")]),E[_0xe681("0x6d7")](w,y),g(E.x,E.y),y[_0xe681("0x233")](w)}O!==R[_0xe681("0x1e6")]&&b.update()}}function I(){b[_0xe681("0xbf")]!==!1&&(document.removeEventListener(_0xe681("0x57f"),C,!1),document[_0xe681("0x6d9")](_0xe681("0x6d4"),I,!1),b[_0xe681("0x6d5")](P),O=R.NONE)}function o(x){if(b[_0xe681("0xbf")]!==!1&&b[_0xe681("0x423")]!==!1&&O===R[_0xe681("0x1e6")]){x[_0xe681("0x30b")](),x[_0xe681("0x599")]();var e=0;void 0!==x[_0xe681("0x312")]?e=x[_0xe681("0x312")]:void 0!==x[_0xe681("0x313")]&&(e=-x[_0xe681("0x313")]),e>0?d.dollyOut(r()):e<0&&d[_0xe681("0x6bb")](r()),b[_0xe681("0xc6")](),b[_0xe681("0x6d5")](L),b[_0xe681("0x6d5")](P)}}function s(x){if(b.enabled!==!1&&b[_0xe681("0x6da")]!==!1&&b[_0xe681("0x41c")]!==!1)switch(x[_0xe681("0x6db")]){case b[_0xe681("0x57")].UP:g(0,b[_0xe681("0x6dc")]),b[_0xe681("0xc6")]();break;case b[_0xe681("0x57")][_0xe681("0x6dd")]:g(0,-b[_0xe681("0x6dc")]),b[_0xe681("0xc6")]();break;case b[_0xe681("0x57")][_0xe681("0x6de")]:g(b[_0xe681("0x6dc")],0),b[_0xe681("0xc6")]();break;case b[_0xe681("0x57")].RIGHT:g(-b[_0xe681("0x6dc")],0),b.update()}}function c(x){if(b[_0xe681("0xbf")]!==!1){switch(x[_0xe681("0x30c")][_0xe681("0x25")]){case 1:if(b[_0xe681("0x41c")]===!1)return;O=R[_0xe681("0x6df")],y[_0xe681("0xfc")](x[_0xe681("0x30c")][0].pageX,x[_0xe681("0x30c")][0][_0xe681("0x30d")]);break;case 2:if(b.enableZoom===!1&&b.enableRotate===!1)return;O=R.TOUCH_ROTATE_DOLLY;var e=b[_0xe681("0x24f")]===document?b.domElement[_0xe681("0x8d")]:b[_0xe681("0x24f")];d[_0xe681("0x6be")](u(x[_0xe681("0x30c")],e[_0xe681("0x432")],e[_0xe681("0x433")],!0,b[_0xe681("0x423")],b[_0xe681("0x6e0")]));break;default:O=R[_0xe681("0x1e6")]}O!==R[_0xe681("0x1e6")]&&b[_0xe681("0x6d5")](L)}}function f(x){if(b[_0xe681("0xbf")]!==!1){x[_0xe681("0x30b")](),x[_0xe681("0x599")]();var e=b[_0xe681("0x24f")]===document?b[_0xe681("0x24f")].body:b[_0xe681("0x24f")];switch(x.touches.length){case 1:if(b[_0xe681("0x41c")]===!1)return;if(O!==R[_0xe681("0x6df")])return;w[_0xe681("0xfc")](x.touches[0][_0xe681("0x311")],x[_0xe681("0x30c")][0].pageY),E[_0xe681("0x6d7")](w,y),g(E.x,E.y),y.copy(w),b[_0xe681("0xc6")]();break;case 2:if(O!==R.TOUCH_ROTATE_DOLLY)return;d[_0xe681("0x6c1")](u(x.touches,e.clientWidth,e.clientHeight),b[_0xe681("0x421")],b.enableGestureRotate,b.enableZoom,b[_0xe681("0x6e0")]),b[_0xe681("0xbd")][_0xe681("0x21e")]&&b[_0xe681("0xbd")][_0xe681("0x14e")]&&b.map[_0xe681("0x14e")][_0xe681("0x6ba")](),b.update();break;default:O=R[_0xe681("0x1e6")]}}}function l(){b[_0xe681("0xbf")]!==!1&&(b[_0xe681("0x6d5")](P),O=R[_0xe681("0x1e6")],d[_0xe681("0x6c2")]())}function u(x,e,t,i){var n={},g=new(_[_0xe681("0x44a")])(x[0][_0xe681("0x311")],x[0].pageY),a=new(_[_0xe681("0x44a")])(x[1][_0xe681("0x311")],x[1][_0xe681("0x30d")]),r=a[_0xe681("0x1cc")]()[_0xe681("0x241")](g),A=Math.PI*(g.y+a.y)/2/t;j||(j=A),Math[_0xe681("0x121")](A-j)>.01?(j=n[_0xe681("0x6bf")]=A,z=!0):(z=!1,n[_0xe681("0x6bf")]=j);var C=r[_0xe681("0x25")]();N||(N=C);var I=Math.sign(C-N);I!=F?Math.abs(C/N-1)>b[_0xe681("0xbd")][_0xe681("0x12e")][_0xe681("0x6e1")]?(F=I,n[_0xe681("0x660")]=C):n.distance=N:n[_0xe681("0x660")]=C,N=n[_0xe681("0x660")];var o=(new(_[_0xe681("0x44a")])(1,0),-r[_0xe681("0x376")]());i&&(Y=0),D||(D=o);var s=o-D,c=Math.sign(s);return c!=H?Math.abs(s)>b[_0xe681("0xbd")].options[_0xe681("0x56f")]&&(!z||i)?(Y=0,n[_0xe681("0x6c0")]=o-Y,H=c,D=o,X=n[_0xe681("0x6c0")]):n[_0xe681("0x6c0")]=X:(n[_0xe681("0x6c0")]=o-Y,D=o,X=n[_0xe681("0x6c0")]),n}function h(x){x[_0xe681("0x30b")]()}var d=new t(x,n);this[_0xe681("0x24f")]=void 0!==i?i:document,this.map=n,this[_0xe681("0x1b1")]=d,this[_0xe681("0x288")]=function(){return d[_0xe681("0x288")]()},this[_0xe681("0x227")]=function(){return d[_0xe681("0x227")]()},this[_0xe681("0xbf")]=!0,this[_0xe681("0x27d")]=this[_0xe681("0x235")],this[_0xe681("0x423")]=!0,this[_0xe681("0x6ce")]=1,this[_0xe681("0x6e0")]=!0,this[_0xe681("0x6d8")]=1,this[_0xe681("0x41e")]=!0,this[_0xe681("0x421")]=!0,this.enablePan=!0,this[_0xe681("0x6dc")]=7,this.autoRotate=!1,this[_0xe681("0x6cd")]=2,this[_0xe681("0x6da")]=!0,this[_0xe681("0x57")]={LEFT:37,UP:38,RIGHT:39,BOTTOM:40},this[_0xe681("0x6cf")]={PAN:_[_0xe681("0x6e2")].LEFT,ZOOM:_[_0xe681("0x6e2")][_0xe681("0x6e3")],ORBIT:_[_0xe681("0x6e2")][_0xe681("0x6e4")]};var b=this,p=new(_[_0xe681("0x44a")]),v=new(_[_0xe681("0x44a")]),m=new(_[_0xe681("0x44a")]),y=(new _.Vector2,new(_[_0xe681("0x44a")]),new _.Vector2),w=new _.Vector2,E=new _.Vector2,k=new(_[_0xe681("0x44a")]),T=new(_[_0xe681("0x44a")]),S=new _.Vector2,R={NONE:-1,ROTATE:0,DOLLY:1,PAN:2,TOUCH_ROTATE:3,TOUCH_DOLLY:4,TOUCH_PAN:5};R[_0xe681("0x6e5")]=34;var O=R[_0xe681("0x1e6")];this[_0xe681("0x6e6")]=this[_0xe681("0x235")][_0xe681("0x1cc")](),this[_0xe681("0x6e7")]=this[_0xe681("0x24")][_0xe681("0x185")].clone(),this[_0xe681("0x6e8")]=this.object[_0xe681("0x280")];var M={type:_0xe681("0x147")},L={type:_0xe681("0xc5")},P={type:_0xe681("0x152")};this[_0xe681("0xc6")]=function(x){this[_0xe681("0x6e9")]&&O===R[_0xe681("0x1e6")]&&d[_0xe681("0x6ac")](a()),d[_0xe681("0xc6")](x)===!0&&(x&&x[_0xe681("0x6ea")]||this[_0xe681("0x6d5")](M))},this[_0xe681("0x1b6")]=function(x,_,t){var i=this,g=d[_0xe681("0x1b6")](t);i.minDistance=g*x,i[_0xe681("0x6a6")]=i.minDistance>n[_0xe681("0x12e")].minViewDistance?n[_0xe681("0x12e")][_0xe681("0x56b")]:i[_0xe681("0x6a6")],i[_0xe681("0x6ca")]=g*_;var a=e[_0xe681("0x197")].getOrthoCameraSizeByPerspectiveCamera(i.map[_0xe681("0x12b")][_0xe681("0x133")],i,i[_0xe681("0x6a6")]),r=e[_0xe681("0x197")][_0xe681("0x27f")](i[_0xe681("0xbd")][_0xe681("0x12b")][_0xe681("0x133")],i,i.maxDistance);return d[_0xe681("0x6bc")]={min:a[_0xe681("0x282")],max:r[_0xe681("0x282")]},g},this[_0xe681("0x276")]=function(x){d.setScaleLevelValue(x),this[_0xe681("0xc6")]()},this[_0xe681("0xff")]=function(){O=R[_0xe681("0x1e6")],this.target[_0xe681("0x233")](this[_0xe681("0x6e6")]),this[_0xe681("0x24")][_0xe681("0x185")].copy(this[_0xe681("0x6e7")]),this.object[_0xe681("0x280")]=this[_0xe681("0x6e8")],this.object[_0xe681("0x287")](),this[_0xe681("0x6d5")](M),this[_0xe681("0xc6")]()},this.zoomIn_=function(x){d[_0xe681("0x6bd")](x||r()),b[_0xe681("0xc6")]()},this.zoomOut_=function(x){d[_0xe681("0x6bb")](x||r()),b[_0xe681("0xc6")]()},this[_0xe681("0x154")]=function(x){d[_0xe681("0x155")]=x};var j,D=null,H=0,N=null,F=0,z=!1,Y=0,X=0;this[_0xe681("0x24c")]=function(){this[_0xe681("0x24f")][_0xe681("0x6d9")](_0xe681("0x6eb"),h,!1),this[_0xe681("0x24f")][_0xe681("0x6d9")](_0xe681("0x6ec"),A,!1),this.domElement.removeEventListener(_0xe681("0x6ed"),o,!1),this[_0xe681("0x24f")][_0xe681("0x6d9")]("MozMousePixelScroll",o,!1),this[_0xe681("0x24f")][_0xe681("0x6d9")](_0xe681("0x2eb"),c,!1),this.domElement[_0xe681("0x6d9")]("touchend",l,!1),this[_0xe681("0x24f")].removeEventListener(_0xe681("0x2ec"),f,!1),document[_0xe681("0x6d9")](_0xe681("0x57f"),C,!1),document[_0xe681("0x6d9")](_0xe681("0x6d4"),I,!1),window[_0xe681("0x6d9")](_0xe681("0x6ee"),s,!1)},this[_0xe681("0x24f")][_0xe681("0x146")](_0xe681("0x6eb"),h,!1),this[_0xe681("0x24f")][_0xe681("0x146")](_0xe681("0x6ec"),A,!1),this[_0xe681("0x24f")][_0xe681("0x146")](_0xe681("0x6ed"),o,!1),this.domElement.addEventListener(_0xe681("0x2ea"),o,!1),this[_0xe681("0x24f")][_0xe681("0x146")]("touchstart",c,!1),
this.domElement[_0xe681("0x146")](_0xe681("0x2ed"),l,!1),this[_0xe681("0x24f")][_0xe681("0x146")](_0xe681("0x2ec"),f,!1),window.addEventListener(_0xe681("0x6ee"),s,!1),this.update()},x[_0xe681("0x6cc")][_0xe681("0x20")]=Object[_0xe681("0xda")](_[_0xe681("0x6ef")][_0xe681("0x20")]),x[_0xe681("0x6cc")][_0xe681("0x20")][_0xe681("0x7b")]=x.OrbitControls,Object[_0xe681("0x391")](x.OrbitControls[_0xe681("0x20")],{object:{get:function(){return this[_0xe681("0x1b1")][_0xe681("0x24")]}},target:{get:function(){return this[_0xe681("0x1b1")][_0xe681("0x235")]},set:function(x){this[_0xe681("0x1b1")][_0xe681("0x235")].copy(x)}},minDistance:{get:function(){return this[_0xe681("0x1b1")][_0xe681("0x6a6")]},set:function(x){this.constraint[_0xe681("0x6a6")]=x}},maxDistance:{get:function(){return this.constraint.maxDistance},set:function(x){this[_0xe681("0x1b1")][_0xe681("0x6ca")]=x}},minZoom:{get:function(){return this[_0xe681("0x1b1")].minZoom},set:function(x){this[_0xe681("0x1b1")][_0xe681("0x6a7")]=x}},maxZoom:{get:function(){return this[_0xe681("0x1b1")][_0xe681("0x6a8")]},set:function(x){this.constraint[_0xe681("0x6a8")]=x}},minPolarAngle:{get:function(){return this[_0xe681("0x1b1")][_0xe681("0x135")]},set:function(x){this[_0xe681("0x1b1")][_0xe681("0x135")]=x}},maxPolarAngle:{get:function(){return this[_0xe681("0x1b1")].maxPolarAngle},set:function(x){this[_0xe681("0x1b1")][_0xe681("0x136")]=x}},minAzimuthAngle:{get:function(){return this[_0xe681("0x1b1")].minAzimuthAngle},set:function(x){this.constraint.minAzimuthAngle=x}},maxAzimuthAngle:{get:function(){return this[_0xe681("0x1b1")][_0xe681("0x6c7")]},set:function(x){this[_0xe681("0x1b1")].maxAzimuthAngle=x}},enableDamping:{get:function(){return this.constraint[_0xe681("0x6aa")]},set:function(x){this[_0xe681("0x1b1")][_0xe681("0x6aa")]=x}},dampingFactor:{get:function(){return this.constraint[_0xe681("0x6ab")]},set:function(x){this[_0xe681("0x1b1")][_0xe681("0x6ab")]=x}},noZoom:{get:function(){return!this[_0xe681("0x423")]},set:function(x){this[_0xe681("0x423")]=!x}},noRotate:{get:function(){return!this[_0xe681("0x6e0")]},set:function(x){this.enableRotate=!x}},noPan:{get:function(){return!this[_0xe681("0x41c")]},set:function(x){this[_0xe681("0x41c")]=!x}},noKeys:{get:function(){return!this[_0xe681("0x6da")]},set:function(x){this.enableKeys=!x}},staticMoving:{get:function(){return!this[_0xe681("0x1b1")].enableDamping},set:function(x){this.constraint[_0xe681("0x6aa")]=!x}},dynamicDampingFactor:{get:function(){return this[_0xe681("0x1b1")][_0xe681("0x6ab")]},set:function(x){this.constraint.dampingFactor=x}}})}(em,esmap,THREE)},function(x,e){function _(x,e){if(!(x instanceof e))throw new TypeError(_0xe681("0x77"))}_0xe681("0x3d"),Object[_0xe681("0x22")](e,_0xe681("0x94"),{value:!0});var t=function(){function x(x,e){for(var _=0;_<e[_0xe681("0x25")];_++){var t=e[_];t[_0xe681("0x7c")]=t[_0xe681("0x7c")]||!1,t[_0xe681("0xc8")]=!0,"value"in t&&(t.writable=!0),Object[_0xe681("0x22")](x,t[_0xe681("0x7f")],t)}}return function(e,_,t){return _&&x(e[_0xe681("0x20")],_),t&&x(e,t),e}}(),i=function(){function x(){_(this,x)}return t(x,[{key:"createFloors",value:function(x){for(var e={},_=x[_0xe681("0x1a1")],t=(x[_0xe681("0x6f0")],x[_0xe681("0x3b6")]),i=(x[_0xe681("0x6f1")],x[_0xe681("0x570")],{sceneX:x[_0xe681("0x6f2")],sceneZ:x[_0xe681("0x6f3")],minX:x[_0xe681("0x21b")],minY:x[_0xe681("0x21c")],maxX:x[_0xe681("0x21a")],maxY:x.maxY}),n=this,g=0;g<_[_0xe681("0x25")];g++){var a=_[g],r=a[_0xe681("0x6f4")];for(var A in r){var C=r[A],I=n[_0xe681("0x6f5")](C,i,t,0),o=0;I[_0xe681("0x193")],e[o]||(e[o]={},e[o][_0xe681("0x193")]=new(THREE[_0xe681("0x55f")]),e[o][_0xe681("0x6f6")]=I[_0xe681("0x6f6")],e[o][_0xe681("0x3ff")]=[],e[o][_0xe681("0x1e1")]=0),e[o][_0xe681("0x193")][_0xe681("0x6d")](I[_0xe681("0x193")]),e[o][_0xe681("0x193")][_0xe681("0x43a")](),e[o][_0xe681("0x6f6")][_0xe681("0x6d")](I[_0xe681("0x6f6")])}}return{types:e,fnum:x[_0xe681("0x190")]}}},{key:"createRooms",value:function(x){for(var e={},_=[],t=[],i=x[_0xe681("0x1a1")],n=x[_0xe681("0x6f0")],g=5,a=x[_0xe681("0x6f1")],r=x[_0xe681("0x570")],A={sceneX:x[_0xe681("0x6f2")],sceneZ:x[_0xe681("0x6f3")],minX:x[_0xe681("0x21b")],minY:x[_0xe681("0x21c")],maxX:x[_0xe681("0x21a")],maxY:x[_0xe681("0x271")]},C=this,I=0;I<i[_0xe681("0x25")];I++){var o,s=i[I];switch(n){case 0:o=s[_0xe681("0x6f7")];break;case 1:o=s[_0xe681("0x6f8")]}for(var c=o[_0xe681("0x25")],f=0;f<c;f++){var l=o[f];if(l[_0xe681("0x21")](_0xe681("0x60a"))&&null!=l[_0xe681("0x60a")]&&l.RoomHigh>0&&(g=l[_0xe681("0x60a")]),l[_0xe681("0x21")](_0xe681("0x60b"))&&null!=l.RoomLogo&&l[_0xe681("0x60b")][_0xe681("0x25")]>1&&0==l[_0xe681("0x608")]&&""!=l[_0xe681("0x6f9")]){var u={},h=l[_0xe681("0x6f9")][_0xe681("0x23a")](",");if(u[_0xe681("0x443")]={x:l.CenX,y:l[_0xe681("0x606")]},u.size=[parseFloat(h[0]),parseFloat(h[1])],u[_0xe681("0x60b")]=l[_0xe681("0x60b")],u.id=l.oid,u[_0xe681("0x184")]=l.RoomHigh+.05,u[_0xe681("0x38a")]=h[_0xe681("0x25")]>2?parseFloat(h[2]):0,u[_0xe681("0x376")]=h[_0xe681("0x25")]>3?parseFloat(h[3]):0,u.offset=h[_0xe681("0x25")]>5?{x:parseFloat(h[4]),y:parseFloat(h[5]),z:parseFloat(h[6])||0}:{x:0,y:0,z:0},l[_0xe681("0x21")]("offset")&&l[_0xe681("0x1ac")].length>0){var d=l[_0xe681("0x1ac")][_0xe681("0x23a")](",");u[_0xe681("0x1ac")].x+=parseFloat(d[0]),u[_0xe681("0x1ac")].z+=parseFloat(d[1]),u[_0xe681("0x1ac")].y+=parseFloat(d[2])}_[_0xe681("0x1e")](u)}if(l[_0xe681("0x6fa")]&&l[_0xe681("0x6fa")].length>2&&_0xe681("0xa")!=l.RModel&&t[_0xe681("0x1e")]({model:l.RModel,scale:l[_0xe681("0x27c")],rotate:l[_0xe681("0x38a")],name:l[_0xe681("0x40")],x:l.CenX,y:l.CenY,offset:l[_0xe681("0x1ac")],id:l[_0xe681("0x397")],bclick:l[_0xe681("0x607")]}),999!=l[_0xe681("0x29d")]||0!=r){var b=C[_0xe681("0x6f5")](l,A,g,1),p=a?l[_0xe681("0x29d")]:l[_0xe681("0x397")]||0,v=b[_0xe681("0x193")];e[p]||(e[p]={},e[p][_0xe681("0x193")]=new(THREE[_0xe681("0x55f")]),e[p].pointsGeometry=b[_0xe681("0x6f6")],e[p][_0xe681("0x3ff")]=[],e[p][_0xe681("0x1e1")]=0);var m=e[p][_0xe681("0x1e1")];e[p].faceIndex+=v[_0xe681("0x1a7")].length;var y={},w=Object.assign({},l);y[_0xe681("0x396")]=w,y[_0xe681("0x411")]=w[_0xe681("0x1f4")],y.ID=w[_0xe681("0x397")],y[_0xe681("0x40")]=w[_0xe681("0x40")],y.typeID=w[_0xe681("0x205")],y[_0xe681("0xce")]=5,y.mapCoord={x:w[_0xe681("0x605")],y:w[_0xe681("0x606")]},y[_0xe681("0x1a6")]=[m,e[p][_0xe681("0x1e1")]],e[p].brothers[_0xe681("0x1e")](y),e[p][_0xe681("0x193")].merge(b[_0xe681("0x193")]),e[p][_0xe681("0x193")][_0xe681("0x43a")](),e[p][_0xe681("0x6f6")][_0xe681("0x6d")](b[_0xe681("0x6f6")])}}}return{types:e,fnum:x[_0xe681("0x190")],modelImagesData:_,model3DData:t,layerType:n,showBase:r}}},{key:_0xe681("0x6f5"),value:function(x,e,_,t){var i=x[_0xe681("0x18c")],n=e.sceneX,g=e.sceneZ;if(i.length>=4){for(var a,r=new(THREE[_0xe681("0x452")]),A=0;A<i.length;A++){var C=i[A];0==A?r[_0xe681("0x34f")](C.x-n,C.y-g):r.lineTo(C.x-n,C.y-g)}if(x[_0xe681("0x6fb")]&&x[_0xe681("0x6fb")][_0xe681("0x25")]>0)for(var I in x[_0xe681("0x6fb")]){var o=x[_0xe681("0x6fb")][I],s=new(THREE[_0xe681("0x6fc")]);for(var A in o){var C=o[A];0==A?s.moveTo(C.x-n,C.y-g):s[_0xe681("0x69d")](C.x-n,C.y-g)}r.holes[_0xe681("0x1e")](s)}a=0==_?new THREE.ShapeGeometry(r):new(THREE[_0xe681("0x6fd")])(r,{needtop:x[_0xe681("0x282")],amount:_,bevelEnabled:!1,material:0,extrudeMaterial:1});for(var c=e[_0xe681("0x21b")],f=e[_0xe681("0x21c")],l=e[_0xe681("0x21a")]-c,u=e[_0xe681("0x271")]-f,h=a[_0xe681("0x1a7")],d=h[_0xe681("0x25")],I=0;I<d;I++){var b=a[_0xe681("0x44b")][h[I].a],p=a[_0xe681("0x44b")][h[I].b],v=a[_0xe681("0x44b")][h[I].c];a.faceVertexUvs[0][I][0].x=(b.x-c-n)/l,a[_0xe681("0x557")][0][I][0].y=(b.y-f+g)/u,a.faceVertexUvs[0][I][1].x=(p.x-c-n)/l,a[_0xe681("0x557")][0][I][1].y=(p.y-f+g)/u,a[_0xe681("0x557")][0][I][2].x=(v.x-c-n)/l,a[_0xe681("0x557")][0][I][2].y=(v.y-f+g)/u}var o=0,m=a.vertices[_0xe681("0x25")],y=r[_0xe681("0x64f")]();if(t){var w={x:0,y:0,z:0};if(x[_0xe681("0x1ac")]&&!x.RModel){var E=x[_0xe681("0x1ac")].split(",");E[_0xe681("0x25")]>=2&&(w.x+=parseFloat(E[0]),w.y+=parseFloat(E[2]),w.z+=parseFloat(E[1]))}for(w.z+=_;o<m;o++)a[_0xe681("0x44b")][o].z-=w.z;w.z-=.002;for(var k=[],T=y[_0xe681("0x44b")][_0xe681("0x25")],S=0;S<T;S++){var R=y[_0xe681("0x44b")][S];R.x+=parseFloat(w.x),R.y+=parseFloat(w.y),R.z-=parseFloat(w.z),0==S||S==T-1?k[_0xe681("0x1e")](R):k[_0xe681("0x1e")](R,R)}}else for(var k=[],T=y.vertices[_0xe681("0x25")],S=0;S<T;S++){var R=y.vertices[S];0==S||S==T-1?k[_0xe681("0x1e")](R):k[_0xe681("0x1e")](R,R)}return y[_0xe681("0x44b")]=k,{geometry:a,pointsGeometry:y,model:x}}return null}}]),x}();e[_0xe681("0x9d")]=i},function(x,e){function _(x,e){if(!(x instanceof e))throw new TypeError(_0xe681("0x77"))}_0xe681("0x3d"),Object.defineProperty(e,"__esModule",{value:!0});var t=function(){function x(x,e){for(var _=0;_<e[_0xe681("0x25")];_++){var t=e[_];t[_0xe681("0x7c")]=t[_0xe681("0x7c")]||!1,t[_0xe681("0xc8")]=!0,_0xe681("0x7d")in t&&(t.writable=!0),Object[_0xe681("0x22")](x,t[_0xe681("0x7f")],t)}}return function(e,_,t){return _&&x(e[_0xe681("0x20")],_),t&&x(e,t),e}}(),i=function(){function x(e){_(this,x),this[_0xe681("0x172")]=e}return t(x,[{key:_0xe681("0x6fe"),value:function(x){var e=this[_0xe681("0x172")],_=x[_0xe681("0x65c")],t=x.fnum,i=e[_0xe681("0x20f")](t),n=e.floors_[t],g=(n[_0xe681("0x5c7")],new(esmap[_0xe681("0x165")])(esmap[_0xe681("0x166")][_0xe681("0x167")]));i.add(g[_0xe681("0x17d")]);for(var a in _){var r=_[a],A=e[_0xe681("0x5ac")].floorStyleBase[t];void 0==A&&(A=e.mapTheme_.floorStyleBase[0]);var C=e[_0xe681("0x5ac")][_0xe681("0x294")],I=e[_0xe681("0x5ac")][_0xe681("0x616")],o=null,s=null,c=null;A&&((A[_0xe681("0x19c")]||0===A[_0xe681("0x19c")])&&(C=A[_0xe681("0x19c")]),(A[_0xe681("0x297")]||0===A[_0xe681("0x297")])&&(I=A[_0xe681("0x297")]),A[_0xe681("0x200")]&&(o=A[_0xe681("0x200")],s=A.imagesize,c=e[_0xe681("0x407")][_0xe681("0x12e")][_0xe681("0x273")]+"/"+e[_0xe681("0x5ac")].themeName+"/")),n.image&&(o=n[_0xe681("0x200")],s=n[_0xe681("0x29b")],c=e[_0xe681("0x407")][_0xe681("0x12e")][_0xe681("0x272")]+"/"+e[_0xe681("0x407")][_0xe681("0x16f")]+_0xe681("0x6ff"));var f=new(THREE[_0xe681("0x55f")]);f[_0xe681("0x44b")]=r.geometry[_0xe681("0x44b")],f.faces=r[_0xe681("0x193")][_0xe681("0x1a7")],f[_0xe681("0x557")]=r[_0xe681("0x193")][_0xe681("0x557")];var l=new(THREE[_0xe681("0x21f")])(f);l[_0xe681("0x38e")][_0xe681("0xfc")](Math.PI/2,0,0,_0xe681("0x3c2")),l[_0xe681("0x185")][_0xe681("0x514")](esmap[_0xe681("0x700")][_0xe681("0x701")]),l.datas_={floor:t,nodeType:esmap[_0xe681("0x1e0")][_0xe681("0x293")]},g[_0xe681("0x17d")].add(l);var u=new(THREE[_0xe681("0x5a6")])({color:C,transparent:!0,opacity:I,receiveShadow:!0});if(l[_0xe681("0x17e")]=u,o&&o[_0xe681("0x25")]>1){var h=s[_0xe681("0x23a")](","),d=[Number(h[0]),Number(h[1])],b=new(THREE[_0xe681("0x1a4")])([u,u[_0xe681("0x1cc")]()]),p=b[_0xe681("0x194")][0],v=e.mapTheme_[_0xe681("0x28f")][o[_0xe681("0x201")](_0xe681("0x202"),"")][_0xe681("0x1ce")][_0xe681("0xbd")];v[_0xe681("0x298")]=v.wrapT=THREE[_0xe681("0x29a")];var m=(e.map_[_0xe681("0x21a")]-e[_0xe681("0x407")][_0xe681("0x21b")])/(e[_0xe681("0x407")][_0xe681("0x271")]-e[_0xe681("0x407")].minY);v.repeat[_0xe681("0xfc")](d[0]*m,d[1]),p[_0xe681("0xbd")]=v,p[_0xe681("0x19c")].set(16777215),v[_0xe681("0x199")]=!0,p[_0xe681("0x199")]=!0,l[_0xe681("0x17e")]=b}e[_0xe681("0x407")][_0xe681("0xc4")].addFloor(l)}}},{key:_0xe681("0x702"),value:function(x){var e=this[_0xe681("0x172")],_=x.types,t=x[_0xe681("0x190")],i=x[_0xe681("0x6f0")]?esmap.ESLayerType[_0xe681("0x168")]:esmap[_0xe681("0x166")][_0xe681("0x1a2")],n=e[_0xe681("0x20f")](t),g=x[_0xe681("0x570")],a=new(esmap[_0xe681("0x165")])(i,{});n[_0xe681("0x80")](a.o3d_);for(var r in _){var A=_[r],C=r;1==A[_0xe681("0x3ff")][_0xe681("0x25")]&&(C=A[_0xe681("0x3ff")][0][_0xe681("0x396")][_0xe681("0x29d")]);var I=e[_0xe681("0x5ac")][_0xe681("0x619")](C),o=e[_0xe681("0x5ac")][_0xe681("0x61a")](C,""),s=new(THREE[_0xe681("0x55f")]);s[_0xe681("0x44b")]=A[_0xe681("0x193")][_0xe681("0x44b")],s[_0xe681("0x1a7")]=A.geometry[_0xe681("0x1a7")],s[_0xe681("0x557")]=A.geometry.faceVertexUvs;var c=new(THREE[_0xe681("0x21f")])(s);c[_0xe681("0x17e")]=o,c[_0xe681("0x38e")][_0xe681("0xfc")](Math.PI/2,0,0,_0xe681("0x3c2")),c[_0xe681("0x17a")]={FloorNum:t,brothers:A.brothers,o3d_:c,nodeType:esmap[_0xe681("0x1e0")][_0xe681("0x168")]},c[_0xe681("0x2ae")]=!0,c[_0xe681("0x3ed")]=esmap.ESRenderOrder[_0xe681("0x37d")],a.o3d_[_0xe681("0x80")](c),(g||x[_0xe681("0x6f0")])&&e[_0xe681("0x407")][_0xe681("0xc4")][_0xe681("0x20e")](c),this.drawOutline(C,A[_0xe681("0x6f6")],I,t)}var l=new(esmap[_0xe681("0x165")])(esmap[_0xe681("0x166")][_0xe681("0x43b")],{});n.add(l[_0xe681("0x17d")]);for(var u=x[_0xe681("0x703")],h=0;h<u[_0xe681("0x25")];h++){var d=u[h],b=e[_0xe681("0x407")][_0xe681("0x12e")][_0xe681("0x272")]+"/"+e[_0xe681("0x407")].sceneId_+_0xe681("0x6ff")+d.RoomLogo,p=esmap[_0xe681("0x197")][_0xe681("0x51a")](b,function(){});d.image=p,d[_0xe681("0x443")]=new(THREE[_0xe681("0x44a")])(d[_0xe681("0x443")].x,d[_0xe681("0x443")].y),d[_0xe681("0x26c")]=new(THREE[_0xe681("0x44a")])(d[_0xe681("0x26c")][0],d[_0xe681("0x26c")][1]);var v=new(esmap[_0xe681("0x704")])({style:d,sx:e[_0xe681("0x1af")],sz:e[_0xe681("0x1ad")],id:d.id});l[_0xe681("0x80")](v)}var m=x[_0xe681("0x705")],y=new(esmap[_0xe681("0x165")])(esmap[_0xe681("0x166")][_0xe681("0x19f")]);y[_0xe681("0x40")]=_0xe681("0x6f8"),n.add(y[_0xe681("0x17d")]);for(var w=0;w<m[_0xe681("0x25")];w++){var E=m[w];if(e[_0xe681("0x407")][_0xe681("0x12e")][_0xe681("0x571")]&&E[_0xe681("0x37d")]){var k=e[_0xe681("0x407")],T=new THREE.Vector3(1,1.5,1);if(E[_0xe681("0x27c")]){var S=E.scale[_0xe681("0x23a")](",");T=new(THREE[_0xe681("0x232")])(parseFloat(S[0]),parseFloat(S[1]),parseFloat(S[2]))}if(E[_0xe681("0x38a")])var R=Math.PI/180,O=E[_0xe681("0x38a")][_0xe681("0x23a")](","),M=new(THREE[_0xe681("0x506")])(parseFloat(O[0])*R,parseFloat(O[1])*R,parseFloat(O[2])*R);var L=new(THREE[_0xe681("0x232")])(-E.x-e[_0xe681("0x1af")],.5,E.y-e[_0xe681("0x1ad")]);if(E[_0xe681("0x1ac")]){var P=E[_0xe681("0x1ac")][_0xe681("0x23a")](",");L.x+=parseFloat(P[0]),L.y+=parseFloat(P[1]),L.z+=parseFloat(P[2])}var j=k[_0xe681("0x12e")].mapDataSrc+"/"+k[_0xe681("0x16f")],D=j+"/model/"+E[_0xe681("0x37d")]+_0xe681("0x706");e[_0xe681("0x24d")].addModel({name:E.name,url:D,scale:T,rotate:M,position:L,data_:{CenX:E.x,CenY:E.y,scale:E[_0xe681("0x27c")]||null,rotate:E[_0xe681("0x38a")]||null,offset:E[_0xe681("0x1ac")]||null},parent:y.o3d_,id:E.id,bclick:E[_0xe681("0x607")],fnum:t})}}n[_0xe681("0x210")]&&e.map_.options[_0xe681("0x212")]&&(t==e[_0xe681("0x407")][_0xe681("0x14d")]?esmap.ESMapUtil.restoreFloorAlpha(t):esmap[_0xe681("0x197")][_0xe681("0x214")](t,e.map_[_0xe681("0x12e")][_0xe681("0x215")])),x.layerType&&(e[_0xe681("0x24d")][_0xe681("0xc5")](),e[_0xe681("0x407")][_0xe681("0x150")](_0xe681("0x5d0"),t,_0xe681("0x37d")),e[_0xe681("0x407")].options[_0xe681("0x567")]&&f[_0xe681("0x407")][_0xe681("0x12e")][_0xe681("0x567")](t),e[_0xe681("0x407")][_0xe681("0x150")](_0xe681("0x2a5"),t))}},{key:_0xe681("0x707"),value:function(x,e,_,t){var i=this[_0xe681("0x172")][_0xe681("0x20f")](t),n=this[_0xe681("0x172")][_0xe681("0x407")][_0xe681("0x19d")](t),g=n.getOrCreateLayerByName(_0xe681("0x708"),esmap[_0xe681("0x166")][_0xe681("0x3a6")]);i[_0xe681("0x80")](g[_0xe681("0x17d")]);var a={color:_[_0xe681("0x623")],linewidth:_[_0xe681("0x709")]},r=new(THREE[_0xe681("0x452")]),A=r[_0xe681("0x64f")]();A[_0xe681("0x44b")]=e.vertices;var C=new(THREE[_0xe681("0x70a")])(a),I=new(THREE[_0xe681("0x70b")])(A,C);I[_0xe681("0x2ae")]=!1,I.datas_={nodeType:esmap[_0xe681("0x1e0")][_0xe681("0x3d9")],typeID:x},I[_0xe681("0x38e")].set(Math.PI/2,0,0,"XYZ"),this[_0xe681("0x172")][_0xe681("0x407")][_0xe681("0x12e")][_0xe681("0x70c")]&&g[_0xe681("0x17d")].add(I)}}]),x}();e[_0xe681("0x9d")]=i},function(x,e){function _(x,e){if(!(x instanceof e))throw new TypeError(_0xe681("0x77"))}_0xe681("0x3d"),Object[_0xe681("0x22")](e,_0xe681("0x94"),{value:!0});var t=function x(e,t){_(this,x),this.x=e,this.y=t};e.default=t},function(x,e){function _(x,e){if(!(x instanceof e))throw new TypeError(_0xe681("0x77"))}_0xe681("0x3d"),Object.defineProperty(e,"__esModule",{value:!0});var t=function(){function x(x,e){for(var _=0;_<e[_0xe681("0x25")];_++){var t=e[_];t.enumerable=t[_0xe681("0x7c")]||!1,t[_0xe681("0xc8")]=!0,_0xe681("0x7d")in t&&(t[_0xe681("0x7e")]=!0),Object.defineProperty(x,t[_0xe681("0x7f")],t)}}return function(e,_,t){return _&&x(e[_0xe681("0x20")],_),t&&x(e,t),e}}(),i=function(){function x(e,t){_(this,x),this.options_=new(esmap[_0xe681("0x70d")])(t),_0xe681("0x2bb")==this.options_[_0xe681("0x26c")]?(this.w_=42,this.h_=42,this[_0xe681("0x2bc")]=10):(this.w_=32,this.h_=32,this.padding_=8),this.x_=this.options_[_0xe681("0x1ac")].x,this.y_=this[_0xe681("0x278")][_0xe681("0x1ac")].y,this[_0xe681("0x2bd")]=!!this[_0xe681("0x278")][_0xe681("0x2bd")]&&this[_0xe681("0x278")].allLayer,this[_0xe681("0x2be")]=this[_0xe681("0x278")][_0xe681("0x2be")]?this.options_[_0xe681("0x2be")]:5,this[_0xe681("0x301")]=this.options_[_0xe681("0x185")]?this[_0xe681("0x278")][_0xe681("0x185")]:2,this[_0xe681("0x2d0")]=20,this[_0xe681("0x2cf")]=10,this.right_=10,this.change_=null,this[_0xe681("0x2c1")]=!1,this[_0xe681("0x2c2")]="#1E82FA",this[_0xe681("0x2c4")]=_0xe681("0x2c5"),this[_0xe681("0x2c6")]=_0xe681("0x2c7"),this[_0xe681("0x2c8")]="2px",this.$=function(x){return document.querySelector(x)},this[_0xe681("0x2cb")],this[_0xe681("0x2cc")],this.touchEndPointX,this[_0xe681("0x2ce")],this[_0xe681("0xbd")]=e,this[_0xe681("0x2cf")]=10,this[_0xe681("0x2d3")]=this[_0xe681("0x278")][_0xe681("0x2d4")],e&&this[_0xe681("0x132")](e),this[_0xe681("0x70e")]=!0}return t(x,[{key:_0xe681("0x132"),value:function(x){var e=this.$(_0xe681("0x70f"));e&&x[_0xe681("0x12b")].container_.removeChild(e);var _=this.$(_0xe681("0x710"));_&&x[_0xe681("0x12b")].container_[_0xe681("0x12d")](_);var t=document[_0xe681("0x2")](_0xe681("0x2d6"));t[_0xe681("0xd2")](_0xe681("0x2d7"),_0xe681("0x711")),t[_0xe681("0xcc")][_0xe681("0x2ba")]=this.w_+"px",t.style[_0xe681("0x185")]="absolute",t[_0xe681("0xcc")][_0xe681("0x2da")]=_0xe681("0x2db"),t[_0xe681("0xcc")][_0xe681("0x2dc")]=this[_0xe681("0x2c6")],t[_0xe681("0xcc")][_0xe681("0x457")]=this[_0xe681("0x2c8")],t[_0xe681("0xcc")][_0xe681("0x712")]=1;var i=document[_0xe681("0x2")]("div");i[_0xe681("0xd2")](_0xe681("0x2d7"),"layer-floors-wrap layer-btn"),i[_0xe681("0xcc")][_0xe681("0x45c")]=this[_0xe681("0x2bc")]+"px",i.style[_0xe681("0x2de")]=_0xe681("0x2df");var n=document[_0xe681("0x2")](_0xe681("0x42b"));this.allLayer?n[_0xe681("0xd2")](_0xe681("0x7"),this[_0xe681("0x2d3")]+_0xe681("0x713")):n[_0xe681("0xd2")](_0xe681("0x7"),this[_0xe681("0x2d3")]+_0xe681("0x714")),n[_0xe681("0xcc")].width=this.w_-2*this.padding_+"px",n[_0xe681("0xcc")][_0xe681("0x184")]=this.h_-2*this[_0xe681("0x2bc")]+"px";var g=document[_0xe681("0x2")](_0xe681("0x2d6"));g[_0xe681("0xd2")]("class",_0xe681("0x715")),g[_0xe681("0x2e8")]=this[_0xe681("0x2e9")][_0xe681("0xa4")](this),g[_0xe681("0x146")](_0xe681("0x2ea"),this[_0xe681("0x2e9")][_0xe681("0xa4")](this),!1),g[_0xe681("0x146")](_0xe681("0x2eb"),this[_0xe681("0x2eb")].bind(this),!1),g[_0xe681("0x146")](_0xe681("0x2ec"),this[_0xe681("0x2ec")][_0xe681("0xa4")](this),!1),g[_0xe681("0x146")](_0xe681("0x2ed"),this[_0xe681("0x2ed")][_0xe681("0xa4")](this),!1),i[_0xe681("0x9")](n),t.appendChild(i),t[_0xe681("0x9")](g);var a=x[_0xe681("0x12b")][_0xe681("0x12c")][_0xe681("0x0")](_0xe681("0x2ee"))[0];if(x[_0xe681("0x12b")].container_[_0xe681("0x2ef")](t,a),this[_0xe681("0x2f0")](x[_0xe681("0x1f2")],x[_0xe681("0x25a")]),this[_0xe681("0x2be")]<x[_0xe681("0x1f2")][_0xe681("0x25")]){var r=document[_0xe681("0x2")](_0xe681("0x2d6"));r.setAttribute("class",_0xe681("0x716")),r[_0xe681("0xcc")][_0xe681("0x184")]="18px",r[_0xe681("0xcc")][_0xe681("0x2f4")]=_0xe681("0x2f5")+this[_0xe681("0x2d3")]+"arrow1.png) no-repeat 50% 50%",r.style[_0xe681("0x2de")]=_0xe681("0x2df"),r[_0xe681("0x2f7")]=this.up.bind(this),r[_0xe681("0x717")]=function(x){x[_0xe681("0x599")](),x[_0xe681("0x30b")]()},r.onmouseup=function(x){x.stopPropagation(),x[_0xe681("0x30b")]()};var A=document[_0xe681("0x2")](_0xe681("0x2d6"));A[_0xe681("0xd2")](_0xe681("0x2d7"),_0xe681("0x718")),A[_0xe681("0xcc")][_0xe681("0x184")]=_0xe681("0x2f3"),A.style[_0xe681("0x2f4")]=_0xe681("0x2f5")+this[_0xe681("0x2d3")]+_0xe681("0x2f6"),A.style[_0xe681("0x2de")]="pointer",A[_0xe681("0x2f7")]=this[_0xe681("0x2f8")][_0xe681("0xa4")](this),t.insertBefore(r,g),t.appendChild(A),g[_0xe681("0xcc")][_0xe681("0x2f9")]="hidden",g[_0xe681("0xcc")][_0xe681("0x184")]=this[_0xe681("0x2be")]*this.h_+"px",this[_0xe681("0x719")](x[_0xe681("0x1f2")][_0xe681("0x25")]-x.focusFloorNum),this[_0xe681("0x322")]()}else this[_0xe681("0x2be")]=x[_0xe681("0x1f2")][_0xe681("0x25")];this[_0xe681("0x2fb")](t),this[_0xe681("0x2fc")]();var C=this;C[_0xe681("0x2bd")]&&C.triggerChange_(),i[_0xe681("0x2f7")]=function(x){x[_0xe681("0x599")](),"top"!=map[_0xe681("0x149")]&&(C[_0xe681("0x2bd")]?(n[_0xe681("0xd2")]("src",C[_0xe681("0x2d3")]+_0xe681("0x714")),C[_0xe681("0x2bd")]=!1):(n[_0xe681("0xd2")](_0xe681("0x7"),C[_0xe681("0x2d3")]+"layers.png"),"3d"==map.viewMode_&&(C[_0xe681("0x2bd")]=!0)),C[_0xe681("0x319")]())},i[_0xe681("0x717")]=function(x){x.stopPropagation()},i[_0xe681("0x71a")]=function(x){x[_0xe681("0x599")]()},i.ontouchstart=function(x){x[_0xe681("0x599")](),x[_0xe681("0x30b")](),C[_0xe681("0x2bd")]?(n[_0xe681("0xd2")](_0xe681("0x7"),C.imgURL_+_0xe681("0x714")),C[_0xe681("0x2bd")]=!1):(n[_0xe681("0xd2")](_0xe681("0x7"),C[_0xe681("0x2d3")]+_0xe681("0x713")),"3d"==map[_0xe681("0x149")]&&(C[_0xe681("0x2bd")]=!0)),C.triggerChange_()},C[_0xe681("0xbd")].on("viewModeChanged",function(x){_0xe681("0x282")==x&&(C.allLayer=!1,C[_0xe681("0x319")](),n[_0xe681("0xd2")]("src",C[_0xe681("0x2d3")]+_0xe681("0x714")))}),C[_0xe681("0xbd")].on(_0xe681("0x225"),function(){C.map[_0xe681("0x21d")]==esmap.ESViewMode[_0xe681("0x71b")]?C[_0xe681("0xbd")][_0xe681("0x188")][_0xe681("0x25")]==C[_0xe681("0xbd")][_0xe681("0x1f5")][_0xe681("0x25")]&&(n.setAttribute(_0xe681("0x7"),C.imgURL_+"layers.png"),C.allLayer=!0):(n[_0xe681("0xd2")](_0xe681("0x7"),C[_0xe681("0x2d3")]+_0xe681("0x714")),C.allLayer=!1)}),C[_0xe681("0xbd")].on(_0xe681("0x2a6"),function(x){C[_0xe681("0x321")](x,!0)}),C[_0xe681("0xbd")].on("visibleFloorNumsChanged",function(x,e){C.changeFloorsSelect(e,!0)})}},{key:_0xe681("0x2fc"),value:function(){if(this.map){var x=this;this[_0xe681("0xbd")].on(_0xe681("0xc6"),function(){x.setPosition_(x.$(_0xe681("0x70f")))})}}},{key:_0xe681("0x71c"),value:function(x,e){var _=this.$(_0xe681("0x71d"));x?(_.setAttribute(_0xe681("0x7"),this.imgURL_+_0xe681("0x713")),this[_0xe681("0x2bd")]=!0):(_[_0xe681("0xd2")](_0xe681("0x7"),this[_0xe681("0x2d3")]+_0xe681("0x714")),this[_0xe681("0x2bd")]=!1),!e&&this[_0xe681("0x319")]()}},{key:_0xe681("0x2fb"),value:function(x,e){if(x)switch(this[_0xe681("0x301")]){case 1:x.style[_0xe681("0x282")]=this[_0xe681("0x2d0")]+this.y_+"px",x.style[_0xe681("0x302")]=this.left_+this.x_+"px";break;case 2:var e=this[_0xe681("0xbd")].mapView[_0xe681("0x12c")][_0xe681("0x186")]-x[_0xe681("0x433")]-60;x[_0xe681("0xcc")][_0xe681("0x282")]=e-this.y_+"px",x[_0xe681("0xcc")].left=this.left_+this.x_+"px";break;case 3:x[_0xe681("0xcc")].top=this[_0xe681("0x2d0")]+this.y_+"px",x.style[_0xe681("0x281")]=this[_0xe681("0x2d1")]+this.x_+"px";break;case 4:var e=this[_0xe681("0xbd")][_0xe681("0x12b")][_0xe681("0x12c")][_0xe681("0x186")]-x[_0xe681("0x433")]-60;x.style[_0xe681("0x282")]=e-this.y_+"px",x[_0xe681("0xcc")][_0xe681("0x281")]=this[_0xe681("0x2d1")]+this.x_+"px"}}},{key:_0xe681("0x2f0"),value:function(x,e){var _;for(this.$(_0xe681("0x710"))[_0xe681("0x303")]="",_=x.length-1;_>=0;_--){var t=x[_];this.$(".layers-wrap").appendChild(this.createLayerlabel_(t[_0xe681("0x1f4")],t[_0xe681("0x2b6")][_0xe681("0x71e")](),e==t.floornum)),_>0&&this.$(_0xe681("0x710"))[_0xe681("0x9")](this[_0xe681("0x305")]())}this[_0xe681("0x2c1")]=!0}},{key:_0xe681("0x71f"),value:function(x){this[_0xe681("0x2c0")]=x}},{key:"up",value:function(x){x[_0xe681("0x599")]();var e=document[_0xe681("0x306")](_0xe681("0x720"))[_0xe681("0x25")],_=e-parseInt(this.$(".layers-wrap>label[class*='active']")[_0xe681("0x308")].floornum);if(0!=_){var t=_-1;this[_0xe681("0x309")](document[_0xe681("0x306")](_0xe681("0x720"))[t]),this[_0xe681("0x2fa")](t)}}},{key:_0xe681("0x2f8"),value:function(x){x[_0xe681("0x599")]();var e=document[_0xe681("0x306")](".layers-wrap > label")[_0xe681("0x25")],_=e-parseInt(this.$(_0xe681("0x721"))[_0xe681("0x308")][_0xe681("0x1f4")]);if(_+1!=e){var t=_+1;this[_0xe681("0x309")](document[_0xe681("0x306")](_0xe681("0x720"))[t]),this[_0xe681("0x2fa")](t)}}},{key:_0xe681("0x2eb"),value:function(x){x[_0xe681("0x599")](),x[_0xe681("0x30b")](),this[_0xe681("0x2cb")]=x.touches[0].pageX,this[_0xe681("0x2cc")]=x[_0xe681("0x30c")][0][_0xe681("0x30d")]}},{key:_0xe681("0x2ec"),value:function(x){x[_0xe681("0x599")](),x.preventDefault(),this[_0xe681("0x2cd")]=x[_0xe681("0x30c")][0][_0xe681("0x311")],this[_0xe681("0x2ce")]=x[_0xe681("0x30c")][0][_0xe681("0x30d")],this.$(_0xe681("0x710")).scrollTop+=this[_0xe681("0x2cc")]-this[_0xe681("0x2ce")]}},{key:_0xe681("0x2ed"),value:function(x){x[_0xe681("0x599")](),x[_0xe681("0x30b")]();var x=x||window[_0xe681("0x30e")],e=null,_=this.$(_0xe681("0x710"))[_0xe681("0x30f")];x.changedTouches.length>0&&(this[_0xe681("0x2cd")]=x.changedTouches[0][_0xe681("0x311")],this.touchEndPointY=x[_0xe681("0x310")][0][_0xe681("0x30d")]),e=x[_0xe681("0x235")];var t=this[_0xe681("0x2ce")]-this[_0xe681("0x2cc")];t>0&&t>this.h_?_-=t:t<0&&-t>this.h_?_+=-t:0==t&&e&&this[_0xe681("0x309")](e),this[_0xe681("0x2cb")]=this.touchEndPointX,this[_0xe681("0x2cc")]=this[_0xe681("0x2ce")]}},{key:_0xe681("0x2e9"),value:function(x){x=x||window[_0xe681("0x30e")];var e=this.$(_0xe681("0x710"))[_0xe681("0x30f")];x[_0xe681("0x312")]?(x[_0xe681("0x312")]>0&&(e-=x[_0xe681("0x312")]),x[_0xe681("0x312")]<0&&(e+=-x[_0xe681("0x312")])):x[_0xe681("0x313")]&&(x[_0xe681("0x313")]>0&&(e-=x[_0xe681("0x313")]),x[_0xe681("0x313")]<0&&(e+=-x[_0xe681("0x313")])),this.$(".layers-wrap")[_0xe681("0x30f")]=e}},{key:_0xe681("0x722"),value:function(x,e,_){var t=this,i=document[_0xe681("0x2")](_0xe681("0x314"));i.setAttribute(_0xe681("0x2d7"),"layer-floors-wrap layer-btn-default"),i[_0xe681("0xd2")](_0xe681("0x723"),x),i[_0xe681("0xcc")][_0xe681("0x2f1")]="inline-block",i.style[_0xe681("0x2dd")]=_0xe681("0x27d"),i[_0xe681("0xcc")][_0xe681("0x2ba")]=t.w_+"px",i[_0xe681("0xcc")][_0xe681("0x184")]=t.h_+"px",i[_0xe681("0xcc")].lineHeight=this.h_+"px",i[_0xe681("0xcc")].margin=0,i[_0xe681("0xcc")].cursor="pointer",i[_0xe681("0xcc")][_0xe681("0x2e0")]=_0xe681("0x316"),i[_0xe681("0xcc")][_0xe681("0x2e1")]=_0xe681("0x2e2"),_?(this[_0xe681("0x328")](i,_0xe681("0x317")),i[_0xe681("0xcc")][_0xe681("0x19c")]=t.selectedColor):i[_0xe681("0xcc")][_0xe681("0x19c")]=t[_0xe681("0x2c4")],i[_0xe681("0x2f7")]=function(x){x[_0xe681("0x599")]();var e=t.$(_0xe681("0x721"));e[_0xe681("0x2e6")]!==this[_0xe681("0x2e6")]&&(t[_0xe681("0x318")](e,_0xe681("0x317")),e[_0xe681("0xcc")][_0xe681("0x19c")]=t[_0xe681("0x2c4")],t[_0xe681("0x328")](this,_0xe681("0x317")),this[_0xe681("0xcc")][_0xe681("0x19c")]=t.selectedColor,t[_0xe681("0x319")](),t[_0xe681("0x2be")]<t[_0xe681("0xbd")][_0xe681("0x1a3")][_0xe681("0x25")]&&t.checkBtn())},i[_0xe681("0x717")]=function(x){x[_0xe681("0x599")]()},i[_0xe681("0x71a")]=function(x){x[_0xe681("0x599")]()};var n=document[_0xe681("0x2")]("span");return n[_0xe681("0x2e6")]=e,i[_0xe681("0x9")](n),i}},{key:"hrEl",value:function(){var x=document.createElement("hr");return x[_0xe681("0xcc")].height="1px",x[_0xe681("0xcc")].border=_0xe681("0x218"),x.style[_0xe681("0x724")]=_0xe681("0x31c"),x[_0xe681("0xcc")][_0xe681("0x2ba")]=_0xe681("0x725"),x.style[_0xe681("0x31d")]="0 20%",x[_0xe681("0xcc")][_0xe681("0x726")]=_0xe681("0x31f"),x}},{key:_0xe681("0x321"),value:function(x){var e=this[_0xe681("0xbd")][_0xe681("0x1a3")][_0xe681("0x25")]-x;this[_0xe681("0x309")](document[_0xe681("0x306")](_0xe681("0x720"))[e]),this.changeScrollState(e)}},{key:_0xe681("0x319"),value:function(x){var e=[],x=this.$(".layers-wrap>label[class*='active']");x&&e[_0xe681("0x1e")](parseInt(x[_0xe681("0x308")][_0xe681("0x1f4")])),this[_0xe681("0x70e")]&&this[_0xe681("0x320")](e),null!==this[_0xe681("0x2c0")]&&this[_0xe681("0x2c0")](e,this[_0xe681("0x2bd")]),this[_0xe681("0x70e")]=!0}},{key:_0xe681("0x320"),value:function(x){this[_0xe681("0xbd")]&&(this[_0xe681("0x2bd")]?this.map[_0xe681("0x188")]=this[_0xe681("0xbd")][_0xe681("0x1f5")]:this[_0xe681("0xbd")][_0xe681("0x188")]=x,this[_0xe681("0xbd")].focusFloorNum=x[0])}},{key:_0xe681("0x727"),value:function(x){for(var e=document.querySelectorAll(".layers-wrap > label"),_=0,t=e[_0xe681("0x25")];_<t;_++){var i=e[_];_==x?i[_0xe681("0xcc")].color=this.selectedColor:i[_0xe681("0xcc")][_0xe681("0x19c")]=this[_0xe681("0x2c4")]}}},{key:_0xe681("0x719"),value:function(x){this[_0xe681("0x727")](x);var e=this.$(".layers-wrap > label")[_0xe681("0x433")],_=(document[_0xe681("0x306")](_0xe681("0x720"))[_0xe681("0x25")],x*e);this.$(_0xe681("0x710"))[_0xe681("0x30f")]=_}},{key:_0xe681("0x2fa"),value:function(x){this.changeActiveStyle_(x);var e=this.$(_0xe681("0x720")).clientHeight,_=document[_0xe681("0x306")](_0xe681("0x720"))[_0xe681("0x25")];if(_-this.showBtnCount>x){var t=x*e,i=this.$(_0xe681("0x710")).scrollTop;t<i&&(this.$(_0xe681("0x710"))[_0xe681("0x30f")]=t)}if(this[_0xe681("0x2be")]<=x){var t=(x-this.showBtnCount+1)*e,i=this.$(_0xe681("0x710"))[_0xe681("0x30f")];t>i&&(this.$(_0xe681("0x710")).scrollTop=t)}}},{key:_0xe681("0x322"),value:function(){var x=this.$(".layers-wrap>label[class*='active']");if(x){var e=x[_0xe681("0x308")][_0xe681("0x1f4")]-1,_=document[_0xe681("0x306")](_0xe681("0x720"))[_0xe681("0x25")],t=this.$(_0xe681("0x728")),i=this.$(_0xe681("0x729"));t&&(0==e?(this[_0xe681("0x328")](t,_0xe681("0x325")),t[_0xe681("0xcc")][_0xe681("0x326")]="url("+this[_0xe681("0x2d3")]+_0xe681("0x72a")):(this[_0xe681("0x318")](t,"disabled"),t[_0xe681("0xcc")][_0xe681("0x326")]=_0xe681("0x2f5")+this.imgURL_+_0xe681("0x327"))),i&&(e==_-1?(this[_0xe681("0x328")](i,_0xe681("0x325")),i[_0xe681("0xcc")][_0xe681("0x326")]=_0xe681("0x2f5")+this[_0xe681("0x2d3")]+"arrow3.png)"):(this[_0xe681("0x318")](i,_0xe681("0x325")),i[_0xe681("0xcc")].backgroundImage=_0xe681("0x2f5")+this.imgURL_+"arrow1.png)"))}}},{key:_0xe681("0x328"),value:function(x,e){if(x&&x[_0xe681("0x32a")]){var _=x[_0xe681("0x32a")],t=""!=_?" ":"",i=_+t+e;x.className=i}}},{key:_0xe681("0x318"),value:function(x,e){if(x&&x[_0xe681("0x32a")]){var _=" "+x.className+" ";_=_[_0xe681("0x201")](/(\s+)/gi," ");var t=_[_0xe681("0x201")](" "+e+" "," ");t=t[_0xe681("0x201")](/(^\s+)|(\s+$)/g,""),x.className=t}}},{key:_0xe681("0x32b"),value:function(x,e){if(!x||!x[_0xe681("0x32a")])return!1;var _=x[_0xe681("0x32a")],t=_.split(/\s+/),i=0;for(i in t)if(t[i]==e)return!0;return!1}},{key:_0xe681("0x309"),value:function(x){if(x)if(document.all)x.click();else{var e=document[_0xe681("0x32c")]("MouseEvents");e[_0xe681("0x32e")](_0xe681("0x2fd"),!0,!0),x[_0xe681("0x6d5")](e)}}}]),x}();e[_0xe681("0x9d")]=i},function(x,e){function _(x,e){if(!(x instanceof e))throw new TypeError(_0xe681("0x77"))}_0xe681("0x3d"),Object.defineProperty(e,"__esModule",{value:!0});var t=function(){function x(x,e){for(var _=0;_<e[_0xe681("0x25")];_++){var t=e[_];t[_0xe681("0x7c")]=t[_0xe681("0x7c")]||!1,t[_0xe681("0xc8")]=!0,_0xe681("0x7d")in t&&(t[_0xe681("0x7e")]=!0),Object[_0xe681("0x22")](x,t.key,t)}}return function(e,_,t){return _&&x(e[_0xe681("0x20")],_),t&&x(e,t),e}}(),i=function(){function x(e,t){_(this,x),this.options_=new(esmap[_0xe681("0x70d")])(t),_0xe681("0x2bb")==this.options_[_0xe681("0x26c")]?(this.w_=42,this.h_=42,this[_0xe681("0x72b")]=0):(this.w_=42,this.h_=42,this.margin_=0),this.x_=this.options_[_0xe681("0x1ac")].x,this.y_=this[_0xe681("0x278")][_0xe681("0x1ac")].y,this[_0xe681("0x72c")]=this.options_[_0xe681("0x72d")],this.init2D_?this.viewMode_=_0xe681("0x282"):this[_0xe681("0x149")]="3d",
this[_0xe681("0x72e")]=!!this[_0xe681("0x278")][_0xe681("0x72f")]&&this[_0xe681("0x278")][_0xe681("0x72f")],this[_0xe681("0x208")]=this[_0xe681("0x72e")],this.defaultPadding_=10,this[_0xe681("0x426")]=!0,this[_0xe681("0x301")]=this[_0xe681("0x278")][_0xe681("0x185")]?this.options_[_0xe681("0x185")]:3,this.top_=20,this[_0xe681("0x2cf")]=10,this[_0xe681("0x2d1")]=10,this[_0xe681("0x730")]=!!this.options_[_0xe681("0x731")]&&this[_0xe681("0x278")][_0xe681("0x731")],this.defaultShadow_=_0xe681("0x2c7"),this[_0xe681("0x2c8")]="2px",this[_0xe681("0x2d3")]=this[_0xe681("0x278")][_0xe681("0x2d4")],e&&(this[_0xe681("0xbd")]=e,this[_0xe681("0x132")](e))}return t(x,[{key:_0xe681("0x132"),value:function(x){var e=document[_0xe681("0x2")](_0xe681("0x2d6"));e[_0xe681("0xd2")](_0xe681("0x2d7"),_0xe681("0x732")),e[_0xe681("0xcc")][_0xe681("0x712")]=10,e[_0xe681("0xcc")][_0xe681("0x185")]=_0xe681("0x2d9"),e[_0xe681("0xcc")][_0xe681("0x184")]=this.h_+"px",e[_0xe681("0xcc")].width=this.w_+"px",e[_0xe681("0xcc")].cursor=_0xe681("0x2df"),e[_0xe681("0xcc")][_0xe681("0x2da")]=_0xe681("0x2db"),e[_0xe681("0xcc")][_0xe681("0x2dc")]=this[_0xe681("0x2c6")],e.style[_0xe681("0x457")]=this[_0xe681("0x2c8")],this[_0xe681("0x730")]?e[_0xe681("0xcc")][_0xe681("0x2f4")]=_0xe681("0x733")+this[_0xe681("0x2d3")]+_0xe681("0x734"):e.style[_0xe681("0x2f4")]=_0xe681("0x733")+this[_0xe681("0x2d3")]+_0xe681("0x735"),e[_0xe681("0x2f7")]=this[_0xe681("0x736")][_0xe681("0xa4")](this);var _=document[_0xe681("0x2")](_0xe681("0x2d6"));_[_0xe681("0xd2")](_0xe681("0x2d7"),_0xe681("0x737")),_[_0xe681("0xcc")].position=_0xe681("0x2d9"),_[_0xe681("0xcc")].display=_0xe681(this.expand_?"0x2ff":"0x218");var t=document[_0xe681("0x2")](_0xe681("0x2d6"));t.setAttribute(_0xe681("0x2d7"),_0xe681("0x738")),t[_0xe681("0xcc")][_0xe681("0x184")]=this.h_+"px",t[_0xe681("0xcc")][_0xe681("0x2ba")]=this.w_+"px",t[_0xe681("0xcc")][_0xe681("0x45c")]=this[_0xe681("0x72b")]+"px",t[_0xe681("0xcc")][_0xe681("0x2de")]=_0xe681("0x2df"),t[_0xe681("0xcc")][_0xe681("0x2dc")]=this[_0xe681("0x2c6")],t[_0xe681("0xcc")].borderRadius=this[_0xe681("0x2c8")],this[_0xe681("0x72c")]?t.style[_0xe681("0x2f4")]=_0xe681("0x733")+this.imgURL_+_0xe681("0x739"):t.style[_0xe681("0x2f4")]=_0xe681("0x733")+this[_0xe681("0x2d3")]+_0xe681("0x73a"),t[_0xe681("0xcc")][_0xe681("0x2da")]=_0xe681("0x2db"),t[_0xe681("0x2f7")]=this[_0xe681("0x73b")][_0xe681("0xa4")](this);var i=document[_0xe681("0x2")](_0xe681("0x2d6"));i[_0xe681("0xd2")]("class",_0xe681("0x73c")),i[_0xe681("0xcc")].height=this.h_+"px",i[_0xe681("0xcc")].width=this.w_+"px",i[_0xe681("0xcc")][_0xe681("0x45c")]=this.margin_+"px",i[_0xe681("0xcc")][_0xe681("0x456")]=this[_0xe681("0x2d2")]+"px",i.style[_0xe681("0x2de")]=_0xe681("0x2df"),i[_0xe681("0xcc")].boxShadow=this[_0xe681("0x2c6")],i.style[_0xe681("0x457")]=this.defaultRadius_,this[_0xe681("0x72e")]?i[_0xe681("0xcc")][_0xe681("0x2f4")]=_0xe681("0x733")+this[_0xe681("0x2d3")]+"groups.png) no-repeat 50% 50%":i[_0xe681("0xcc")].background="white url("+this[_0xe681("0x2d3")]+"group.png) no-repeat 50% 50%",i[_0xe681("0x2f7")]=this[_0xe681("0x73d")][_0xe681("0xa4")](this),_[_0xe681("0x9")](t),_[_0xe681("0x9")](i);var n=x[_0xe681("0x12b")][_0xe681("0x12c")].getElementsByTagName(_0xe681("0x2ee"))[0];x.mapView[_0xe681("0x12c")][_0xe681("0x2ef")](e,n),x[_0xe681("0x12b")][_0xe681("0x12c")][_0xe681("0x2ef")](_,n),this[_0xe681("0x2fb")](e),this[_0xe681("0x2fb")](_,this.h_),this[_0xe681("0x2fc")]()}},{key:_0xe681("0x2fc"),value:function(){if(this[_0xe681("0xbd")]){var x=this;this.map.on(_0xe681("0xc6"),function(){var e=document[_0xe681("0x2ca")](_0xe681("0x73e")),_=document[_0xe681("0x2ca")](_0xe681("0x73f"));x[_0xe681("0x2fb")](e),x[_0xe681("0x2fb")](_,x.h_)})}}},{key:_0xe681("0x2fb"),value:function(x,e){switch(this[_0xe681("0x301")]){case 1:e?x[_0xe681("0xcc")][_0xe681("0x282")]=this[_0xe681("0x2d0")]+e+this[_0xe681("0x2d2")]+this.y_+"px":x.style.top=this.top_+this.y_+"px",x.style[_0xe681("0x302")]=this[_0xe681("0x2cf")]+this.x_+"px";break;case 2:var _=this[_0xe681("0xbd")][_0xe681("0x12b")][_0xe681("0x12c")][_0xe681("0x186")]-x[_0xe681("0x433")]-60;e&&(_=_-e-this.defaultPadding_),x[_0xe681("0xcc")][_0xe681("0x282")]=_-this.y_+"px",x[_0xe681("0xcc")][_0xe681("0x302")]=this.left_+this.x_+"px";break;case 3:e?x[_0xe681("0xcc")].top=this.top_+e+this[_0xe681("0x2d2")]+this.y_+"px":x[_0xe681("0xcc")].top=this[_0xe681("0x2d0")]+this.y_+"px",x[_0xe681("0xcc")][_0xe681("0x281")]=this[_0xe681("0x2d1")]+this.x_+"px";break;case 4:var t=this[_0xe681("0xbd")][_0xe681("0x12b")][_0xe681("0x12c")][_0xe681("0x186")]-x[_0xe681("0x433")]-60;e&&(t=t-e-this[_0xe681("0x2d2")]),x[_0xe681("0xcc")][_0xe681("0x282")]=t-this.y_+"px",x.style[_0xe681("0x281")]=this.right_+this.x_+"px"}}},{key:"createTool_",value:function(){var x=document[_0xe681("0x216")](_0xe681("0x732"))[0],e=document.getElementsByClassName(_0xe681("0x737"))[0];"none"==e.style[_0xe681("0x2f1")]?(x[_0xe681("0xcc")][_0xe681("0x2f4")]=_0xe681("0x733")+this[_0xe681("0x2d3")]+_0xe681("0x734"),e[_0xe681("0xcc")][_0xe681("0x2f1")]=_0xe681("0x2ff")):(x.style[_0xe681("0x2f4")]=_0xe681("0x733")+this[_0xe681("0x2d3")]+_0xe681("0x735"),e[_0xe681("0xcc")][_0xe681("0x2f1")]="none")}},{key:_0xe681("0x73b"),value:function(x){if(this[_0xe681("0xbd")]){var e=document[_0xe681("0x216")](_0xe681("0x738"))[0];if(this[_0xe681("0x149")]&&"3d"!=this[_0xe681("0x149")])e[_0xe681("0xcc")][_0xe681("0x2f4")]=_0xe681("0x733")+this.imgURL_+"3D.png) no-repeat",this[_0xe681("0xbd")].viewMode=esmap[_0xe681("0x237")][_0xe681("0x71b")],this[_0xe681("0x149")]="3d";else{if(this[_0xe681("0x208")]){var _=document.getElementsByClassName(_0xe681("0x73c"))[0];if(document.all)_[_0xe681("0x2fd")]();else{var t=document.createEvent("MouseEvents");t[_0xe681("0x32e")](_0xe681("0x2fd"),!0,!0),_.dispatchEvent(t)}}e[_0xe681("0xcc")][_0xe681("0x2f4")]="white url("+this[_0xe681("0x2d3")]+_0xe681("0x740"),this[_0xe681("0xbd")][_0xe681("0x21d")]=esmap[_0xe681("0x237")][_0xe681("0x238")],this[_0xe681("0x149")]=_0xe681("0x282")}}}},{key:_0xe681("0x73d"),value:function(x){if(this.map){var e=document[_0xe681("0x216")]("tool-floor-btn")[0];if(this.floors_)e[_0xe681("0xcc")][_0xe681("0x2f4")]=_0xe681("0x733")+this[_0xe681("0x2d3")]+_0xe681("0x741"),this[_0xe681("0xbd")][_0xe681("0x188")]=[map[_0xe681("0x25a")]];else{if(_0xe681("0x282")==this[_0xe681("0x149")]){var _=document[_0xe681("0x216")](_0xe681("0x738"))[0];if(document[_0xe681("0x1f6")])_[_0xe681("0x2fd")]();else{var t=document[_0xe681("0x32c")]("MouseEvents");t[_0xe681("0x32e")](_0xe681("0x2fd"),!0,!0),_[_0xe681("0x6d5")](t)}}e[_0xe681("0xcc")].background=_0xe681("0x733")+this[_0xe681("0x2d3")]+_0xe681("0x742"),this[_0xe681("0xbd")][_0xe681("0x188")]=map[_0xe681("0x1a3")]}this[_0xe681("0xbd")].focusFloorNum={floornum:map[_0xe681("0x25a")],time:0},this[_0xe681("0x208")]=!this[_0xe681("0x208")]}}},{key:_0xe681("0x743"),value:function(){return this[_0xe681("0x208")]}}]),x}();e.default=i},function(x,e){_0xe681("0x3d"),!function(x,e){x[_0xe681("0x127")]={},x[_0xe681("0x127")][_0xe681("0x4f6")]=function(x){x/=.5;var e=0,_=1;return x<1?_/2*x*x+e:(x--,-_/2*(x*(x-2)-1)+e)},x[_0xe681("0x127")].easeInQuad=function(x){var e=0,_=1;return _*x*x+e},x[_0xe681("0x127")][_0xe681("0x53f")]=function(x){var e=0,_=1;return-_*x*(x-2)+e},x[_0xe681("0x127")][_0xe681("0x53b")]=function(x){return x},x[_0xe681("0x127")][_0xe681("0x744")]=function(x){var e=x-1;return e*e*(2.70158*e+1.70158)+1},x[_0xe681("0x127")][_0xe681("0x745")]=function(x){return Math[_0xe681("0x551")](x*Math.PI)},x[_0xe681("0x127")][_0xe681("0x746")]=function(x){return 2*(x>.5?1-x:x)},x.Tween.kill=function(x){clearInterval(x)},x.Tween[_0xe681("0x242")]=function(e,_,t,i,n){null==t&&(t=x[_0xe681("0x127")][_0xe681("0x53f")]);var g,a=0,r=0;return 0==e?(_(1),void 0!=n&&n(1),void 0!=i&&i()):!function(){var A,C=Date[_0xe681("0x747")]();r=setInterval(function(){A=Date[_0xe681("0x747")](),a+=(A-C)/1e3,C=A,a>=e&&(a=e),g=a/e;var I=t(g);_(I),x.Tween[_0xe681("0xbd")]&&x.Tween.map[_0xe681("0x257")](),void 0!=n&&n(I),1==g&&(clearInterval(r),null!=i&&i())},1)}(),r},x[_0xe681("0x127")][_0xe681("0x748")]=function(x,_,t,i){var n={obj:t,prop:x,old:t[x]};_0xe681("0x28")==typeof n[_0xe681("0x749")]?n[_0xe681("0x74a")]=i[x]-t[x]:(n[_0xe681("0x749")]instanceof e[_0xe681("0x232")]||n[_0xe681("0x749")]instanceof e[_0xe681("0x196")]||n.old instanceof e[_0xe681("0x507")])&&(n[_0xe681("0x749")]=n[_0xe681("0x749")][_0xe681("0x1cc")](),n[_0xe681("0x74a")]=i[x][_0xe681("0x1cc")]()),_[_0xe681("0x1e")](n)},x[_0xe681("0x127")][_0xe681("0x128")]=function(x,_,t,i){return e.Tween[_0xe681("0x1cd")](null,x,null,i,t,_)},x[_0xe681("0x127")]._setValue=function(x,_,t){var i=_[_0xe681("0x749")],n=_[_0xe681("0x74b")],g=_[_0xe681("0x74a")];_0xe681("0x28")==typeof i?x[n]=i+t*g:i instanceof e[_0xe681("0x232")]||i instanceof e[_0xe681("0x196")]?x[n].copy(i[_0xe681("0x1cc")]()[_0xe681("0x5dd")](g,t)):i instanceof e[_0xe681("0x507")]&&x[n][_0xe681("0x233")](i[_0xe681("0x1cc")]().slerp(g,t))},x[_0xe681("0x127")][_0xe681("0x1cd")]=function(e,_,t,i,n,g){var a=[];for(var r in t)x[_0xe681("0x127")][_0xe681("0x748")](r,a,e,t);var A=x[_0xe681("0x127")][_0xe681("0x242")](_,function(_){for(var t=0;t<a[_0xe681("0x25")];t++)x[_0xe681("0x127")]._setValue(e,a[t],_)},i,n,g);return A},x[_0xe681("0x127")].actionArray=function(e,_,t,i,n,g){var a=[];for(var r in t)for(var A in e)x.Tween[_0xe681("0x748")](r,a,e[A],t);var C=x[_0xe681("0x127")].fadeTo(_,function(e){for(var _=0;_<a.length;_++){var t=a[_];x[_0xe681("0x127")][_0xe681("0x74c")](t[_0xe681("0x74d")],t,e)}},i,n,g);return C},x[_0xe681("0x127")][_0xe681("0x74e")]=function(e,_,t,i,n,g){var a=[];for(var r in e){var A=[];for(var C in t[r])x[_0xe681("0x127")][_0xe681("0x748")](C,A,e[r],t[r]);a[_0xe681("0x1e")](A)}var I=x[_0xe681("0x127")][_0xe681("0x242")](_,function(_){for(var t in e)for(var i in a[t])x[_0xe681("0x127")][_0xe681("0x74c")](e[t],a[t][i],_)},i,n,g);return I},x[_0xe681("0x127")][_0xe681("0x74f")]=function(x){var e=x,_=0,t=1,i=1;return(e/=i)<1/2.75?t*(7.5625*e*e)+_:e<2/2.75?t*(7.5625*(e-=1.5/2.75)*e+.75)+_:e<2.5/2.75?t*(7.5625*(e-=2.25/2.75)*e+.9375)+_:t*(7.5625*(e-=2.625/2.75)*e+.984375)+_},x[_0xe681("0x127")][_0xe681("0x750")]=function(_,t,i,n,g,a){n=n||x[_0xe681("0x127")][_0xe681("0x53f")];var r=new(e[_0xe681("0x507")]),A=_[_0xe681("0x501")].clone(),C=t[_0xe681("0x501")];i=i||1,x[_0xe681("0x127")][_0xe681("0x74e")]([_[_0xe681("0x185")]],i,[{x:t[_0xe681("0x185")].x,y:t[_0xe681("0x185")].y,z:t[_0xe681("0x185")].z}],n,function(){g&&g()},function(x){e[_0xe681("0x507")][_0xe681("0x502")](A,C,r,x),_.quaternion[_0xe681("0xfc")](r.x,r.y,r.z,r.w),a&&a(x)})}}(em,THREE)},function(x,e){function _(x){return x<r&&x>-r}function t(x){return x>r}function i(x){return x<-r}function n(x,e){return Math[_0xe681("0x64e")]((x.x-e.x)*(x.x-e.x)+(x.y-e.y)*(x.y-e.y))}function g(x,e,n,g){var a=e.x,r=e.y,A=n.x,C=n.y,I=x.x,o=x.y,s=A-a,c=C-r,f=Math[_0xe681("0x64e")](s*s+c*c),l=I-a,u=o-r,h=Math[_0xe681("0x64e")](l*l+u*u);if(_(f))return _(h)?(g.x=e.x,g.y=e.y,0):(g.x=e.x,g.y=e.y,h);var d=s/f,b=c/f,p=d*l+b*u;if(!t(p))return g.x=e.x,g.y=e.y,h;if(!i(p-f)){var v=I-A,m=o-C,y=Math[_0xe681("0x64e")](v*v+m*m);return g.x=n.x,g.y=n.y,y}var w=a+p*d,E=r+p*b,k=I-w,T=o-E,S=Math[_0xe681("0x64e")](k*k+T*T);return g.x=w,g.y=E,S}function a(x){var e=this,_=Object[_0xe681("0x57")](x);_[_0xe681("0xc3")](function(_){void 0==e[_]&&(e[_]=x[_])})}_0xe681("0x3d"),Object[_0xe681("0x22")](e,"__esModule",{value:!0}),e[_0xe681("0x751")]=n,e.calcProjPoint=g,e[_0xe681("0x752")]=a;var r=1e-5},function(x,e,_){function t(x){return x&&x.__esModule?x:{default:x}}function i(x,e){if(!(x instanceof e))throw new TypeError(_0xe681("0x77"))}_0xe681("0x3d"),Object[_0xe681("0x22")](e,_0xe681("0x94"),{value:!0});var n=function(){function x(x,e){for(var _=0;_<e[_0xe681("0x25")];_++){var t=e[_];t.enumerable=t[_0xe681("0x7c")]||!1,t[_0xe681("0xc8")]=!0,"value"in t&&(t[_0xe681("0x7e")]=!0),Object[_0xe681("0x22")](x,t[_0xe681("0x7f")],t)}}return function(e,_,t){return _&&x(e[_0xe681("0x20")],_),t&&x(e,t),e}}(),g=_(5),a=t(g),r=function(){function x(e,_){i(this,x),this[_0xe681("0x278")]=new esmap.ESControlOptions(_),_0xe681("0x2bb")==this[_0xe681("0x278")][_0xe681("0x26c")]?(this.w_=42,this.h_=42,this[_0xe681("0x2bc")]=14):(this.w_=28,this.h_=28,this.padding_=8),this.x_=this.options_.offset.x,this.y_=this[_0xe681("0x278")][_0xe681("0x1ac")].y,this[_0xe681("0x301")]=this[_0xe681("0x278")][_0xe681("0x185")]?this[_0xe681("0x278")][_0xe681("0x185")]:4,this[_0xe681("0x2d0")]=20,this[_0xe681("0x2cf")]=10,this.right_=10,this[_0xe681("0x2c6")]=_0xe681("0x2c7"),this[_0xe681("0x2c8")]=_0xe681("0x2c9"),this.imgURL_=this[_0xe681("0x278")][_0xe681("0x2d4")],this[_0xe681("0x426")]=!0,e&&(this[_0xe681("0xbd")]=e,this[_0xe681("0x132")](e))}return n(x,[{key:_0xe681("0x132"),value:function(x){var e=(0,a[_0xe681("0x9d")])(_0xe681("0x2d6"))[_0xe681("0xcb")]("class",_0xe681("0x753"))[_0xe681("0xcc")]({zIndex:10,position:_0xe681("0x2d9"),backgroundColor:_0xe681("0x2db"),boxShadow:this.defaultShadow_,borderRadius:this.defaultRadius_})[_0xe681("0xca")],_=(0,a[_0xe681("0x9d")])(_0xe681("0x2d6"))[_0xe681("0xcb")]("class",_0xe681("0x754"))[_0xe681("0xcc")]({padding:this[_0xe681("0x2bc")]+"px",cursor:_0xe681("0x2df"),height:this.h_})[_0xe681("0xcd")](_0xe681("0x2fd"),this.scaleLevelIn[_0xe681("0xa4")](this))[_0xe681("0xca")],t=(0,a[_0xe681("0x9d")])(_0xe681("0x42b")).attr(_0xe681("0x7"),this[_0xe681("0x2d3")]+_0xe681("0x755"))[_0xe681("0xcc")]({width:this.w_-2*this[_0xe681("0x2bc")]+"px",height:this.h_-2*this[_0xe681("0x2bc")]+"px"}).element;_[_0xe681("0x9")](t);var i=(0,a.default)("div")[_0xe681("0xcb")](_0xe681("0x2d7"),_0xe681("0x756"))[_0xe681("0xcc")]({padding:this[_0xe681("0x2bc")]+"px",cursor:_0xe681("0x2df"),height:this.h_}).addEvent(_0xe681("0x2fd"),this.scaleLevelOut[_0xe681("0xa4")](this))[_0xe681("0xca")],n=(0,a[_0xe681("0x9d")])("img").attr(_0xe681("0x7"),this[_0xe681("0x2d3")]+_0xe681("0x757"))[_0xe681("0xcc")]({width:this.w_-2*this[_0xe681("0x2bc")]+"px",height:this.h_-2*this[_0xe681("0x2bc")]+"px"})[_0xe681("0xca")];i[_0xe681("0x9")](n),e[_0xe681("0x9")](_),e[_0xe681("0x9")](this.hrEl()),e[_0xe681("0x9")](i);var g=x[_0xe681("0x12b")].container_[_0xe681("0x0")](_0xe681("0x2ee"))[0];x[_0xe681("0x12b")][_0xe681("0x12c")][_0xe681("0x2ef")](e,g),this[_0xe681("0x2fb")](e),this[_0xe681("0x2fc")]()}},{key:_0xe681("0x2fc"),value:function(){if(this.map){var x=this;this.map.on(_0xe681("0xc6"),function(){var e=document[_0xe681("0x2ca")](_0xe681("0x758"));x[_0xe681("0x2fb")](e)})}}},{key:_0xe681("0x2fb"),value:function(x,e){switch(this.positon_){case 1:(0,a[_0xe681("0x9d")])(x)[_0xe681("0xcc")]({top:this[_0xe681("0x2d0")]+this.y_+"px",left:this[_0xe681("0x2cf")]+this.x_+"px"});break;case 2:var e=this[_0xe681("0xbd")][_0xe681("0x12b")].container_[_0xe681("0x186")]-x[_0xe681("0x433")]-60;(0,a.default)(x).style({top:e-this.y_+"px",left:this[_0xe681("0x2cf")]+this.x_+"px"});break;case 3:(0,a[_0xe681("0x9d")])(x)[_0xe681("0xcc")]({top:this[_0xe681("0x2d0")]+this.y_+"px",right:this[_0xe681("0x2d1")]+this.x_+"px"});break;case 4:var e=this.map[_0xe681("0x12b")][_0xe681("0x12c")][_0xe681("0x186")]-x[_0xe681("0x433")]-60;(0,a[_0xe681("0x9d")])(x).style({top:e-this.y_+"px",right:this[_0xe681("0x2d1")]+this.x_+"px"})}}},{key:_0xe681("0x305"),value:function(){var x=(0,a[_0xe681("0x9d")])("hr")[_0xe681("0xcc")]({height:_0xe681("0x31b"),border:_0xe681("0x218"),borderTop:_0xe681("0x31c"),width:_0xe681("0x725"),margin:_0xe681("0x31e"),filter:_0xe681("0x31f")})[_0xe681("0xca")];return x}},{key:_0xe681("0x1b9"),value:function(x){this.map&&this[_0xe681("0xbd")][_0xe681("0x1b9")](),_0xe681("0x32")==typeof x&&x(this[_0xe681("0x759")])}},{key:_0xe681("0x1b8"),value:function(x){this[_0xe681("0xbd")]&&this[_0xe681("0xbd")][_0xe681("0x1b8")](),_0xe681("0x32")==typeof x&&x(this.scalelevel)}}]),x}();e.default=r},function(x,e,_){function t(x,e){if(!(x instanceof e))throw new TypeError(_0xe681("0x77"))}function i(x,e){if(!x)throw new ReferenceError(_0xe681("0x36b"));return!e||"object"!=typeof e&&"function"!=typeof e?x:e}function n(x,e){if(_0xe681("0x32")!=typeof e&&null!==e)throw new TypeError(_0xe681("0x36c")+typeof e);x[_0xe681("0x20")]=Object[_0xe681("0xda")](e&&e.prototype,{constructor:{value:x,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object[_0xe681("0x36d")](x,e):x[_0xe681("0x36e")]=e)}_0xe681("0x3d");var g=function(){function x(x,e){for(var _=0;_<e.length;_++){var t=e[_];t[_0xe681("0x7c")]=t[_0xe681("0x7c")]||!1,t.configurable=!0,_0xe681("0x7d")in t&&(t.writable=!0),Object[_0xe681("0x22")](x,t.key,t)}}return function(e,_,t){return _&&x(e[_0xe681("0x20")],_),t&&x(e,t),e}}(),a=window[_0xe681("0x252")],r=window.em=a,A=window[_0xe681("0x250")]={version:_0xe681("0x75a"),minV:1,maxV:2};_(65),_(87),_(83),_(84),_(85),_(86),_(71),_(41),_(17),a.Promise=function(){this[_0xe681("0x75b")]=[]},a[_0xe681("0x5c5")][_0xe681("0x4f3")]=function(x){var e=new a.Promise;return setTimeout(function(){e[_0xe681("0x5c9")]()},x),e},a[_0xe681("0x5c5")].prototype={constructor:a.Promise,then:function(x){return this[_0xe681("0x75b")][_0xe681("0x1e")](x),this},resolve:function(x){var e=this;setTimeout(function(){for(var x=0;x<e[_0xe681("0x75b")][_0xe681("0x25")];x++){var _=e[_0xe681("0x75b")][x]();if(_ instanceof a[_0xe681("0x5c5")])for(x++;x<e[_0xe681("0x75b")].length;x++)_[_0xe681("0x5be")](e.callbacks[x])}},0)}},A[_0xe681("0x700")]={EXTENT_EPSILON_Y:-.01,SCENE_AXIS:!1},A[_0xe681("0x75c")]={create:function(x,e){return new C(x,e)}},A.ESappendMapPoi__={setUrl:function(x){this[_0xe681("0x17e")][_0xe681("0xbd")]&&this[_0xe681("0x17e")][_0xe681("0xbd")][_0xe681("0x24c")](),this.material[_0xe681("0xbd")]=A.ESMapUtil[_0xe681("0x51a")](x),this[_0xe681("0x17e")].map[_0xe681("0x199")]=!0}},A[_0xe681("0x75d")]={NORTH:"n",SOUTH:"s",WEST:"w",EAST:"e",NORTH_EAST:"ne",NORTH_WEST:"nw",SOUTH_EAST:"se",SOUTH_WEST:"sw"},A[_0xe681("0x166")]={NONE:_0xe681("0x218"),FLOOR_BASE:_0xe681("0x4d5"),MODEL:_0xe681("0x37d"),MODEL_POI:_0xe681("0x5d1"),MODEL_LABEL:_0xe681("0x314"),MODEL_LINE:_0xe681("0x3a5"),MODEL_IMAGE:_0xe681("0x2a4"),MODEL_BASE:_0xe681("0x4d2"),MODEL_LIFT:_0xe681("0x75e"),EXTERANL_MODEL:_0xe681("0x75f"),POLYGON_MARKER:_0xe681("0x3a0"),LOCATION_MARKER:_0xe681("0x5a5"),IMAGE_MARKER:_0xe681("0x39e"),TEXT_MARKER:_0xe681("0x39f"),MODEL3D:_0xe681("0x3a4"),WEBVIEW_MARKER:"webViewMarker",BOARD_MARKER:_0xe681("0x3a7")},A[_0xe681("0x760")]={NONE:"none",MODEL:_0xe681("0x37d"),MODEL_POI:_0xe681("0x761"),MODEL_LABEL:_0xe681("0x314"),MODEL_IMAGE:_0xe681("0x2a4"),MODEL_BASE:"modelBase",MODEL_LIFT:"modelLift",EXTERANL_MODEL:_0xe681("0x75f"),POLYGON_MARKER:_0xe681("0x3a0")},A[_0xe681("0x3f1")]={floorBase:1,model:10,polygonMarker:15,externalModel:20,label:30,facility:30,textMarker:61,imageMarker:40,locationMarker:71,transparentLine:11,lineObject:70,model3D:69},A.ESInfo={EXPIRED:_0xe681("0x762"),TOKEN_MISS:_0xe681("0x763"),TOKEN_ERR:_0xe681("0x764"),VERS_ERR:_0xe681("0x765"),DOM_ERR:_0xe681("0x766"),ES3DMARKERNUM_ERR:_0xe681("0x767"),AUDIO_TOKEN:_0xe681("0x768"),ARRAY_REQUIRED:_0xe681("0x769"),VIEW_MODE2D_ALLFNUM:_0xe681("0x76a"),TOO_FAST:_0xe681("0x76b"),AUTHO_REQUIRED:_0xe681("0x76c")},A[_0xe681("0x1e0")]={NONE:0,FLOOR:4,MODEL:5,MODEL3D:6,FACILITY:11,LABEL:12,LINE:21,IMAGE_MARKER:31,TEXT_MARKER:32,LOCATION_MARKER:33,BOARD_MARKER:34,WEBVIEW_MARKER:40,POLYGON_MARKER:100,ALL:65535,ELEMENT:100},A[_0xe681("0x3db")]={PLANE:_0xe681("0x76d"),CIRCLE:_0xe681("0x44c")},A[_0xe681("0x3f8")]={FULL:_0xe681("0x76e"),DOTTED:_0xe681("0x76f"),DOT_DASH:_0xe681("0x770"),CENTER:"center",DASH:_0xe681("0x26b"),DOUBLE_DOT_DASH:_0xe681("0x771"),TRI_DOT_DASH:_0xe681("0x772"),NORMAL:"normal",ARROW:_0xe681("0x3fe"),RAW:_0xe681("0x773"),ESARROW:"esarrow",TEXTURE:_0xe681("0x51b")},A[_0xe681("0x237")]={MODE_3D:"3d",MODE_2D:_0xe681("0x282")},A[_0xe681("0x13a")]={DEFAULT:10,NAVI:2},A[_0xe681("0x367")]={Map_CONTROL_SMALL:_0xe681("0x774"),Map_CONTROL_NORMAL:_0xe681("0x2bb")},A[_0xe681("0x775")]={LEFT_TOP:1,LEFT_BOTTOM:2,RIGHT_TOP:3,RIGHT_BOTTOM:4},window[_0xe681("0x776")]=function(x){A.ESMap=function(x){var e;e=x&&x[_0xe681("0x4eb")]?x[_0xe681("0x4eb")]:document[_0xe681("0x8d")];var _=new(A[_0xe681("0x666")]);_[_0xe681("0x4ed")](e)},window[_0xe681("0x776")]=null};var C=_(43)[_0xe681("0x9d")],I=_(15)[_0xe681("0x9d")];A[_0xe681("0x666")]=_(48)[_0xe681("0x9d")],r[_0xe681("0x777")]=_(3)[_0xe681("0x9d")],r[_0xe681("0x130")]=_(40)[_0xe681("0x9d")],r[_0xe681("0x15e")]=_(44)[_0xe681("0x9d")],A[_0xe681("0x670")]=_(19)[_0xe681("0x9d")],A[_0xe681("0x12f")]=_(51).default,A.ESMapPicker=_(52)[_0xe681("0x9d")],A[_0xe681("0x140")]=_(59)[_0xe681("0x9d")],A[_0xe681("0x13c")]=_(60).default,A.ESMapUtil=_(61)[_0xe681("0x9d")],A[_0xe681("0x535")]=_(62)[_0xe681("0x9d")],A[_0xe681("0x145")]=_(46)[_0xe681("0x9d")],A[_0xe681("0x3c9")]=_(45)[_0xe681("0x9d")],A[_0xe681("0x383")]=_(49).default,A[_0xe681("0x3e6")]=_(50)[_0xe681("0x9d")],A.ESMapPoi=_(53)[_0xe681("0x9d")],A.ESMapPoi2=_(54).default,A[_0xe681("0x3c1")]=_(55)[_0xe681("0x9d")],A[_0xe681("0x778")]=_(56)[_0xe681("0x9d")],A.ESMapScene=_(57)[_0xe681("0x9d")],A[_0xe681("0x18d")]=_(58)[_0xe681("0x9d")],A.ESModelMesh=_(63)[_0xe681("0x9d")],A[_0xe681("0x3d6")]=_(4).default[_0xe681("0x779")],A[_0xe681("0x77a")]=_(4)[_0xe681("0x9d")].ComponentsManager,A.ESLine=_(29)[_0xe681("0x9d")],A[_0xe681("0x259")]=_(47).default,A[_0xe681("0x25e")]=_(68)[_0xe681("0x9d")],A[_0xe681("0x77b")]=_(32).default,A.ESNode=_(36)[_0xe681("0x9d")],A[_0xe681("0x393")]=_(23).default,A[_0xe681("0x5ce")]=_(24)[_0xe681("0x9d")],A.ESImageMarker=_(26)[_0xe681("0x9d")],A[_0xe681("0x77c")]=_(27)[_0xe681("0x9d")],A[_0xe681("0x2a8")]=_(31)[_0xe681("0x9d")],A[_0xe681("0x77d")]=_(34)[_0xe681("0x9d")],A[_0xe681("0x16c")]=_(37)[_0xe681("0x9d")],A.ESModelImage=_(35)[_0xe681("0x9d")],A[_0xe681("0x77e")]=_(82)[_0xe681("0x9d")],A[_0xe681("0x510")]=_(39)[_0xe681("0x9d")],A[_0xe681("0x295")]=_(25)[_0xe681("0x9d")],A[_0xe681("0x165")]=_(28)[_0xe681("0x9d")],A.ESUtil=_(2).default,A[_0xe681("0x70d")]=_(21)[_0xe681("0x9d")],A[_0xe681("0x36a")]=_(20)[_0xe681("0x9d")],A.ESButtonFloorsControl=_(16)[_0xe681("0x9d")],A.ESScrollFloorsControl=_(69)[_0xe681("0x9d")],A[_0xe681("0x77f")]=_(70).default,A[_0xe681("0x780")]=_(73)[_0xe681("0x9d")],A[_0xe681("0x781")]=_(80)[_0xe681("0x9d")],A.ESNaviMap=_(64)[_0xe681("0x9d")],A[_0xe681("0x782")]=_(78).default,A[_0xe681("0x783")]=_(30).default,A.ES3DMarker=_(22)[_0xe681("0x9d")],_(18),A[_0xe681("0x784")]=_(79)[_0xe681("0x9d")],A[_0xe681("0x5ad")]=_(75)[_0xe681("0x9d")],A[_0xe681("0x14f")]=_(76)[_0xe681("0x9d")],A[_0xe681("0x785")]=_(38)[_0xe681("0x9d")];var o=function(x){function e(x){t(this,e);var _=i(this,(e[_0xe681("0x36e")]||Object.getPrototypeOf(e))[_0xe681("0x1a")](this,x));return _[_0xe681("0x786")]=new A.ESMapGestureController(_[_0xe681("0xc4")],_[_0xe681("0x134")]),_[_0xe681("0x264")]=[],_}return n(e,x),g(e,[{key:_0xe681("0x787"),value:function(x){var e=null,_=(new Date)[_0xe681("0x1eb")]();return this[_0xe681("0x788")]?e=_-this[_0xe681("0x788")]:this.tl_=_,this[_0xe681("0x788")]=_,e&&e<=1e3?void console.info(A[_0xe681("0x5e3")].TOO_FAST):void this[_0xe681("0x16e")](x)}},{key:"moveTo",value:function(x){if(x){var e=this,_=x.FloorNum?x.FloorNum:this[_0xe681("0x14d")],t=this[_0xe681("0x13d")][_0xe681("0x20f")](_);_!=this[_0xe681("0x14d")]&&this[_0xe681("0x23f")](_,{notMove:!0});var i=this.mapView[_0xe681("0x133")][_0xe681("0x185")][_0xe681("0x1cc")](),n=(i.y-this.controls[_0xe681("0x235")].y,new(a[_0xe681("0x232")])(-x.x-this[_0xe681("0x13d")][_0xe681("0x1af")],t[_0xe681("0x185")].y,x.y-this[_0xe681("0x13d")][_0xe681("0x1ad")])),g=e[_0xe681("0x134")][_0xe681("0x235")][_0xe681("0x1cc")](),A=n[_0xe681("0x1cc")]()[_0xe681("0x241")](g);this[_0xe681("0x11f")]&&clearInterval(this[_0xe681("0x11f")]),this[_0xe681("0x11f")]=r[_0xe681("0x127")][_0xe681("0x1cd")](e[_0xe681("0x12b")][_0xe681("0x133")][_0xe681("0x185")],void 0==x.time?e[_0xe681("0x12e")].moveToAnimateMode?e[_0xe681("0x12e")][_0xe681("0x569")]:0:x[_0xe681("0x243")],null,null,function(){x[_0xe681("0x12a")]&&x[_0xe681("0x12a")](_)},function(x){e[_0xe681("0x134")][_0xe681("0x235")][_0xe681("0x233")](g[_0xe681("0x1cc")]().add(A.clone().multiplyScalar(x))),_0xe681("0x282")==e[_0xe681("0x21d")]&&e[_0xe681("0x12b")][_0xe681("0x133")][_0xe681("0x185")][_0xe681("0x233")](i.clone().add(A[_0xe681("0x1cc")]()[_0xe681("0x286")](x))),e.controls.update({forceTheta:e[_0xe681("0x134")][_0xe681("0x1b1")][_0xe681("0x227")](),forcePhi:e.controls[_0xe681("0x1b1")][_0xe681("0x288")]()})}),this[_0xe681("0x234")]=n}}},{key:"getFloor",value:function(x){var e=this[_0xe681("0x13d")][_0xe681("0x240")][x];return void 0==e?null:e[_0xe681("0x17a")]}},{key:_0xe681("0x789"),get:function(){return this[_0xe681("0x786")]}},{key:_0xe681("0x78a"),get:function(){return A[_0xe681("0x123")].FullScreen[_0xe681("0x78b")]}},{key:_0xe681("0x78c"),get:function(){return A[_0xe681("0x123")][_0xe681("0x87")].activated},set:function(x){x?A[_0xe681("0x123")][_0xe681("0x87")][_0xe681("0x78d")](this[_0xe681("0x12b")][_0xe681("0x12c")]):A[_0xe681("0x123")][_0xe681("0x87")][_0xe681("0x78e")]()}},{key:_0xe681("0x47f"),get:function(){return 6}}]),e}(I);A.ESMap=o,A.ESWebViewPlane=function(x,e,_){function t(){e[_0xe681("0xcc")][_0xe681("0x2ba")]=c+"px",e[_0xe681("0xcc")].height=f+"px"}_=_||{},_.elementW=void 0!==_[_0xe681("0x78f")]?_[_0xe681("0x78f")]:768,_.planeW=void 0!==_[_0xe681("0x790")]?_[_0xe681("0x790")]:1,_[_0xe681("0x791")]=void 0!==_[_0xe681("0x791")]?_[_0xe681("0x791")]:.75,_[_0xe681("0x792")]=void 0!==_[_0xe681("0x792")]?_[_0xe681("0x792")]:null,this[_0xe681("0x24f")]=e;var i=[];this[_0xe681("0xc6")]=function(){i[_0xe681("0xc3")](function(x){x()})};var n=_[_0xe681("0x790")],g=_[_0xe681("0x791")],r=A[_0xe681("0x162")][_0xe681("0x163")];if(!((r[_0xe681("0x13f")].sourceData.o1||0)<=1)){if(null===_[_0xe681("0x792")])var C=new(a[_0xe681("0x221")])({opacity:0,color:new(a[_0xe681("0x196")])("black"),blending:a[_0xe681("0x793")],side:a.DoubleSide}),I=new(a[_0xe681("0x220")])(_.planeW,_.planeH),o=new a.Mesh(I,C);else var o=_[_0xe681("0x792")];this[_0xe681("0x792")]=o;var r=A[_0xe681("0x162")].instance;if(!((r[_0xe681("0x13f")].sourceData.o1||0)<=1)){var s=g/n,c=_[_0xe681("0x78f")],f=c*s;this[_0xe681("0x794")]=function(x){var _=e;_.parentNode&&_.parentNode[_0xe681("0x12d")](_),this[_0xe681("0x24f")]=e=x,l[_0xe681("0xca")]=e,t()},t();var l=new(a[_0xe681("0x332")])(e);this[_0xe681("0x795")]=l,l[_0xe681("0x27c")].set(1,1,1)[_0xe681("0x286")](x.cssFactor/(c/n)),l.userData[_0xe681("0x686")]=this,o[_0xe681("0x146")](_0xe681("0x796"),function(e){x[_0xe681("0x797")][_0xe681("0x80")](l)}),o.addEventListener(_0xe681("0x330"),function(e){x[_0xe681("0x797")].remove(l)}),i[_0xe681("0x1e")](function(){o[_0xe681("0x347")]();var e=o[_0xe681("0x261")],_=new(a[_0xe681("0x232")]),t=new(a[_0xe681("0x232")]),i=new a.Quaternion;e.decompose(_,i,t),l.quaternion[_0xe681("0x233")](i),l[_0xe681("0x185")][_0xe681("0x233")](_).multiplyScalar(x.cssFactor);var n=c/(o[_0xe681("0x193")][_0xe681("0x798")][_0xe681("0x2ba")]*t.x);l[_0xe681("0x27c")].set(1,1,1)[_0xe681("0x286")](x[_0xe681("0x682")]/n),l.position.z-=32.16809725901112})}}},window[_0xe681("0x776")]=null},function(x,e){function _(x,e,_){return e in x?Object.defineProperty(x,e,{value:_,enumerable:!0,configurable:!0,writable:!0}):x[e]=_,x}function t(x,e){if(!(x instanceof e))throw new TypeError("Cannot call a class as a function")}_0xe681("0x3d"),Object[_0xe681("0x22")](e,_0xe681("0x94"),{value:!0});var i=function(){function x(x,e){for(var _=0;_<e[_0xe681("0x25")];_++){var t=e[_];t[_0xe681("0x7c")]=t[_0xe681("0x7c")]||!1,t[_0xe681("0xc8")]=!0,_0xe681("0x7d")in t&&(t[_0xe681("0x7e")]=!0),Object[_0xe681("0x22")](x,t.key,t)}}return function(e,_,t){return _&&x(e[_0xe681("0x20")],_),t&&x(e,t),e}}(),n=function(){function x(e){t(this,x),this.queue={},this.map_=e,this[_0xe681("0x24e")]={},this[_0xe681("0x799")]={},this[_0xe681("0x75b")]={}}return i(x,[{key:_0xe681("0x3cb"),value:function(x,e){if(e in this[_0xe681("0x799")])x.angle in this[_0xe681("0x799")][e]?this[_0xe681("0x799")][e][x[_0xe681("0x376")]][_0xe681("0x1e")](x):this[_0xe681("0x799")][e][x[_0xe681("0x376")]]=[x];else{var t=_({},x.angle,[x]);this[_0xe681("0x799")][e]=t}}},{key:_0xe681("0x20e"),value:function(x){var e=x[_0xe681("0x95")],_=this[_0xe681("0x79a")]();return _?void console[_0xe681("0x3cd")](esmap[_0xe681("0x5e3")][_0xe681("0x79b")]):void(e in this[_0xe681("0x79c")]?this[_0xe681("0x79c")][e][_0xe681("0x1e")](x):(this[_0xe681("0x79c")][e]=[],this[_0xe681("0x79c")][e][_0xe681("0x1e")](x)))}},{key:_0xe681("0x79d"),value:function(x){var e=0;for(var _ in x)x[_0xe681("0x21")](_)&&e++;return e+1}},{key:"checkO1",value:function(){var x=this[_0xe681("0x407")][_0xe681("0x13f")][_0xe681("0x1db")].o1||0;return this[_0xe681("0x79d")](this[_0xe681("0x24e")])>x}},{key:"start",value:function(){var x=this,e=this[_0xe681("0x79a")]();if(!e)for(var _ in this[_0xe681("0x79c")]){var t=this[_0xe681("0x79c")][_];if(0!=t.length){var i=_[_0xe681("0x79e")]("/"),n=_[_0xe681("0x71")](i);n in x[_0xe681("0x24e")]?x[_0xe681("0x79f")](_,t):x[_0xe681("0x571")](_,t)}}}},{key:_0xe681("0x79f"),value:function(x,e){for(var _=this,t=x[_0xe681("0x79e")]("/"),i=x[_0xe681("0x71")](t),n=_.meshStore[i],g=0;g<e[_0xe681("0x25")];g++){var a=e[g],r=n[_0xe681("0x1cc")]();_[_0xe681("0x37")](r,a)}_[_0xe681("0x79c")][x]=[],_[_0xe681("0x7a0")]()}},{key:_0xe681("0x37"),value:function(x,e){var _=this,t=_[_0xe681("0x407")][_0xe681("0xc4")],i=x[_0xe681("0x1cc")](),n=!1;i.material=x[_0xe681("0x17e")][_0xe681("0x1cc")](),i[_0xe681("0x3ed")]=esmap[_0xe681("0x3f1")][_0xe681("0x43f")],i[_0xe681("0x193")][_0xe681("0x27d")](),i[_0xe681("0x388")]=esmap[_0xe681("0x383")].prototype[_0xe681("0x7a1")],i[_0xe681("0x389")]=esmap[_0xe681("0x383")][_0xe681("0x20")][_0xe681("0x546")],i.moveTo=esmap[_0xe681("0x383")][_0xe681("0x20")][_0xe681("0x34f")],i[_0xe681("0x38a")]=esmap[_0xe681("0x383")][_0xe681("0x20")].rotate,i[_0xe681("0x38b")]=esmap[_0xe681("0x383")][_0xe681("0x20")][_0xe681("0x38b")],i[_0xe681("0x386")]=esmap[_0xe681("0x383")][_0xe681("0x20")][_0xe681("0x4f7")],i[_0xe681("0x387")]=esmap[_0xe681("0x383")].prototype.stopFlash,i[_0xe681("0x17a")]=e[_0xe681("0x7a2")]?(e.self.o3d_=i,i.updateScreenSize=esmap[_0xe681("0x383")].prototype.updateScreenSize,i[_0xe681("0x4ef")]=e[_0xe681("0x27c")].x,i[_0xe681("0x379")]=e.scale.x,e[_0xe681("0x7a2")]):{url:e[_0xe681("0x95")],name:e[_0xe681("0x40")],data_:e[_0xe681("0x396")],ID:e.id||0,fnum:e[_0xe681("0x190")]||1,nodeType:esmap[_0xe681("0x1e0")][_0xe681("0x1e3")],o3d_:i,fadeOut:function(x){this[_0xe681("0x17d")][_0xe681("0x388")](x)},fadeIn:function(x){this[_0xe681("0x17d")][_0xe681("0x389")](x)}};var g=e.scale;e[_0xe681("0x95")][_0xe681("0x1d")]("depth")!=-1&&(n=!0,i.renderOrder++),i[_0xe681("0x27c")][_0xe681("0xfc")](g.x,g.y,g.z);var a=e[_0xe681("0x38a")];i[_0xe681("0x38e")].set(a.x,a.y,a.z);var r=e[_0xe681("0x185")];i[_0xe681("0x185")][_0xe681("0xfc")](r.x,r.y,r.z),_[_0xe681("0x7a3")](i,n),e[_0xe681("0xc7")][_0xe681("0x80")](i),e[_0xe681("0x607")]&&t[_0xe681("0x7a4")](i);var A=i[_0xe681("0x17a")]?i[_0xe681("0x17a")]:i;this[_0xe681("0x407")][_0xe681("0x150")]("modelLoadComplete",A),e[_0xe681("0x12a")]&&e[_0xe681("0x12a")](A)}},{key:_0xe681("0x571"),value:function(x,e){var _=this,t=new(em[_0xe681("0x15e")]),i=function(t){for(var i=0;i<e[_0xe681("0x25")];i++){var n=e[i],g=t[_0xe681("0x1cc")]();_.apply(g,n)}var a=x[_0xe681("0x79e")]("/"),r=x.substring(a);_[_0xe681("0x24e")][r]=t,_[_0xe681("0x7a0")]()};_[_0xe681("0x79c")][x]=[],t[_0xe681("0x4e0")](x,i)}},{key:_0xe681("0x7a0"),value:function(){var x=this[_0xe681("0x79c")],e=!0;if(0!=Object[_0xe681("0x57")](x)[_0xe681("0x25")])for(var _ in x)0!=x[_][_0xe681("0x25")]&&(e=!1)}},{key:_0xe681("0x7a3"),value:function(x,e){var _=this,t=x[_0xe681("0x17a")][_0xe681("0x190")],i=_[_0xe681("0x407")][_0xe681("0x13d")][_0xe681("0x240")][t];if(e)for(var n=x.material[_0xe681("0x194")]?x[_0xe681("0x17e")].materials:[x.material],g=0;g<n[_0xe681("0x25")];g++){var a=n[g];a[_0xe681("0x4d4")]=!0,a.side=THREE.DoubleSide,
a.alphaMap&&(a[_0xe681("0x3c6")]=!1)}if(i&&i[_0xe681("0x210")]&&_[_0xe681("0x407")][_0xe681("0x12e")][_0xe681("0x212")]&&t!=_[_0xe681("0x407")].focusFnum_){var r=_[_0xe681("0x407")].options[_0xe681("0x215")],A=null;A=x[_0xe681("0x17e")][_0xe681("0x194")]?x[_0xe681("0x17e")][_0xe681("0x194")]:[x[_0xe681("0x17e")]];for(var C=0;C<A[_0xe681("0x25")];C++){var a=A[C];i[_0xe681("0x649")]||(i[_0xe681("0x649")]={}),i[_0xe681("0x649")][a[_0xe681("0x4d0")]]||(i[_0xe681("0x649")][a[_0xe681("0x4d0")]]=a[_0xe681("0x297")]),a.transparent=!0,a[_0xe681("0x297")]=r,a.side=THREE[_0xe681("0x43d")]}}}}]),x}();e[_0xe681("0x9d")]=n},function(x,e,_){function t(x){return x&&x[_0xe681("0x94")]?x:{default:x}}function i(x,e){if(!(x instanceof e))throw new TypeError("Cannot call a class as a function")}_0xe681("0x3d"),Object[_0xe681("0x22")](e,_0xe681("0x94"),{value:!0});var n=function(){function x(x,e){for(var _=0;_<e[_0xe681("0x25")];_++){var t=e[_];t.enumerable=t[_0xe681("0x7c")]||!1,t.configurable=!0,_0xe681("0x7d")in t&&(t.writable=!0),Object[_0xe681("0x22")](x,t[_0xe681("0x7f")],t)}}return function(e,_,t){return _&&x(e.prototype,_),t&&x(e,t),e}}(),g=_(5),a=t(g),r=function(){function x(e){i(this,x),this[_0xe681("0x407")]=e;var _=e.options,t=document[_0xe681("0x7a5")](_0xe681("0x7a6"))||e[_0xe681("0x12e")][_0xe681("0x4eb")];this.box=t[_0xe681("0x47a")]();var n=(this[_0xe681("0x7a7")],_[_0xe681("0x563")]),g=(0,a[_0xe681("0x9d")])(_0xe681("0x2d6"))[_0xe681("0xcc")]({position:_0xe681("0x7a8"),bottom:_[_0xe681("0x7a9")][1]+"px",left:_[_0xe681("0x7a9")][0]+"px",width:n+"px",height:"20px",webkitTextSizeAdjust:_0xe681("0x218"),msTextSizeAdjust:_0xe681("0x218"),zIndex:1})[_0xe681("0xca")];t[_0xe681("0x9")](g);var r=(0,a[_0xe681("0x9d")])(_0xe681("0x2d6"))[_0xe681("0xcc")]({position:_0xe681("0x2d9"),overflow:_0xe681("0x33e"),fontSize:"11px",fontFamily:"Arial,sans-serif",textAlign:_0xe681("0x27d"),color:"#fff",width:_0xe681("0x7aa"),cursor:_0xe681("0x9d"),lineHeight:_0xe681("0x2f3"),textShadow:_0xe681("0x7ab")})[_0xe681("0xca")];g[_0xe681("0x9")](r),this[_0xe681("0x7ac")]=r;var A=(0,a[_0xe681("0x9d")])(_0xe681("0x2d6")).style({position:"absolute",overflow:_0xe681("0x33e"),background:_0xe681("0x566"),width:_0xe681("0x7aa"),height:"5px",fontSize:"0",bottom:_0xe681("0x7ad")})[_0xe681("0xca")];g[_0xe681("0x9")](A);var C=(0,a[_0xe681("0x9d")])(_0xe681("0x2d6")).style({position:"absolute",overflow:_0xe681("0x33e"),background:_0xe681("0x566"),width:_0xe681("0x7ae"),height:"7px",fontSize:"0",bottom:"0",right:_0xe681("0x7ad")})[_0xe681("0xca")];g.appendChild(C);var I=(0,a[_0xe681("0x9d")])(_0xe681("0x2d6"))[_0xe681("0xcc")]({position:_0xe681("0x2d9"),overflow:"hidden",background:_0xe681("0x566"),width:_0xe681("0x7ae"),height:_0xe681("0x7af"),fontSize:"0",bottom:"0",left:"-1px"})[_0xe681("0xca")];g[_0xe681("0x9")](I);var o=(0,a[_0xe681("0x9d")])(_0xe681("0x2d6")).style({position:_0xe681("0x2d9"),overflow:"hidden",background:"#000",width:_0xe681("0x7aa"),height:_0xe681("0x7ae"),fontSize:"0",bottom:"0"})[_0xe681("0xca")];g.appendChild(o);var s=(0,a[_0xe681("0x9d")])("div").style({position:_0xe681("0x2d9"),overflow:_0xe681("0x33e"),background:_0xe681("0x7b0"),width:_0xe681("0x31b"),height:_0xe681("0x458"),fontSize:"0",bottom:"0",left:"0"})[_0xe681("0xca")];g.appendChild(s);var c=(0,a[_0xe681("0x9d")])(_0xe681("0x2d6"))[_0xe681("0xcc")]({position:_0xe681("0x2d9"),overflow:_0xe681("0x33e"),background:_0xe681("0x7b0"),width:_0xe681("0x31b"),height:_0xe681("0x458"),fontSize:"0",bottom:"0",right:"0"})[_0xe681("0xca")];g[_0xe681("0x9")](c),this[_0xe681("0x7b1")]=g.getBoundingClientRect(),this.barBoxer=g}return n(x,[{key:_0xe681("0x751"),value:function(x,e){return Math[_0xe681("0x64e")]((x.x-e.x)*(x.x-e.x)+(x.y-e.y)*(x.y-e.y))}},{key:_0xe681("0x6ba"),value:function(){var x=this,e=x[_0xe681("0x7a7")][_0xe681("0x184")]-x[_0xe681("0x407")][_0xe681("0x12e")].scalerOffet[1],_=this.map_.coordScreenToMap(x[_0xe681("0x7b1")][_0xe681("0x302")]-x[_0xe681("0x7a7")][_0xe681("0x302")],e,0),t=this.map_.coordScreenToMap(x[_0xe681("0x7b1")][_0xe681("0x281")]-x[_0xe681("0x7a7")][_0xe681("0x302")],e,0);if(_&&t){var i=x[_0xe681("0x751")](_,t);x[_0xe681("0x7ac")][_0xe681("0x303")]=(i>50?i.toFixed(0):i[_0xe681("0x62c")](1))+_0xe681("0x7b2")}}},{key:_0xe681("0x210"),set:function(x){x?this[_0xe681("0x7b3")].style[_0xe681("0x2f1")]=_0xe681("0x2ff"):this[_0xe681("0x7b3")][_0xe681("0xcc")][_0xe681("0x2f1")]=_0xe681("0x218")},get:function(){return _0xe681("0x218")!=this[_0xe681("0x7b3")][_0xe681("0xcc")][_0xe681("0x2f1")]}}]),x}();e[_0xe681("0x9d")]=r},function(x,e,_){_0xe681("0x3d");var t=_0xe681("0x32")==typeof Symbol&&_0xe681("0x79")==typeof Symbol.iterator?function(x){return typeof x}:function(x){return x&&_0xe681("0x32")==typeof Symbol&&x[_0xe681("0x7b")]===Symbol&&x!==Symbol[_0xe681("0x20")]?_0xe681("0x79"):typeof x},i=_(88),n=i[_0xe681("0x7b4")],g=i[_0xe681("0x7b5")],a=i[_0xe681("0x7b6")],r=i[_0xe681("0x7b7")][_0xe681("0x9d")]||(i[_0xe681("0x7b7")][_0xe681("0x9d")]={});r[_0xe681("0x5e2")]=function(){function x(x){if(this.floors=[],this[_0xe681("0x7b8")]=[],this[_0xe681("0x7b9")]=[],x)for(var e=Object[_0xe681("0x57")](x),_=0;_<e[_0xe681("0x25")];++_)null!=x[e[_]]&&(this[e[_]]=x[e[_]])}return x[_0xe681("0x20")][_0xe681("0x404")]=0,x[_0xe681("0x20")][_0xe681("0x1ea")]=0,x[_0xe681("0x20")][_0xe681("0x5b3")]="",x[_0xe681("0x20")][_0xe681("0x441")]=0,x[_0xe681("0x20")][_0xe681("0x7ba")]=0,x[_0xe681("0x20")][_0xe681("0x40")]="",x.prototype[_0xe681("0x2b7")]="",x[_0xe681("0x20")][_0xe681("0x7bb")]="",x[_0xe681("0x20")].adcode="",x[_0xe681("0x20")][_0xe681("0x7bc")]="",x.prototype.AS=0,x[_0xe681("0x20")][_0xe681("0x7bd")]=0,x.prototype.Tel="",x[_0xe681("0x20")][_0xe681("0x7be")]=0,x.prototype[_0xe681("0x7bf")]=0,x[_0xe681("0x20")][_0xe681("0x7c0")]=0,x[_0xe681("0x20")][_0xe681("0x1f1")]=0,x.prototype[_0xe681("0x5fc")]=0,x[_0xe681("0x20")][_0xe681("0x5b4")]=0,x[_0xe681("0x20")][_0xe681("0x5b5")]=0,x.prototype[_0xe681("0x7c1")]=0,x[_0xe681("0x20")].x=0,x.prototype.y=0,x.prototype.z=0,x[_0xe681("0x20")][_0xe681("0x21b")]=0,x.prototype[_0xe681("0x21c")]=0,x.prototype[_0xe681("0x21a")]=0,x[_0xe681("0x20")][_0xe681("0x271")]=0,x[_0xe681("0x20")][_0xe681("0x1e8")]="",x.prototype[_0xe681("0x5b1")]="",x[_0xe681("0x20")][_0xe681("0x2b4")]="",x[_0xe681("0x20")][_0xe681("0x5fe")]=0,x.prototype.floors=a[_0xe681("0x49")],x[_0xe681("0x20")][_0xe681("0x7b8")]=a.emptyArray,x[_0xe681("0x20")].panos=a[_0xe681("0x49")],x[_0xe681("0x20")][_0xe681("0x7c2")]="",x[_0xe681("0x20")][_0xe681("0x575")]="",x.prototype[_0xe681("0x7c3")]="",x[_0xe681("0x20")][_0xe681("0x5b0")]="",x[_0xe681("0x20")][_0xe681("0x7c4")]="",x[_0xe681("0x20")].o1=0,x[_0xe681("0x20")].other2="",x.prototype.o2=0,x[_0xe681("0x20")].ul=0,x[_0xe681("0xda")]=function(e){return new x(e)},x.encode=function(x,e){if(e||(e=g.create()),null!=x[_0xe681("0x404")]&&x[_0xe681("0x21")](_0xe681("0x404"))&&e[_0xe681("0xdd")](8)[_0xe681("0xde")](x[_0xe681("0x404")]),null!=x[_0xe681("0x1ea")]&&x[_0xe681("0x21")](_0xe681("0x1ea"))&&e[_0xe681("0xdd")](16).int32(x[_0xe681("0x1ea")]),null!=x.Hash&&x[_0xe681("0x21")](_0xe681("0x5b3"))&&e.uint32(26)[_0xe681("0x53")](x[_0xe681("0x5b3")]),null!=x[_0xe681("0x441")]&&x[_0xe681("0x21")](_0xe681("0x441"))&&e.uint32(32).int32(x[_0xe681("0x441")]),null!=x[_0xe681("0x7ba")]&&x[_0xe681("0x21")]("Type")&&e[_0xe681("0xdd")](40)[_0xe681("0xde")](x[_0xe681("0x7ba")]),null!=x[_0xe681("0x40")]&&x.hasOwnProperty(_0xe681("0x40"))&&e.uint32(50)[_0xe681("0x53")](x[_0xe681("0x40")]),null!=x[_0xe681("0x2b7")]&&x[_0xe681("0x21")](_0xe681("0x2b7"))&&e[_0xe681("0xdd")](58)[_0xe681("0x53")](x[_0xe681("0x2b7")]),null!=x.Brief&&x[_0xe681("0x21")](_0xe681("0x7bb"))&&e.uint32(66)[_0xe681("0x53")](x.Brief),null!=x[_0xe681("0x5f1")]&&x[_0xe681("0x21")]("adcode")&&e[_0xe681("0xdd")](74)[_0xe681("0x53")](x.adcode),null!=x.address&&x[_0xe681("0x21")](_0xe681("0x7bc"))&&e[_0xe681("0xdd")](82)[_0xe681("0x53")](x[_0xe681("0x7bc")]),null!=x.AS&&x[_0xe681("0x21")]("AS")&&e[_0xe681("0xdd")](89)[_0xe681("0xfa")](x.AS),null!=x[_0xe681("0x7bd")]&&x[_0xe681("0x21")](_0xe681("0x7bd"))&&e.uint32(101).float(x[_0xe681("0x7bd")]),null!=x[_0xe681("0x7c5")]&&x[_0xe681("0x21")](_0xe681("0x7c5"))&&e[_0xe681("0xdd")](106).string(x[_0xe681("0x7c5")]),null!=x[_0xe681("0x7be")]&&x[_0xe681("0x21")](_0xe681("0x7be"))&&e[_0xe681("0xdd")](113)[_0xe681("0xfa")](x[_0xe681("0x7be")]),null!=x[_0xe681("0x7bf")]&&x.hasOwnProperty("FirstRotateAngleY")&&e[_0xe681("0xdd")](121)[_0xe681("0xfa")](x[_0xe681("0x7bf")]),null!=x[_0xe681("0x7c0")]&&x[_0xe681("0x21")]("FirstRotateAngleZ")&&e[_0xe681("0xdd")](129)[_0xe681("0xfa")](x[_0xe681("0x7c0")]),null!=x.Firstscale&&x[_0xe681("0x21")](_0xe681("0x1f1"))&&e[_0xe681("0xdd")](137).double(x[_0xe681("0x1f1")]),null!=x[_0xe681("0x5fc")]&&x[_0xe681("0x21")](_0xe681("0x5fc"))&&e[_0xe681("0xdd")](144)[_0xe681("0xde")](x.DefaultFnum),null!=x[_0xe681("0x5b4")]&&x[_0xe681("0x21")](_0xe681("0x5b4"))&&e[_0xe681("0xdd")](153)[_0xe681("0xfa")](x[_0xe681("0x5b4")]),null!=x[_0xe681("0x5b5")]&&x[_0xe681("0x21")]("DefaultCenY")&&e[_0xe681("0xdd")](161)[_0xe681("0xfa")](x[_0xe681("0x5b5")]),null!=x[_0xe681("0x7c1")]&&x.hasOwnProperty(_0xe681("0x7c1"))&&e[_0xe681("0xdd")](169)[_0xe681("0xfa")](x.DefaultCenZ),null!=x.x&&x[_0xe681("0x21")]("x")&&e.uint32(177).double(x.x),null!=x.y&&x[_0xe681("0x21")]("y")&&e[_0xe681("0xdd")](185)[_0xe681("0xfa")](x.y),null!=x.z&&x[_0xe681("0x21")]("z")&&e[_0xe681("0xdd")](193).double(x.z),null!=x.minX&&x[_0xe681("0x21")](_0xe681("0x21b"))&&e.uint32(201)[_0xe681("0xfa")](x[_0xe681("0x21b")]),null!=x[_0xe681("0x21c")]&&x.hasOwnProperty(_0xe681("0x21c"))&&e[_0xe681("0xdd")](209)[_0xe681("0xfa")](x[_0xe681("0x21c")]),null!=x[_0xe681("0x21a")]&&x[_0xe681("0x21")]("maxX")&&e.uint32(217)[_0xe681("0xfa")](x[_0xe681("0x21a")]),null!=x.maxY&&x[_0xe681("0x21")](_0xe681("0x271"))&&e[_0xe681("0xdd")](225)[_0xe681("0xfa")](x[_0xe681("0x271")]),null!=x[_0xe681("0x1e8")]&&x[_0xe681("0x21")](_0xe681("0x1e8"))&&e[_0xe681("0xdd")](234)[_0xe681("0x53")](x[_0xe681("0x1e8")]),null!=x[_0xe681("0x5b1")]&&x[_0xe681("0x21")]("Remark")&&e[_0xe681("0xdd")](242)[_0xe681("0x53")](x[_0xe681("0x5b1")]),null!=x[_0xe681("0x2b4")]&&x[_0xe681("0x21")](_0xe681("0x2b4"))&&e.uint32(250)[_0xe681("0x53")](x[_0xe681("0x2b4")]),null!=x.FloorHigh&&x[_0xe681("0x21")](_0xe681("0x5fe"))&&e.uint32(256)[_0xe681("0xde")](x[_0xe681("0x5fe")]),null!=x[_0xe681("0x1ff")]&&x[_0xe681("0x1ff")][_0xe681("0x25")])for(var _=0;_<x.floors[_0xe681("0x25")];++_)r[_0xe681("0x7c6")].encode(x[_0xe681("0x1ff")][_],e.uint32(266)[_0xe681("0xfe")]())[_0xe681("0x100")]();if(null!=x[_0xe681("0x7b8")]&&x[_0xe681("0x7b8")].length)for(var _=0;_<x[_0xe681("0x7b8")][_0xe681("0x25")];++_)r[_0xe681("0x7c7")][_0xe681("0x103")](x.navs[_],e[_0xe681("0xdd")](274).fork())[_0xe681("0x100")]();if(null!=x[_0xe681("0x7b9")]&&x.panos[_0xe681("0x25")])for(var _=0;_<x.panos.length;++_)r.PicSet[_0xe681("0x103")](x[_0xe681("0x7b9")][_],e[_0xe681("0xdd")](282).fork())[_0xe681("0x100")]();return null!=x[_0xe681("0x7c2")]&&x[_0xe681("0x21")](_0xe681("0x7c2"))&&e[_0xe681("0xdd")](290)[_0xe681("0x53")](x.styleid),null!=x[_0xe681("0x575")]&&x[_0xe681("0x21")]("token")&&e[_0xe681("0xdd")](298)[_0xe681("0x53")](x.token),null!=x[_0xe681("0x7c3")]&&x[_0xe681("0x21")](_0xe681("0x7c3"))&&e[_0xe681("0xdd")](306)[_0xe681("0x53")](x.bid),null!=x[_0xe681("0x5b0")]&&x.hasOwnProperty(_0xe681("0x5b0"))&&e[_0xe681("0xdd")](314).string(x[_0xe681("0x5b0")]),null!=x[_0xe681("0x7c4")]&&x[_0xe681("0x21")](_0xe681("0x7c4"))&&e[_0xe681("0xdd")](322)[_0xe681("0x53")](x[_0xe681("0x7c4")]),null!=x.o1&&x[_0xe681("0x21")]("o1")&&e[_0xe681("0xdd")](328)[_0xe681("0xde")](x.o1),null!=x.other2&&x[_0xe681("0x21")]("other2")&&e[_0xe681("0xdd")](338).string(x.other2),null!=x.o2&&x.hasOwnProperty("o2")&&e[_0xe681("0xdd")](344)[_0xe681("0xde")](x.o2),null!=x.ul&&x[_0xe681("0x21")]("ul")&&e[_0xe681("0xdd")](352)[_0xe681("0xde")](x.ul),e},x[_0xe681("0x7c8")]=function(x,e){return this.encode(x,e)[_0xe681("0x100")]()},x[_0xe681("0xfd")]=function(x,e){x instanceof n||(x=n[_0xe681("0xda")](x));for(var _=void 0===e?x[_0xe681("0xd7")]:x[_0xe681("0xd4")]+e,t=new(r[_0xe681("0x5e2")]);x[_0xe681("0xd4")]<_;){var i=x[_0xe681("0xdd")]();switch(i>>>3){case 1:t.version=x[_0xe681("0xde")]();break;case 2:t[_0xe681("0x1ea")]=x[_0xe681("0xde")]();break;case 3:t[_0xe681("0x5b3")]=x[_0xe681("0x53")]();break;case 4:t[_0xe681("0x441")]=x.int32();break;case 5:t.Type=x[_0xe681("0xde")]();break;case 6:t[_0xe681("0x40")]=x[_0xe681("0x53")]();break;case 7:t[_0xe681("0x2b7")]=x[_0xe681("0x53")]();break;case 8:t[_0xe681("0x7bb")]=x[_0xe681("0x53")]();break;case 9:t[_0xe681("0x5f1")]=x[_0xe681("0x53")]();break;case 10:t[_0xe681("0x7bc")]=x[_0xe681("0x53")]();break;case 11:t.AS=x[_0xe681("0xfa")]();break;case 12:t[_0xe681("0x7bd")]=x.float();break;case 13:t.Tel=x[_0xe681("0x53")]();break;case 14:t[_0xe681("0x7be")]=x[_0xe681("0xfa")]();break;case 15:t.FirstRotateAngleY=x[_0xe681("0xfa")]();break;case 16:t[_0xe681("0x7c0")]=x.double();break;case 17:t[_0xe681("0x1f1")]=x.double();break;case 18:t.DefaultFnum=x[_0xe681("0xde")]();break;case 19:t[_0xe681("0x5b4")]=x[_0xe681("0xfa")]();break;case 20:t[_0xe681("0x5b5")]=x.double();break;case 21:t[_0xe681("0x7c1")]=x[_0xe681("0xfa")]();break;case 22:t.x=x[_0xe681("0xfa")]();break;case 23:t.y=x[_0xe681("0xfa")]();break;case 24:t.z=x[_0xe681("0xfa")]();break;case 25:t[_0xe681("0x21b")]=x[_0xe681("0xfa")]();break;case 26:t[_0xe681("0x21c")]=x.double();break;case 27:t[_0xe681("0x21a")]=x[_0xe681("0xfa")]();break;case 28:t[_0xe681("0x271")]=x.double();break;case 29:t[_0xe681("0x1e8")]=x[_0xe681("0x53")]();break;case 30:t[_0xe681("0x5b1")]=x[_0xe681("0x53")]();break;case 31:t[_0xe681("0x2b4")]=x[_0xe681("0x53")]();break;case 32:t[_0xe681("0x5fe")]=x[_0xe681("0xde")]();break;case 33:t[_0xe681("0x1ff")]&&t[_0xe681("0x1ff")][_0xe681("0x25")]||(t[_0xe681("0x1ff")]=[]),t[_0xe681("0x1ff")][_0xe681("0x1e")](r[_0xe681("0x7c6")][_0xe681("0xfd")](x,x[_0xe681("0xdd")]()));break;case 34:t.navs&&t[_0xe681("0x7b8")][_0xe681("0x25")]||(t[_0xe681("0x7b8")]=[]),t[_0xe681("0x7b8")].push(r[_0xe681("0x7c7")][_0xe681("0xfd")](x,x[_0xe681("0xdd")]()));break;case 35:t[_0xe681("0x7b9")]&&t.panos.length||(t[_0xe681("0x7b9")]=[]),t[_0xe681("0x7b9")][_0xe681("0x1e")](r.PicSet[_0xe681("0xfd")](x,x[_0xe681("0xdd")]()));break;case 36:t[_0xe681("0x7c2")]=x[_0xe681("0x53")]();break;case 37:t.token=x[_0xe681("0x53")]();break;case 38:t[_0xe681("0x7c3")]=x[_0xe681("0x53")]();break;case 39:t[_0xe681("0x5b0")]=x[_0xe681("0x53")]();break;case 40:t[_0xe681("0x7c4")]=x.string();break;case 41:t.o1=x[_0xe681("0xde")]();break;case 42:t[_0xe681("0x7c9")]=x[_0xe681("0x53")]();break;case 43:t.o2=x[_0xe681("0xde")]();break;case 44:t.ul=x[_0xe681("0xde")]();break;default:x.skipType(7&i)}}return t},x[_0xe681("0x7ca")]=function(x){return x instanceof n||(x=n(x)),this[_0xe681("0xfd")](x,x.uint32())},x[_0xe681("0x7cb")]=function(x){if(_0xe681("0x24")!==(_0xe681("0xa")==typeof x?_0xe681("0xa"):t(x))||null===x)return"object expected";if(null!=x.version&&x[_0xe681("0x21")](_0xe681("0x404"))&&!a[_0xe681("0x50")](x[_0xe681("0x404")]))return _0xe681("0x7cc");if(null!=x[_0xe681("0x1ea")]&&x[_0xe681("0x21")](_0xe681("0x1ea"))&&!a[_0xe681("0x50")](x[_0xe681("0x1ea")]))return _0xe681("0x7cd");if(null!=x.Hash&&x[_0xe681("0x21")](_0xe681("0x5b3"))&&!a[_0xe681("0x52")](x[_0xe681("0x5b3")]))return"Hash: string expected";if(null!=x[_0xe681("0x441")]&&x[_0xe681("0x21")](_0xe681("0x441"))&&!a[_0xe681("0x50")](x[_0xe681("0x441")]))return _0xe681("0x7ce");if(null!=x[_0xe681("0x7ba")]&&x[_0xe681("0x21")](_0xe681("0x7ba"))&&!a[_0xe681("0x50")](x[_0xe681("0x7ba")]))return _0xe681("0x7cf");if(null!=x[_0xe681("0x40")]&&x[_0xe681("0x21")](_0xe681("0x40"))&&!a.isString(x[_0xe681("0x40")]))return _0xe681("0x7d0");if(null!=x[_0xe681("0x2b7")]&&x[_0xe681("0x21")](_0xe681("0x2b7"))&&!a[_0xe681("0x52")](x[_0xe681("0x2b7")]))return _0xe681("0x7d1");if(null!=x[_0xe681("0x7bb")]&&x[_0xe681("0x21")]("Brief")&&!a[_0xe681("0x52")](x.Brief))return _0xe681("0x7d2");if(null!=x[_0xe681("0x5f1")]&&x[_0xe681("0x21")](_0xe681("0x5f1"))&&!a[_0xe681("0x52")](x[_0xe681("0x5f1")]))return _0xe681("0x7d3");if(null!=x[_0xe681("0x7bc")]&&x[_0xe681("0x21")](_0xe681("0x7bc"))&&!a.isString(x.address))return"address: string expected";if(null!=x.AS&&x[_0xe681("0x21")]("AS")&&_0xe681("0x28")!=typeof x.AS)return _0xe681("0x7d4");if(null!=x[_0xe681("0x7bd")]&&x.hasOwnProperty(_0xe681("0x7bd"))&&_0xe681("0x28")!=typeof x[_0xe681("0x7bd")])return _0xe681("0x7d5");if(null!=x[_0xe681("0x7c5")]&&x[_0xe681("0x21")](_0xe681("0x7c5"))&&!a[_0xe681("0x52")](x[_0xe681("0x7c5")]))return _0xe681("0x7d6");if(null!=x[_0xe681("0x7be")]&&x[_0xe681("0x21")](_0xe681("0x7be"))&&_0xe681("0x28")!=typeof x.FirstRotateAngleX)return _0xe681("0x7d7");if(null!=x[_0xe681("0x7bf")]&&x[_0xe681("0x21")](_0xe681("0x7bf"))&&_0xe681("0x28")!=typeof x[_0xe681("0x7bf")])return _0xe681("0x7d8");if(null!=x[_0xe681("0x7c0")]&&x[_0xe681("0x21")](_0xe681("0x7c0"))&&_0xe681("0x28")!=typeof x[_0xe681("0x7c0")])return _0xe681("0x7d9");if(null!=x.Firstscale&&x[_0xe681("0x21")](_0xe681("0x1f1"))&&_0xe681("0x28")!=typeof x[_0xe681("0x1f1")])return _0xe681("0x7da");if(null!=x[_0xe681("0x5fc")]&&x[_0xe681("0x21")](_0xe681("0x5fc"))&&!a[_0xe681("0x50")](x[_0xe681("0x5fc")]))return _0xe681("0x7db");if(null!=x[_0xe681("0x5b4")]&&x[_0xe681("0x21")](_0xe681("0x5b4"))&&_0xe681("0x28")!=typeof x[_0xe681("0x5b4")])return _0xe681("0x7dc");if(null!=x[_0xe681("0x5b5")]&&x[_0xe681("0x21")](_0xe681("0x5b5"))&&_0xe681("0x28")!=typeof x[_0xe681("0x5b5")])return _0xe681("0x7dd");if(null!=x[_0xe681("0x7c1")]&&x[_0xe681("0x21")](_0xe681("0x7c1"))&&_0xe681("0x28")!=typeof x[_0xe681("0x7c1")])return _0xe681("0x7de");if(null!=x.x&&x.hasOwnProperty("x")&&_0xe681("0x28")!=typeof x.x)return _0xe681("0x7df");if(null!=x.y&&x[_0xe681("0x21")]("y")&&_0xe681("0x28")!=typeof x.y)return"y: number expected";if(null!=x.z&&x[_0xe681("0x21")]("z")&&_0xe681("0x28")!=typeof x.z)return _0xe681("0x7e0");if(null!=x[_0xe681("0x21b")]&&x[_0xe681("0x21")](_0xe681("0x21b"))&&_0xe681("0x28")!=typeof x[_0xe681("0x21b")])return _0xe681("0x7e1");if(null!=x[_0xe681("0x21c")]&&x[_0xe681("0x21")]("minY")&&_0xe681("0x28")!=typeof x[_0xe681("0x21c")])return"minY: number expected";if(null!=x.maxX&&x[_0xe681("0x21")](_0xe681("0x21a"))&&_0xe681("0x28")!=typeof x[_0xe681("0x21a")])return _0xe681("0x7e2");if(null!=x[_0xe681("0x271")]&&x[_0xe681("0x21")]("maxY")&&_0xe681("0x28")!=typeof x[_0xe681("0x271")])return _0xe681("0x7e3");if(null!=x[_0xe681("0x1e8")]&&x[_0xe681("0x21")]("ScaleLevel")&&!a[_0xe681("0x52")](x[_0xe681("0x1e8")]))return _0xe681("0x7e4");if(null!=x.Remark&&x.hasOwnProperty(_0xe681("0x5b1"))&&!a[_0xe681("0x52")](x[_0xe681("0x5b1")]))return _0xe681("0x7e5");if(null!=x[_0xe681("0x2b4")]&&x.hasOwnProperty(_0xe681("0x2b4"))&&!a[_0xe681("0x52")](x[_0xe681("0x2b4")]))return"FloorBarName: string expected";if(null!=x.FloorHigh&&x[_0xe681("0x21")](_0xe681("0x5fe"))&&!a.isInteger(x[_0xe681("0x5fe")]))return _0xe681("0x7e6");if(null!=x[_0xe681("0x1ff")]&&x[_0xe681("0x21")](_0xe681("0x1ff"))){if(!Array[_0xe681("0x56")](x[_0xe681("0x1ff")]))return _0xe681("0x7e7");for(var e=0;e<x[_0xe681("0x1ff")][_0xe681("0x25")];++e){var _=r[_0xe681("0x7c6")][_0xe681("0x7cb")](x.floors[e]);if(_)return"floors."+_}}if(null!=x[_0xe681("0x7b8")]&&x[_0xe681("0x21")](_0xe681("0x7b8"))){if(!Array[_0xe681("0x56")](x[_0xe681("0x7b8")]))return _0xe681("0x7e8");for(var e=0;e<x[_0xe681("0x7b8")].length;++e){var _=r[_0xe681("0x7c7")][_0xe681("0x7cb")](x[_0xe681("0x7b8")][e]);if(_)return _0xe681("0x7e9")+_}}if(null!=x.panos&&x.hasOwnProperty(_0xe681("0x7b9"))){if(!Array[_0xe681("0x56")](x[_0xe681("0x7b9")]))return _0xe681("0x7ea");for(var e=0;e<x[_0xe681("0x7b9")][_0xe681("0x25")];++e){var _=r[_0xe681("0x7eb")][_0xe681("0x7cb")](x[_0xe681("0x7b9")][e]);if(_)return _0xe681("0x7ec")+_}}return null!=x[_0xe681("0x7c2")]&&x.hasOwnProperty("styleid")&&!a[_0xe681("0x52")](x.styleid)?_0xe681("0x7ed"):null!=x.token&&x[_0xe681("0x21")]("token")&&!a[_0xe681("0x52")](x[_0xe681("0x575")])?_0xe681("0x7ee"):null!=x[_0xe681("0x7c3")]&&x[_0xe681("0x21")](_0xe681("0x7c3"))&&!a[_0xe681("0x52")](x.bid)?_0xe681("0x7ef"):null!=x[_0xe681("0x5b0")]&&x[_0xe681("0x21")](_0xe681("0x5b0"))&&!a[_0xe681("0x52")](x.logotoken)?_0xe681("0x7f0"):null!=x.other1&&x[_0xe681("0x21")](_0xe681("0x7c4"))&&!a[_0xe681("0x52")](x[_0xe681("0x7c4")])?_0xe681("0x7f1"):null!=x.o1&&x[_0xe681("0x21")]("o1")&&!a.isInteger(x.o1)?_0xe681("0x7f2"):null!=x.other2&&x[_0xe681("0x21")](_0xe681("0x7c9"))&&!a[_0xe681("0x52")](x[_0xe681("0x7c9")])?_0xe681("0x7f3"):null!=x.o2&&x[_0xe681("0x21")]("o2")&&!a[_0xe681("0x50")](x.o2)?_0xe681("0x7f4"):null!=x.ul&&x[_0xe681("0x21")]("ul")&&!a.isInteger(x.ul)?_0xe681("0x7f5"):null},x[_0xe681("0x7f6")]=function(x){if(x instanceof r.ESMapSet)return x;var e=new(r[_0xe681("0x5e2")]);if(null!=x[_0xe681("0x404")]&&(e[_0xe681("0x404")]=0|x[_0xe681("0x404")]),null!=x.maptime&&(e[_0xe681("0x1ea")]=0|x[_0xe681("0x1ea")]),null!=x[_0xe681("0x5b3")]&&(e[_0xe681("0x5b3")]=String(x[_0xe681("0x5b3")])),null!=x._id&&(e[_0xe681("0x441")]=0|x[_0xe681("0x441")]),null!=x[_0xe681("0x7ba")]&&(e[_0xe681("0x7ba")]=0|x[_0xe681("0x7ba")]),null!=x[_0xe681("0x40")]&&(e[_0xe681("0x40")]=String(x[_0xe681("0x40")])),null!=x[_0xe681("0x2b7")]&&(e.nameEn=String(x.nameEn)),null!=x[_0xe681("0x7bb")]&&(e[_0xe681("0x7bb")]=String(x.Brief)),null!=x[_0xe681("0x5f1")]&&(e[_0xe681("0x5f1")]=String(x.adcode)),null!=x[_0xe681("0x7bc")]&&(e[_0xe681("0x7bc")]=String(x[_0xe681("0x7bc")])),null!=x.AS&&(e.AS=Number(x.AS)),null!=x.BuildingHigh&&(e.BuildingHigh=Number(x[_0xe681("0x7bd")])),null!=x[_0xe681("0x7c5")]&&(e.Tel=String(x[_0xe681("0x7c5")])),null!=x[_0xe681("0x7be")]&&(e[_0xe681("0x7be")]=Number(x[_0xe681("0x7be")])),null!=x[_0xe681("0x7bf")]&&(e[_0xe681("0x7bf")]=Number(x[_0xe681("0x7bf")])),null!=x[_0xe681("0x7c0")]&&(e.FirstRotateAngleZ=Number(x[_0xe681("0x7c0")])),null!=x[_0xe681("0x1f1")]&&(e.Firstscale=Number(x[_0xe681("0x1f1")])),null!=x[_0xe681("0x5fc")]&&(e[_0xe681("0x5fc")]=0|x[_0xe681("0x5fc")]),null!=x[_0xe681("0x5b4")]&&(e[_0xe681("0x5b4")]=Number(x[_0xe681("0x5b4")])),null!=x[_0xe681("0x5b5")]&&(e.DefaultCenY=Number(x[_0xe681("0x5b5")])),null!=x[_0xe681("0x7c1")]&&(e[_0xe681("0x7c1")]=Number(x.DefaultCenZ)),null!=x.x&&(e.x=Number(x.x)),null!=x.y&&(e.y=Number(x.y)),null!=x.z&&(e.z=Number(x.z)),null!=x[_0xe681("0x21b")]&&(e[_0xe681("0x21b")]=Number(x[_0xe681("0x21b")])),null!=x[_0xe681("0x21c")]&&(e[_0xe681("0x21c")]=Number(x.minY)),null!=x[_0xe681("0x21a")]&&(e.maxX=Number(x[_0xe681("0x21a")])),null!=x[_0xe681("0x271")]&&(e.maxY=Number(x[_0xe681("0x271")])),null!=x[_0xe681("0x1e8")]&&(e[_0xe681("0x1e8")]=String(x[_0xe681("0x1e8")])),null!=x[_0xe681("0x5b1")]&&(e.Remark=String(x[_0xe681("0x5b1")])),null!=x[_0xe681("0x2b4")]&&(e[_0xe681("0x2b4")]=String(x[_0xe681("0x2b4")])),null!=x[_0xe681("0x5fe")]&&(e[_0xe681("0x5fe")]=0|x[_0xe681("0x5fe")]),x[_0xe681("0x1ff")]){if(!Array.isArray(x.floors))throw TypeError(_0xe681("0x7f7"));e[_0xe681("0x1ff")]=[];for(var _=0;_<x.floors.length;++_){if(_0xe681("0x24")!==t(x[_0xe681("0x1ff")][_]))throw TypeError(_0xe681("0x7f8"));e[_0xe681("0x1ff")][_]=r[_0xe681("0x7c6")][_0xe681("0x7f6")](x[_0xe681("0x1ff")][_])}}if(x[_0xe681("0x7b8")]){if(!Array.isArray(x.navs))throw TypeError(".ESMapSet.navs: array expected");e[_0xe681("0x7b8")]=[];for(var _=0;_<x[_0xe681("0x7b8")][_0xe681("0x25")];++_){if(_0xe681("0x24")!==t(x.navs[_]))throw TypeError(_0xe681("0x7f9"));e[_0xe681("0x7b8")][_]=r.NavSet[_0xe681("0x7f6")](x[_0xe681("0x7b8")][_])}}if(x[_0xe681("0x7b9")]){if(!Array.isArray(x[_0xe681("0x7b9")]))throw TypeError(_0xe681("0x7fa"));e[_0xe681("0x7b9")]=[];for(var _=0;_<x[_0xe681("0x7b9")][_0xe681("0x25")];++_){if("object"!==t(x[_0xe681("0x7b9")][_]))throw TypeError(_0xe681("0x7fb"));e[_0xe681("0x7b9")][_]=r[_0xe681("0x7eb")][_0xe681("0x7f6")](x.panos[_])}}return null!=x[_0xe681("0x7c2")]&&(e.styleid=String(x[_0xe681("0x7c2")])),null!=x[_0xe681("0x575")]&&(e.token=String(x[_0xe681("0x575")])),null!=x.bid&&(e[_0xe681("0x7c3")]=String(x[_0xe681("0x7c3")])),null!=x[_0xe681("0x5b0")]&&(e[_0xe681("0x5b0")]=String(x[_0xe681("0x5b0")])),null!=x[_0xe681("0x7c4")]&&(e[_0xe681("0x7c4")]=String(x[_0xe681("0x7c4")])),null!=x.o1&&(e.o1=0|x.o1),null!=x[_0xe681("0x7c9")]&&(e[_0xe681("0x7c9")]=String(x[_0xe681("0x7c9")])),null!=x.o2&&(e.o2=0|x.o2),null!=x.ul&&(e.ul=0|x.ul),e},x[_0xe681("0x66")]=x[_0xe681("0x7f6")],x[_0xe681("0x7fc")]=function(x,e){e||(e={});var _={};if((e.arrays||e[_0xe681("0x7fd")])&&(_[_0xe681("0x1ff")]=[],_[_0xe681("0x7b8")]=[],_[_0xe681("0x7b9")]=[]),e[_0xe681("0x7fd")]&&(_[_0xe681("0x404")]=0,_[_0xe681("0x1ea")]=0,_.Hash="",_[_0xe681("0x441")]=0,_[_0xe681("0x7ba")]=0,_[_0xe681("0x40")]="",_[_0xe681("0x2b7")]="",_[_0xe681("0x7bb")]="",_[_0xe681("0x5f1")]="",_.address="",_.AS=0,_[_0xe681("0x7bd")]=0,_[_0xe681("0x7c5")]="",_[_0xe681("0x7be")]=0,_[_0xe681("0x7bf")]=0,_[_0xe681("0x7c0")]=0,_[_0xe681("0x1f1")]=0,_[_0xe681("0x5fc")]=0,_[_0xe681("0x5b4")]=0,_.DefaultCenY=0,_.DefaultCenZ=0,_.x=0,_.y=0,_.z=0,_[_0xe681("0x21b")]=0,_[_0xe681("0x21c")]=0,_[_0xe681("0x21a")]=0,_[_0xe681("0x271")]=0,_.ScaleLevel="",_.Remark="",_[_0xe681("0x2b4")]="",_[_0xe681("0x5fe")]=0,_[_0xe681("0x7c2")]="",_[_0xe681("0x575")]="",_.bid="",_[_0xe681("0x5b0")]="",_.other1="",_.o1=0,_.other2="",_.o2=0,_.ul=0),null!=x[_0xe681("0x404")]&&x.hasOwnProperty(_0xe681("0x404"))&&(_.version=x[_0xe681("0x404")]),null!=x.maptime&&x.hasOwnProperty(_0xe681("0x1ea"))&&(_[_0xe681("0x1ea")]=x.maptime),null!=x[_0xe681("0x5b3")]&&x[_0xe681("0x21")](_0xe681("0x5b3"))&&(_[_0xe681("0x5b3")]=x[_0xe681("0x5b3")]),null!=x[_0xe681("0x441")]&&x[_0xe681("0x21")]("_id")&&(_[_0xe681("0x441")]=x[_0xe681("0x441")]),null!=x.Type&&x[_0xe681("0x21")](_0xe681("0x7ba"))&&(_[_0xe681("0x7ba")]=x.Type),null!=x[_0xe681("0x40")]&&x[_0xe681("0x21")](_0xe681("0x40"))&&(_[_0xe681("0x40")]=x[_0xe681("0x40")]),null!=x[_0xe681("0x2b7")]&&x.hasOwnProperty(_0xe681("0x2b7"))&&(_[_0xe681("0x2b7")]=x[_0xe681("0x2b7")]),null!=x[_0xe681("0x7bb")]&&x[_0xe681("0x21")](_0xe681("0x7bb"))&&(_[_0xe681("0x7bb")]=x[_0xe681("0x7bb")]),null!=x.adcode&&x[_0xe681("0x21")]("adcode")&&(_[_0xe681("0x5f1")]=x[_0xe681("0x5f1")]),null!=x[_0xe681("0x7bc")]&&x[_0xe681("0x21")](_0xe681("0x7bc"))&&(_[_0xe681("0x7bc")]=x[_0xe681("0x7bc")]),null!=x.AS&&x[_0xe681("0x21")]("AS")&&(_.AS=x.AS),null!=x[_0xe681("0x7bd")]&&x.hasOwnProperty(_0xe681("0x7bd"))&&(_[_0xe681("0x7bd")]=x[_0xe681("0x7bd")]),null!=x.Tel&&x[_0xe681("0x21")](_0xe681("0x7c5"))&&(_[_0xe681("0x7c5")]=x.Tel),null!=x.FirstRotateAngleX&&x[_0xe681("0x21")]("FirstRotateAngleX")&&(_[_0xe681("0x7be")]=x[_0xe681("0x7be")]),null!=x[_0xe681("0x7bf")]&&x[_0xe681("0x21")](_0xe681("0x7bf"))&&(_.FirstRotateAngleY=x[_0xe681("0x7bf")]),null!=x[_0xe681("0x7c0")]&&x.hasOwnProperty(_0xe681("0x7c0"))&&(_[_0xe681("0x7c0")]=x.FirstRotateAngleZ),null!=x[_0xe681("0x1f1")]&&x[_0xe681("0x21")](_0xe681("0x1f1"))&&(_[_0xe681("0x1f1")]=x[_0xe681("0x1f1")]),null!=x[_0xe681("0x5fc")]&&x.hasOwnProperty(_0xe681("0x5fc"))&&(_[_0xe681("0x5fc")]=x[_0xe681("0x5fc")]),null!=x[_0xe681("0x5b4")]&&x[_0xe681("0x21")](_0xe681("0x5b4"))&&(_[_0xe681("0x5b4")]=x[_0xe681("0x5b4")]),null!=x.DefaultCenY&&x[_0xe681("0x21")](_0xe681("0x5b5"))&&(_[_0xe681("0x5b5")]=x[_0xe681("0x5b5")]),null!=x[_0xe681("0x7c1")]&&x[_0xe681("0x21")](_0xe681("0x7c1"))&&(_[_0xe681("0x7c1")]=x[_0xe681("0x7c1")]),null!=x.x&&x.hasOwnProperty("x")&&(_.x=x.x),null!=x.y&&x[_0xe681("0x21")]("y")&&(_.y=x.y),null!=x.z&&x[_0xe681("0x21")]("z")&&(_.z=x.z),null!=x[_0xe681("0x21b")]&&x[_0xe681("0x21")](_0xe681("0x21b"))&&(_[_0xe681("0x21b")]=x[_0xe681("0x21b")]),null!=x[_0xe681("0x21c")]&&x[_0xe681("0x21")]("minY")&&(_[_0xe681("0x21c")]=x.minY),null!=x[_0xe681("0x21a")]&&x[_0xe681("0x21")]("maxX")&&(_[_0xe681("0x21a")]=x[_0xe681("0x21a")]),null!=x[_0xe681("0x271")]&&x[_0xe681("0x21")](_0xe681("0x271"))&&(_[_0xe681("0x271")]=x[_0xe681("0x271")]),null!=x[_0xe681("0x1e8")]&&x[_0xe681("0x21")]("ScaleLevel")&&(_[_0xe681("0x1e8")]=x[_0xe681("0x1e8")]),null!=x.Remark&&x.hasOwnProperty(_0xe681("0x5b1"))&&(_[_0xe681("0x5b1")]=x[_0xe681("0x5b1")]),null!=x[_0xe681("0x2b4")]&&x[_0xe681("0x21")](_0xe681("0x2b4"))&&(_.FloorBarName=x.FloorBarName),null!=x[_0xe681("0x5fe")]&&x[_0xe681("0x21")](_0xe681("0x5fe"))&&(_[_0xe681("0x5fe")]=x[_0xe681("0x5fe")]),x.floors&&x.floors.length){_[_0xe681("0x1ff")]=[];for(var t=0;t<x[_0xe681("0x1ff")][_0xe681("0x25")];++t)_.floors[t]=r[_0xe681("0x7c6")][_0xe681("0x7fc")](x[_0xe681("0x1ff")][t],e)}if(x[_0xe681("0x7b8")]&&x.navs.length){_[_0xe681("0x7b8")]=[];for(var t=0;t<x.navs[_0xe681("0x25")];++t)_.navs[t]=r[_0xe681("0x7c7")][_0xe681("0x7fc")](x.navs[t],e)}if(x.panos&&x.panos[_0xe681("0x25")]){_.panos=[];for(var t=0;t<x[_0xe681("0x7b9")][_0xe681("0x25")];++t)_[_0xe681("0x7b9")][t]=r[_0xe681("0x7eb")][_0xe681("0x7fc")](x[_0xe681("0x7b9")][t],e)}return null!=x[_0xe681("0x7c2")]&&x[_0xe681("0x21")](_0xe681("0x7c2"))&&(_[_0xe681("0x7c2")]=x[_0xe681("0x7c2")]),null!=x[_0xe681("0x575")]&&x[_0xe681("0x21")](_0xe681("0x575"))&&(_[_0xe681("0x575")]=x[_0xe681("0x575")]),null!=x[_0xe681("0x7c3")]&&x[_0xe681("0x21")]("bid")&&(_[_0xe681("0x7c3")]=x[_0xe681("0x7c3")]),null!=x[_0xe681("0x5b0")]&&x.hasOwnProperty("logotoken")&&(_[_0xe681("0x5b0")]=x[_0xe681("0x5b0")]),null!=x[_0xe681("0x7c4")]&&x[_0xe681("0x21")](_0xe681("0x7c4"))&&(_[_0xe681("0x7c4")]=x.other1),null!=x.o1&&x[_0xe681("0x21")]("o1")&&(_.o1=x.o1),null!=x[_0xe681("0x7c9")]&&x[_0xe681("0x21")]("other2")&&(_[_0xe681("0x7c9")]=x[_0xe681("0x7c9")]),null!=x.o2&&x[_0xe681("0x21")]("o2")&&(_.o2=x.o2),null!=x.ul&&x[_0xe681("0x21")]("ul")&&(_.ul=x.ul),_},x[_0xe681("0x20")][_0xe681("0x7fc")]=function(x){return this[_0xe681("0x7b")][_0xe681("0x7fc")](this,x)},x[_0xe681("0x20")][_0xe681("0x7fe")]=function(){return this[_0xe681("0x7b")].toObject(this,i[_0xe681("0x7b6")][_0xe681("0x7ff")])},x}(),r[_0xe681("0x7c6")]=function(){function x(x){if(this[_0xe681("0x603")]={},this[_0xe681("0x203")]={},this[_0xe681("0x610")]={},this[_0xe681("0x612")]={},x)for(var e=Object.keys(x),_=0;_<e[_0xe681("0x25")];++_)null!=x[e[_]]&&(this[e[_]]=x[e[_]])}return x[_0xe681("0x20")][_0xe681("0x441")]=0,x[_0xe681("0x20")][_0xe681("0x1f4")]=0,x[_0xe681("0x20")][_0xe681("0x800")]=0,x[_0xe681("0x20")][_0xe681("0x40")]="",x[_0xe681("0x20")][_0xe681("0x2b6")]="",x[_0xe681("0x20")].AS=0,x[_0xe681("0x20")][_0xe681("0x5cf")]=0,x[_0xe681("0x20")][_0xe681("0x231")]=0,x[_0xe681("0x20")][_0xe681("0x601")]="",x[_0xe681("0x20")].Alias="",x.prototype.Rooms=a.emptyObject,x.prototype[_0xe681("0x203")]=a[_0xe681("0x4b")],x[_0xe681("0x20")][_0xe681("0x610")]=a[_0xe681("0x4b")],x[_0xe681("0x20")][_0xe681("0x612")]=a[_0xe681("0x4b")],x[_0xe681("0x20")][_0xe681("0x200")]="",x[_0xe681("0x20")][_0xe681("0x29b")]="",x[_0xe681("0x20")][_0xe681("0x7c4")]="",x[_0xe681("0x20")][_0xe681("0x7c9")]="",x.create=function(e){return new x(e)},x[_0xe681("0x103")]=function(x,e){if(e||(e=g.create()),null!=x[_0xe681("0x441")]&&x[_0xe681("0x21")]("_id")&&e[_0xe681("0xdd")](8)[_0xe681("0xde")](x._id),null!=x[_0xe681("0x1f4")]&&x[_0xe681("0x21")](_0xe681("0x1f4"))&&e[_0xe681("0xdd")](16)[_0xe681("0xde")](x[_0xe681("0x1f4")]),null!=x[_0xe681("0x800")]&&x[_0xe681("0x21")](_0xe681("0x800"))&&e[_0xe681("0xdd")](24)[_0xe681("0xde")](x.floornumtext),null!=x[_0xe681("0x40")]&&x[_0xe681("0x21")](_0xe681("0x40"))&&e[_0xe681("0xdd")](34)[_0xe681("0x53")](x.name),null!=x[_0xe681("0x2b6")]&&x.hasOwnProperty(_0xe681("0x2b6"))&&e[_0xe681("0xdd")](42)[_0xe681("0x53")](x[_0xe681("0x2b6")]),null!=x.AS&&x[_0xe681("0x21")]("AS")&&e.uint32(49).double(x.AS),null!=x[_0xe681("0x5cf")]&&x[_0xe681("0x21")](_0xe681("0x5cf"))&&e.uint32(56)[_0xe681("0xde")](x[_0xe681("0x5cf")]),null!=x[_0xe681("0x231")]&&x[_0xe681("0x21")](_0xe681("0x231"))&&e[_0xe681("0xdd")](64)[_0xe681("0xde")](x[_0xe681("0x231")]),null!=x.Outline&&x[_0xe681("0x21")](_0xe681("0x601"))&&e[_0xe681("0xdd")](74)[_0xe681("0x53")](x[_0xe681("0x601")]),null!=x[_0xe681("0x801")]&&x[_0xe681("0x21")](_0xe681("0x801"))&&e[_0xe681("0xdd")](82)[_0xe681("0x53")](x[_0xe681("0x801")]),
null!=x.Rooms&&x.hasOwnProperty(_0xe681("0x603")))for(var _=Object.keys(x.Rooms),t=0;t<_[_0xe681("0x25")];++t)e[_0xe681("0xdd")](90)[_0xe681("0xfe")]()[_0xe681("0xdd")](8)[_0xe681("0xde")](_[t]),r.RoomSet.encode(x[_0xe681("0x603")][_[t]],e[_0xe681("0xdd")](18)[_0xe681("0xfe")]())[_0xe681("0x100")]()[_0xe681("0x100")]();if(null!=x.Facility&&x[_0xe681("0x21")](_0xe681("0x203")))for(var _=Object[_0xe681("0x57")](x[_0xe681("0x203")]),t=0;t<_[_0xe681("0x25")];++t)e[_0xe681("0xdd")](98)[_0xe681("0xfe")]()[_0xe681("0xdd")](8)[_0xe681("0xde")](_[t]),r[_0xe681("0x802")][_0xe681("0x103")](x[_0xe681("0x203")][_[t]],e[_0xe681("0xdd")](18)[_0xe681("0xfe")]()).ldelim()[_0xe681("0x100")]();if(null!=x.Labels&&x.hasOwnProperty(_0xe681("0x610")))for(var _=Object[_0xe681("0x57")](x[_0xe681("0x610")]),t=0;t<_[_0xe681("0x25")];++t)e[_0xe681("0xdd")](106)[_0xe681("0xfe")]()[_0xe681("0xdd")](8)[_0xe681("0xde")](_[t]),r[_0xe681("0x802")][_0xe681("0x103")](x[_0xe681("0x610")][_[t]],e.uint32(18)[_0xe681("0xfe")]())[_0xe681("0x100")]()[_0xe681("0x100")]();if(null!=x.Lifts&&x.hasOwnProperty(_0xe681("0x612")))for(var _=Object[_0xe681("0x57")](x[_0xe681("0x612")]),t=0;t<_[_0xe681("0x25")];++t)e[_0xe681("0xdd")](114)[_0xe681("0xfe")]().uint32(8)[_0xe681("0xde")](_[t]),r[_0xe681("0x803")][_0xe681("0x103")](x[_0xe681("0x612")][_[t]],e[_0xe681("0xdd")](18)[_0xe681("0xfe")]())[_0xe681("0x100")]()[_0xe681("0x100")]();return null!=x[_0xe681("0x200")]&&x.hasOwnProperty(_0xe681("0x200"))&&e[_0xe681("0xdd")](122)[_0xe681("0x53")](x[_0xe681("0x200")]),null!=x[_0xe681("0x29b")]&&x[_0xe681("0x21")]("imagesize")&&e[_0xe681("0xdd")](130).string(x[_0xe681("0x29b")]),null!=x.other1&&x[_0xe681("0x21")](_0xe681("0x7c4"))&&e[_0xe681("0xdd")](138)[_0xe681("0x53")](x.other1),null!=x[_0xe681("0x7c9")]&&x[_0xe681("0x21")]("other2")&&e[_0xe681("0xdd")](146).string(x[_0xe681("0x7c9")]),e},x.encodeDelimited=function(x,e){return this[_0xe681("0x103")](x,e)[_0xe681("0x100")]()},x[_0xe681("0xfd")]=function(x,e){x instanceof n||(x=n[_0xe681("0xda")](x));for(var _,t=void 0===e?x[_0xe681("0xd7")]:x.pos+e,i=new(r[_0xe681("0x7c6")]);x.pos<t;){var g=x[_0xe681("0xdd")]();switch(g>>>3){case 1:i._id=x.int32();break;case 2:i[_0xe681("0x1f4")]=x[_0xe681("0xde")]();break;case 3:i[_0xe681("0x800")]=x[_0xe681("0xde")]();break;case 4:i[_0xe681("0x40")]=x[_0xe681("0x53")]();break;case 5:i[_0xe681("0x2b6")]=x[_0xe681("0x53")]();break;case 6:i.AS=x[_0xe681("0xfa")]();break;case 7:i[_0xe681("0x5cf")]=x.int32();break;case 8:i[_0xe681("0x231")]=x.int32();break;case 9:i[_0xe681("0x601")]=x[_0xe681("0x53")]();break;case 10:i[_0xe681("0x801")]=x[_0xe681("0x53")]();break;case 11:x[_0xe681("0xe6")]()[_0xe681("0xd4")]++,i.Rooms===a.emptyObject&&(i[_0xe681("0x603")]={}),_=x[_0xe681("0xde")](),x[_0xe681("0xd4")]++,i[_0xe681("0x603")][_]=r[_0xe681("0x804")][_0xe681("0xfd")](x,x[_0xe681("0xdd")]());break;case 12:x[_0xe681("0xe6")]()[_0xe681("0xd4")]++,i[_0xe681("0x203")]===a[_0xe681("0x4b")]&&(i.Facility={}),_=x[_0xe681("0xde")](),x.pos++,i[_0xe681("0x203")][_]=r[_0xe681("0x802")][_0xe681("0xfd")](x,x[_0xe681("0xdd")]());break;case 13:x[_0xe681("0xe6")]()[_0xe681("0xd4")]++,i[_0xe681("0x610")]===a[_0xe681("0x4b")]&&(i[_0xe681("0x610")]={}),_=x[_0xe681("0xde")](),x[_0xe681("0xd4")]++,i[_0xe681("0x610")][_]=r[_0xe681("0x802")][_0xe681("0xfd")](x,x[_0xe681("0xdd")]());break;case 14:x[_0xe681("0xe6")]()[_0xe681("0xd4")]++,i[_0xe681("0x612")]===a[_0xe681("0x4b")]&&(i[_0xe681("0x612")]={}),_=x[_0xe681("0xde")](),x[_0xe681("0xd4")]++,i.Lifts[_]=r[_0xe681("0x803")][_0xe681("0xfd")](x,x.uint32());break;case 15:i[_0xe681("0x200")]=x.string();break;case 16:i[_0xe681("0x29b")]=x[_0xe681("0x53")]();break;case 17:i[_0xe681("0x7c4")]=x[_0xe681("0x53")]();break;case 18:i.other2=x[_0xe681("0x53")]();break;default:x[_0xe681("0xe7")](7&g)}}return i},x[_0xe681("0x7ca")]=function(x){return x instanceof n||(x=n(x)),this.decode(x,x.uint32())},x.verify=function(x){if("object"!==(_0xe681("0xa")==typeof x?_0xe681("0xa"):t(x))||null===x)return _0xe681("0x805");if(null!=x[_0xe681("0x441")]&&x[_0xe681("0x21")](_0xe681("0x441"))&&!a[_0xe681("0x50")](x[_0xe681("0x441")]))return _0xe681("0x7ce");if(null!=x.floornum&&x.hasOwnProperty(_0xe681("0x1f4"))&&!a[_0xe681("0x50")](x.floornum))return _0xe681("0x806");if(null!=x[_0xe681("0x800")]&&x.hasOwnProperty("floornumtext")&&!a.isInteger(x[_0xe681("0x800")]))return _0xe681("0x807");if(null!=x[_0xe681("0x40")]&&x.hasOwnProperty(_0xe681("0x40"))&&!a[_0xe681("0x52")](x.name))return _0xe681("0x7d0");if(null!=x[_0xe681("0x2b6")]&&x[_0xe681("0x21")]("NameEn")&&!a[_0xe681("0x52")](x[_0xe681("0x2b6")]))return _0xe681("0x808");if(null!=x.AS&&x[_0xe681("0x21")]("AS")&&_0xe681("0x28")!=typeof x.AS)return _0xe681("0x7d4");if(null!=x.Height&&x[_0xe681("0x21")](_0xe681("0x5cf"))&&!a.isInteger(x[_0xe681("0x5cf")]))return _0xe681("0x809");if(null!=x[_0xe681("0x231")]&&x[_0xe681("0x21")](_0xe681("0x231"))&&!a[_0xe681("0x50")](x[_0xe681("0x231")]))return _0xe681("0x80a");if(null!=x[_0xe681("0x601")]&&x[_0xe681("0x21")](_0xe681("0x601"))&&!a.isString(x[_0xe681("0x601")]))return _0xe681("0x80b");if(null!=x[_0xe681("0x801")]&&x[_0xe681("0x21")](_0xe681("0x801"))&&!a[_0xe681("0x52")](x[_0xe681("0x801")]))return _0xe681("0x80c");if(null!=x[_0xe681("0x603")]&&x.hasOwnProperty(_0xe681("0x603"))){if(!a.isObject(x[_0xe681("0x603")]))return _0xe681("0x80d");for(var e=Object[_0xe681("0x57")](x[_0xe681("0x603")]),_=0;_<e[_0xe681("0x25")];++_){if(!a[_0xe681("0x62")][_0xe681("0x78")](e[_]))return _0xe681("0x80e");var i=r[_0xe681("0x804")][_0xe681("0x7cb")](x.Rooms[e[_]]);if(i)return _0xe681("0x80f")+i}}if(null!=x[_0xe681("0x203")]&&x[_0xe681("0x21")](_0xe681("0x203"))){if(!a[_0xe681("0xd0")](x[_0xe681("0x203")]))return _0xe681("0x810");for(var e=Object[_0xe681("0x57")](x.Facility),_=0;_<e[_0xe681("0x25")];++_){if(!a[_0xe681("0x62")][_0xe681("0x78")](e[_]))return"Facility: integer key{k:int32} expected";var i=r[_0xe681("0x802")][_0xe681("0x7cb")](x.Facility[e[_]]);if(i)return _0xe681("0x811")+i}}if(null!=x[_0xe681("0x610")]&&x[_0xe681("0x21")](_0xe681("0x610"))){if(!a[_0xe681("0xd0")](x.Labels))return"Labels: object expected";for(var e=Object.keys(x.Labels),_=0;_<e[_0xe681("0x25")];++_){if(!a[_0xe681("0x62")][_0xe681("0x78")](e[_]))return _0xe681("0x812");var i=r[_0xe681("0x802")][_0xe681("0x7cb")](x[_0xe681("0x610")][e[_]]);if(i)return _0xe681("0x813")+i}}if(null!=x[_0xe681("0x612")]&&x[_0xe681("0x21")](_0xe681("0x612"))){if(!a.isObject(x.Lifts))return _0xe681("0x814");for(var e=Object.keys(x[_0xe681("0x612")]),_=0;_<e[_0xe681("0x25")];++_){if(!a.key32Re[_0xe681("0x78")](e[_]))return _0xe681("0x815");var i=r.LiftSet[_0xe681("0x7cb")](x.Lifts[e[_]]);if(i)return"Lifts."+i}}return null!=x[_0xe681("0x200")]&&x[_0xe681("0x21")](_0xe681("0x200"))&&!a[_0xe681("0x52")](x[_0xe681("0x200")])?"image: string expected":null!=x[_0xe681("0x29b")]&&x.hasOwnProperty(_0xe681("0x29b"))&&!a[_0xe681("0x52")](x[_0xe681("0x29b")])?_0xe681("0x816"):null!=x[_0xe681("0x7c4")]&&x[_0xe681("0x21")](_0xe681("0x7c4"))&&!a[_0xe681("0x52")](x.other1)?_0xe681("0x7f1"):null!=x[_0xe681("0x7c9")]&&x[_0xe681("0x21")](_0xe681("0x7c9"))&&!a.isString(x[_0xe681("0x7c9")])?_0xe681("0x7f3"):null},x[_0xe681("0x7f6")]=function(x){if(x instanceof r.FloorSet)return x;var e=new r.FloorSet;if(null!=x[_0xe681("0x441")]&&(e[_0xe681("0x441")]=0|x[_0xe681("0x441")]),null!=x[_0xe681("0x1f4")]&&(e[_0xe681("0x1f4")]=0|x[_0xe681("0x1f4")]),null!=x[_0xe681("0x800")]&&(e.floornumtext=0|x[_0xe681("0x800")]),null!=x[_0xe681("0x40")]&&(e[_0xe681("0x40")]=String(x[_0xe681("0x40")])),null!=x.NameEn&&(e[_0xe681("0x2b6")]=String(x[_0xe681("0x2b6")])),null!=x.AS&&(e.AS=Number(x.AS)),null!=x[_0xe681("0x5cf")]&&(e[_0xe681("0x5cf")]=0|x.Height),null!=x[_0xe681("0x231")]&&(e.Elevation=0|x[_0xe681("0x231")]),null!=x[_0xe681("0x601")]&&(e[_0xe681("0x601")]=String(x.Outline)),null!=x[_0xe681("0x801")]&&(e.Alias=String(x[_0xe681("0x801")])),x[_0xe681("0x603")]){if(_0xe681("0x24")!==t(x.Rooms))throw TypeError(_0xe681("0x817"));e.Rooms={};for(var _=Object[_0xe681("0x57")](x[_0xe681("0x603")]),i=0;i<_[_0xe681("0x25")];++i){if(_0xe681("0x24")!==t(x[_0xe681("0x603")][_[i]]))throw TypeError(_0xe681("0x817"));e.Rooms[_[i]]=r[_0xe681("0x804")][_0xe681("0x7f6")](x[_0xe681("0x603")][_[i]])}}if(x[_0xe681("0x203")]){if(_0xe681("0x24")!==t(x[_0xe681("0x203")]))throw TypeError(_0xe681("0x818"));e[_0xe681("0x203")]={};for(var _=Object[_0xe681("0x57")](x[_0xe681("0x203")]),i=0;i<_[_0xe681("0x25")];++i){if("object"!==t(x.Facility[_[i]]))throw TypeError(".FloorSet.Facility: object expected");e.Facility[_[i]]=r[_0xe681("0x802")][_0xe681("0x7f6")](x.Facility[_[i]])}}if(x[_0xe681("0x610")]){if(_0xe681("0x24")!==t(x[_0xe681("0x610")]))throw TypeError(_0xe681("0x819"));e[_0xe681("0x610")]={};for(var _=Object[_0xe681("0x57")](x.Labels),i=0;i<_[_0xe681("0x25")];++i){if(_0xe681("0x24")!==t(x[_0xe681("0x610")][_[i]]))throw TypeError(".FloorSet.Labels: object expected");e[_0xe681("0x610")][_[i]]=r[_0xe681("0x802")][_0xe681("0x7f6")](x[_0xe681("0x610")][_[i]])}}if(x.Lifts){if(_0xe681("0x24")!==t(x[_0xe681("0x612")]))throw TypeError(_0xe681("0x81a"));e[_0xe681("0x612")]={};for(var _=Object[_0xe681("0x57")](x[_0xe681("0x612")]),i=0;i<_.length;++i){if(_0xe681("0x24")!==t(x[_0xe681("0x612")][_[i]]))throw TypeError(_0xe681("0x81a"));e[_0xe681("0x612")][_[i]]=r[_0xe681("0x803")].fromObject(x.Lifts[_[i]])}}return null!=x.image&&(e[_0xe681("0x200")]=String(x.image)),null!=x[_0xe681("0x29b")]&&(e.imagesize=String(x[_0xe681("0x29b")])),null!=x[_0xe681("0x7c4")]&&(e[_0xe681("0x7c4")]=String(x[_0xe681("0x7c4")])),null!=x[_0xe681("0x7c9")]&&(e[_0xe681("0x7c9")]=String(x[_0xe681("0x7c9")])),e},x[_0xe681("0x66")]=x[_0xe681("0x7f6")],x[_0xe681("0x7fc")]=function(x,e){e||(e={});var _={};(e[_0xe681("0x33c")]||e[_0xe681("0x7fd")])&&(_[_0xe681("0x603")]={},_[_0xe681("0x203")]={},_[_0xe681("0x610")]={},_[_0xe681("0x612")]={}),e[_0xe681("0x7fd")]&&(_._id=0,_[_0xe681("0x1f4")]=0,_[_0xe681("0x800")]=0,_[_0xe681("0x40")]="",_[_0xe681("0x2b6")]="",_.AS=0,_[_0xe681("0x5cf")]=0,_[_0xe681("0x231")]=0,_.Outline="",_.Alias="",_[_0xe681("0x200")]="",_[_0xe681("0x29b")]="",_[_0xe681("0x7c4")]="",_[_0xe681("0x7c9")]=""),null!=x[_0xe681("0x441")]&&x[_0xe681("0x21")](_0xe681("0x441"))&&(_[_0xe681("0x441")]=x._id),null!=x[_0xe681("0x1f4")]&&x[_0xe681("0x21")]("floornum")&&(_[_0xe681("0x1f4")]=x[_0xe681("0x1f4")]),null!=x[_0xe681("0x800")]&&x[_0xe681("0x21")](_0xe681("0x800"))&&(_[_0xe681("0x800")]=x[_0xe681("0x800")]),null!=x[_0xe681("0x40")]&&x[_0xe681("0x21")](_0xe681("0x40"))&&(_[_0xe681("0x40")]=x[_0xe681("0x40")]),null!=x[_0xe681("0x2b6")]&&x[_0xe681("0x21")](_0xe681("0x2b6"))&&(_[_0xe681("0x2b6")]=x[_0xe681("0x2b6")]),null!=x.AS&&x.hasOwnProperty("AS")&&(_.AS=x.AS),null!=x[_0xe681("0x5cf")]&&x[_0xe681("0x21")](_0xe681("0x5cf"))&&(_[_0xe681("0x5cf")]=x[_0xe681("0x5cf")]),null!=x[_0xe681("0x231")]&&x[_0xe681("0x21")](_0xe681("0x231"))&&(_[_0xe681("0x231")]=x[_0xe681("0x231")]),null!=x[_0xe681("0x601")]&&x[_0xe681("0x21")](_0xe681("0x601"))&&(_.Outline=x[_0xe681("0x601")]),null!=x.Alias&&x.hasOwnProperty(_0xe681("0x801"))&&(_.Alias=x.Alias);var t;if(x[_0xe681("0x603")]&&(t=Object[_0xe681("0x57")](x.Rooms)).length){_[_0xe681("0x603")]={};for(var i=0;i<t[_0xe681("0x25")];++i)_[_0xe681("0x603")][t[i]]=r[_0xe681("0x804")].toObject(x[_0xe681("0x603")][t[i]],e)}if(x[_0xe681("0x203")]&&(t=Object[_0xe681("0x57")](x[_0xe681("0x203")]))[_0xe681("0x25")]){_[_0xe681("0x203")]={};for(var i=0;i<t[_0xe681("0x25")];++i)_[_0xe681("0x203")][t[i]]=r[_0xe681("0x802")][_0xe681("0x7fc")](x.Facility[t[i]],e)}if(x.Labels&&(t=Object[_0xe681("0x57")](x[_0xe681("0x610")]))[_0xe681("0x25")]){_[_0xe681("0x610")]={};for(var i=0;i<t[_0xe681("0x25")];++i)_.Labels[t[i]]=r[_0xe681("0x802")][_0xe681("0x7fc")](x[_0xe681("0x610")][t[i]],e)}if(x[_0xe681("0x612")]&&(t=Object[_0xe681("0x57")](x[_0xe681("0x612")])).length){_[_0xe681("0x612")]={};for(var i=0;i<t[_0xe681("0x25")];++i)_[_0xe681("0x612")][t[i]]=r[_0xe681("0x803")][_0xe681("0x7fc")](x[_0xe681("0x612")][t[i]],e)}return null!=x[_0xe681("0x200")]&&x[_0xe681("0x21")](_0xe681("0x200"))&&(_[_0xe681("0x200")]=x[_0xe681("0x200")]),null!=x.imagesize&&x[_0xe681("0x21")](_0xe681("0x29b"))&&(_.imagesize=x[_0xe681("0x29b")]),null!=x.other1&&x.hasOwnProperty(_0xe681("0x7c4"))&&(_[_0xe681("0x7c4")]=x[_0xe681("0x7c4")]),null!=x[_0xe681("0x7c9")]&&x.hasOwnProperty(_0xe681("0x7c9"))&&(_[_0xe681("0x7c9")]=x[_0xe681("0x7c9")]),_},x.prototype[_0xe681("0x7fc")]=function(x){return this[_0xe681("0x7b")][_0xe681("0x7fc")](this,x)},x[_0xe681("0x20")].toJSON=function(){return this.constructor[_0xe681("0x7fc")](this,i[_0xe681("0x7b6")][_0xe681("0x7ff")])},x}(),r[_0xe681("0x804")]=function(){function x(x){if(x)for(var e=Object[_0xe681("0x57")](x),_=0;_<e[_0xe681("0x25")];++_)null!=x[e[_]]&&(this[e[_]]=x[e[_]])}return x[_0xe681("0x20")][_0xe681("0x441")]=0,x[_0xe681("0x20")][_0xe681("0x40")]="",x[_0xe681("0x20")].NameEn="",x[_0xe681("0x20")][_0xe681("0x7bb")]="",x.prototype[_0xe681("0x204")]=0,x[_0xe681("0x20")].RL="",x[_0xe681("0x20")][_0xe681("0x60c")]="",x.prototype.BC=0,x[_0xe681("0x20")].RC="",x[_0xe681("0x20")].RH=0,x[_0xe681("0x20")].RM="",x[_0xe681("0x20")].RMS="",x[_0xe681("0x20")].RMR="",x[_0xe681("0x20")].RMO="",x[_0xe681("0x20")].RS=0,x[_0xe681("0x20")].SL=0,x[_0xe681("0x20")][_0xe681("0x605")]=0,x[_0xe681("0x20")][_0xe681("0x606")]=0,x.prototype.AS=0,x.prototype[_0xe681("0x601")]="",x[_0xe681("0x20")][_0xe681("0x81b")]=0,x[_0xe681("0x20")][_0xe681("0x81c")]=0,x[_0xe681("0x20")].FS=0,x.prototype.FC="",x[_0xe681("0x20")].other1="",x[_0xe681("0xda")]=function(e){return new x(e)},x[_0xe681("0x103")]=function(x,e){return e||(e=g[_0xe681("0xda")]()),null!=x[_0xe681("0x441")]&&x.hasOwnProperty(_0xe681("0x441"))&&e[_0xe681("0xdd")](8)[_0xe681("0xde")](x._id),null!=x[_0xe681("0x40")]&&x[_0xe681("0x21")]("name")&&e[_0xe681("0xdd")](18)[_0xe681("0x53")](x[_0xe681("0x40")]),null!=x[_0xe681("0x2b6")]&&x[_0xe681("0x21")](_0xe681("0x2b6"))&&e[_0xe681("0xdd")](26).string(x[_0xe681("0x2b6")]),null!=x.Brief&&x.hasOwnProperty("Brief")&&e.uint32(34)[_0xe681("0x53")](x.Brief),null!=x[_0xe681("0x204")]&&x[_0xe681("0x21")](_0xe681("0x204"))&&e[_0xe681("0xdd")](40)[_0xe681("0xde")](x.Tid),null!=x.RL&&x[_0xe681("0x21")]("RL")&&e[_0xe681("0xdd")](50).string(x.RL),null!=x.RLSize&&x[_0xe681("0x21")](_0xe681("0x60c"))&&e[_0xe681("0xdd")](58)[_0xe681("0x53")](x[_0xe681("0x60c")]),null!=x.BC&&x[_0xe681("0x21")]("BC")&&e[_0xe681("0xdd")](64)[_0xe681("0xde")](x.BC),null!=x.RC&&x[_0xe681("0x21")]("RC")&&e[_0xe681("0xdd")](74)[_0xe681("0x53")](x.RC),null!=x.RH&&x[_0xe681("0x21")]("RH")&&e.uint32(81)[_0xe681("0xfa")](x.RH),null!=x.RM&&x[_0xe681("0x21")]("RM")&&e[_0xe681("0xdd")](90)[_0xe681("0x53")](x.RM),null!=x[_0xe681("0x60e")]&&x[_0xe681("0x21")](_0xe681("0x60e"))&&e[_0xe681("0xdd")](98).string(x[_0xe681("0x60e")]),null!=x[_0xe681("0x60f")]&&x.hasOwnProperty("RMR")&&e.uint32(106)[_0xe681("0x53")](x[_0xe681("0x60f")]),null!=x[_0xe681("0x609")]&&x[_0xe681("0x21")](_0xe681("0x609"))&&e[_0xe681("0xdd")](114)[_0xe681("0x53")](x[_0xe681("0x609")]),null!=x.RS&&x[_0xe681("0x21")]("RS")&&e[_0xe681("0xdd")](120)[_0xe681("0xde")](x.RS),null!=x.SL&&x.hasOwnProperty("SL")&&e[_0xe681("0xdd")](128)[_0xe681("0xde")](x.SL),null!=x[_0xe681("0x605")]&&x[_0xe681("0x21")]("CenX")&&e[_0xe681("0xdd")](137)[_0xe681("0xfa")](x[_0xe681("0x605")]),null!=x[_0xe681("0x606")]&&x[_0xe681("0x21")](_0xe681("0x606"))&&e[_0xe681("0xdd")](145)[_0xe681("0xfa")](x[_0xe681("0x606")]),null!=x.AS&&x.hasOwnProperty("AS")&&e.uint32(153)[_0xe681("0xfa")](x.AS),null!=x[_0xe681("0x601")]&&x[_0xe681("0x21")](_0xe681("0x601"))&&e[_0xe681("0xdd")](162)[_0xe681("0x53")](x[_0xe681("0x601")]),null!=x[_0xe681("0x81b")]&&x[_0xe681("0x21")](_0xe681("0x81b"))&&e[_0xe681("0xdd")](168)[_0xe681("0xde")](x[_0xe681("0x81b")]),null!=x.ShopID&&x[_0xe681("0x21")]("ShopID")&&e[_0xe681("0xdd")](176)[_0xe681("0xde")](x[_0xe681("0x81c")]),null!=x.FS&&x[_0xe681("0x21")]("FS")&&e[_0xe681("0xdd")](184)[_0xe681("0xde")](x.FS),null!=x.FC&&x[_0xe681("0x21")]("FC")&&e[_0xe681("0xdd")](194)[_0xe681("0x53")](x.FC),null!=x[_0xe681("0x7c4")]&&x[_0xe681("0x21")](_0xe681("0x7c4"))&&e[_0xe681("0xdd")](202)[_0xe681("0x53")](x[_0xe681("0x7c4")]),e},x[_0xe681("0x7c8")]=function(x,e){return this[_0xe681("0x103")](x,e)[_0xe681("0x100")]()},x[_0xe681("0xfd")]=function(x,e){x instanceof n||(x=n.create(x));for(var _=void 0===e?x[_0xe681("0xd7")]:x[_0xe681("0xd4")]+e,t=new(r[_0xe681("0x804")]);x.pos<_;){var i=x[_0xe681("0xdd")]();switch(i>>>3){case 1:t[_0xe681("0x441")]=x.int32();break;case 2:t[_0xe681("0x40")]=x.string();break;case 3:t[_0xe681("0x2b6")]=x.string();break;case 4:t.Brief=x[_0xe681("0x53")]();break;case 5:t[_0xe681("0x204")]=x[_0xe681("0xde")]();break;case 6:t.RL=x[_0xe681("0x53")]();break;case 7:t[_0xe681("0x60c")]=x[_0xe681("0x53")]();break;case 8:t.BC=x[_0xe681("0xde")]();break;case 9:t.RC=x[_0xe681("0x53")]();break;case 10:t.RH=x.double();break;case 11:t.RM=x[_0xe681("0x53")]();break;case 12:t[_0xe681("0x60e")]=x[_0xe681("0x53")]();break;case 13:t[_0xe681("0x60f")]=x[_0xe681("0x53")]();break;case 14:t.RMO=x.string();break;case 15:t.RS=x[_0xe681("0xde")]();break;case 16:t.SL=x.int32();break;case 17:t.CenX=x[_0xe681("0xfa")]();break;case 18:t.CenY=x[_0xe681("0xfa")]();break;case 19:t.AS=x[_0xe681("0xfa")]();break;case 20:t[_0xe681("0x601")]=x[_0xe681("0x53")]();break;case 21:t.PointID=x[_0xe681("0xde")]();break;case 22:t[_0xe681("0x81c")]=x[_0xe681("0xde")]();break;case 23:t.FS=x[_0xe681("0xde")]();break;case 24:t.FC=x[_0xe681("0x53")]();break;case 25:t[_0xe681("0x7c4")]=x.string();break;default:x[_0xe681("0xe7")](7&i)}}return t},x[_0xe681("0x7ca")]=function(x){return x instanceof n||(x=n(x)),this[_0xe681("0xfd")](x,x[_0xe681("0xdd")]())},x[_0xe681("0x7cb")]=function(x){return _0xe681("0x24")!==(_0xe681("0xa")==typeof x?_0xe681("0xa"):t(x))||null===x?_0xe681("0x805"):null!=x._id&&x[_0xe681("0x21")](_0xe681("0x441"))&&!a[_0xe681("0x50")](x[_0xe681("0x441")])?_0xe681("0x7ce"):null!=x.name&&x[_0xe681("0x21")]("name")&&!a.isString(x[_0xe681("0x40")])?_0xe681("0x7d0"):null!=x[_0xe681("0x2b6")]&&x[_0xe681("0x21")](_0xe681("0x2b6"))&&!a[_0xe681("0x52")](x.NameEn)?_0xe681("0x808"):null!=x[_0xe681("0x7bb")]&&x[_0xe681("0x21")](_0xe681("0x7bb"))&&!a[_0xe681("0x52")](x[_0xe681("0x7bb")])?_0xe681("0x7d2"):null!=x.Tid&&x[_0xe681("0x21")]("Tid")&&!a[_0xe681("0x50")](x[_0xe681("0x204")])?_0xe681("0x81d"):null!=x.RL&&x[_0xe681("0x21")]("RL")&&!a[_0xe681("0x52")](x.RL)?_0xe681("0x81e"):null!=x.RLSize&&x[_0xe681("0x21")](_0xe681("0x60c"))&&!a[_0xe681("0x52")](x[_0xe681("0x60c")])?_0xe681("0x81f"):null!=x.BC&&x[_0xe681("0x21")]("BC")&&!a.isInteger(x.BC)?_0xe681("0x820"):null!=x.RC&&x.hasOwnProperty("RC")&&!a[_0xe681("0x52")](x.RC)?_0xe681("0x821"):null!=x.RH&&x[_0xe681("0x21")]("RH")&&_0xe681("0x28")!=typeof x.RH?_0xe681("0x822"):null!=x.RM&&x[_0xe681("0x21")]("RM")&&!a[_0xe681("0x52")](x.RM)?"RM: string expected":null!=x[_0xe681("0x60e")]&&x[_0xe681("0x21")](_0xe681("0x60e"))&&!a[_0xe681("0x52")](x[_0xe681("0x60e")])?"RMS: string expected":null!=x[_0xe681("0x60f")]&&x[_0xe681("0x21")](_0xe681("0x60f"))&&!a[_0xe681("0x52")](x[_0xe681("0x60f")])?_0xe681("0x823"):null!=x[_0xe681("0x609")]&&x[_0xe681("0x21")]("RMO")&&!a[_0xe681("0x52")](x[_0xe681("0x609")])?_0xe681("0x824"):null!=x.RS&&x[_0xe681("0x21")]("RS")&&!a.isInteger(x.RS)?_0xe681("0x825"):null!=x.SL&&x[_0xe681("0x21")]("SL")&&!a[_0xe681("0x50")](x.SL)?_0xe681("0x826"):null!=x.CenX&&x[_0xe681("0x21")]("CenX")&&_0xe681("0x28")!=typeof x[_0xe681("0x605")]?_0xe681("0x827"):null!=x[_0xe681("0x606")]&&x[_0xe681("0x21")](_0xe681("0x606"))&&_0xe681("0x28")!=typeof x[_0xe681("0x606")]?_0xe681("0x828"):null!=x.AS&&x[_0xe681("0x21")]("AS")&&_0xe681("0x28")!=typeof x.AS?_0xe681("0x7d4"):null!=x.Outline&&x.hasOwnProperty(_0xe681("0x601"))&&!a[_0xe681("0x52")](x[_0xe681("0x601")])?_0xe681("0x80b"):null!=x[_0xe681("0x81b")]&&x[_0xe681("0x21")](_0xe681("0x81b"))&&!a[_0xe681("0x50")](x[_0xe681("0x81b")])?_0xe681("0x829"):null!=x.ShopID&&x[_0xe681("0x21")](_0xe681("0x81c"))&&!a[_0xe681("0x50")](x[_0xe681("0x81c")])?_0xe681("0x82a"):null!=x.FS&&x[_0xe681("0x21")]("FS")&&!a.isInteger(x.FS)?_0xe681("0x82b"):null!=x.FC&&x[_0xe681("0x21")]("FC")&&!a[_0xe681("0x52")](x.FC)?"FC: string expected":null!=x.other1&&x.hasOwnProperty(_0xe681("0x7c4"))&&!a[_0xe681("0x52")](x[_0xe681("0x7c4")])?_0xe681("0x7f1"):null},x[_0xe681("0x7f6")]=function(x){if(x instanceof r.RoomSet)return x;var e=new(r[_0xe681("0x804")]);return null!=x._id&&(e[_0xe681("0x441")]=0|x[_0xe681("0x441")]),null!=x[_0xe681("0x40")]&&(e[_0xe681("0x40")]=String(x.name)),null!=x[_0xe681("0x2b6")]&&(e[_0xe681("0x2b6")]=String(x[_0xe681("0x2b6")])),null!=x[_0xe681("0x7bb")]&&(e[_0xe681("0x7bb")]=String(x.Brief)),null!=x[_0xe681("0x204")]&&(e[_0xe681("0x204")]=0|x[_0xe681("0x204")]),null!=x.RL&&(e.RL=String(x.RL)),null!=x[_0xe681("0x60c")]&&(e[_0xe681("0x60c")]=String(x[_0xe681("0x60c")])),null!=x.BC&&(e.BC=0|x.BC),null!=x.RC&&(e.RC=String(x.RC)),null!=x.RH&&(e.RH=Number(x.RH)),null!=x.RM&&(e.RM=String(x.RM)),null!=x[_0xe681("0x60e")]&&(e[_0xe681("0x60e")]=String(x[_0xe681("0x60e")])),null!=x[_0xe681("0x60f")]&&(e[_0xe681("0x60f")]=String(x[_0xe681("0x60f")])),null!=x[_0xe681("0x609")]&&(e.RMO=String(x[_0xe681("0x609")])),null!=x.RS&&(e.RS=0|x.RS),null!=x.SL&&(e.SL=0|x.SL),null!=x.CenX&&(e[_0xe681("0x605")]=Number(x.CenX)),null!=x[_0xe681("0x606")]&&(e[_0xe681("0x606")]=Number(x[_0xe681("0x606")])),null!=x.AS&&(e.AS=Number(x.AS)),null!=x[_0xe681("0x601")]&&(e.Outline=String(x[_0xe681("0x601")])),null!=x[_0xe681("0x81b")]&&(e[_0xe681("0x81b")]=0|x[_0xe681("0x81b")]),null!=x.ShopID&&(e[_0xe681("0x81c")]=0|x[_0xe681("0x81c")]),null!=x.FS&&(e.FS=0|x.FS),null!=x.FC&&(e.FC=String(x.FC)),null!=x.other1&&(e[_0xe681("0x7c4")]=String(x[_0xe681("0x7c4")])),e},x.from=x[_0xe681("0x7f6")],x[_0xe681("0x7fc")]=function(x,e){e||(e={});var _={};return e[_0xe681("0x7fd")]&&(_[_0xe681("0x441")]=0,_[_0xe681("0x40")]="",_[_0xe681("0x2b6")]="",_[_0xe681("0x7bb")]="",_[_0xe681("0x204")]=0,_.RL="",_[_0xe681("0x60c")]="",_.BC=0,_.RC="",_.RH=0,_.RM="",_[_0xe681("0x60e")]="",_[_0xe681("0x60f")]="",_[_0xe681("0x609")]="",_.RS=0,_.SL=0,_[_0xe681("0x605")]=0,_[_0xe681("0x606")]=0,_.AS=0,_.Outline="",_[_0xe681("0x81b")]=0,_[_0xe681("0x81c")]=0,_.FS=0,_.FC="",_.other1=""),null!=x[_0xe681("0x441")]&&x.hasOwnProperty(_0xe681("0x441"))&&(_[_0xe681("0x441")]=x._id),null!=x[_0xe681("0x40")]&&x[_0xe681("0x21")](_0xe681("0x40"))&&(_[_0xe681("0x40")]=x.name),null!=x.NameEn&&x[_0xe681("0x21")]("NameEn")&&(_[_0xe681("0x2b6")]=x[_0xe681("0x2b6")]),null!=x[_0xe681("0x7bb")]&&x[_0xe681("0x21")](_0xe681("0x7bb"))&&(_[_0xe681("0x7bb")]=x.Brief),null!=x[_0xe681("0x204")]&&x[_0xe681("0x21")](_0xe681("0x204"))&&(_[_0xe681("0x204")]=x[_0xe681("0x204")]),null!=x.RL&&x[_0xe681("0x21")]("RL")&&(_.RL=x.RL),null!=x[_0xe681("0x60c")]&&x[_0xe681("0x21")](_0xe681("0x60c"))&&(_[_0xe681("0x60c")]=x.RLSize),null!=x.BC&&x[_0xe681("0x21")]("BC")&&(_.BC=x.BC),null!=x.RC&&x[_0xe681("0x21")]("RC")&&(_.RC=x.RC),null!=x.RH&&x[_0xe681("0x21")]("RH")&&(_.RH=x.RH),null!=x.RM&&x[_0xe681("0x21")]("RM")&&(_.RM=x.RM),null!=x[_0xe681("0x60e")]&&x[_0xe681("0x21")](_0xe681("0x60e"))&&(_[_0xe681("0x60e")]=x[_0xe681("0x60e")]),null!=x[_0xe681("0x60f")]&&x[_0xe681("0x21")]("RMR")&&(_.RMR=x[_0xe681("0x60f")]),null!=x[_0xe681("0x609")]&&x[_0xe681("0x21")](_0xe681("0x609"))&&(_[_0xe681("0x609")]=x[_0xe681("0x609")]),null!=x.RS&&x[_0xe681("0x21")]("RS")&&(_.RS=x.RS),null!=x.SL&&x[_0xe681("0x21")]("SL")&&(_.SL=x.SL),null!=x[_0xe681("0x605")]&&x[_0xe681("0x21")](_0xe681("0x605"))&&(_[_0xe681("0x605")]=x[_0xe681("0x605")]),null!=x.CenY&&x[_0xe681("0x21")](_0xe681("0x606"))&&(_[_0xe681("0x606")]=x[_0xe681("0x606")]),null!=x.AS&&x.hasOwnProperty("AS")&&(_.AS=x.AS),null!=x[_0xe681("0x601")]&&x[_0xe681("0x21")](_0xe681("0x601"))&&(_[_0xe681("0x601")]=x[_0xe681("0x601")]),null!=x[_0xe681("0x81b")]&&x.hasOwnProperty(_0xe681("0x81b"))&&(_[_0xe681("0x81b")]=x[_0xe681("0x81b")]),null!=x[_0xe681("0x81c")]&&x.hasOwnProperty(_0xe681("0x81c"))&&(_[_0xe681("0x81c")]=x[_0xe681("0x81c")]),null!=x.FS&&x[_0xe681("0x21")]("FS")&&(_.FS=x.FS),null!=x.FC&&x[_0xe681("0x21")]("FC")&&(_.FC=x.FC),null!=x[_0xe681("0x7c4")]&&x[_0xe681("0x21")]("other1")&&(_[_0xe681("0x7c4")]=x[_0xe681("0x7c4")]),_},x.prototype[_0xe681("0x7fc")]=function(x){return this[_0xe681("0x7b")][_0xe681("0x7fc")](this,x)},x[_0xe681("0x20")][_0xe681("0x7fe")]=function(){return this[_0xe681("0x7b")][_0xe681("0x7fc")](this,i[_0xe681("0x7b6")][_0xe681("0x7ff")])},x}(),r[_0xe681("0x802")]=function(){function x(x){if(x)for(var e=Object[_0xe681("0x57")](x),_=0;_<e[_0xe681("0x25")];++_)null!=x[e[_]]&&(this[e[_]]=x[e[_]])}return x[_0xe681("0x20")][_0xe681("0x441")]=0,x[_0xe681("0x20")].name="",x[_0xe681("0x20")].NameEn="",x[_0xe681("0x20")][_0xe681("0x7bb")]="",x[_0xe681("0x20")][_0xe681("0x204")]=0,x[_0xe681("0x20")].X=0,x[_0xe681("0x20")].Y=0,x[_0xe681("0x20")].SL=0,x[_0xe681("0x20")].SH=0,x[_0xe681("0x20")].w=0,x.prototype.h=0,x[_0xe681("0x20")][_0xe681("0x200")]="",x[_0xe681("0x20")][_0xe681("0x82c")]=0,x[_0xe681("0x20")][_0xe681("0x7c4")]="",x[_0xe681("0x20")][_0xe681("0x82d")]=0,x[_0xe681("0xda")]=function(e){return new x(e)},x.encode=function(x,e){return e||(e=g[_0xe681("0xda")]()),null!=x[_0xe681("0x441")]&&x[_0xe681("0x21")](_0xe681("0x441"))&&e[_0xe681("0xdd")](8)[_0xe681("0xde")](x[_0xe681("0x441")]),null!=x[_0xe681("0x40")]&&x[_0xe681("0x21")]("name")&&e[_0xe681("0xdd")](18)[_0xe681("0x53")](x[_0xe681("0x40")]),null!=x[_0xe681("0x2b6")]&&x[_0xe681("0x21")](_0xe681("0x2b6"))&&e[_0xe681("0xdd")](26)[_0xe681("0x53")](x[_0xe681("0x2b6")]),null!=x[_0xe681("0x7bb")]&&x[_0xe681("0x21")](_0xe681("0x7bb"))&&e[_0xe681("0xdd")](34)[_0xe681("0x53")](x[_0xe681("0x7bb")]),null!=x[_0xe681("0x204")]&&x[_0xe681("0x21")](_0xe681("0x204"))&&e[_0xe681("0xdd")](40)[_0xe681("0xde")](x[_0xe681("0x204")]),null!=x.X&&x[_0xe681("0x21")]("X")&&e[_0xe681("0xdd")](49)[_0xe681("0xfa")](x.X),null!=x.Y&&x.hasOwnProperty("Y")&&e[_0xe681("0xdd")](57)[_0xe681("0xfa")](x.Y),null!=x.SL&&x[_0xe681("0x21")]("SL")&&e[_0xe681("0xdd")](64)[_0xe681("0xde")](x.SL),null!=x.SH&&x[_0xe681("0x21")]("SH")&&e[_0xe681("0xdd")](77)[_0xe681("0x44")](x.SH),null!=x.w&&x[_0xe681("0x21")]("w")&&e.uint32(85).float(x.w),null!=x.h&&x[_0xe681("0x21")]("h")&&e.uint32(93).float(x.h),null!=x.image&&x[_0xe681("0x21")](_0xe681("0x200"))&&e[_0xe681("0xdd")](98).string(x[_0xe681("0x200")]),null!=x[_0xe681("0x82c")]&&x[_0xe681("0x21")](_0xe681("0x82c"))&&e.uint32(104)[_0xe681("0xde")](x[_0xe681("0x82c")]),null!=x[_0xe681("0x7c4")]&&x[_0xe681("0x21")]("other1")&&e[_0xe681("0xdd")](114)[_0xe681("0x53")](x[_0xe681("0x7c4")]),null!=x[_0xe681("0x82d")]&&x[_0xe681("0x21")](_0xe681("0x82d"))&&e[_0xe681("0xdd")](120)[_0xe681("0xde")](x[_0xe681("0x82d")]),e},x[_0xe681("0x7c8")]=function(x,e){return this.encode(x,e).ldelim()},x.decode=function(x,e){x instanceof n||(x=n.create(x));for(var _=void 0===e?x[_0xe681("0xd7")]:x[_0xe681("0xd4")]+e,t=new(r[_0xe681("0x802")]);x[_0xe681("0xd4")]<_;){var i=x[_0xe681("0xdd")]();switch(i>>>3){case 1:t[_0xe681("0x441")]=x[_0xe681("0xde")]();break;case 2:t[_0xe681("0x40")]=x[_0xe681("0x53")]();break;case 3:t[_0xe681("0x2b6")]=x[_0xe681("0x53")]();break;case 4:t[_0xe681("0x7bb")]=x.string();break;case 5:t.Tid=x[_0xe681("0xde")]();break;case 6:t.X=x[_0xe681("0xfa")]();break;case 7:t.Y=x[_0xe681("0xfa")]();break;case 8:t.SL=x[_0xe681("0xde")]();break;case 9:t.SH=x.float();break;case 10:t.w=x[_0xe681("0x44")]();break;case 11:t.h=x[_0xe681("0x44")]();break;case 12:t[_0xe681("0x200")]=x[_0xe681("0x53")]();break;case 13:t[_0xe681("0x82c")]=x[_0xe681("0xde")]();break;case 14:t[_0xe681("0x7c4")]=x[_0xe681("0x53")]();break;case 15:t.ipos=x[_0xe681("0xde")]();break;default:x[_0xe681("0xe7")](7&i)}}return t},x[_0xe681("0x7ca")]=function(x){return x instanceof n||(x=n(x)),this[_0xe681("0xfd")](x,x[_0xe681("0xdd")]())},x.verify=function(x){return"object"!==("undefined"==typeof x?_0xe681("0xa"):t(x))||null===x?_0xe681("0x805"):null!=x[_0xe681("0x441")]&&x[_0xe681("0x21")](_0xe681("0x441"))&&!a[_0xe681("0x50")](x[_0xe681("0x441")])?"_id: integer expected":null!=x[_0xe681("0x40")]&&x[_0xe681("0x21")](_0xe681("0x40"))&&!a[_0xe681("0x52")](x[_0xe681("0x40")])?_0xe681("0x7d0"):null!=x[_0xe681("0x2b6")]&&x[_0xe681("0x21")](_0xe681("0x2b6"))&&!a[_0xe681("0x52")](x[_0xe681("0x2b6")])?"NameEn: string expected":null!=x[_0xe681("0x7bb")]&&x[_0xe681("0x21")](_0xe681("0x7bb"))&&!a[_0xe681("0x52")](x.Brief)?"Brief: string expected":null!=x[_0xe681("0x204")]&&x[_0xe681("0x21")]("Tid")&&!a[_0xe681("0x50")](x[_0xe681("0x204")])?_0xe681("0x81d"):null!=x.X&&x[_0xe681("0x21")]("X")&&_0xe681("0x28")!=typeof x.X?_0xe681("0x82e"):null!=x.Y&&x.hasOwnProperty("Y")&&"number"!=typeof x.Y?_0xe681("0x82f"):null!=x.SL&&x[_0xe681("0x21")]("SL")&&!a[_0xe681("0x50")](x.SL)?_0xe681("0x826"):null!=x.SH&&x[_0xe681("0x21")]("SH")&&_0xe681("0x28")!=typeof x.SH?_0xe681("0x830"):null!=x.w&&x.hasOwnProperty("w")&&_0xe681("0x28")!=typeof x.w?_0xe681("0x831"):null!=x.h&&x[_0xe681("0x21")]("h")&&_0xe681("0x28")!=typeof x.h?_0xe681("0x832"):null!=x[_0xe681("0x200")]&&x.hasOwnProperty(_0xe681("0x200"))&&!a[_0xe681("0x52")](x[_0xe681("0x200")])?_0xe681("0x833"):null!=x[_0xe681("0x82c")]&&x[_0xe681("0x21")]("FSId")&&!a[_0xe681("0x50")](x[_0xe681("0x82c")])?_0xe681("0x834"):null!=x.other1&&x[_0xe681("0x21")](_0xe681("0x7c4"))&&!a.isString(x[_0xe681("0x7c4")])?_0xe681("0x7f1"):null!=x[_0xe681("0x82d")]&&x.hasOwnProperty("ipos")&&!a[_0xe681("0x50")](x[_0xe681("0x82d")])?"ipos: integer expected":null},x[_0xe681("0x7f6")]=function(x){if(x instanceof r[_0xe681("0x802")])return x;var e=new(r[_0xe681("0x802")]);return null!=x[_0xe681("0x441")]&&(e[_0xe681("0x441")]=0|x[_0xe681("0x441")]),null!=x.name&&(e[_0xe681("0x40")]=String(x.name)),null!=x[_0xe681("0x2b6")]&&(e[_0xe681("0x2b6")]=String(x.NameEn)),null!=x[_0xe681("0x7bb")]&&(e[_0xe681("0x7bb")]=String(x[_0xe681("0x7bb")])),null!=x[_0xe681("0x204")]&&(e.Tid=0|x[_0xe681("0x204")]),null!=x.X&&(e.X=Number(x.X)),null!=x.Y&&(e.Y=Number(x.Y)),null!=x.SL&&(e.SL=0|x.SL),null!=x.SH&&(e.SH=Number(x.SH)),null!=x.w&&(e.w=Number(x.w)),null!=x.h&&(e.h=Number(x.h)),null!=x.image&&(e[_0xe681("0x200")]=String(x.image)),null!=x[_0xe681("0x82c")]&&(e[_0xe681("0x82c")]=0|x[_0xe681("0x82c")]),null!=x.other1&&(e.other1=String(x.other1)),null!=x[_0xe681("0x82d")]&&(e.ipos=0|x[_0xe681("0x82d")]),e},x[_0xe681("0x66")]=x[_0xe681("0x7f6")],x.toObject=function(x,e){e||(e={});var _={};return e[_0xe681("0x7fd")]&&(_[_0xe681("0x441")]=0,_[_0xe681("0x40")]="",_.NameEn="",_.Brief="",_.Tid=0,_.X=0,_.Y=0,_.SL=0,_.SH=0,_.w=0,_.h=0,_.image="",_[_0xe681("0x82c")]=0,_[_0xe681("0x7c4")]="",_[_0xe681("0x82d")]=0),null!=x[_0xe681("0x441")]&&x.hasOwnProperty(_0xe681("0x441"))&&(_[_0xe681("0x441")]=x[_0xe681("0x441")]),null!=x[_0xe681("0x40")]&&x[_0xe681("0x21")](_0xe681("0x40"))&&(_[_0xe681("0x40")]=x.name),null!=x[_0xe681("0x2b6")]&&x.hasOwnProperty(_0xe681("0x2b6"))&&(_[_0xe681("0x2b6")]=x[_0xe681("0x2b6")]),null!=x[_0xe681("0x7bb")]&&x[_0xe681("0x21")](_0xe681("0x7bb"))&&(_[_0xe681("0x7bb")]=x[_0xe681("0x7bb")]),null!=x[_0xe681("0x204")]&&x[_0xe681("0x21")](_0xe681("0x204"))&&(_[_0xe681("0x204")]=x[_0xe681("0x204")]),null!=x.X&&x[_0xe681("0x21")]("X")&&(_.X=x.X),null!=x.Y&&x[_0xe681("0x21")]("Y")&&(_.Y=x.Y),null!=x.SL&&x[_0xe681("0x21")]("SL")&&(_.SL=x.SL),null!=x.SH&&x[_0xe681("0x21")]("SH")&&(_.SH=x.SH),null!=x.w&&x.hasOwnProperty("w")&&(_.w=x.w),null!=x.h&&x[_0xe681("0x21")]("h")&&(_.h=x.h),null!=x[_0xe681("0x200")]&&x[_0xe681("0x21")](_0xe681("0x200"))&&(_[_0xe681("0x200")]=x[_0xe681("0x200")]),null!=x[_0xe681("0x82c")]&&x[_0xe681("0x21")](_0xe681("0x82c"))&&(_[_0xe681("0x82c")]=x[_0xe681("0x82c")]),null!=x[_0xe681("0x7c4")]&&x[_0xe681("0x21")](_0xe681("0x7c4"))&&(_[_0xe681("0x7c4")]=x.other1),null!=x[_0xe681("0x82d")]&&x[_0xe681("0x21")](_0xe681("0x82d"))&&(_.ipos=x.ipos),_},x[_0xe681("0x20")].toObject=function(x){return this[_0xe681("0x7b")].toObject(this,x)},x[_0xe681("0x20")].toJSON=function(){
return this[_0xe681("0x7b")].toObject(this,i[_0xe681("0x7b6")][_0xe681("0x7ff")])},x}(),r[_0xe681("0x803")]=function(){function x(x){if(x)for(var e=Object.keys(x),_=0;_<e[_0xe681("0x25")];++_)null!=x[e[_]]&&(this[e[_]]=x[e[_]])}return x.prototype._id=0,x[_0xe681("0x20")][_0xe681("0x40")]="",x[_0xe681("0x20")][_0xe681("0x204")]=0,x[_0xe681("0x20")].F1=0,x.prototype.F2=0,x[_0xe681("0x20")].ST=0,x[_0xe681("0x20")].LT=0,x.prototype.LH=0,x[_0xe681("0x20")].LM="",x[_0xe681("0x20")].LS="",x.prototype.LR="",x[_0xe681("0x20")].LO="",x[_0xe681("0x20")].X1=0,x[_0xe681("0x20")].X2=0,x[_0xe681("0x20")].Y1=0,x[_0xe681("0x20")].Y2=0,x[_0xe681("0x20")].O1="",x[_0xe681("0x20")].O2="",x[_0xe681("0x20")][_0xe681("0x7c4")]="",x[_0xe681("0xda")]=function(e){return new x(e)},x[_0xe681("0x103")]=function(x,e){return e||(e=g[_0xe681("0xda")]()),null!=x[_0xe681("0x441")]&&x[_0xe681("0x21")](_0xe681("0x441"))&&e[_0xe681("0xdd")](8)[_0xe681("0xde")](x._id),null!=x[_0xe681("0x40")]&&x[_0xe681("0x21")](_0xe681("0x40"))&&e[_0xe681("0xdd")](18)[_0xe681("0x53")](x.name),null!=x[_0xe681("0x204")]&&x[_0xe681("0x21")](_0xe681("0x204"))&&e.uint32(24)[_0xe681("0xde")](x[_0xe681("0x204")]),null!=x.F1&&x[_0xe681("0x21")]("F1")&&e[_0xe681("0xdd")](32)[_0xe681("0xde")](x.F1),null!=x.F2&&x[_0xe681("0x21")]("F2")&&e.uint32(40)[_0xe681("0xde")](x.F2),null!=x.ST&&x[_0xe681("0x21")]("ST")&&e[_0xe681("0xdd")](48)[_0xe681("0xde")](x.ST),null!=x.LT&&x[_0xe681("0x21")]("LT")&&e[_0xe681("0xdd")](56)[_0xe681("0xde")](x.LT),null!=x.LH&&x[_0xe681("0x21")]("LH")&&e.uint32(64)[_0xe681("0xde")](x.LH),null!=x.LM&&x.hasOwnProperty("LM")&&e[_0xe681("0xdd")](74).string(x.LM),null!=x.LS&&x.hasOwnProperty("LS")&&e[_0xe681("0xdd")](82)[_0xe681("0x53")](x.LS),null!=x.LR&&x[_0xe681("0x21")]("LR")&&e[_0xe681("0xdd")](90).string(x.LR),null!=x.LO&&x[_0xe681("0x21")]("LO")&&e[_0xe681("0xdd")](98)[_0xe681("0x53")](x.LO),null!=x.X1&&x[_0xe681("0x21")]("X1")&&e[_0xe681("0xdd")](105)[_0xe681("0xfa")](x.X1),null!=x.X2&&x[_0xe681("0x21")]("X2")&&e[_0xe681("0xdd")](113)[_0xe681("0xfa")](x.X2),null!=x.Y1&&x.hasOwnProperty("Y1")&&e[_0xe681("0xdd")](121).double(x.Y1),null!=x.Y2&&x[_0xe681("0x21")]("Y2")&&e[_0xe681("0xdd")](129)[_0xe681("0xfa")](x.Y2),null!=x.O1&&x[_0xe681("0x21")]("O1")&&e[_0xe681("0xdd")](138)[_0xe681("0x53")](x.O1),null!=x.O2&&x[_0xe681("0x21")]("O2")&&e[_0xe681("0xdd")](146).string(x.O2),null!=x[_0xe681("0x7c4")]&&x.hasOwnProperty(_0xe681("0x7c4"))&&e[_0xe681("0xdd")](154)[_0xe681("0x53")](x[_0xe681("0x7c4")]),e},x[_0xe681("0x7c8")]=function(x,e){return this[_0xe681("0x103")](x,e)[_0xe681("0x100")]()},x[_0xe681("0xfd")]=function(x,e){x instanceof n||(x=n.create(x));for(var _=void 0===e?x[_0xe681("0xd7")]:x.pos+e,t=new r.LiftSet;x[_0xe681("0xd4")]<_;){var i=x.uint32();switch(i>>>3){case 1:t[_0xe681("0x441")]=x[_0xe681("0xde")]();break;case 2:t[_0xe681("0x40")]=x[_0xe681("0x53")]();break;case 3:t[_0xe681("0x204")]=x[_0xe681("0xde")]();break;case 4:t.F1=x[_0xe681("0xde")]();break;case 5:t.F2=x[_0xe681("0xde")]();break;case 6:t.ST=x[_0xe681("0xde")]();break;case 7:t.LT=x[_0xe681("0xde")]();break;case 8:t.LH=x.int32();break;case 9:t.LM=x[_0xe681("0x53")]();break;case 10:t.LS=x[_0xe681("0x53")]();break;case 11:t.LR=x[_0xe681("0x53")]();break;case 12:t.LO=x[_0xe681("0x53")]();break;case 13:t.X1=x[_0xe681("0xfa")]();break;case 14:t.X2=x.double();break;case 15:t.Y1=x[_0xe681("0xfa")]();break;case 16:t.Y2=x[_0xe681("0xfa")]();break;case 17:t.O1=x[_0xe681("0x53")]();break;case 18:t.O2=x[_0xe681("0x53")]();break;case 19:t[_0xe681("0x7c4")]=x[_0xe681("0x53")]();break;default:x[_0xe681("0xe7")](7&i)}}return t},x[_0xe681("0x7ca")]=function(x){return x instanceof n||(x=n(x)),this[_0xe681("0xfd")](x,x[_0xe681("0xdd")]())},x[_0xe681("0x7cb")]=function(x){return"object"!==(_0xe681("0xa")==typeof x?"undefined":t(x))||null===x?"object expected":null!=x[_0xe681("0x441")]&&x[_0xe681("0x21")](_0xe681("0x441"))&&!a.isInteger(x[_0xe681("0x441")])?_0xe681("0x7ce"):null!=x[_0xe681("0x40")]&&x[_0xe681("0x21")](_0xe681("0x40"))&&!a[_0xe681("0x52")](x[_0xe681("0x40")])?_0xe681("0x7d0"):null!=x[_0xe681("0x204")]&&x[_0xe681("0x21")]("Tid")&&!a[_0xe681("0x50")](x.Tid)?_0xe681("0x81d"):null!=x.F1&&x[_0xe681("0x21")]("F1")&&!a.isInteger(x.F1)?_0xe681("0x835"):null!=x.F2&&x[_0xe681("0x21")]("F2")&&!a[_0xe681("0x50")](x.F2)?_0xe681("0x836"):null!=x.ST&&x.hasOwnProperty("ST")&&!a[_0xe681("0x50")](x.ST)?_0xe681("0x837"):null!=x.LT&&x[_0xe681("0x21")]("LT")&&!a[_0xe681("0x50")](x.LT)?_0xe681("0x838"):null!=x.LH&&x[_0xe681("0x21")]("LH")&&!a[_0xe681("0x50")](x.LH)?_0xe681("0x839"):null!=x.LM&&x[_0xe681("0x21")]("LM")&&!a[_0xe681("0x52")](x.LM)?_0xe681("0x83a"):null!=x.LS&&x[_0xe681("0x21")]("LS")&&!a[_0xe681("0x52")](x.LS)?_0xe681("0x83b"):null!=x.LR&&x[_0xe681("0x21")]("LR")&&!a[_0xe681("0x52")](x.LR)?_0xe681("0x83c"):null!=x.LO&&x.hasOwnProperty("LO")&&!a[_0xe681("0x52")](x.LO)?_0xe681("0x83d"):null!=x.X1&&x[_0xe681("0x21")]("X1")&&_0xe681("0x28")!=typeof x.X1?"X1: number expected":null!=x.X2&&x[_0xe681("0x21")]("X2")&&_0xe681("0x28")!=typeof x.X2?_0xe681("0x83e"):null!=x.Y1&&x.hasOwnProperty("Y1")&&_0xe681("0x28")!=typeof x.Y1?_0xe681("0x83f"):null!=x.Y2&&x[_0xe681("0x21")]("Y2")&&_0xe681("0x28")!=typeof x.Y2?_0xe681("0x840"):null!=x.O1&&x[_0xe681("0x21")]("O1")&&!a[_0xe681("0x52")](x.O1)?"O1: string expected":null!=x.O2&&x.hasOwnProperty("O2")&&!a[_0xe681("0x52")](x.O2)?_0xe681("0x841"):null!=x.other1&&x[_0xe681("0x21")](_0xe681("0x7c4"))&&!a[_0xe681("0x52")](x[_0xe681("0x7c4")])?"other1: string expected":null},x[_0xe681("0x7f6")]=function(x){if(x instanceof r.LiftSet)return x;var e=new(r[_0xe681("0x803")]);return null!=x[_0xe681("0x441")]&&(e[_0xe681("0x441")]=0|x[_0xe681("0x441")]),null!=x[_0xe681("0x40")]&&(e.name=String(x[_0xe681("0x40")])),null!=x[_0xe681("0x204")]&&(e[_0xe681("0x204")]=0|x.Tid),null!=x.F1&&(e.F1=0|x.F1),null!=x.F2&&(e.F2=0|x.F2),null!=x.ST&&(e.ST=0|x.ST),null!=x.LT&&(e.LT=0|x.LT),null!=x.LH&&(e.LH=0|x.LH),null!=x.LM&&(e.LM=String(x.LM)),null!=x.LS&&(e.LS=String(x.LS)),null!=x.LR&&(e.LR=String(x.LR)),null!=x.LO&&(e.LO=String(x.LO)),null!=x.X1&&(e.X1=Number(x.X1)),null!=x.X2&&(e.X2=Number(x.X2)),null!=x.Y1&&(e.Y1=Number(x.Y1)),null!=x.Y2&&(e.Y2=Number(x.Y2)),null!=x.O1&&(e.O1=String(x.O1)),null!=x.O2&&(e.O2=String(x.O2)),null!=x.other1&&(e[_0xe681("0x7c4")]=String(x[_0xe681("0x7c4")])),e},x[_0xe681("0x66")]=x[_0xe681("0x7f6")],x.toObject=function(x,e){e||(e={});var _={};return e[_0xe681("0x7fd")]&&(_._id=0,_[_0xe681("0x40")]="",_[_0xe681("0x204")]=0,_.F1=0,_.F2=0,_.ST=0,_.LT=0,_.LH=0,_.LM="",_.LS="",_.LR="",_.LO="",_.X1=0,_.X2=0,_.Y1=0,_.Y2=0,_.O1="",_.O2="",_[_0xe681("0x7c4")]=""),null!=x[_0xe681("0x441")]&&x[_0xe681("0x21")](_0xe681("0x441"))&&(_._id=x[_0xe681("0x441")]),null!=x[_0xe681("0x40")]&&x.hasOwnProperty(_0xe681("0x40"))&&(_[_0xe681("0x40")]=x[_0xe681("0x40")]),null!=x.Tid&&x.hasOwnProperty("Tid")&&(_[_0xe681("0x204")]=x.Tid),null!=x.F1&&x[_0xe681("0x21")]("F1")&&(_.F1=x.F1),null!=x.F2&&x[_0xe681("0x21")]("F2")&&(_.F2=x.F2),null!=x.ST&&x[_0xe681("0x21")]("ST")&&(_.ST=x.ST),null!=x.LT&&x.hasOwnProperty("LT")&&(_.LT=x.LT),null!=x.LH&&x[_0xe681("0x21")]("LH")&&(_.LH=x.LH),null!=x.LM&&x[_0xe681("0x21")]("LM")&&(_.LM=x.LM),null!=x.LS&&x.hasOwnProperty("LS")&&(_.LS=x.LS),null!=x.LR&&x[_0xe681("0x21")]("LR")&&(_.LR=x.LR),null!=x.LO&&x[_0xe681("0x21")]("LO")&&(_.LO=x.LO),null!=x.X1&&x.hasOwnProperty("X1")&&(_.X1=x.X1),null!=x.X2&&x.hasOwnProperty("X2")&&(_.X2=x.X2),null!=x.Y1&&x[_0xe681("0x21")]("Y1")&&(_.Y1=x.Y1),null!=x.Y2&&x.hasOwnProperty("Y2")&&(_.Y2=x.Y2),null!=x.O1&&x[_0xe681("0x21")]("O1")&&(_.O1=x.O1),null!=x.O2&&x[_0xe681("0x21")]("O2")&&(_.O2=x.O2),null!=x[_0xe681("0x7c4")]&&x.hasOwnProperty(_0xe681("0x7c4"))&&(_[_0xe681("0x7c4")]=x[_0xe681("0x7c4")]),_},x[_0xe681("0x20")][_0xe681("0x7fc")]=function(x){return this[_0xe681("0x7b")][_0xe681("0x7fc")](this,x)},x.prototype[_0xe681("0x7fe")]=function(){return this[_0xe681("0x7b")][_0xe681("0x7fc")](this,i[_0xe681("0x7b6")][_0xe681("0x7ff")])},x}(),r[_0xe681("0x7c7")]=function(){function x(x){if(this[_0xe681("0x842")]={},this[_0xe681("0x843")]={},x)for(var e=Object[_0xe681("0x57")](x),_=0;_<e[_0xe681("0x25")];++_)null!=x[e[_]]&&(this[e[_]]=x[e[_]])}return x[_0xe681("0x20")][_0xe681("0x1f4")]=0,x[_0xe681("0x20")][_0xe681("0x842")]=a[_0xe681("0x4b")],x[_0xe681("0x20")][_0xe681("0x843")]=a[_0xe681("0x4b")],x.create=function(e){return new x(e)},x[_0xe681("0x103")]=function(x,e){if(e||(e=g[_0xe681("0xda")]()),null!=x[_0xe681("0x1f4")]&&x[_0xe681("0x21")](_0xe681("0x1f4"))&&e[_0xe681("0xdd")](8).int32(x[_0xe681("0x1f4")]),null!=x[_0xe681("0x842")]&&x[_0xe681("0x21")]("Nodes"))for(var _=Object[_0xe681("0x57")](x.Nodes),t=0;t<_[_0xe681("0x25")];++t)e[_0xe681("0xdd")](18)[_0xe681("0xfe")]()[_0xe681("0xdd")](8).int32(_[t]),r[_0xe681("0x844")][_0xe681("0x103")](x[_0xe681("0x842")][_[t]],e[_0xe681("0xdd")](18)[_0xe681("0xfe")]()).ldelim().ldelim();if(null!=x.Lines&&x.hasOwnProperty("Lines"))for(var _=Object.keys(x[_0xe681("0x843")]),t=0;t<_[_0xe681("0x25")];++t)e[_0xe681("0xdd")](26)[_0xe681("0xfe")]()[_0xe681("0xdd")](8)[_0xe681("0xde")](_[t]),r[_0xe681("0x845")][_0xe681("0x103")](x[_0xe681("0x843")][_[t]],e[_0xe681("0xdd")](18)[_0xe681("0xfe")]()).ldelim()[_0xe681("0x100")]();return e},x.encodeDelimited=function(x,e){return this[_0xe681("0x103")](x,e)[_0xe681("0x100")]()},x[_0xe681("0xfd")]=function(x,e){x instanceof n||(x=n.create(x));for(var _,t=void 0===e?x[_0xe681("0xd7")]:x[_0xe681("0xd4")]+e,i=new(r[_0xe681("0x7c7")]);x[_0xe681("0xd4")]<t;){var g=x[_0xe681("0xdd")]();switch(g>>>3){case 1:i[_0xe681("0x1f4")]=x[_0xe681("0xde")]();break;case 2:x[_0xe681("0xe6")]()[_0xe681("0xd4")]++,i[_0xe681("0x842")]===a.emptyObject&&(i[_0xe681("0x842")]={}),_=x[_0xe681("0xde")](),x[_0xe681("0xd4")]++,i[_0xe681("0x842")][_]=r[_0xe681("0x844")].decode(x,x[_0xe681("0xdd")]());break;case 3:x.skip()[_0xe681("0xd4")]++,i[_0xe681("0x843")]===a[_0xe681("0x4b")]&&(i[_0xe681("0x843")]={}),_=x[_0xe681("0xde")](),x[_0xe681("0xd4")]++,i[_0xe681("0x843")][_]=r[_0xe681("0x845")].decode(x,x[_0xe681("0xdd")]());break;default:x[_0xe681("0xe7")](7&g)}}return i},x[_0xe681("0x7ca")]=function(x){return x instanceof n||(x=n(x)),this[_0xe681("0xfd")](x,x[_0xe681("0xdd")]())},x[_0xe681("0x7cb")]=function(x){if(_0xe681("0x24")!==(_0xe681("0xa")==typeof x?_0xe681("0xa"):t(x))||null===x)return _0xe681("0x805");if(null!=x[_0xe681("0x1f4")]&&x.hasOwnProperty(_0xe681("0x1f4"))&&!a[_0xe681("0x50")](x[_0xe681("0x1f4")]))return _0xe681("0x806");if(null!=x[_0xe681("0x842")]&&x[_0xe681("0x21")](_0xe681("0x842"))){if(!a[_0xe681("0xd0")](x[_0xe681("0x842")]))return _0xe681("0x846");for(var e=Object.keys(x[_0xe681("0x842")]),_=0;_<e[_0xe681("0x25")];++_){if(!a[_0xe681("0x62")][_0xe681("0x78")](e[_]))return _0xe681("0x847");var i=r[_0xe681("0x844")][_0xe681("0x7cb")](x[_0xe681("0x842")][e[_]]);if(i)return _0xe681("0x848")+i}}if(null!=x[_0xe681("0x843")]&&x[_0xe681("0x21")]("Lines")){if(!a[_0xe681("0xd0")](x.Lines))return _0xe681("0x849");for(var e=Object[_0xe681("0x57")](x[_0xe681("0x843")]),_=0;_<e[_0xe681("0x25")];++_){if(!a.key32Re[_0xe681("0x78")](e[_]))return _0xe681("0x84a");var i=r.NavLineSet[_0xe681("0x7cb")](x[_0xe681("0x843")][e[_]]);if(i)return _0xe681("0x84b")+i}}return null},x[_0xe681("0x7f6")]=function(x){if(x instanceof r[_0xe681("0x7c7")])return x;var e=new(r[_0xe681("0x7c7")]);if(null!=x[_0xe681("0x1f4")]&&(e[_0xe681("0x1f4")]=0|x[_0xe681("0x1f4")]),x[_0xe681("0x842")]){if(_0xe681("0x24")!==t(x.Nodes))throw TypeError(_0xe681("0x84c"));e[_0xe681("0x842")]={};for(var _=Object[_0xe681("0x57")](x[_0xe681("0x842")]),i=0;i<_[_0xe681("0x25")];++i){if("object"!==t(x[_0xe681("0x842")][_[i]]))throw TypeError(_0xe681("0x84c"));e[_0xe681("0x842")][_[i]]=r.NavNodeSet[_0xe681("0x7f6")](x[_0xe681("0x842")][_[i]])}}if(x[_0xe681("0x843")]){if(_0xe681("0x24")!==t(x.Lines))throw TypeError(_0xe681("0x84d"));e[_0xe681("0x843")]={};for(var _=Object[_0xe681("0x57")](x[_0xe681("0x843")]),i=0;i<_[_0xe681("0x25")];++i){if(_0xe681("0x24")!==t(x.Lines[_[i]]))throw TypeError(_0xe681("0x84d"));e[_0xe681("0x843")][_[i]]=r[_0xe681("0x845")][_0xe681("0x7f6")](x.Lines[_[i]])}}return e},x[_0xe681("0x66")]=x[_0xe681("0x7f6")],x[_0xe681("0x7fc")]=function(x,e){e||(e={});var _={};(e[_0xe681("0x33c")]||e[_0xe681("0x7fd")])&&(_.Nodes={},_[_0xe681("0x843")]={}),e.defaults&&(_[_0xe681("0x1f4")]=0),null!=x[_0xe681("0x1f4")]&&x[_0xe681("0x21")](_0xe681("0x1f4"))&&(_[_0xe681("0x1f4")]=x[_0xe681("0x1f4")]);var t;if(x[_0xe681("0x842")]&&(t=Object[_0xe681("0x57")](x[_0xe681("0x842")]))[_0xe681("0x25")]){_[_0xe681("0x842")]={};for(var i=0;i<t[_0xe681("0x25")];++i)_[_0xe681("0x842")][t[i]]=r.NavNodeSet[_0xe681("0x7fc")](x[_0xe681("0x842")][t[i]],e)}if(x.Lines&&(t=Object[_0xe681("0x57")](x[_0xe681("0x843")]))[_0xe681("0x25")]){_[_0xe681("0x843")]={};for(var i=0;i<t.length;++i)_[_0xe681("0x843")][t[i]]=r[_0xe681("0x845")].toObject(x[_0xe681("0x843")][t[i]],e)}return _},x[_0xe681("0x20")][_0xe681("0x7fc")]=function(x){return this[_0xe681("0x7b")].toObject(this,x)},x[_0xe681("0x20")][_0xe681("0x7fe")]=function(){return this[_0xe681("0x7b")][_0xe681("0x7fc")](this,i.util.toJSONOptions)},x}(),r[_0xe681("0x844")]=function(){function x(x){if(x)for(var e=Object[_0xe681("0x57")](x),_=0;_<e[_0xe681("0x25")];++_)null!=x[e[_]]&&(this[e[_]]=x[e[_]])}return x[_0xe681("0x20")]._id=0,x.prototype[_0xe681("0x84e")]=0,x[_0xe681("0x20")][_0xe681("0x84f")]=0,x[_0xe681("0x20")].X=0,x[_0xe681("0x20")].Y=0,x.prototype.sid=0,x[_0xe681("0xda")]=function(e){return new x(e)},x.encode=function(x,e){return e||(e=g.create()),null!=x[_0xe681("0x441")]&&x[_0xe681("0x21")]("_id")&&e[_0xe681("0xdd")](8)[_0xe681("0xde")](x[_0xe681("0x441")]),null!=x.tid&&x.hasOwnProperty(_0xe681("0x84e"))&&e[_0xe681("0xdd")](16)[_0xe681("0xde")](x[_0xe681("0x84e")]),null!=x[_0xe681("0x84f")]&&x.hasOwnProperty(_0xe681("0x84f"))&&e[_0xe681("0xdd")](24)[_0xe681("0xde")](x[_0xe681("0x84f")]),null!=x.X&&x[_0xe681("0x21")]("X")&&e[_0xe681("0xdd")](33)[_0xe681("0xfa")](x.X),null!=x.Y&&x[_0xe681("0x21")]("Y")&&e[_0xe681("0xdd")](41)[_0xe681("0xfa")](x.Y),null!=x[_0xe681("0x850")]&&x[_0xe681("0x21")](_0xe681("0x850"))&&e[_0xe681("0xdd")](48)[_0xe681("0xde")](x[_0xe681("0x850")]),e},x[_0xe681("0x7c8")]=function(x,e){return this[_0xe681("0x103")](x,e)[_0xe681("0x100")]()},x.decode=function(x,e){x instanceof n||(x=n[_0xe681("0xda")](x));for(var _=void 0===e?x[_0xe681("0xd7")]:x[_0xe681("0xd4")]+e,t=new(r[_0xe681("0x844")]);x[_0xe681("0xd4")]<_;){var i=x[_0xe681("0xdd")]();switch(i>>>3){case 1:t[_0xe681("0x441")]=x[_0xe681("0xde")]();break;case 2:t.tid=x.int32();break;case 3:t[_0xe681("0x84f")]=x[_0xe681("0xde")]();break;case 4:t.X=x[_0xe681("0xfa")]();break;case 5:t.Y=x[_0xe681("0xfa")]();break;case 6:t[_0xe681("0x850")]=x[_0xe681("0xde")]();break;default:x.skipType(7&i)}}return t},x[_0xe681("0x7ca")]=function(x){return x instanceof n||(x=n(x)),this[_0xe681("0xfd")](x,x[_0xe681("0xdd")]())},x.verify=function(x){return _0xe681("0x24")!==("undefined"==typeof x?_0xe681("0xa"):t(x))||null===x?_0xe681("0x805"):null!=x[_0xe681("0x441")]&&x[_0xe681("0x21")](_0xe681("0x441"))&&!a[_0xe681("0x50")](x[_0xe681("0x441")])?_0xe681("0x7ce"):null!=x.tid&&x[_0xe681("0x21")](_0xe681("0x84e"))&&!a[_0xe681("0x50")](x.tid)?_0xe681("0x851"):null!=x[_0xe681("0x84f")]&&x[_0xe681("0x21")](_0xe681("0x84f"))&&!a[_0xe681("0x50")](x[_0xe681("0x84f")])?_0xe681("0x852"):null!=x.X&&x[_0xe681("0x21")]("X")&&_0xe681("0x28")!=typeof x.X?_0xe681("0x82e"):null!=x.Y&&x[_0xe681("0x21")]("Y")&&_0xe681("0x28")!=typeof x.Y?_0xe681("0x82f"):null!=x[_0xe681("0x850")]&&x[_0xe681("0x21")](_0xe681("0x850"))&&!a[_0xe681("0x50")](x[_0xe681("0x850")])?_0xe681("0x853"):null},x[_0xe681("0x7f6")]=function(x){if(x instanceof r[_0xe681("0x844")])return x;var e=new(r[_0xe681("0x844")]);return null!=x[_0xe681("0x441")]&&(e[_0xe681("0x441")]=0|x[_0xe681("0x441")]),null!=x[_0xe681("0x84e")]&&(e[_0xe681("0x84e")]=0|x[_0xe681("0x84e")]),null!=x[_0xe681("0x84f")]&&(e[_0xe681("0x84f")]=0|x[_0xe681("0x84f")]),null!=x.X&&(e.X=Number(x.X)),null!=x.Y&&(e.Y=Number(x.Y)),null!=x.sid&&(e[_0xe681("0x850")]=0|x[_0xe681("0x850")]),e},x.from=x[_0xe681("0x7f6")],x[_0xe681("0x7fc")]=function(x,e){e||(e={});var _={};return e[_0xe681("0x7fd")]&&(_[_0xe681("0x441")]=0,_[_0xe681("0x84e")]=0,_[_0xe681("0x84f")]=0,_.X=0,_.Y=0,_[_0xe681("0x850")]=0),null!=x[_0xe681("0x441")]&&x[_0xe681("0x21")](_0xe681("0x441"))&&(_._id=x._id),null!=x[_0xe681("0x84e")]&&x[_0xe681("0x21")](_0xe681("0x84e"))&&(_[_0xe681("0x84e")]=x[_0xe681("0x84e")]),null!=x[_0xe681("0x84f")]&&x[_0xe681("0x21")](_0xe681("0x84f"))&&(_[_0xe681("0x84f")]=x[_0xe681("0x84f")]),null!=x.X&&x.hasOwnProperty("X")&&(_.X=x.X),null!=x.Y&&x[_0xe681("0x21")]("Y")&&(_.Y=x.Y),null!=x.sid&&x[_0xe681("0x21")](_0xe681("0x850"))&&(_[_0xe681("0x850")]=x[_0xe681("0x850")]),_},x[_0xe681("0x20")].toObject=function(x){return this[_0xe681("0x7b")].toObject(this,x)},x[_0xe681("0x20")][_0xe681("0x7fe")]=function(){return this[_0xe681("0x7b")][_0xe681("0x7fc")](this,i[_0xe681("0x7b6")][_0xe681("0x7ff")])},x}(),r[_0xe681("0x845")]=function(){function x(x){if(x)for(var e=Object[_0xe681("0x57")](x),_=0;_<e.length;++_)null!=x[e[_]]&&(this[e[_]]=x[e[_]])}return x[_0xe681("0x20")]._id=0,x[_0xe681("0x20")].sid=0,x[_0xe681("0x20")][_0xe681("0x854")]=0,x.prototype[_0xe681("0x855")]=0,x.prototype[_0xe681("0x856")]=0,x[_0xe681("0x20")].length=0,x[_0xe681("0x20")][_0xe681("0x410")]="",x[_0xe681("0x20")].bstair="",x[_0xe681("0xda")]=function(e){return new x(e)},x.encode=function(x,e){return e||(e=g[_0xe681("0xda")]()),null!=x[_0xe681("0x441")]&&x[_0xe681("0x21")](_0xe681("0x441"))&&e[_0xe681("0xdd")](8)[_0xe681("0xde")](x[_0xe681("0x441")]),null!=x.sid&&x[_0xe681("0x21")](_0xe681("0x850"))&&e[_0xe681("0xdd")](16)[_0xe681("0xde")](x[_0xe681("0x850")]),null!=x[_0xe681("0x854")]&&x[_0xe681("0x21")](_0xe681("0x854"))&&e[_0xe681("0xdd")](24)[_0xe681("0xde")](x[_0xe681("0x854")]),null!=x[_0xe681("0x855")]&&x[_0xe681("0x21")](_0xe681("0x855"))&&e[_0xe681("0xdd")](32)[_0xe681("0xde")](x[_0xe681("0x855")]),null!=x[_0xe681("0x856")]&&x[_0xe681("0x21")](_0xe681("0x856"))&&e.uint32(40)[_0xe681("0xde")](x.rank),null!=x[_0xe681("0x25")]&&x[_0xe681("0x21")]("length")&&e[_0xe681("0xdd")](49)[_0xe681("0xfa")](x.length),null!=x[_0xe681("0x410")]&&x[_0xe681("0x21")](_0xe681("0x410"))&&e[_0xe681("0xdd")](58)[_0xe681("0x53")](x[_0xe681("0x410")]),null!=x[_0xe681("0x857")]&&x[_0xe681("0x21")]("bstair")&&e[_0xe681("0xdd")](66)[_0xe681("0x53")](x.bstair),e},x[_0xe681("0x7c8")]=function(x,e){return this.encode(x,e)[_0xe681("0x100")]()},x[_0xe681("0xfd")]=function(x,e){x instanceof n||(x=n[_0xe681("0xda")](x));for(var _=void 0===e?x.len:x[_0xe681("0xd4")]+e,t=new r.NavLineSet;x[_0xe681("0xd4")]<_;){var i=x[_0xe681("0xdd")]();switch(i>>>3){case 1:t[_0xe681("0x441")]=x.int32();break;case 2:t[_0xe681("0x850")]=x[_0xe681("0xde")]();break;case 3:t[_0xe681("0x854")]=x[_0xe681("0xde")]();break;case 4:t[_0xe681("0x855")]=x[_0xe681("0xde")]();break;case 5:t[_0xe681("0x856")]=x[_0xe681("0xde")]();break;case 6:t[_0xe681("0x25")]=x[_0xe681("0xfa")]();break;case 7:t[_0xe681("0x410")]=x[_0xe681("0x53")]();break;case 8:t.bstair=x.string();break;default:x[_0xe681("0xe7")](7&i)}}return t},x.decodeDelimited=function(x){return x instanceof n||(x=n(x)),this[_0xe681("0xfd")](x,x[_0xe681("0xdd")]())},x.verify=function(x){return _0xe681("0x24")!==(_0xe681("0xa")==typeof x?_0xe681("0xa"):t(x))||null===x?_0xe681("0x805"):null!=x._id&&x[_0xe681("0x21")](_0xe681("0x441"))&&!a[_0xe681("0x50")](x[_0xe681("0x441")])?_0xe681("0x7ce"):null!=x[_0xe681("0x850")]&&x[_0xe681("0x21")](_0xe681("0x850"))&&!a[_0xe681("0x50")](x[_0xe681("0x850")])?_0xe681("0x853"):null!=x[_0xe681("0x854")]&&x.hasOwnProperty(_0xe681("0x854"))&&!a[_0xe681("0x50")](x[_0xe681("0x854")])?_0xe681("0x858"):null!=x.efnum&&x[_0xe681("0x21")]("efnum")&&!a[_0xe681("0x50")](x[_0xe681("0x855")])?_0xe681("0x859"):null!=x[_0xe681("0x856")]&&x[_0xe681("0x21")](_0xe681("0x856"))&&!a[_0xe681("0x50")](x[_0xe681("0x856")])?_0xe681("0x85a"):null!=x[_0xe681("0x25")]&&x[_0xe681("0x21")](_0xe681("0x25"))&&"number"!=typeof x[_0xe681("0x25")]?_0xe681("0x85b"):null!=x[_0xe681("0x410")]&&x[_0xe681("0x21")]("direction")&&!a[_0xe681("0x52")](x[_0xe681("0x410")])?_0xe681("0x85c"):null!=x[_0xe681("0x857")]&&x[_0xe681("0x21")](_0xe681("0x857"))&&!a[_0xe681("0x52")](x[_0xe681("0x857")])?_0xe681("0x85d"):null},x[_0xe681("0x7f6")]=function(x){if(x instanceof r[_0xe681("0x845")])return x;var e=new(r[_0xe681("0x845")]);return null!=x[_0xe681("0x441")]&&(e._id=0|x[_0xe681("0x441")]),null!=x[_0xe681("0x850")]&&(e[_0xe681("0x850")]=0|x[_0xe681("0x850")]),null!=x[_0xe681("0x854")]&&(e[_0xe681("0x854")]=0|x.eid),null!=x.efnum&&(e[_0xe681("0x855")]=0|x[_0xe681("0x855")]),null!=x[_0xe681("0x856")]&&(e[_0xe681("0x856")]=0|x[_0xe681("0x856")]),null!=x.length&&(e[_0xe681("0x25")]=Number(x.length)),null!=x[_0xe681("0x410")]&&(e[_0xe681("0x410")]=String(x[_0xe681("0x410")])),null!=x[_0xe681("0x857")]&&(e[_0xe681("0x857")]=String(x.bstair)),e},x[_0xe681("0x66")]=x[_0xe681("0x7f6")],x.toObject=function(x,e){e||(e={});var _={};return e[_0xe681("0x7fd")]&&(_._id=0,_[_0xe681("0x850")]=0,_[_0xe681("0x854")]=0,_[_0xe681("0x855")]=0,_[_0xe681("0x856")]=0,_[_0xe681("0x25")]=0,_.direction="",_[_0xe681("0x857")]=""),null!=x._id&&x[_0xe681("0x21")]("_id")&&(_[_0xe681("0x441")]=x._id),null!=x[_0xe681("0x850")]&&x[_0xe681("0x21")]("sid")&&(_[_0xe681("0x850")]=x[_0xe681("0x850")]),null!=x[_0xe681("0x854")]&&x[_0xe681("0x21")](_0xe681("0x854"))&&(_[_0xe681("0x854")]=x[_0xe681("0x854")]),null!=x[_0xe681("0x855")]&&x[_0xe681("0x21")](_0xe681("0x855"))&&(_[_0xe681("0x855")]=x[_0xe681("0x855")]),null!=x[_0xe681("0x856")]&&x[_0xe681("0x21")](_0xe681("0x856"))&&(_[_0xe681("0x856")]=x[_0xe681("0x856")]),null!=x.length&&x[_0xe681("0x21")]("length")&&(_[_0xe681("0x25")]=x[_0xe681("0x25")]),null!=x.direction&&x.hasOwnProperty(_0xe681("0x410"))&&(_[_0xe681("0x410")]=x.direction),null!=x[_0xe681("0x857")]&&x[_0xe681("0x21")](_0xe681("0x857"))&&(_[_0xe681("0x857")]=x[_0xe681("0x857")]),_},x[_0xe681("0x20")][_0xe681("0x7fc")]=function(x){return this.constructor[_0xe681("0x7fc")](this,x)},x.prototype[_0xe681("0x7fe")]=function(){return this[_0xe681("0x7b")][_0xe681("0x7fc")](this,i[_0xe681("0x7b6")][_0xe681("0x7ff")])},x}(),r[_0xe681("0x7eb")]=function(){function x(x){if(this[_0xe681("0x842")]={},this.Infos={},x)for(var e=Object.keys(x),_=0;_<e[_0xe681("0x25")];++_)null!=x[e[_]]&&(this[e[_]]=x[e[_]])}return x[_0xe681("0x20")][_0xe681("0x85e")]="",x.prototype.bgaudio="",x[_0xe681("0x20")][_0xe681("0x85f")]=0,x[_0xe681("0x20")][_0xe681("0x860")]="",x[_0xe681("0x20")][_0xe681("0x861")]="",x[_0xe681("0x20")].Nodes=a.emptyObject,x.prototype[_0xe681("0x862")]=a[_0xe681("0x4b")],x[_0xe681("0xda")]=function(e){return new x(e)},x[_0xe681("0x103")]=function(x,e){if(e||(e=g.create()),null!=x[_0xe681("0x85e")]&&x[_0xe681("0x21")](_0xe681("0x85e"))&&e.uint32(10)[_0xe681("0x53")](x[_0xe681("0x85e")]),null!=x[_0xe681("0x863")]&&x.hasOwnProperty(_0xe681("0x863"))&&e[_0xe681("0xdd")](18).string(x[_0xe681("0x863")]),null!=x.bgaudioplay&&x[_0xe681("0x21")](_0xe681("0x85f"))&&e[_0xe681("0xdd")](24)[_0xe681("0xde")](x[_0xe681("0x85f")]),null!=x[_0xe681("0x860")]&&x[_0xe681("0x21")]("picscale")&&e[_0xe681("0xdd")](34)[_0xe681("0x53")](x[_0xe681("0x860")]),null!=x[_0xe681("0x861")]&&x.hasOwnProperty(_0xe681("0x861"))&&e[_0xe681("0xdd")](42)[_0xe681("0x53")](x[_0xe681("0x861")]),null!=x[_0xe681("0x842")]&&x[_0xe681("0x21")]("Nodes"))for(var _=Object[_0xe681("0x57")](x.Nodes),t=0;t<_[_0xe681("0x25")];++t)e.uint32(50).fork()[_0xe681("0xdd")](8).int32(_[t]),r[_0xe681("0x864")][_0xe681("0x103")](x.Nodes[_[t]],e[_0xe681("0xdd")](18)[_0xe681("0xfe")]())[_0xe681("0x100")]()[_0xe681("0x100")]();if(null!=x[_0xe681("0x862")]&&x[_0xe681("0x21")](_0xe681("0x862")))for(var _=Object[_0xe681("0x57")](x[_0xe681("0x862")]),t=0;t<_[_0xe681("0x25")];++t)e[_0xe681("0xdd")](58).fork()[_0xe681("0xdd")](8)[_0xe681("0xde")](_[t]),r[_0xe681("0x865")][_0xe681("0x103")](x[_0xe681("0x862")][_[t]],e[_0xe681("0xdd")](18)[_0xe681("0xfe")]())[_0xe681("0x100")]().ldelim();return e},x[_0xe681("0x7c8")]=function(x,e){return this[_0xe681("0x103")](x,e).ldelim()},x[_0xe681("0xfd")]=function(x,e){x instanceof n||(x=n.create(x));for(var _,t=void 0===e?x[_0xe681("0xd7")]:x[_0xe681("0xd4")]+e,i=new(r[_0xe681("0x7eb")]);x[_0xe681("0xd4")]<t;){var g=x[_0xe681("0xdd")]();switch(g>>>3){case 1:i[_0xe681("0x85e")]=x[_0xe681("0x53")]();break;case 2:i[_0xe681("0x863")]=x[_0xe681("0x53")]();break;case 3:i.bgaudioplay=x[_0xe681("0xde")]();break;case 4:i[_0xe681("0x860")]=x[_0xe681("0x53")]();break;case 5:i[_0xe681("0x861")]=x.string();break;case 6:x[_0xe681("0xe6")]().pos++,i.Nodes===a[_0xe681("0x4b")]&&(i[_0xe681("0x842")]={}),_=x[_0xe681("0xde")](),x[_0xe681("0xd4")]++,i[_0xe681("0x842")][_]=r[_0xe681("0x864")][_0xe681("0xfd")](x,x[_0xe681("0xdd")]());break;case 7:x[_0xe681("0xe6")]().pos++,i[_0xe681("0x862")]===a[_0xe681("0x4b")]&&(i[_0xe681("0x862")]={}),_=x[_0xe681("0xde")](),x[_0xe681("0xd4")]++,i[_0xe681("0x862")][_]=r[_0xe681("0x865")][_0xe681("0xfd")](x,x[_0xe681("0xdd")]());break;default:x[_0xe681("0xe7")](7&g)}}return i},x[_0xe681("0x7ca")]=function(x){return x instanceof n||(x=n(x)),this[_0xe681("0xfd")](x,x.uint32())},x[_0xe681("0x7cb")]=function(x){if("object"!==(_0xe681("0xa")==typeof x?_0xe681("0xa"):t(x))||null===x)return _0xe681("0x805");if(null!=x[_0xe681("0x85e")]&&x[_0xe681("0x21")](_0xe681("0x85e"))&&!a[_0xe681("0x52")](x[_0xe681("0x85e")]))return _0xe681("0x866");if(null!=x[_0xe681("0x863")]&&x[_0xe681("0x21")]("bgaudio")&&!a[_0xe681("0x52")](x.bgaudio))return _0xe681("0x867");if(null!=x[_0xe681("0x85f")]&&x[_0xe681("0x21")](_0xe681("0x85f"))&&!a[_0xe681("0x50")](x[_0xe681("0x85f")]))return _0xe681("0x868");if(null!=x[_0xe681("0x860")]&&x[_0xe681("0x21")](_0xe681("0x860"))&&!a[_0xe681("0x52")](x[_0xe681("0x860")]))return _0xe681("0x869");if(null!=x[_0xe681("0x861")]&&x[_0xe681("0x21")](_0xe681("0x861"))&&!a[_0xe681("0x52")](x[_0xe681("0x861")]))return _0xe681("0x86a");if(null!=x[_0xe681("0x842")]&&x.hasOwnProperty("Nodes")){if(!a.isObject(x[_0xe681("0x842")]))return _0xe681("0x846");for(var e=Object[_0xe681("0x57")](x.Nodes),_=0;_<e[_0xe681("0x25")];++_){if(!a[_0xe681("0x62")].test(e[_]))return _0xe681("0x847");var i=r[_0xe681("0x864")].verify(x[_0xe681("0x842")][e[_]]);if(i)return _0xe681("0x848")+i}}if(null!=x[_0xe681("0x862")]&&x[_0xe681("0x21")](_0xe681("0x862"))){if(!a[_0xe681("0xd0")](x[_0xe681("0x862")]))return _0xe681("0x86b");for(var e=Object.keys(x[_0xe681("0x862")]),_=0;_<e.length;++_){if(!a.key32Re[_0xe681("0x78")](e[_]))return _0xe681("0x86c");var i=r.PicClickSet[_0xe681("0x7cb")](x.Infos[e[_]]);if(i)return _0xe681("0x86d")+i}}return null},x[_0xe681("0x7f6")]=function(x){if(x instanceof r[_0xe681("0x7eb")])return x;var e=new(r[_0xe681("0x7eb")]);if(null!=x.serverurl&&(e.serverurl=String(x[_0xe681("0x85e")])),null!=x.bgaudio&&(e[_0xe681("0x863")]=String(x[_0xe681("0x863")])),null!=x[_0xe681("0x85f")]&&(e[_0xe681("0x85f")]=0|x[_0xe681("0x85f")]),null!=x[_0xe681("0x860")]&&(e[_0xe681("0x860")]=String(x[_0xe681("0x860")])),null!=x[_0xe681("0x861")]&&(e.msgscale=String(x.msgscale)),x.Nodes){if(_0xe681("0x24")!==t(x[_0xe681("0x842")]))throw TypeError(".PicSet.Nodes: object expected");e[_0xe681("0x842")]={};for(var _=Object[_0xe681("0x57")](x[_0xe681("0x842")]),i=0;i<_[_0xe681("0x25")];++i){if(_0xe681("0x24")!==t(x[_0xe681("0x842")][_[i]]))throw TypeError(".PicSet.Nodes: object expected");e.Nodes[_[i]]=r.PicNodeSet[_0xe681("0x7f6")](x[_0xe681("0x842")][_[i]])}}if(x[_0xe681("0x862")]){if(_0xe681("0x24")!==t(x[_0xe681("0x862")]))throw TypeError(_0xe681("0x86e"));e[_0xe681("0x862")]={};for(var _=Object[_0xe681("0x57")](x[_0xe681("0x862")]),i=0;i<_[_0xe681("0x25")];++i){if(_0xe681("0x24")!==t(x[_0xe681("0x862")][_[i]]))throw TypeError(_0xe681("0x86e"));e[_0xe681("0x862")][_[i]]=r[_0xe681("0x865")][_0xe681("0x7f6")](x[_0xe681("0x862")][_[i]])}}return e},x[_0xe681("0x66")]=x[_0xe681("0x7f6")],x.toObject=function(x,e){e||(e={});var _={};(e[_0xe681("0x33c")]||e[_0xe681("0x7fd")])&&(_[_0xe681("0x842")]={},_[_0xe681("0x862")]={}),e[_0xe681("0x7fd")]&&(_[_0xe681("0x85e")]="",_[_0xe681("0x863")]="",_[_0xe681("0x85f")]=0,_[_0xe681("0x860")]="",_[_0xe681("0x861")]=""),null!=x[_0xe681("0x85e")]&&x[_0xe681("0x21")]("serverurl")&&(_.serverurl=x.serverurl),null!=x.bgaudio&&x[_0xe681("0x21")](_0xe681("0x863"))&&(_[_0xe681("0x863")]=x.bgaudio),null!=x[_0xe681("0x85f")]&&x.hasOwnProperty(_0xe681("0x85f"))&&(_[_0xe681("0x85f")]=x[_0xe681("0x85f")]),null!=x[_0xe681("0x860")]&&x[_0xe681("0x21")]("picscale")&&(_[_0xe681("0x860")]=x[_0xe681("0x860")]),null!=x[_0xe681("0x861")]&&x[_0xe681("0x21")](_0xe681("0x861"))&&(_[_0xe681("0x861")]=x[_0xe681("0x861")]);var t;if(x[_0xe681("0x842")]&&(t=Object[_0xe681("0x57")](x[_0xe681("0x842")]))[_0xe681("0x25")]){_[_0xe681("0x842")]={};for(var i=0;i<t[_0xe681("0x25")];++i)_.Nodes[t[i]]=r[_0xe681("0x864")][_0xe681("0x7fc")](x.Nodes[t[i]],e)}if(x[_0xe681("0x862")]&&(t=Object[_0xe681("0x57")](x[_0xe681("0x862")])).length){_[_0xe681("0x862")]={};for(var i=0;i<t[_0xe681("0x25")];++i)_[_0xe681("0x862")][t[i]]=r[_0xe681("0x865")][_0xe681("0x7fc")](x[_0xe681("0x862")][t[i]],e)}return _},x.prototype[_0xe681("0x7fc")]=function(x){return this.constructor[_0xe681("0x7fc")](this,x)},x[_0xe681("0x20")][_0xe681("0x7fe")]=function(){return this.constructor.toObject(this,i[_0xe681("0x7b6")][_0xe681("0x7ff")])},x}(),r[_0xe681("0x864")]=function(){function x(x){if(this.idlist1=[],this[_0xe681("0x86f")]=[],x)for(var e=Object[_0xe681("0x57")](x),_=0;_<e[_0xe681("0x25")];++_)null!=x[e[_]]&&(this[e[_]]=x[e[_]])}return x.prototype[_0xe681("0x1f4")]=0,x[_0xe681("0x20")][_0xe681("0x441")]=0,x[_0xe681("0x20")][_0xe681("0x95")]="",x[_0xe681("0x20")][_0xe681("0x870")]=0,x[_0xe681("0x20")].X=0,x.prototype.Y=0,x[_0xe681("0x20")][_0xe681("0x871")]=a.emptyArray,x[_0xe681("0x20")][_0xe681("0x86f")]=a[_0xe681("0x49")],x[_0xe681("0xda")]=function(e){return new x(e)},x[_0xe681("0x103")]=function(x,e){if(e||(e=g.create()),null!=x[_0xe681("0x1f4")]&&x[_0xe681("0x21")]("floornum")&&e[_0xe681("0xdd")](8).int32(x[_0xe681("0x1f4")]),null!=x[_0xe681("0x441")]&&x[_0xe681("0x21")]("_id")&&e[_0xe681("0xdd")](16)[_0xe681("0xde")](x[_0xe681("0x441")]),null!=x[_0xe681("0x95")]&&x[_0xe681("0x21")](_0xe681("0x95"))&&e[_0xe681("0xdd")](26)[_0xe681("0x53")](x[_0xe681("0x95")]),null!=x.base&&x[_0xe681("0x21")](_0xe681("0x870"))&&e.uint32(32)[_0xe681("0xde")](x[_0xe681("0x870")]),null!=x.X&&x[_0xe681("0x21")]("X")&&e[_0xe681("0xdd")](41).double(x.X),null!=x.Y&&x[_0xe681("0x21")]("Y")&&e.uint32(49)[_0xe681("0xfa")](x.Y),null!=x[_0xe681("0x871")]&&x[_0xe681("0x871")][_0xe681("0x25")]){e[_0xe681("0xdd")](58)[_0xe681("0xfe")]();for(var _=0;_<x[_0xe681("0x871")][_0xe681("0x25")];++_)e[_0xe681("0xde")](x[_0xe681("0x871")][_]);e[_0xe681("0x100")]()}if(null!=x[_0xe681("0x86f")]&&x.idlist2[_0xe681("0x25")]){e.uint32(66)[_0xe681("0xfe")]();for(var _=0;_<x[_0xe681("0x86f")].length;++_)e[_0xe681("0xde")](x[_0xe681("0x86f")][_]);e[_0xe681("0x100")]()}return e},x[_0xe681("0x7c8")]=function(x,e){return this[_0xe681("0x103")](x,e)[_0xe681("0x100")]()},x.decode=function(x,e){x instanceof n||(x=n[_0xe681("0xda")](x));for(var _=void 0===e?x[_0xe681("0xd7")]:x[_0xe681("0xd4")]+e,t=new r.PicNodeSet;x[_0xe681("0xd4")]<_;){var i=x[_0xe681("0xdd")]();switch(i>>>3){case 1:t[_0xe681("0x1f4")]=x[_0xe681("0xde")]();break;case 2:t._id=x[_0xe681("0xde")]();break;case 3:t[_0xe681("0x95")]=x[_0xe681("0x53")]();break;case 4:t[_0xe681("0x870")]=x[_0xe681("0xde")]();break;case 5:t.X=x[_0xe681("0xfa")]();break;case 6:t.Y=x[_0xe681("0xfa")]();break;case 7:if(t[_0xe681("0x871")]&&t[_0xe681("0x871")][_0xe681("0x25")]||(t[_0xe681("0x871")]=[]),2===(7&i))for(var g=x[_0xe681("0xdd")]()+x[_0xe681("0xd4")];x[_0xe681("0xd4")]<g;)t[_0xe681("0x871")][_0xe681("0x1e")](x[_0xe681("0xde")]());else t[_0xe681("0x871")][_0xe681("0x1e")](x[_0xe681("0xde")]());break;case 8:if(t[_0xe681("0x86f")]&&t[_0xe681("0x86f")][_0xe681("0x25")]||(t[_0xe681("0x86f")]=[]),
2===(7&i))for(var g=x[_0xe681("0xdd")]()+x[_0xe681("0xd4")];x.pos<g;)t[_0xe681("0x86f")].push(x[_0xe681("0xde")]());else t[_0xe681("0x86f")][_0xe681("0x1e")](x[_0xe681("0xde")]());break;default:x[_0xe681("0xe7")](7&i)}}return t},x[_0xe681("0x7ca")]=function(x){return x instanceof n||(x=n(x)),this[_0xe681("0xfd")](x,x[_0xe681("0xdd")]())},x[_0xe681("0x7cb")]=function(x){if(_0xe681("0x24")!==(_0xe681("0xa")==typeof x?"undefined":t(x))||null===x)return _0xe681("0x805");if(null!=x.floornum&&x[_0xe681("0x21")]("floornum")&&!a[_0xe681("0x50")](x[_0xe681("0x1f4")]))return _0xe681("0x806");if(null!=x[_0xe681("0x441")]&&x[_0xe681("0x21")](_0xe681("0x441"))&&!a[_0xe681("0x50")](x[_0xe681("0x441")]))return _0xe681("0x7ce");if(null!=x[_0xe681("0x95")]&&x[_0xe681("0x21")](_0xe681("0x95"))&&!a.isString(x[_0xe681("0x95")]))return _0xe681("0x872");if(null!=x.base&&x[_0xe681("0x21")]("base")&&!a[_0xe681("0x50")](x[_0xe681("0x870")]))return"base: integer expected";if(null!=x.X&&x[_0xe681("0x21")]("X")&&"number"!=typeof x.X)return _0xe681("0x82e");if(null!=x.Y&&x[_0xe681("0x21")]("Y")&&_0xe681("0x28")!=typeof x.Y)return _0xe681("0x82f");if(null!=x.idlist1&&x.hasOwnProperty(_0xe681("0x871"))){if(!Array[_0xe681("0x56")](x[_0xe681("0x871")]))return _0xe681("0x873");for(var e=0;e<x[_0xe681("0x871")].length;++e)if(!a[_0xe681("0x50")](x[_0xe681("0x871")][e]))return _0xe681("0x874")}if(null!=x[_0xe681("0x86f")]&&x[_0xe681("0x21")](_0xe681("0x86f"))){if(!Array[_0xe681("0x56")](x[_0xe681("0x86f")]))return _0xe681("0x875");for(var e=0;e<x.idlist2.length;++e)if(!a[_0xe681("0x50")](x[_0xe681("0x86f")][e]))return"idlist2: integer[] expected"}return null},x[_0xe681("0x7f6")]=function(x){if(x instanceof r[_0xe681("0x864")])return x;var e=new r.PicNodeSet;if(null!=x[_0xe681("0x1f4")]&&(e[_0xe681("0x1f4")]=0|x[_0xe681("0x1f4")]),null!=x[_0xe681("0x441")]&&(e[_0xe681("0x441")]=0|x[_0xe681("0x441")]),null!=x[_0xe681("0x95")]&&(e[_0xe681("0x95")]=String(x[_0xe681("0x95")])),null!=x[_0xe681("0x870")]&&(e[_0xe681("0x870")]=0|x[_0xe681("0x870")]),null!=x.X&&(e.X=Number(x.X)),null!=x.Y&&(e.Y=Number(x.Y)),x[_0xe681("0x871")]){if(!Array[_0xe681("0x56")](x[_0xe681("0x871")]))throw TypeError(_0xe681("0x876"));e[_0xe681("0x871")]=[];for(var _=0;_<x.idlist1[_0xe681("0x25")];++_)e[_0xe681("0x871")][_]=0|x[_0xe681("0x871")][_]}if(x[_0xe681("0x86f")]){if(!Array[_0xe681("0x56")](x[_0xe681("0x86f")]))throw TypeError(_0xe681("0x877"));e[_0xe681("0x86f")]=[];for(var _=0;_<x.idlist2[_0xe681("0x25")];++_)e[_0xe681("0x86f")][_]=0|x.idlist2[_]}return e},x[_0xe681("0x66")]=x[_0xe681("0x7f6")],x[_0xe681("0x7fc")]=function(x,e){e||(e={});var _={};if((e[_0xe681("0x878")]||e[_0xe681("0x7fd")])&&(_.idlist1=[],_[_0xe681("0x86f")]=[]),e[_0xe681("0x7fd")]&&(_.floornum=0,_[_0xe681("0x441")]=0,_[_0xe681("0x95")]="",_[_0xe681("0x870")]=0,_.X=0,_.Y=0),null!=x[_0xe681("0x1f4")]&&x[_0xe681("0x21")](_0xe681("0x1f4"))&&(_[_0xe681("0x1f4")]=x[_0xe681("0x1f4")]),null!=x[_0xe681("0x441")]&&x[_0xe681("0x21")](_0xe681("0x441"))&&(_[_0xe681("0x441")]=x._id),null!=x[_0xe681("0x95")]&&x[_0xe681("0x21")](_0xe681("0x95"))&&(_.url=x[_0xe681("0x95")]),null!=x[_0xe681("0x870")]&&x[_0xe681("0x21")](_0xe681("0x870"))&&(_[_0xe681("0x870")]=x[_0xe681("0x870")]),null!=x.X&&x.hasOwnProperty("X")&&(_.X=x.X),null!=x.Y&&x[_0xe681("0x21")]("Y")&&(_.Y=x.Y),x[_0xe681("0x871")]&&x[_0xe681("0x871")][_0xe681("0x25")]){_.idlist1=[];for(var t=0;t<x[_0xe681("0x871")][_0xe681("0x25")];++t)_.idlist1[t]=x[_0xe681("0x871")][t]}if(x[_0xe681("0x86f")]&&x.idlist2.length){_[_0xe681("0x86f")]=[];for(var t=0;t<x[_0xe681("0x86f")][_0xe681("0x25")];++t)_[_0xe681("0x86f")][t]=x[_0xe681("0x86f")][t]}return _},x[_0xe681("0x20")][_0xe681("0x7fc")]=function(x){return this[_0xe681("0x7b")][_0xe681("0x7fc")](this,x)},x[_0xe681("0x20")][_0xe681("0x7fe")]=function(){return this.constructor[_0xe681("0x7fc")](this,i[_0xe681("0x7b6")].toJSONOptions)},x}(),r[_0xe681("0x865")]=function(){function x(x){if(x)for(var e=Object[_0xe681("0x57")](x),_=0;_<e[_0xe681("0x25")];++_)null!=x[e[_]]&&(this[e[_]]=x[e[_]])}return x[_0xe681("0x20")].floornum=0,x[_0xe681("0x20")][_0xe681("0x441")]=0,x[_0xe681("0x20")].purl="",x.prototype[_0xe681("0x879")]="",x.prototype[_0xe681("0x87a")]="",x[_0xe681("0x20")][_0xe681("0x87b")]="",x[_0xe681("0x20")].X=0,x[_0xe681("0x20")].Y=0,x[_0xe681("0x20")].Z=0,x[_0xe681("0x20")][_0xe681("0x87c")]="",x[_0xe681("0x20")][_0xe681("0x87d")]="",x[_0xe681("0xda")]=function(e){return new x(e)},x.encode=function(x,e){return e||(e=g.create()),null!=x[_0xe681("0x1f4")]&&x[_0xe681("0x21")]("floornum")&&e[_0xe681("0xdd")](8)[_0xe681("0xde")](x[_0xe681("0x1f4")]),null!=x[_0xe681("0x441")]&&x[_0xe681("0x21")](_0xe681("0x441"))&&e[_0xe681("0xdd")](16)[_0xe681("0xde")](x[_0xe681("0x441")]),null!=x[_0xe681("0x87e")]&&x[_0xe681("0x21")](_0xe681("0x87e"))&&e[_0xe681("0xdd")](26)[_0xe681("0x53")](x.purl),null!=x[_0xe681("0x879")]&&x[_0xe681("0x21")](_0xe681("0x879"))&&e[_0xe681("0xdd")](34)[_0xe681("0x53")](x[_0xe681("0x879")]),null!=x.msgt&&x[_0xe681("0x21")](_0xe681("0x87a"))&&e[_0xe681("0xdd")](42)[_0xe681("0x53")](x.msgt),null!=x.msgc&&x[_0xe681("0x21")](_0xe681("0x87b"))&&e[_0xe681("0xdd")](50)[_0xe681("0x53")](x[_0xe681("0x87b")]),null!=x.X&&x[_0xe681("0x21")]("X")&&e[_0xe681("0xdd")](57)[_0xe681("0xfa")](x.X),null!=x.Y&&x[_0xe681("0x21")]("Y")&&e.uint32(65)[_0xe681("0xfa")](x.Y),null!=x.Z&&x[_0xe681("0x21")]("Z")&&e[_0xe681("0xdd")](73)[_0xe681("0xfa")](x.Z),null!=x.curl&&x[_0xe681("0x21")]("curl")&&e[_0xe681("0xdd")](82)[_0xe681("0x53")](x[_0xe681("0x87c")]),null!=x[_0xe681("0x87d")]&&x[_0xe681("0x21")](_0xe681("0x87d"))&&e[_0xe681("0xdd")](90)[_0xe681("0x53")](x.csize),e},x[_0xe681("0x7c8")]=function(x,e){return this[_0xe681("0x103")](x,e)[_0xe681("0x100")]()},x[_0xe681("0xfd")]=function(x,e){x instanceof n||(x=n[_0xe681("0xda")](x));for(var _=void 0===e?x[_0xe681("0xd7")]:x[_0xe681("0xd4")]+e,t=new(r[_0xe681("0x865")]);x[_0xe681("0xd4")]<_;){var i=x[_0xe681("0xdd")]();switch(i>>>3){case 1:t[_0xe681("0x1f4")]=x.int32();break;case 2:t[_0xe681("0x441")]=x[_0xe681("0xde")]();break;case 3:t[_0xe681("0x87e")]=x[_0xe681("0x53")]();break;case 4:t[_0xe681("0x879")]=x[_0xe681("0x53")]();break;case 5:t.msgt=x.string();break;case 6:t[_0xe681("0x87b")]=x[_0xe681("0x53")]();break;case 7:t.X=x[_0xe681("0xfa")]();break;case 8:t.Y=x[_0xe681("0xfa")]();break;case 9:t.Z=x[_0xe681("0xfa")]();break;case 10:t[_0xe681("0x87c")]=x.string();break;case 11:t[_0xe681("0x87d")]=x.string();break;default:x[_0xe681("0xe7")](7&i)}}return t},x[_0xe681("0x7ca")]=function(x){return x instanceof n||(x=n(x)),this.decode(x,x[_0xe681("0xdd")]())},x[_0xe681("0x7cb")]=function(x){return _0xe681("0x24")!==(_0xe681("0xa")==typeof x?_0xe681("0xa"):t(x))||null===x?_0xe681("0x805"):null!=x[_0xe681("0x1f4")]&&x[_0xe681("0x21")](_0xe681("0x1f4"))&&!a[_0xe681("0x50")](x[_0xe681("0x1f4")])?_0xe681("0x806"):null!=x[_0xe681("0x441")]&&x[_0xe681("0x21")](_0xe681("0x441"))&&!a[_0xe681("0x50")](x[_0xe681("0x441")])?_0xe681("0x7ce"):null!=x.purl&&x[_0xe681("0x21")](_0xe681("0x87e"))&&!a[_0xe681("0x52")](x.purl)?"purl: string expected":null!=x[_0xe681("0x879")]&&x[_0xe681("0x21")](_0xe681("0x879"))&&!a[_0xe681("0x52")](x[_0xe681("0x879")])?"aurl: string expected":null!=x[_0xe681("0x87a")]&&x.hasOwnProperty("msgt")&&!a[_0xe681("0x52")](x[_0xe681("0x87a")])?_0xe681("0x87f"):null!=x[_0xe681("0x87b")]&&x[_0xe681("0x21")](_0xe681("0x87b"))&&!a[_0xe681("0x52")](x[_0xe681("0x87b")])?"msgc: string expected":null!=x.X&&x[_0xe681("0x21")]("X")&&_0xe681("0x28")!=typeof x.X?_0xe681("0x82e"):null!=x.Y&&x.hasOwnProperty("Y")&&_0xe681("0x28")!=typeof x.Y?"Y: number expected":null!=x.Z&&x[_0xe681("0x21")]("Z")&&_0xe681("0x28")!=typeof x.Z?_0xe681("0x880"):null!=x[_0xe681("0x87c")]&&x[_0xe681("0x21")](_0xe681("0x87c"))&&!a.isString(x[_0xe681("0x87c")])?"curl: string expected":null!=x[_0xe681("0x87d")]&&x[_0xe681("0x21")](_0xe681("0x87d"))&&!a.isString(x[_0xe681("0x87d")])?"csize: string expected":null},x[_0xe681("0x7f6")]=function(x){if(x instanceof r[_0xe681("0x865")])return x;var e=new(r[_0xe681("0x865")]);return null!=x[_0xe681("0x1f4")]&&(e[_0xe681("0x1f4")]=0|x[_0xe681("0x1f4")]),null!=x[_0xe681("0x441")]&&(e[_0xe681("0x441")]=0|x[_0xe681("0x441")]),null!=x[_0xe681("0x87e")]&&(e[_0xe681("0x87e")]=String(x[_0xe681("0x87e")])),null!=x.aurl&&(e[_0xe681("0x879")]=String(x[_0xe681("0x879")])),null!=x[_0xe681("0x87a")]&&(e[_0xe681("0x87a")]=String(x.msgt)),null!=x[_0xe681("0x87b")]&&(e[_0xe681("0x87b")]=String(x[_0xe681("0x87b")])),null!=x.X&&(e.X=Number(x.X)),null!=x.Y&&(e.Y=Number(x.Y)),null!=x.Z&&(e.Z=Number(x.Z)),null!=x[_0xe681("0x87c")]&&(e.curl=String(x.curl)),null!=x[_0xe681("0x87d")]&&(e[_0xe681("0x87d")]=String(x[_0xe681("0x87d")])),e},x[_0xe681("0x66")]=x[_0xe681("0x7f6")],x.toObject=function(x,e){e||(e={});var _={};return e[_0xe681("0x7fd")]&&(_[_0xe681("0x1f4")]=0,_[_0xe681("0x441")]=0,_[_0xe681("0x87e")]="",_[_0xe681("0x879")]="",_[_0xe681("0x87a")]="",_[_0xe681("0x87b")]="",_.X=0,_.Y=0,_.Z=0,_.curl="",_[_0xe681("0x87d")]=""),null!=x[_0xe681("0x1f4")]&&x[_0xe681("0x21")](_0xe681("0x1f4"))&&(_[_0xe681("0x1f4")]=x.floornum),null!=x[_0xe681("0x441")]&&x[_0xe681("0x21")](_0xe681("0x441"))&&(_._id=x[_0xe681("0x441")]),null!=x[_0xe681("0x87e")]&&x[_0xe681("0x21")](_0xe681("0x87e"))&&(_[_0xe681("0x87e")]=x[_0xe681("0x87e")]),null!=x.aurl&&x[_0xe681("0x21")](_0xe681("0x879"))&&(_[_0xe681("0x879")]=x[_0xe681("0x879")]),null!=x[_0xe681("0x87a")]&&x.hasOwnProperty(_0xe681("0x87a"))&&(_[_0xe681("0x87a")]=x[_0xe681("0x87a")]),null!=x[_0xe681("0x87b")]&&x[_0xe681("0x21")](_0xe681("0x87b"))&&(_[_0xe681("0x87b")]=x[_0xe681("0x87b")]),null!=x.X&&x.hasOwnProperty("X")&&(_.X=x.X),null!=x.Y&&x[_0xe681("0x21")]("Y")&&(_.Y=x.Y),null!=x.Z&&x.hasOwnProperty("Z")&&(_.Z=x.Z),null!=x.curl&&x.hasOwnProperty(_0xe681("0x87c"))&&(_[_0xe681("0x87c")]=x[_0xe681("0x87c")]),null!=x[_0xe681("0x87d")]&&x[_0xe681("0x21")](_0xe681("0x87d"))&&(_[_0xe681("0x87d")]=x.csize),_},x[_0xe681("0x20")][_0xe681("0x7fc")]=function(x){return this[_0xe681("0x7b")].toObject(this,x)},x[_0xe681("0x20")][_0xe681("0x7fe")]=function(){return this[_0xe681("0x7b")][_0xe681("0x7fc")](this,i[_0xe681("0x7b6")].toJSONOptions)},x}(),x[_0xe681("0x3a")]=r},function(x,e){function _(x,e){if(!(x instanceof e))throw new TypeError(_0xe681("0x77"))}_0xe681("0x3d"),Object[_0xe681("0x22")](e,"__esModule",{value:!0});var t=function(){function x(x,e){for(var _=0;_<e[_0xe681("0x25")];_++){var t=e[_];t[_0xe681("0x7c")]=t[_0xe681("0x7c")]||!1,t[_0xe681("0xc8")]=!0,_0xe681("0x7d")in t&&(t[_0xe681("0x7e")]=!0),Object[_0xe681("0x22")](x,t[_0xe681("0x7f")],t)}}return function(e,_,t){return _&&x(e[_0xe681("0x20")],_),t&&x(e,t),e}}(),i=function(){function x(e,t,i){_(this,x),this[_0xe681("0x190")]=e,this.length=t,this[_0xe681("0x881")]=i}return t(x,[{key:_0xe681("0x882"),value:function(){return this[_0xe681("0x190")]}},{key:_0xe681("0x883"),value:function(){return this[_0xe681("0x25")]}},{key:_0xe681("0x884"),value:function(){for(var x=[],e=0,_=this[_0xe681("0x881")].length;e<_;e++)x[_0xe681("0x1e")]({x:this[_0xe681("0x881")][e].x,y:this[_0xe681("0x881")][e].y,fnum:this[_0xe681("0x190")]});return x}}]),x}();e[_0xe681("0x9d")]=i},function(x,e){function _(x,e){if(!(x instanceof e))throw new TypeError(_0xe681("0x77"))}_0xe681("0x3d"),Object[_0xe681("0x22")](e,"__esModule",{value:!0});var t=_0xe681("0x32")==typeof Symbol&&_0xe681("0x79")==typeof Symbol[_0xe681("0x7a")]?function(x){return typeof x}:function(x){return x&&_0xe681("0x32")==typeof Symbol&&x.constructor===Symbol&&x!==Symbol[_0xe681("0x20")]?_0xe681("0x79"):typeof x},i=function(){function x(x,e){for(var _=0;_<e[_0xe681("0x25")];_++){var t=e[_];t[_0xe681("0x7c")]=t[_0xe681("0x7c")]||!1,t.configurable=!0,_0xe681("0x7d")in t&&(t[_0xe681("0x7e")]=!0),Object[_0xe681("0x22")](x,t[_0xe681("0x7f")],t)}}return function(e,_,t){return _&&x(e[_0xe681("0x20")],_),t&&x(e,t),e}}(),n=function(){function x(){_(this,x),this[_0xe681("0x885")]={},this[_0xe681("0x886")]={},this[_0xe681("0x887")]={},this[_0xe681("0x888")]={},this.layerPToP={},this[_0xe681("0x889")]={},this.inited=!1,this[_0xe681("0x88a")]=[],this[_0xe681("0x88b")]=[];for(var e=map[_0xe681("0x13f")][_0xe681("0x1db")].navs,t=0;t<e[_0xe681("0x25")];t++){var i=e[t][_0xe681("0x1f4")];this[_0xe681("0x88a")][i]=e[t],this[_0xe681("0x88b")][i]=i}this.ladderType=null}return i(x,[{key:_0xe681("0x88c"),value:function(){this[_0xe681("0x2c1")]=!0;for(var x=[],e=[],_=1;_<this[_0xe681("0x88b")][_0xe681("0x25")];_++){var t=this[_0xe681("0x88b")][_],i=[],n=[],g=[],a=this[_0xe681("0x88a")][t],r=a[_0xe681("0x842")];for(var A in r){var C=r[A],I=C[_0xe681("0x850")]||0;this[_0xe681("0x3ae")](i,I)||i[_0xe681("0x1e")](I);var o=C[_0xe681("0x84e")]||0;if(0!=o){var s=I+1e4*t;if(this[_0xe681("0x888")][s])this[_0xe681("0x888")][s][_0xe681("0x1e")](C._id);else{var c=[C._id];this.layerPoints[s]=c}}this.nearbyLine[C[_0xe681("0x441")]]=[]}var f=a.Lines;for(var A in f){var l=f[A],u=(l[_0xe681("0x857")]||0,l.direction||0),h=l[_0xe681("0x850")],d=l[_0xe681("0x854")];if(r[h]&&r[d]){this[_0xe681("0x885")][h][_0xe681("0x1e")](l[_0xe681("0x441")]),this.nearbyLine[d].push(l[_0xe681("0x441")]);var b=l.rank||1e3;1==b&&(0==u?g[_0xe681("0x1e")](l):n[_0xe681("0x1e")](l))}else 0==u?e[_0xe681("0x1e")](l):x[_0xe681("0x1e")](l)}this.calculateCrossAreaPoints(r,g,n,i,t);var p=this[_0xe681("0x88d")](r,g,n,i);for(var v in p){for(var m=Number(v)+1e4*t,y=p[v],A=0;A<y[_0xe681("0x25")];A++){var w=y[A]+1e4*t;y[A]=w}this.areaToAreas[m]=y}}var E=this[_0xe681("0x88e")](e);this[_0xe681("0x88f")]=this.calculativeCrossLayerLine(E,x);for(var I in this[_0xe681("0x886")]){var k=[];if(this[_0xe681("0x888")][I])for(var T=this[_0xe681("0x888")][I],v=0;v<T[_0xe681("0x25")];v++)for(var S=T[v],R=this[_0xe681("0x88f")][S],_=0;_<R[_0xe681("0x25")];_++){var O=R[_],w=this[_0xe681("0x890")](O);k[_0xe681("0x1e")](w)}for(var _=0;_<k[_0xe681("0x25")];_++)this.areaToAreas[I][_0xe681("0x1e")](k[_])}this[_0xe681("0x891")]()}},{key:_0xe681("0x890"),value:function(x){for(var e=this.fnums,_=this.navdata,t=1;t<e[_0xe681("0x25")];t++){var i=e[t],n=_[i],g=n[_0xe681("0x842")];if(g[x]){var a=g[x],r=a[_0xe681("0x850")];return r+=1e4*i}}return-1}},{key:_0xe681("0x892"),value:function(x,e,_,t,i){for(var n=0;n<t[_0xe681("0x25")];n++){var g=t[n],a=g+1e4*i;this.areaPoints[a]=[]}for(var n=0;n<e.length;n++){var r=e[n],A=r.sid,C=r[_0xe681("0x854")],I=x[A][_0xe681("0x850")]||0;I+=1e4*i;var o=x[C].sid||0;o+=1e4*i,this[_0xe681("0x887")][I][_0xe681("0x1e")](A),this[_0xe681("0x887")][o].push(C)}for(var n=0;n<_[_0xe681("0x25")];n++){var r=_[n],A=r[_0xe681("0x850")],I=x[A][_0xe681("0x850")]||0;I+=1e4*i,this.areaPoints[I][_0xe681("0x1e")](A)}for(var n in this[_0xe681("0x887")]){var s=this[_0xe681("0x887")][n];0==s.length&&delete this.areaPoints.i}}},{key:_0xe681("0x88d"),value:function(x,e,_,t){for(var i={},n=0;n<t.length;n++){var g=t[n],a=this[_0xe681("0x893")](x,g,e,_);i[g]=a}return i}},{key:_0xe681("0x893"),value:function(x,e,_,t){for(var i=[],n=0;n<_[_0xe681("0x25")];n++){var g=_[n],a=x[g.sid][_0xe681("0x850")],r=x[g[_0xe681("0x854")]][_0xe681("0x850")];a!=r&&(a!=e||this[_0xe681("0x3ae")](i,r)||i.push(r),r!=e||this[_0xe681("0x3ae")](i,a)||i[_0xe681("0x1e")](a))}for(var n=0;n<t[_0xe681("0x25")];n++){var g=t[n],a=x[g[_0xe681("0x850")]][_0xe681("0x850")],r=x[g[_0xe681("0x854")]][_0xe681("0x850")];a!=r&&(a!=e||this.exitInArray(i,r)||i[_0xe681("0x1e")](r))}return i}},{key:_0xe681("0x894"),value:function(x,e){var _={};if(0==e.length)for(var t in this.layerPoints)for(var i=this[_0xe681("0x888")][t],n=0;n<i[_0xe681("0x25")];n++){var g=i[n],a=this[_0xe681("0x895")](g,x);_[g]=a}else{for(var r={},n=0;n<e[_0xe681("0x25")];n++){var A=e[n],C=A[_0xe681("0x850")],I=A[_0xe681("0x854")],o=[],s=-1;for(var c in x){var f=x[c],l=[];if(r[c]&&(l=r[c]),(this.exitInArray(f,C)||this.exitInArray(l,C))&&o[_0xe681("0x1e")](c),this[_0xe681("0x3ae")](f,I)&&(s=c),0!=o[_0xe681("0x25")]){var l=[];x[I]?l=x[I]:l[_0xe681("0x1e")](I);for(var u=0;u<o[_0xe681("0x25")];u++){var h=o[u];if(r[h])for(var d=0;d<l[_0xe681("0x25")];d++)r[h].push(l[d]);else r[h]=l}}}}for(var t in this[_0xe681("0x888")])for(var i=this[_0xe681("0x888")][t],n=0;n<i[_0xe681("0x25")];n++){var g=i[n],a=this.getCanRunPoint2(g,x,r);_[g]=a}}return _}},{key:"getCanRunPoint2",value:function(x,e,_){var t=[];for(var i in e){var n=e[i];if(this[_0xe681("0x3ae")](n,x)){for(var g=0;g<n[_0xe681("0x25")];g++)n[g]!=x&&t.push(n[g]);if(_[i])for(var a=_[i],g=0;g<a[_0xe681("0x25")];g++)t.push(a[g])}}return t}},{key:"getCanRunPoint1",value:function(x,e){var _=[];for(var t in e){var i=e[t];if(this[_0xe681("0x3ae")](i,x))for(var n=0;n<i[_0xe681("0x25")];n++)i[n]!=x&&_.push(i[n])}return _}},{key:_0xe681("0x88e"),value:function(x){for(var e={},_=1,t=0;t<x[_0xe681("0x25")];t++){var i=x[t];if(0==t){var n=[];n[_0xe681("0x1e")](i[_0xe681("0x850")]),n[_0xe681("0x1e")](i[_0xe681("0x854")]),e[_]=n}else{var g=!1;for(var a in e){var r=this[_0xe681("0x3ae")](e[a],i[_0xe681("0x850")]),A=this[_0xe681("0x3ae")](e[a],i[_0xe681("0x854")]);if(r&&!A){e[a][_0xe681("0x1e")](i[_0xe681("0x854")]),g=!0;break}if(!r&&A){e[a][_0xe681("0x1e")](i[_0xe681("0x850")]),g=!0;break}}if(!g){_++;var n=[];n.push(i[_0xe681("0x850")]),n[_0xe681("0x1e")](i[_0xe681("0x854")]),e[_]=n}}}var C=[];for(var t in e){var I=e[t];this[_0xe681("0x896")](I,C)}e=[];for(var t=0;t<C[_0xe681("0x25")];t++)e[t]=C[t];return e}},{key:_0xe681("0x896"),value:function(x,e){for(var _=e[_0xe681("0x25")],t=-1,i=0;i<e[_0xe681("0x25")];i++)if(t=this[_0xe681("0x897")](x,e[i]),t>0){_=i;break}if(_==e[_0xe681("0x25")])e[_0xe681("0x1e")](x);else for(var n=e[_],i=0;i<x[_0xe681("0x25")];i++){var g=x[i];g!=t&&n[_0xe681("0x1e")](g)}}},{key:_0xe681("0x897"),value:function(x,e){for(var _=-1,t=0;t<x.length;t++){for(var i=x[t],n=0;n<e.length;n++){var g=e[n];if(i==g){_=i;break}}if(_>0)break}return _}},{key:_0xe681("0x891"),value:function(){var x=[];for(var e in this[_0xe681("0x886")])x.push(e);for(var e=0;e<x[_0xe681("0x25")];e++)for(var _=x[e],t=0;t<x.length;t++){var i=x[t];if(_!=i){var n=1e5*_+1*i;if(!this[_0xe681("0x889")][n]){var g=this[_0xe681("0x898")](_,i);if(0!=g[_0xe681("0x25")]){this[_0xe681("0x889")][n]=g;var a=this[_0xe681("0x899")](g),r=1e5*i+1*_;this[_0xe681("0x889")][r]=a;for(var A=[g],C=0;C<1e4&&(A=this[_0xe681("0x89a")](A),0!=A[_0xe681("0x25")])&&1!=A[0][_0xe681("0x25")];C++)for(var I=0;I<A.length;I++){var o=A[I],s=o[0],c=o[o[_0xe681("0x25")]-1],f=1e5*s+1*c;if(this.crossScheme[f])A[_0xe681("0x2b")](I,1),I--;else{this[_0xe681("0x889")][f]=o;var l=this[_0xe681("0x899")](o),u=1e5*c+1*s;this.crossScheme[u]=l}}}}}}}},{key:_0xe681("0x899"),value:function(x){for(var e=[],_=x[_0xe681("0x25")]-1;_>=0;_--)e[_0xe681("0x1e")](x[_]);return e}},{key:_0xe681("0x89a"),value:function(x){for(var e=[],_=0;_<x[_0xe681("0x25")];_++){for(var t=x[_],i=[],n=1;n<t[_0xe681("0x25")];n++)i.push(t[n]);for(var g=[],n=0;n<t.length-1;n++)g[_0xe681("0x1e")](t[n]);e.push(i),e[_0xe681("0x1e")](g)}return e}},{key:_0xe681("0x898"),value:function(x,e){var _=[x];if(x!=e){var t=[],i=[x],n=[],g=this[_0xe681("0x886")][x];if(g[e])_[_0xe681("0x1e")](e);else{for(var a=0;a<g[_0xe681("0x25")];a++){var r=g[a],A=[x,r];n[_0xe681("0x1e")](A),i[_0xe681("0x1e")](r)}for(var a=0;a<100;a++){if(n=this.updataOneTime(n,i),0==n[_0xe681("0x25")])return[];for(var C=0;C<n[_0xe681("0x25")];C++){var I=n[C],o=I[I[_0xe681("0x25")]-1];o==e&&t[_0xe681("0x1e")](I)}if(0!=t[_0xe681("0x25")]){_=this[_0xe681("0x89b")](t);break}}}}for(var a=0;a<_.length;a++)_[a]*=1;return _}},{key:_0xe681("0x89c"),value:function(x,e){for(var _=[],t=0;t<x[_0xe681("0x25")];t++)for(var i=x[t],n=i[i[_0xe681("0x25")]-1],g=this[_0xe681("0x886")][n],a=0;a<g[_0xe681("0x25")];a++){var r=g[a];if(!this.exitInArray(e,r)){for(var A=[],C=0;C<i[_0xe681("0x25")];C++)A.push(i[C]);A[_0xe681("0x1e")](r),_[_0xe681("0x1e")](A),e[_0xe681("0x1e")](r)}}return _}},{key:"getOptimutic",value:function(x){for(var e=x[0],_=this[_0xe681("0x89d")](e),t=1;t<x[_0xe681("0x25")];t++){var i=x[t],n=this[_0xe681("0x89d")](i);n<_&&(_=n,e=i)}return e}},{key:_0xe681("0x89d"),value:function(x){for(var e=0,_=0;_<x.length-1;_++){var t=x[_],i=x[_+1];Math.floor(t/1e4)==Math.floor(i/1e4)&&e++}return e}},{key:_0xe681("0x89e"),value:function(x,e,_,t,i,n){var g={};if(!this[_0xe681("0x88a")][x]||!this[_0xe681("0x88a")][e])return g[_0xe681("0x89f")]=[],g[_0xe681("0x8a0")]=[new(esmap[_0xe681("0x782")])(x,0,[])],g;this[_0xe681("0x2c1")]||this.preprocess();var a=this[_0xe681("0x8a1")](x,_,i),r=this.getNearestNode(e,t,i),A=this[_0xe681("0x88a")][x][_0xe681("0x842")][a],C=this[_0xe681("0x88a")][e].Nodes[r];if(!A||!C)return void console.info("");var I=[],o=A[_0xe681("0x850")]+1e4*x,s=C[_0xe681("0x850")]+1e4*e,c=[];if(o==s)c[_0xe681("0x1e")](o);else{var f=1e5*o+s;c=this.crossScheme[f]?this[_0xe681("0x889")][f]:[]}if(0!=c.length){var l=this[_0xe681("0x8a2")](a,r,x,e,c);if(0!=l[_0xe681("0x25")])if(2*c[_0xe681("0x25")]==l[_0xe681("0x25")])for(var u=0;u<c[_0xe681("0x25")];u++){var h=c[u],d=Math.floor(h/1e4),b=h%1e4,p=1*l[2*u],v=1*l[2*u+1],m=this[_0xe681("0x88a")][d].Nodes,y=this.navdata[d][_0xe681("0x843")],w=this.getShortestPath(m,y,p,v,b,d,i);if(!w||!w[_0xe681("0x8a3")]||0==w[_0xe681("0x8a3")][_0xe681("0x25")]){I=[];break}this.convertToCoor(d,w[_0xe681("0x8a3")]),I.push(w)}else I=[]}if(0==I[_0xe681("0x25")])g=this[_0xe681("0x8a4")](x,e,_,t,i,n);else{for(var E=[],k=0;k<I[_0xe681("0x25")];k++){var T=I[k],S=T[_0xe681("0x190")];if(E.push(new esmap.ESNaviResult(S,T[_0xe681("0x8a5")],T[_0xe681("0x8a3")])),I[k+1]){var R=I[k+1][_0xe681("0x190")];R!=S&&E[_0xe681("0x1e")](new(esmap[_0xe681("0x782")])(S,0,[T[_0xe681("0x8a3")][T.walkPath.length-1]]),new(esmap[_0xe681("0x782")])(R,0,[I[k+1][_0xe681("0x8a3")][0]]))}}g[_0xe681("0x89f")]=[this[_0xe681("0x88a")]],g[_0xe681("0x8a0")]=E}return g}},{key:_0xe681("0x8a6"),value:function(x,e){for(var _=this.navdata[x][_0xe681("0x842")],t=0;t<e[_0xe681("0x25")];t++){var i=e[t],n=_[i],g={fnum:x,x:n.X,y:n.Y};e[t]=g}}},{key:_0xe681("0x8a2"),value:function(x,e,_,t,i){var n=[];if(1==i[_0xe681("0x25")])n.push(x),n[_0xe681("0x1e")](e);else{for(var g=[],a=0;a<i[_0xe681("0x25")]-1;a++){var r=i[a],A=Math[_0xe681("0x51")](r/1e4),C=i[a+1],I=Math[_0xe681("0x51")](C/1e4);if(A==I){var o=[],s=[];o.push(A),s[_0xe681("0x1e")](A);for(var c=this[_0xe681("0x887")][r],f=this[_0xe681("0x88a")][A][_0xe681("0x842")],l=this[_0xe681("0x88a")][A][_0xe681("0x843")],u=0;u<c[_0xe681("0x25")];u++){var h=c[u],d=this[_0xe681("0x8a7")](h,C%1e4,l,f);0!=d[_0xe681("0x25")]&&(o[_0xe681("0x1e")](h),s[_0xe681("0x1e")](d.eid))}if(0==o[_0xe681("0x25")])return[];g[_0xe681("0x1e")](o),g[_0xe681("0x1e")](s)}else{var o=[],s=[];o[_0xe681("0x1e")](A),s[_0xe681("0x1e")](I);for(var c=this[_0xe681("0x888")][r],b=this[_0xe681("0x888")][C],p=0;p<c[_0xe681("0x25")];p++)for(var h=c[p],v=this[_0xe681("0x88f")][h],u=0;u<v[_0xe681("0x25")];u++){var m=v[u];if(this[_0xe681("0x3ae")](b,m)){o[_0xe681("0x1e")](h),s[_0xe681("0x1e")](m);break}}if(0==o[_0xe681("0x25")])return[];g[_0xe681("0x1e")](o),g[_0xe681("0x1e")](s)}}var y={},w=[];w.push(x),this.findAllPath(g,0,0,w,y);var E={};for(var k in y){var T=y[k],f=this.navdata[t].Nodes,S=f[T[T[_0xe681("0x25")]-1]],R=f[e],O=this[_0xe681("0x6b3")](S,R);T[_0xe681("0x1e")](e),E[O+1*k]=T}var M=1e6;for(var L in E)parseInt(L)<parseInt(M)&&(M=L,n=E[L])}return n}},{key:_0xe681("0x8a7"),value:function(x,e,_,t){for(var i=this.nearbyLine[x],n=0;n<i[_0xe681("0x25")];n++){var g=i[n],a=_[g];if(1==a[_0xe681("0x856")])if(a[_0xe681("0x850")]==x){var r=a[_0xe681("0x854")];if(t[r][_0xe681("0x850")]==e)return a}else{var A=a[_0xe681("0x850")];if(t[A].sid==e){var C=this[_0xe681("0x1cc")](a);return C[_0xe681("0x850")]=a[_0xe681("0x854")],C[_0xe681("0x854")]=a.sid,C}}}return[]}},{key:_0xe681("0x6b3"),value:function(x,e){var _=(x.X-e.X)*(x.X-e.X)+(x.Y-e.Y)*(x.Y-e.Y);return _}},{key:_0xe681("0x8a8"),value:function(x,e,_,t,i){if(x.length>e)for(var n=x[e],g=x[e+1],a=n[0],r=this[_0xe681("0x88a")][a][_0xe681("0x842")],A=1;A<n.length;A++){var C=n[A],I=g[A],o=r[t[t[_0xe681("0x25")]-1]],s=r[C],c=this[_0xe681("0x6b3")](o,s);if(_+=c,t[_0xe681("0x1e")](C),t[_0xe681("0x1e")](I),this[_0xe681("0x8a8")](x,e+2,_,t,i),t[_0xe681("0x25")]==x[_0xe681("0x25")]+1){for(var f=[],l=0;l<t.length;l++)f[_0xe681("0x1e")](t[l]);i[_]=f}t[_0xe681("0x2b")](t[_0xe681("0x25")]-1,1),t.splice(t[_0xe681("0x25")]-1,1),_-=c}}},{key:_0xe681("0x8a9"),value:function(x,e,_,t,i,n,g){if(_==t)return void console[_0xe681("0x3cd")](_0xe681("0x8aa"));var a={};a[_0xe681("0x8ab")]=_,a[_0xe681("0x8a5")]=0,a[_0xe681("0x8a3")]=[1*_];for(var r=[_],A=[],C=1;C<1e5;C++){for(var I=this.updateNewShortestPathList(a,x,e,r,i,g),o=0;o<I.length;o++)A[_0xe681("0x1e")](I[o]);if(A.sort(this[_0xe681("0x8ac")](_0xe681("0x8a5"))),0==A.length)return[];for(a=A[0];this[_0xe681("0x3ae")](r,a[_0xe681("0x8ab")]);)A[_0xe681("0x84")](),a=A[0];if(r[_0xe681("0x1e")](a[_0xe681("0x8ab")]),A[_0xe681("0x84")](),a[_0xe681("0x8ab")]==t)return a[_0xe681("0x190")]=n,a}return[]}},{key:_0xe681("0x8ad"),value:function(x,e,_,t,i,n){var g=[],a=x[_0xe681("0x8ab")];if(this[_0xe681("0x885")][a])for(var r=this[_0xe681("0x885")][a],A=0;A<r[_0xe681("0x25")];A++){var C=r[A],I=_[C],o=I[_0xe681("0x857")];if(1==n){if(5==o)continue}else if(1==o||2==o||3==o||6==o)continue;var s=I[_0xe681("0x854")];if(a==I[_0xe681("0x854")]){if(2==n&&"1"==I.direction)continue;s=I[_0xe681("0x850")]}if(!this[_0xe681("0x3ae")](t,s)){var c=e[s][_0xe681("0x850")];if(c!=i)continue;var f=this[_0xe681("0x1cc")](x);f[_0xe681("0x8ab")]=s,f[_0xe681("0x8a3")][_0xe681("0x1e")](s),f[_0xe681("0x8a5")]+=I.length,g[_0xe681("0x1e")](f)}}return g}},{key:_0xe681("0x8a4"),value:function(x,e,_,t,i,n){for(var g=null,a={},r={},A={},C={},I=1;I<this[_0xe681("0x88b")][_0xe681("0x25")];I++){var o=this.fnums[I],s=this.navdata[o],c=s.Nodes;for(var f in c){var l=c[f];l[_0xe681("0x190")]=o,A[f]=l}var u=s[_0xe681("0x843")];for(var f in u)C[f]=u[f];for(var h in u){var d=u[h],b=d[_0xe681("0x850")],p=d[_0xe681("0x854")],v=h,m=d[_0xe681("0x857")];if(1==i){if(5==m)continue}else if(1==m||2==m||3==m||6==m)continue;if(c[b]&&c[p]){if(a[b])a[b][_0xe681("0x1e")](v);else{var y=[v];a[b]=y}if(a[p])a[p][_0xe681("0x1e")](v);else{var y=[v];a[p]=y}}else{var w;switch(n){case 1:w=0;break;case 2:w=2;break;case 3:w=1;break;case 4:w=3}if(w&&d[_0xe681("0x857")]!=w)continue;if(r[b])r[b][_0xe681("0x1e")](v);else{var y=[v];r[b]=y}if(r[p])r[p][_0xe681("0x1e")](v);else{var y=[v];r[p]=y}}}}var E=this.getNearestNode(x,_,i),k=this[_0xe681("0x8a1")](e,t,i),T=this[_0xe681("0x8ae")](A,C,a,r,E,k,i);if(T&&T[_0xe681("0x8a3")]&&0!=T[_0xe681("0x8a3")][_0xe681("0x25")]){for(var S=T[_0xe681("0x8a3")],R=T[_0xe681("0x8a5")],O={x:A[S[0]].X,y:A[S[0]].Y,fnum:A[S[0]][_0xe681("0x190")],id:A[S[0]][_0xe681("0x441")]},M=[new(esmap[_0xe681("0x782")])(x,R,[O])],I=0;I<S[_0xe681("0x25")]-1;I++){var L=A[S[I]],P=L.fnum,j=A[S[I+1]],D=j[_0xe681("0x190")],H=M[M[_0xe681("0x25")]-1];if(P==D)H.pointList[_0xe681("0x1e")]({x:j.X,y:j.Y,fnum:j.fnum,id:j[_0xe681("0x441")]});else{var N={x:L.X,y:L.Y,fnum:L[_0xe681("0x190")],id:L[_0xe681("0x441")]},F={x:j.X,y:j.Y,fnum:j[_0xe681("0x190")],id:j[_0xe681("0x441")]};M[_0xe681("0x1e")](new(esmap[_0xe681("0x782")])(P,0,[N]),new esmap.ESNaviResult(D,0,[F]),new esmap.ESNaviResult(D,R,[F]))}}if("2"==this[_0xe681("0x8af")])for(var z=1;z<M.length-1;z++){var Y=M[z];0!=Y[_0xe681("0x25")]&&1==Y[_0xe681("0x881")][_0xe681("0x25")]&&M[z-1][_0xe681("0x190")]==Y[_0xe681("0x190")]&&M[z+1].fnum==Y.fnum&&(M[_0xe681("0x2b")](z-1,3),z-=3)}g={navidata:[this[_0xe681("0x88a")]],result:M}}return g}},{key:"getShortestPath2",value:function(x,e,_,t,i,n,g){if(i==n)return void console[_0xe681("0x3cd")](_0xe681("0x8aa"));var a={};a[_0xe681("0x8ab")]=i,a[_0xe681("0x8a5")]=0,a[_0xe681("0x8a3")]=[i];for(var r=[i],A=[],C=1;C<1e5;C++){for(var I=this[_0xe681("0x8b0")](a,x,e,_,t,r,g),o=0;o<I[_0xe681("0x25")];o++)A[_0xe681("0x1e")](I[o]);if(0==A[_0xe681("0x25")])return[];for(A[_0xe681("0x1f3")](this[_0xe681("0x8ac")](_0xe681("0x8a5"))),a=A[0];this.exitInArray(r,a[_0xe681("0x8ab")]);)A[_0xe681("0x84")](),a=A[0];if(r[_0xe681("0x1e")](a[_0xe681("0x8ab")]),A[_0xe681("0x84")](),a.endPoint==n)return a}return[]}},{key:_0xe681("0x8b0"),value:function(x,e,_,t,i,n,g){var a=[],r=x[_0xe681("0x8ab")];if(t[r])for(var A=t[r],C=0;C<A[_0xe681("0x25")];C++){var I=A[C],o=_[I],s=o[_0xe681("0x854")];if(r==o.eid){if(2==g&&"1"==o[_0xe681("0x410")])continue;s=o.sid}if(!this[_0xe681("0x3ae")](n,s)){var c=this[_0xe681("0x1cc")](x);c.endPoint=s,c[_0xe681("0x8a3")][_0xe681("0x1e")](s),c[_0xe681("0x8a5")]+=o.length,1==o[_0xe681("0x856")]&&(c[_0xe681("0x8a5")]+=1e3),a[_0xe681("0x1e")](c)}}if(i[r])for(var A=i[r],C=0;C<A[_0xe681("0x25")];C++){var I=A[C],o=_[I],s=o[_0xe681("0x854")];if(r==o[_0xe681("0x854")]){if("1"==o.direction)continue;s=o[_0xe681("0x850")]}if(!this[_0xe681("0x3ae")](n,s)){var c=this[_0xe681("0x1cc")](x);c.endPoint=s,c[_0xe681("0x8a3")].push(s);var f=10*(o[_0xe681("0x856")]||1e3);c[_0xe681("0x8a5")]+=1e5+f,a[_0xe681("0x1e")](c),this[_0xe681("0x8af")]=this.ladderType||o[_0xe681("0x857")]}}return a}},{key:_0xe681("0x8a1"),value:function(x,e,_){var t=this.navdata[x][_0xe681("0x842")],i=[1/0,0];if(2==_)for(var n in t){var g=t[n];if(4==g[_0xe681("0x84e")]||5==g.tid){var a=Math[_0xe681("0x121")](Math[_0xe681("0x64e")](Math[_0xe681("0x10d")](g.X-e.x,2)+Math[_0xe681("0x10d")](g.Y-e.y,2)));a<i[0]&&(i[0]=a,i[1]=n)}}else for(var n in t){var g=t[n],a=Math[_0xe681("0x121")](Math[_0xe681("0x64e")](Math[_0xe681("0x10d")](g.X-e.x,2)+Math[_0xe681("0x10d")](g.Y-e.y,2)));a<i[0]&&(i[0]=a,i[1]=n)}return i[1]}},{key:_0xe681("0x8ac"),value:function(x){return function(e,_){var t=e[x],i=_[x];return t-i}}},{key:_0xe681("0x3ae"),value:function(x,e){for(var _=0;_<x[_0xe681("0x25")];_++)if(x[_]==e)return!0;return!1}},{key:_0xe681("0x1cc"),value:function(x){var e;if("object"==(_0xe681("0xa")==typeof x?_0xe681("0xa"):t(x)))if(null===x)e=null;else if(x instanceof Array){e=[];for(var _=0,i=x[_0xe681("0x25")];_<i;_++)e.push(this[_0xe681("0x1cc")](x[_]))}else{e={};for(var n in x)e[n]=this[_0xe681("0x1cc")](x[n])}else e=x;return e}}]),x}();e[_0xe681("0x9d")]=n},function(x,e,_){Object[_0xe681("0x22")](e,_0xe681("0x94"),{value:!0});var t=_(72),i=function(x){var e=this;em[_0xe681("0x130")][_0xe681("0x131")](this),Object[_0xe681("0x366")](e,x),t.setDefaultValues[_0xe681("0x1a")](e,{map:esmap[_0xe681("0x162")].instance,changeTiltAngle:!0,speed:4,followPosition:!0,followAngle:!1,followGap:3,isMultiFloors:0,inTime:1.2,tiltAngle:80,changeFloorTiltAngle:30,minScale:.2,scaleLevel:1,height:0,offsetHeight:1,directionAssert:10,combineAsset:5,autoClearNaviLine:!1,audioPlay:!1,crossFloorTime:250,inverse:!1,mode_:1,lineStyle:{lineType:esmap[_0xe681("0x3f8")].ESARROW,color:_0xe681("0x68f"),lineWidth:6,offsetHeight:0},ladderType_:1,maxEnd:2,navidistance:0,scaleAnimate:!0,isAnimate:1}),e.startData=null,e[_0xe681("0x8b1")]=null,e[_0xe681("0x8b2")]=null,e[_0xe681("0x8b3")]=null,e[_0xe681("0x8b4")]=null,e[_0xe681("0x8b5")]=new(esmap[_0xe681("0x165")])(esmap.ESLayerType.IMAGE_MARKER),e[_0xe681("0x8b6")]=new esmap.ESLayer(esmap[_0xe681("0x166")][_0xe681("0x16b")]),e[_0xe681("0x8b7")]=null,e[_0xe681("0x8b8")]=[],e[_0xe681("0x8b9")]=[],e[_0xe681("0x159")]=new(THREE[_0xe681("0x15a")]),e.moveTimer=(new Date).getTime(),e[_0xe681("0x8ba")]=!1,e[_0xe681("0x8bb")]=!1,e[_0xe681("0x8bc")],e.isNaving=!1,e.curLadder=null,e[_0xe681("0x8bd")]=!1,e[_0xe681("0x8be")]={},e[_0xe681("0x8bf")]={},e.naviInfos={played:{nex:[],cur:[]}},e.count={deviateCount:0,arrivalCount:0,backcount:0,surDistance:0}};i[_0xe681("0x20")]={constructor:i,get"locationMarker"(){return this[_0xe681("0x8b4")]||(this[_0xe681("0x8b4")]=new(esmap[_0xe681("0x2a8")])({id:_0xe681("0x2ac"),url:this[_0xe681("0x8c0")]||_0xe681("0x8c1"),size:this[_0xe681("0x8c2")]||150}),this[_0xe681("0xbd")][_0xe681("0x247")](this[_0xe681("0x8b4")])),this._locMarker},set"locationMarker"(x){x instanceof esmap[_0xe681("0x2a8")]&&(this[_0xe681("0x8b4")]=x,this.map[_0xe681("0x247")](this[_0xe681("0x8b4")]))},get"navidata"(){return this[_0xe681("0x8c3")]},get"mode"(){return this[_0xe681("0x8c4")]},set"mode"(x){this[_0xe681("0x8c4")]!=x&&this[_0xe681("0x8c5")]&&this[_0xe681("0x8c6")]&&this[_0xe681("0x8b1")]&&this[_0xe681("0x8c7")]&&this.lineObj.o3d_[_0xe681("0x210")]?(this[_0xe681("0x8c4")]=x,
this[_0xe681("0x8c8")](),this[_0xe681("0x8c9")](),this[_0xe681("0x8ca")]=!0,this[_0xe681("0x8cb")]()):this.mode_=x},get"ladderType"(){return this[_0xe681("0x8cc")]},set"ladderType"(x){this[_0xe681("0x8cc")]!=x&&this[_0xe681("0x8c5")]&&this[_0xe681("0x8c6")]&&this[_0xe681("0x8b1")]&&this.lineObj&&this[_0xe681("0x8c7")][_0xe681("0x17d")][_0xe681("0x210")]?(this.ladderType_=x,this[_0xe681("0x8c8")](),this[_0xe681("0x8c9")](),this[_0xe681("0x8ca")]=!0,this[_0xe681("0x8cb")]()):this[_0xe681("0x8cc")]=x},_createMarker:function(x,e){var _=null,t=null;if(x.fnum){e?(this[_0xe681("0x8b2")]&&this.startMarker[_0xe681("0x24c")](),t=this[_0xe681("0x8b5")],_=x[_0xe681("0x95")]||_0xe681("0x8cd")):(this.endMarker&&this.endMarker.dispose(),t=this[_0xe681("0x8b6")],_=x[_0xe681("0x95")]||_0xe681("0x8ce"));var i=void 0==x[_0xe681("0x184")]?6:x[_0xe681("0x184")],n=new(esmap[_0xe681("0x8cf")])({x:x.x,y:x.y,url:_,height:i,size:x[_0xe681("0x26c")]||64,callback:function(){x[_0xe681("0x12a")]&&x[_0xe681("0x12a")](n)}});t[_0xe681("0x3cb")](n),e?this[_0xe681("0x8b2")]=n:this[_0xe681("0x8b3")]=n;var g=this[_0xe681("0xbd")][_0xe681("0x19d")](x[_0xe681("0x190")]);g[_0xe681("0x39a")](t)}},setStartPoint:function(x,e){this.clearNaviLines(),this[_0xe681("0x8d0")]&&this[_0xe681("0x385")](),this.startData=Object.assign({},this.startData,x),!x[_0xe681("0x95")]||x[_0xe681("0x8d1")]||e||this[_0xe681("0x8d2")](x,!0),this._getNaviResult(),this[_0xe681("0x8ca")]=!0},setEndPoint:function(x,e){this[_0xe681("0x8d0")]&&this[_0xe681("0x385")](),this[_0xe681("0x8b1")]=Object[_0xe681("0x366")]({},this[_0xe681("0x8b1")],x),!x[_0xe681("0x95")]||x[_0xe681("0x8d1")]||e||this[_0xe681("0x8d2")](x,!1),this[_0xe681("0x8c9")](),this[_0xe681("0x8ca")]=!0},_getFloorsPoints:function(){var x=this[_0xe681("0x8c5")][_0xe681("0x8a0")];if(x){for(var e=[],_=null,t=null,i=0;i<x[_0xe681("0x25")];i++){var n=x[i],g=_==n[_0xe681("0x190")];0==n[_0xe681("0x25")]&&0!=i&&i!=x[_0xe681("0x25")]-1||(g||(_=n[_0xe681("0x190")],t&&e[_0xe681("0x1e")](t),t={fnum:n[_0xe681("0x190")],pointList:[]}),Array[_0xe681("0x20")][_0xe681("0x1e")][_0xe681("0x37")](t[_0xe681("0x881")],n[_0xe681("0x881")]))}return t&&e[_0xe681("0x1e")](t),this[_0xe681("0x8c3")]=e,e}},_addZeroResult:function(x){for(var e=0;e<x[_0xe681("0x25")]-1;e++){var _=x[e];if(_[_0xe681("0x25")]){var i=_.pointList[_[_0xe681("0x881")][_0xe681("0x25")]-1],n=x[e+1][_0xe681("0x881")][0];(0,t[_0xe681("0x751")])(i,n)>.2&&_[_0xe681("0x881")][_0xe681("0x1e")](new(esmap[_0xe681("0x259")])(n.x,n.y))}}},reset:function(){this[_0xe681("0x8c9")]()},getCrossPoints:function(){for(var x=[],e=this[_0xe681("0x8c5")][_0xe681("0x8a0")],_=0;_<e[_0xe681("0x25")];_++)if(0==e[_][_0xe681("0x25")]&&1==e[_][_0xe681("0x881")][_0xe681("0x25")]){var t=Object.assign({},e[_][_0xe681("0x881")][0]);e[_][_0xe681("0x881")][0].id,t.id&&(t.tid=this[_0xe681("0x8d3")][_0xe681("0x88a")][t[_0xe681("0x190")]][_0xe681("0x842")][t.id][_0xe681("0x84e")]||0,x[_0xe681("0x1e")](t))}return x},_getNaviResult:function(){if(this[_0xe681("0x8c6")]&&this[_0xe681("0x8b1")]){var x=this[_0xe681("0x8c6")],e=this[_0xe681("0x8b1")],_=this[_0xe681("0x8d4")];if(this[_0xe681("0x8d3")]||(this[_0xe681("0x8d3")]=new esmap.ESNaviCore),this[_0xe681("0x8c5")]=this[_0xe681("0x8d3")].getNaviResult(x[_0xe681("0x190")],e[_0xe681("0x190")],x,e,_,this[_0xe681("0x8cc")]),!this[_0xe681("0x8c5")])return void console[_0xe681("0x3cd")]("!");this._naviResult=this[_0xe681("0x8c5")][_0xe681("0x8a0")],this[_0xe681("0x8d5")]();var t=this[_0xe681("0x8d6")](this[_0xe681("0x8b7")]);this[_0xe681("0x8b8")]=t[0],this[_0xe681("0x8b9")]=t[1],this[_0xe681("0x8d7")]=t[2],this.crossPoints=this[_0xe681("0x8d8")]();for(var i=0;i<this[_0xe681("0x8d9")][_0xe681("0x25")];i++)this[_0xe681("0x8bf")][this.crossPoints[i][_0xe681("0x190")]]||(this[_0xe681("0x8bf")][this[_0xe681("0x8d9")][i].fnum]=!1);this[_0xe681("0x8bf")][navi[_0xe681("0x8c6")][_0xe681("0x190")]]=!0}},clearLocationMarker:function(){this[_0xe681("0x8b4")]&&(this[_0xe681("0xbd")].removeLocationMarker(this[_0xe681("0x8b4")]),this._locMarker=null)},clearMarkers:function(){this[_0xe681("0x8b2")]&&(this[_0xe681("0x8b2")][_0xe681("0x24c")](),this.startmarker=null,this[_0xe681("0x8c6")]=null),this[_0xe681("0x8b3")]&&(this[_0xe681("0x8b3")].dispose(),this[_0xe681("0x8b3")]=null,this.endData=null),this[_0xe681("0x8b7")]=null},clearNaviLines:function(){this.map[_0xe681("0x178")](_0xe681("0x8da"))},clearAll:function(){this[_0xe681("0x385")](),this[_0xe681("0x8db")](),this[_0xe681("0x8c8")](),this[_0xe681("0x8dc")]()},_drawLinesByFloor:function(x,e){var _=this;_.lineStyle.up=new(THREE[_0xe681("0x232")])(0,1,0),_.lineStyle[_0xe681("0x3e9")]=!1,_._groupsPoints[_0xe681("0xc3")](function(t){if(t[_0xe681("0x190")]==x)return _._drawlineByResults([t],e)})},_drawLines:function(x,e){function _(x){for(var e=0;e<i[_0xe681("0x25")];e++)if(i[e][_0xe681("0x190")]==x)return e;return-1}var t=this;e=void 0==e||e,e&&t.clearNaviLines();for(var i=[],n=0;n<x[_0xe681("0x25")];n++){var g=x[n][_0xe681("0x1d9")],a=x[n][_0xe681("0x190")],r=_(a);r>-1?i[r][_0xe681("0x881")][_0xe681("0x1e")](g):i[_0xe681("0x1e")]({fnum:a,pointList:[g]})}t[_0xe681("0x8dd")](i,e)},_drawlineByResults:function(x,e){e=void 0==e||e,e&&this[_0xe681("0x8c8")]();var _=new esmap.ESLineMarker(_0xe681("0x8da"),x,this[_0xe681("0x267")]);this[_0xe681("0x8c7")]=_,_0xe681("0x3fe")==this.lineStyle[_0xe681("0x4")]||_0xe681("0x3dc")==this[_0xe681("0x267")].type?this[_0xe681("0x267")][_0xe681("0x3e8")]=.3:this.lineStyle[_0xe681("0x3e8")]=1,this[_0xe681("0xbd")].drawLineMark(_)},drawNaviLine:function(x,e){if(this[_0xe681("0x8c6")]&&this[_0xe681("0x8b1")]&&this[_0xe681("0x8c5")]){this[_0xe681("0x8ca")]=!1,this[_0xe681("0x267")].up=new(THREE[_0xe681("0x232")])(0,1,0),this.lineStyle[_0xe681("0x3e9")]=!1,!this.autoClearNaviLine&&e&&this.clearNaviLines();var _=null;return _=void 0==x||"all"==x||0==x?this[_0xe681("0x8de")](this.combinePoints,this.autoClearNaviLine):this[_0xe681("0x8df")](x,this[_0xe681("0x8e0")]),this[_0xe681("0x8e1")](),_}},_locMarkerToStartPoint:function(x){if(this[_0xe681("0x8b7")]){var e=this[_0xe681("0x8b7")][0].pointList[0],_=this[_0xe681("0x8b7")][0][_0xe681("0x190")];x=void 0==x?3:x,this[_0xe681("0x5a5")][_0xe681("0x4fc")](e.x,e.y,_,x||1.01*this[_0xe681("0x186")])}},_moveTo:function(x,e,_){return void 0==e&&(e=0),this[_0xe681("0xbd")][_0xe681("0x34f")]({x:x.x,y:x.y,time:e,FloorNum:x[_0xe681("0x190")],callback:_})},broadcast:function(x,e){var _=this,t=esmap[_0xe681("0x197")][_0xe681("0x63b")];if(_[_0xe681("0x8b9")][x]){var i=_[_0xe681("0x8b9")][x][_0xe681("0x660")],n=_[_0xe681("0x8e2")];if(e<=3&&!n.played[_0xe681("0x8e3")][_0xe681("0x8e4")](x)){var g=_[_0xe681("0x8e5")][x+1].relDesc,a="";switch(g){case"":a=g+"";break;case"":a=g+"";break;case"":a=g+_0xe681("0x8e6");break;case"":a=g+"";break;case"":a=g+"";break;case"":a=g+"";break;case"":a=""}t(a),n[_0xe681("0x8e7")][_0xe681("0x8e3")].push(x)}else if(i>8&&i-e>=1&&!n[_0xe681("0x8e7")][_0xe681("0x8e8")][_0xe681("0x8e4")](x)){var g=_[_0xe681("0x8e5")][x+1].relDesc,r=""==g?_0xe681("0x8e9"):"",A=""+parseInt(i-2*_[_0xe681("0x403")])+""+r;t(A),n[_0xe681("0x8e7")][_0xe681("0x8e8")][_0xe681("0x1e")](x)}}},getDisToNextCross:function(x,e){for(var _={dis:-1,point1:null,point2:null},i=0;i<this[_0xe681("0x8d9")][_0xe681("0x25")];i++){var n=this[_0xe681("0x8d9")][i];if(n[_0xe681("0x190")]!=x||30!=n[_0xe681("0x84e")]&&40!=n[_0xe681("0x84e")]){if(_[_0xe681("0x8ea")]&&(30==n[_0xe681("0x84e")]||40==n[_0xe681("0x84e")])&&n.fnum!=_[_0xe681("0x8ea")][_0xe681("0x190")]){_[_0xe681("0x8eb")]=n,_[_0xe681("0x8ec")]=(0,t[_0xe681("0x751")])(_[_0xe681("0x8ea")],_[_0xe681("0x8eb")]),_[_0xe681("0x376")]=this[_0xe681("0x656")](_[_0xe681("0x8ea")],_[_0xe681("0x8eb")]);break}}else _[_0xe681("0x8ed")]=(0,t[_0xe681("0x751")])(n,e),_[_0xe681("0x8ea")]=n}return _},walkingfunction:function(x,e,_){var t=this,i=t[_0xe681("0x8ee")],n=x[_0xe681("0x190")],g=x[_0xe681("0x1d9")],a=t.getDisToNextCross(t[_0xe681("0x8ef")],g),r=(a[_0xe681("0x8ed")],(new Date).getTime());if(a[_0xe681("0x8ea")]&&!t[_0xe681("0x8bd")]&&t[_0xe681("0x8ef")]!=n&&!t[_0xe681("0x8be")][t[_0xe681("0x8ef")]]){t[_0xe681("0x8bd")]=!0,t[_0xe681("0x8f0")]=a.dis2||10,t[_0xe681("0x8be")][t[_0xe681("0x8ef")]]=!0,t[_0xe681("0x8bf")][n]=!0,t.crossFutiTime||(t[_0xe681("0x8f1")]=(new Date)[_0xe681("0x1eb")]());var A=t[_0xe681("0xbd")][_0xe681("0x1ae")](a[_0xe681("0x8ea")]);return A.fnum=a[_0xe681("0x8ea")][_0xe681("0x190")],x[_0xe681("0x1d9")]=a[_0xe681("0x8ea")],x[_0xe681("0x190")]=a[_0xe681("0x8ea")].fnum,this[_0xe681("0x150")](_0xe681("0x8f2"),x),void this[_0xe681("0x8f3")](A,a.angle||0,a[_0xe681("0x8ea")])}if(t[_0xe681("0x8bd")]&&r-t[_0xe681("0x8f1")]>t[_0xe681("0x8f0")]*t[_0xe681("0x8f4")]&&(t.isCrossingFuti=!1,t[_0xe681("0x8f1")]=(new Date)[_0xe681("0x1eb")]()),!t.isCrossingFuti){var C="3"==t[_0xe681("0x8d3")].ladderType?3:1;if(x[_0xe681("0x1ac")]>8*C?i[_0xe681("0x8f5")]++:i[_0xe681("0x8f5")]=0,i[_0xe681("0x8f5")]>=3)return t[_0xe681("0x150")](_0xe681("0x8f6")),t[_0xe681("0x8c6")].x=e.x,t[_0xe681("0x8c6")].y=e.y,t[_0xe681("0x8b2")][_0xe681("0x34f")](e),t.clearNaviLines(),t[_0xe681("0x8c9")](),t[_0xe681("0x8ca")]=!0,t[_0xe681("0x8cb")](),void(i[_0xe681("0x8f5")]=0);if(0!=i[_0xe681("0x8f7")]&&i.surDistance<x.remain?i[_0xe681("0x8f8")]++:i[_0xe681("0x8f8")]=0,_&&(i[_0xe681("0x8f8")]=0),0==i[_0xe681("0x8f8")]||i[_0xe681("0x8f8")]>10*C){var A=t[_0xe681("0xbd")].toSceneCoord(x[_0xe681("0x1d9")]);if(A[_0xe681("0x190")]=x[_0xe681("0x1d9")][_0xe681("0x190")],this[_0xe681("0x150")](_0xe681("0x8f2"),x),this._gps(A,x[_0xe681("0x376")],x[_0xe681("0x1d9")]),i[_0xe681("0x8f7")]=x[_0xe681("0x8f9")],x[_0xe681("0x8f9")]<t[_0xe681("0x8fa")]?i[_0xe681("0x8fb")]++:i[_0xe681("0x8fb")]=0,i.arrivalCount>3||x[_0xe681("0x8f9")]<=1){t[_0xe681("0x385")]();var I=t[_0xe681("0xbd")][_0xe681("0x5f0")]?_0xe681("0x8fc")+t.map._ac+"":"";I=""+I,t[_0xe681("0x8fd")]&&esmap[_0xe681("0x197")][_0xe681("0x63b")](I),t[_0xe681("0x150")](_0xe681("0xad"))}else t[_0xe681("0x8fd")]&&t.broadcast(x.index,x[_0xe681("0x8fe")])}}},walkTo:function(x,e){function _(){var _=t[_0xe681("0x8ff")](x);if(_){var i={remain:_[_0xe681("0x8f9")],walk:t[_0xe681("0x8d7")]-_.remain,distanceToNext:_[_0xe681("0x8fe")],angle:_.angle,point:_[_0xe681("0x443")],fnum:x.fnum,index:_[_0xe681("0x900")],isReal:!0,offset:_.distance};i[_0xe681("0x901")]&&(t[_0xe681("0x8ef")]||(t[_0xe681("0x8ef")]=i[_0xe681("0x190")]),e=e||!1,t[_0xe681("0x902")](i,x,e))}}var t=this;x.x>t[_0xe681("0xbd")][_0xe681("0x21b")]-100&&x.x<t[_0xe681("0xbd")][_0xe681("0x21a")]+100&&x.y>t[_0xe681("0xbd")][_0xe681("0x21c")]-100&&x.y<t[_0xe681("0xbd")][_0xe681("0x271")]+100&&(t[_0xe681("0x903")]&&t[_0xe681("0x385")](),t.isNaving&&_())},naviConstraint:function(x){var e=this;if(e[_0xe681("0x8c6")]&&e[_0xe681("0x8b1")]){for(var _={coord:{fnum:x.fnum},distance:null,angle:0},i=e[_0xe681("0x904")]()[_0xe681("0xbd")](function(x){return{x:x.x,y:x.z,z:0,fnum:x[_0xe681("0x190")],index:x[_0xe681("0x905")]}}),n={},g=1;g<i[_0xe681("0x25")];g++){var a=i[g-1],r=i[g];if(a[_0xe681("0x190")]===x[_0xe681("0x190")]&&r[_0xe681("0x190")]===x[_0xe681("0x190")]){var A=(0,t[_0xe681("0x906")])(x,a,r,n);(null==_.distance||A<_[_0xe681("0x660")])&&(_[_0xe681("0x660")]=A,Object[_0xe681("0x366")](_.coord,n),_[_0xe681("0x376")]=e[_0xe681("0x656")](a,r),_[_0xe681("0x900")]=a.index,_[_0xe681("0x190")]=a[_0xe681("0x190")],_[_0xe681("0x8fe")]=(0,t[_0xe681("0x751")])(n,r))}}if(null!=_[_0xe681("0x660")]){for(var C=0,g=i[_0xe681("0x25")]-1;g>_[_0xe681("0x900")];g--)if(g-1>_[_0xe681("0x900")]){var a=i[g],r=i[g-1];C+=(0,t[_0xe681("0x751")])(a,r)}C+=(0,t[_0xe681("0x751")])(i[_[_0xe681("0x900")]+1],_[_0xe681("0x443")]),_.remain=C}return _}},getRouteAngle:function(x,e){var _=new(THREE[_0xe681("0x232")])(0,0,1),t=new THREE.Vector3(x.x,0,x.y),i=new(THREE[_0xe681("0x232")])(e.x,0,e.y),n=i[_0xe681("0x1cc")]()[_0xe681("0x241")](t).normalize(),g=n[_0xe681("0x4ff")](_)*THREE[_0xe681("0x1b3")][_0xe681("0x2b8")];return n[_0xe681("0x1cc")]()[_0xe681("0x4fe")](_).y>0?360-g:g},_getTransformByLength:function(x,e){if(x){if(0==e)return x[0];for(var _,t,i,n=0,g=0,a=x[0],r=1;r<x[_0xe681("0x25")];r++)if(_=x[r],_.fnum==a.fnum){if(t=_[_0xe681("0x1cc")]()[_0xe681("0x241")](a),i=t[_0xe681("0x25")](),n+=i,n>=e){t[_0xe681("0x285")]();var A=a[_0xe681("0x1cc")]()[_0xe681("0x80")](t[_0xe681("0x1cc")]()[_0xe681("0x286")](e-g));return A[_0xe681("0x190")]=_[_0xe681("0x190")],A[_0xe681("0x900")]=_[_0xe681("0x905")],A}a=_[_0xe681("0x1cc")](),a.fnum=_[_0xe681("0x190")],a[_0xe681("0x900")]=_[_0xe681("0x905")],g=n}else a=_[_0xe681("0x1cc")](),a.fnum=_[_0xe681("0x190")],a[_0xe681("0x900")]=_[_0xe681("0x905")];var C=x[x[_0xe681("0x25")]-1];return C[_0xe681("0x900")]=C[_0xe681("0x905")],C}},getLadderType:function(x,e){if(x.id){var _=navi[_0xe681("0x8d3")][_0xe681("0x88a")][x[_0xe681("0x190")]][_0xe681("0x842")][x.id][_0xe681("0x84e")]||0;switch(_){case 21:return this[_0xe681("0x907")]="","";case 40:return this.curLadder="","";case 30:return this[_0xe681("0x907")]="",""}}return""},_naviDescriptions:function(x){function e(x,e){var _=Math.PI/4,t=x/_,i=parseInt(t),n=t%1*_;return i%2==0?n>e&&(i+=1):n>=_-e&&(i+=1),i}function _(x,e){var _=e[_0xe681("0x4ff")](x),t=e[_0xe681("0x1cc")]()[_0xe681("0x4fe")](x);return t.y<0&&(_=2*Math.PI-_),_}function t(x,t){if(t==x.length-1)return{index:x[x[_0xe681("0x25")]-1][_0xe681("0x900")]};var i=new(THREE[_0xe681("0x232")])(0,0,1),n=0==t?i:x[t][_0xe681("0x1cc")]().sub(x[t-1])[_0xe681("0x285")](),g=x[t+1][_0xe681("0x1cc")]()[_0xe681("0x241")](x[t]),r=g[_0xe681("0x25")](),A=g[_0xe681("0x285")](),C=(a[_0xe681("0x908")],THREE[_0xe681("0x1b3")][_0xe681("0x239")],e(_(i,A),22.5*THREE[_0xe681("0x1b3")].DEG2RAD)),I=_(n,A),o=e(I,a[_0xe681("0x908")]*THREE[_0xe681("0x1b3")][_0xe681("0x239")]);return{relField:o,relDesc:h[o],relAngle:I*THREE[_0xe681("0x1b3")][_0xe681("0x2b8")],absField:C,absDesc:u[C],distance:r,index:x[t][_0xe681("0x900")]}}function i(x,e){for(var _=x.map(function(x,e){var _=a[_0xe681("0xbd")][_0xe681("0x1ae")](x);return _.index=e,_}),i=[],n=0;n<_.length;n++){var g=t(_,n);g[_0xe681("0x1d9")]=x[n],g.fnum=e,i[_0xe681("0x1e")](g)}for(var r=[i[0]],n=1;n<i[_0xe681("0x25")];n++)i[n][_0xe681("0x909")]<=a.combineAsset||360-i[n][_0xe681("0x909")]<=a.combineAsset?r[r.length-1][_0xe681("0x660")]+=i[n][_0xe681("0x660")]:r[_0xe681("0x1e")](i[n]);return r}function n(x,e,_,t){var i=x[e],n=x[e+1],g=d[n.relField];if(a._boo=0,!g||a._boo)if(t){if(a[_0xe681("0x90a")]=!1,!g){var r=a[_0xe681("0x90b")](x[e+1].point,_),A=_0xe681(t>_?"0x90c":"0x90d"),C=a.map[_0xe681("0x19d")](t)[_0xe681("0x3b5")];g=""+r+" "+A+" "+C}}else a[_0xe681("0x90a")]&&(a[_0xe681("0x90e")]=n[_0xe681("0x660")]),g=_0xe681("0x8e9");var I=[];return 0==e?I[_0xe681("0x1e")]("   ",Math[_0xe681("0x102")](i.distance),_0xe681("0x90f")+g):I[_0xe681("0x1e")](" ",Math.ceil(i[_0xe681("0x660")]+(a[_0xe681("0x90a")]&&!t?n[_0xe681("0x660")]:0)),_0xe681("0x90f")+g),I}function g(x,e,_,t){var i=x[e],n=x[e+1],g=d[x[e+1][_0xe681("0x910")]];if(!g||a[_0xe681("0x90a")])if(t){var r=t>_?"":"";a[_0xe681("0xbd")][_0xe681("0x19d")](t)[_0xe681("0x3b5")],n[_0xe681("0x911")]=r}else n[_0xe681("0x911")]="";return{startPoint:i[_0xe681("0x1d9")],startFloor:i[_0xe681("0x190")],startIndex:i[_0xe681("0x900")],endPoint:n[_0xe681("0x1d9")],endFloor:n[_0xe681("0x190")],endIndex:n.index,startDirection:i.absDesc,endDirection:n[_0xe681("0x911")],distance:i[_0xe681("0x660")]+(a[_0xe681("0x90a")]&&!t?n[_0xe681("0x660")]:0)}}var a=this;a[_0xe681("0x8e5")]=[],a[_0xe681("0x90a")]=!1,a._tailLen=0;for(var r,A,C,I,o=[],s=[],c=null,f=0,l=[],u=["","","","","","","","",""],h=["","","","","","","","",""],d=[_0xe681("0x912"),"","",_0xe681("0x913"),"",_0xe681("0x914"),"",_0xe681("0x915"),_0xe681("0x912")],b=null,p=0;p<x[_0xe681("0x25")];p++){if(r=x[p],c=r.fnum,C=null,p<x[_0xe681("0x25")]-1)for(I=p;I<x[_0xe681("0x25")];I++)if(x[I].fnum!=c){C=x[I].fnum;break}A=r[_0xe681("0x881")];var v=i(A,c);if(v[_0xe681("0x25")]>1&&Array[_0xe681("0x20")][_0xe681("0x1e")][_0xe681("0x37")](a[_0xe681("0x8e5")],v),a[_0xe681("0x8e5")][_0xe681("0x25")],1==v[_0xe681("0x25")]&&0!=r[_0xe681("0x25")]&&Array[_0xe681("0x20")][_0xe681("0x1e")][_0xe681("0x37")](a[_0xe681("0x8e5")],v),1==v[_0xe681("0x25")]){if(C&&0==r[_0xe681("0x25")]&&(b==c||null==b)){var m=C>c?_0xe681("0x90c"):"",y=a[_0xe681("0xbd")][_0xe681("0x19d")](C)[_0xe681("0x3b5")],w=[" "+m+" "+y];o[_0xe681("0x1e")](w),s.push({startPoint:A[0],startDirection:C>c?"":"",startFloor:c,endFloor:C,endPoint:x[I][_0xe681("0x881")][0]})}}else for(var E=0;E<v[_0xe681("0x25")]-1&&!a[_0xe681("0x90a")];E++)o[_0xe681("0x1e")](n(v,E,c,C)),s[_0xe681("0x1e")](g(v,E,c,C));if(b=c,v[_0xe681("0x25")]>1){var k=v[_0xe681("0x3e2")](function(x,e){return x+(e[_0xe681("0x660")]||0)},0);l[_0xe681("0x1e")]({fnum:c,distance:k}),f+=k}}return[o,s,f,l]},_analyse:function(){if(this[_0xe681("0x8c6")]&&this.endData){var x=-1,e=this[_0xe681("0x8b9")][_0xe681("0xbd")](function(e,_){var t=new(THREE[_0xe681("0x232")])(e[_0xe681("0x44f")].x,0,e[_0xe681("0x44f")].y);return t[_0xe681("0x190")]=e[_0xe681("0x916")],t[_0xe681("0x905")]=_,x=_,t}),_=this.naviDescriptionsData[this.naviDescriptionsData.length-1],t=new THREE.Vector3(_.endPoint.x,0,_[_0xe681("0x8ab")].y);return t[_0xe681("0x190")]=_.endFloor,t[_0xe681("0x905")]=x+1,e.push(t),e}},_toPos:null,_toRot:null,_allLen:0,_preGid:0,_changeFnumIng:!1,_animID:null,_gps:function(x,e,_){function t(){n[_0xe681("0x5a5")][_0xe681("0x190")]=x[_0xe681("0x190")],n[_0xe681("0x5a5")][_0xe681("0x210")]=!0}function i(e){if(!n[_0xe681("0x917")]){n[_0xe681("0xbd")][_0xe681("0x188")]=[x[_0xe681("0x190")]],n[_0xe681("0xbd")][_0xe681("0x25a")]=x[_0xe681("0x190")];var _=n[_0xe681("0x5a5")][_0xe681("0x918")](),i=n._groupsPoints[n[_0xe681("0x919")]];i&&i[_0xe681("0x881")]&&i[_0xe681("0x881")][_0xe681("0x25")]>0&&(_=n[_0xe681("0x8c3")][n[_0xe681("0x919")]][_0xe681("0x881")][0]),_.fnum=x[_0xe681("0x190")],n[_0xe681("0x5a5")][_0xe681("0x4fc")]({x:_.x,y:_.y,fnum:_[_0xe681("0x190")]})}e?(n[_0xe681("0xbd")][_0xe681("0x2a7")]=!0,n[_0xe681("0x53e")]=n._moveTo(a,n[_0xe681("0x91a")],function(){var x=n[_0xe681("0xbd")][_0xe681("0x156")][n[_0xe681("0x1b7")]]<.2?n[_0xe681("0x91b")]:n[_0xe681("0xbd")][_0xe681("0x156")][n[_0xe681("0x1b7")]];n[_0xe681("0xbd")][_0xe681("0x1b0")](x,{time:n[_0xe681("0x91a")],rawLevel:!0,callback:function(){n[_0xe681("0x91c")]=!1,n[_0xe681("0xbd")][_0xe681("0x2a7")]=!1}}),t(),n[_0xe681("0x91d")]&&(n._viewID=THREE[_0xe681("0x127")].action(n[_0xe681("0xbd")],n[_0xe681("0x91a")],{tiltAngle:n[_0xe681("0x23d")]}))})):(t(),n._changeFnumIng=!1,n[_0xe681("0xbd")][_0xe681("0x2a7")]=!1)}var n=this;if(n[_0xe681("0x8ef")]!=x[_0xe681("0x190")]){var g;n[_0xe681("0x8ef")]=x[_0xe681("0x190")],n[_0xe681("0x919")]++,n[_0xe681("0x5a5")][_0xe681("0x210")]=!1;var a={x:-x.x-n[_0xe681("0xbd")][_0xe681("0x13d")][_0xe681("0x1af")],y:x.z+n[_0xe681("0xbd")][_0xe681("0x13d")][_0xe681("0x1ad")]};a[_0xe681("0x190")]=x[_0xe681("0x190")],i(!1),n[_0xe681("0x150")]("crossFloor",x.fnum)}if(void 0!=e){n[_0xe681("0x4f9")]&&n[_0xe681("0xbd")][_0xe681("0x120")]({to:n[_0xe681("0x6c4")]?e-180:e,time:1});var r={x:_?_.x:-(x.x+n[_0xe681("0xbd")][_0xe681("0x13d")][_0xe681("0x1af")]),y:_?_.y:n[_0xe681("0xbd")][_0xe681("0x13d")][_0xe681("0x1ad")]+x.z,time:.2};n[_0xe681("0x8b4")].visible||(n[_0xe681("0x8b4")].visible=!0),n._locMarker[_0xe681("0x34f")](r);var g=n.followGap,A=(new Date)[_0xe681("0x1eb")]();A-n[_0xe681("0x91e")]>1e3*g&&(n[_0xe681("0x500")]&&n[_0xe681("0xbd")][_0xe681("0x34f")]({x:r.x,y:r.y,FloorNum:x[_0xe681("0x190")],time:1},n[_0xe681("0x91f")]?1:0),n[_0xe681("0x91e")]=A)}else{var C=n[_0xe681("0x5a5")][_0xe681("0x17d")][_0xe681("0x4fb")][_0xe681("0x1cc")]();C[_0xe681("0x503")](n[_0xe681("0x5a5")][_0xe681("0x17d")][_0xe681("0x185")],n._toPos,n[_0xe681("0x5a5")].o3d_.up),C[_0xe681("0x504")]((new(THREE[_0xe681("0x33d")]))[_0xe681("0x505")](new(THREE[_0xe681("0x506")])(Math.PI/2,0,Math.PI))),n[_0xe681("0x920")]=(new(THREE[_0xe681("0x507")]))[_0xe681("0x508")](C)}},_anim:function(){var x=this;x[_0xe681("0x921")]&&clearInterval(x[_0xe681("0x921")]);var e=x._analyse();x.timer[_0xe681("0xc5")](),x[_0xe681("0x903")]=!0,x[_0xe681("0x8d0")]=!1,x[_0xe681("0x919")]=0,x[_0xe681("0x90e")]=0,x[_0xe681("0x921")]=setInterval(function(){if(!x._isEnd_){var _=x[_0xe681("0x159")][_0xe681("0x360")]();if(x.vvs=x[_0xe681("0x403")]*_,!x._changeFnumIng&&!x[_0xe681("0x8ba")]&&(x[_0xe681("0x922")]+=x[_0xe681("0x923")],0!=x._allLen)){var t=x[_0xe681("0x924")](e,x[_0xe681("0x922")]),i=x[_0xe681("0x8d7")]-x[_0xe681("0x922")],n=Object[_0xe681("0x366")]({},t),g=n.y;if(!t)return void(x._isEnd_=!0);var a=e[e[_0xe681("0x25")]-1];a.x-t.x==0&&a.z-t.z==0&&a[_0xe681("0x190")]==t.fnum&&(x[_0xe681("0x8bb")]=!0),n.y=n.z,n.z=g,x[_0xe681("0x925")]={remain:i,walk:x._allLen,point:n,fnum:t[_0xe681("0x190")],index:t[_0xe681("0x900")]-1},t.x=-t.x-x[_0xe681("0xbd")][_0xe681("0x13d")].sceneX_,t.y=x[_0xe681("0x5a5")][_0xe681("0x17d")][_0xe681("0x185")].y,t.z-=x[_0xe681("0xbd")].mapScene[_0xe681("0x1ad")],x[_0xe681("0x926")]=t[_0xe681("0x1cc")](),x[_0xe681("0x8ef")]||(x[_0xe681("0x8ef")]=e[0].fnum),x[_0xe681("0x903")]&&x[_0xe681("0x8f3")](t)}}},1e3/30)},_animateFun:null,stop:function(){this[_0xe681("0x903")]?(clearInterval(this[_0xe681("0x921")]),clearInterval(this[_0xe681("0x927")]),this[_0xe681("0x928")]&&clearInterval(this[_0xe681("0x928")]),clearInterval(this[_0xe681("0x53e")]),this[_0xe681("0x929")]&&this[_0xe681("0xbd")][_0xe681("0x108")]("update",this._animateFun),this[_0xe681("0x922")]=0,this._preGid=0,this[_0xe681("0x919")]=0,this[_0xe681("0x926")]=this[_0xe681("0x920")]=null,this.timer.stop(),this[_0xe681("0x903")]=!1,this._gpsData=null,this[_0xe681("0xbd")].frameLimit=esmap[_0xe681("0x13a")][_0xe681("0x92a")],this[_0xe681("0x8bb")]=!1):this[_0xe681("0x92b")]&&(this[_0xe681("0x92b")]=!1,this[_0xe681("0x8ee")][_0xe681("0x8f5")]=0,this[_0xe681("0x8ee")].arrivalCount=0,this.count[_0xe681("0x8f8")]=0,this[_0xe681("0x8ee")][_0xe681("0x8f7")]=0),this.naviInfos={played:{nex:[],cur:[]}},this[_0xe681("0x8be")]={},this[_0xe681("0x8ef")]=null,this.moveTimer=null,this[_0xe681("0x8e5")]=null},_animate:function(){var x=this;if(!x._changeFnumIng&&!x[_0xe681("0x8ba")]){if(x[_0xe681("0x926")]){var e=x[_0xe681("0x5a5")][_0xe681("0x17d")][_0xe681("0x185")][_0xe681("0x1cc")]().lerp(x[_0xe681("0x926")],.2);(0,t.DistanceofTwoPts)(e,x[_0xe681("0x926")]),e.x=-e.x-x[_0xe681("0xbd")][_0xe681("0x13d")][_0xe681("0x1af")],e.y=e.z+x[_0xe681("0xbd")][_0xe681("0x13d")][_0xe681("0x1ad")],e[_0xe681("0x190")]=x.locationMarker[_0xe681("0x190")],x[_0xe681("0x5a5")][_0xe681("0x4fc")](e.x,e.y,x._preGid,1.01*x[_0xe681("0x186")]);var _=x[_0xe681("0x8b9")][x[_0xe681("0x925")][_0xe681("0x900")]];if(!_)return;var i=(0,t[_0xe681("0x751")])(x._gpsData[_0xe681("0x1d9")],_[_0xe681("0x8ab")]);x[_0xe681("0x925")]&&x[_0xe681("0x150")](_0xe681("0x8f2"),Object[_0xe681("0x366")]({},x[_0xe681("0x925")],{remain:x[_0xe681("0x925")].remain,distanceToNext:i}));var n=x[_0xe681("0x91f")],g=(new Date)[_0xe681("0x1eb")]();g-x[_0xe681("0x91e")]>1e3*n&&(x.followPosition&&(x._moveToID=x[_0xe681("0x92c")](e,x[_0xe681("0x91f")]?1.2:0)),x.moveTimer=g);var a=(x[_0xe681("0x8e2")],x._gpsData.index);x[_0xe681("0x8fd")]&&x.broadcast(a,i)}if(x._toRot&&(x[_0xe681("0x5a5")][_0xe681("0x17d")].quaternion[_0xe681("0x502")](x._toRot,.2),x.followAngle)){var r=new(THREE[_0xe681("0x232")])(1,0,0),A=r[_0xe681("0x1cc")](),C=x.locationMarker[_0xe681("0x17d")][_0xe681("0x4fb")][_0xe681("0x1cc")]();C[_0xe681("0x4fc")](new(THREE[_0xe681("0x232")])),A[_0xe681("0x4fd")](C);var I=A[_0xe681("0x1cc")]().cross(r),I=I.y<0?-1:1,o=r[_0xe681("0x4ff")](A),s=Math.PI-o*I;x[_0xe681("0xbd")][_0xe681("0x134")][_0xe681("0x24")]instanceof THREE[_0xe681("0x66e")]&&(s+=Math.PI),x[_0xe681("0xbd")].controls[_0xe681("0xc6")]({forceTheta:s})}if(x[_0xe681("0x8bb")]){x[_0xe681("0x385")]();var c=x[_0xe681("0xbd")][_0xe681("0x5f0")]?_0xe681("0x8fc")+x[_0xe681("0xbd")][_0xe681("0x5f0")]+"":"";return c=""+c,x[_0xe681("0x8fd")]&&esmap[_0xe681("0x197")][_0xe681("0x63b")](c),void x.emit(_0xe681("0xad"))}}},linesVisible:function(x){this[_0xe681("0xbd")][_0xe681("0x188")]=x||this[_0xe681("0xbd")][_0xe681("0x188")]},onstartNavi:function(x,e){function _(){t.map[_0xe681("0x25a")]={floornum:t.startData[_0xe681("0x190")],time:0},t.scaleAnimate&&t.changeTiltAngle&&(t[_0xe681("0x927")]=THREE[_0xe681("0x127")][_0xe681("0x1cd")](t[_0xe681("0xbd")],i,{tiltAngle:t[_0xe681("0x23d")]}));var _=e[_0xe681("0x1b7")]||t[_0xe681("0x1b7")]||0;t[_0xe681("0x92d")]?t._scaleLevelToID=t[_0xe681("0xbd")].scaleLevelTo(_,{callback:x,rawLevel:!1,time:i}):x()}if(this[_0xe681("0x8c6")]&&this[_0xe681("0x8b1")]){e=e||{};var t=this,i=e[_0xe681("0x91a")]||t[_0xe681("0x91a")]||.7;t[_0xe681("0xbd")].frameLimit=esmap[_0xe681("0x13a")][_0xe681("0x92e")],e.scaleLevel=e[_0xe681("0x1b7")]||t.scaleLevel||0,t[_0xe681("0x92f")](esmap[_0xe681("0x123")].Option[_0xe681("0x124")](e,_0xe681("0x184"),_0xe681("0x412"),_0xe681("0x1ac"),1.01*t[_0xe681("0x186")])),(t[_0xe681("0x8ca")]||esmap[_0xe681("0x123")][_0xe681("0x86")][_0xe681("0x124")](e,_0xe681("0x669"),!1))&&t[_0xe681("0x8cb")](null,!0),t[_0xe681("0x917")]||this[_0xe681("0x8e1")]([t[_0xe681("0x8c6")][_0xe681("0x190")]]),t[_0xe681("0x500")]&&t[_0xe681("0x92d")]?t._moveToID=t[_0xe681("0x92c")](t[_0xe681("0x8c6")],i,function(){t[_0xe681("0x8c6")]&&_()}):_()}},start:function(){var x=this;x[_0xe681("0x930")](function(){x[_0xe681("0x92b")]=!0})},simulate:function(x){function e(){_[_0xe681("0x931")](),_._animateFun=_._animate[_0xe681("0xa4")](_),_[_0xe681("0xbd")].on(_0xe681("0xc6"),_[_0xe681("0x929")])}var _=this;_[_0xe681("0x8e5")]||_[_0xe681("0xff")](),this[_0xe681("0x930")](e,x)}},e[_0xe681("0x9d")]=i},function(x,e,_){function t(x){return x&&x[_0xe681("0x94")]?x:{default:x}}function i(x,e){if(!(x instanceof e))throw new TypeError(_0xe681("0x77"))}_0xe681("0x3d"),Object[_0xe681("0x22")](e,"__esModule",{value:!0});var n=function(){function x(x,e){for(var _=0;_<e[_0xe681("0x25")];_++){var t=e[_];t.enumerable=t[_0xe681("0x7c")]||!1,t.configurable=!0,_0xe681("0x7d")in t&&(t[_0xe681("0x7e")]=!0),Object[_0xe681("0x22")](x,t[_0xe681("0x7f")],t)}}return function(e,_,t){return _&&x(e[_0xe681("0x20")],_),t&&x(e,t),e}}(),g=_(66),a=t(g),r=_(67),A=t(r),C=function(){function x(e){i(this,x),this[_0xe681("0x932")]=new(a[_0xe681("0x9d")]),this[_0xe681("0x933")]=new(A[_0xe681("0x9d")])(e),this[_0xe681("0x172")]=e,this[_0xe681("0x172")][_0xe681("0x934")]=null,this[_0xe681("0x172")][_0xe681("0x935")]=null}return n(x,[{key:_0xe681("0x5c0"),value:function(x,e){var _=this,t=this.scene,i={fnum:e,sceneX:t[_0xe681("0x1af")],sceneZ:t[_0xe681("0x1ad")],minX:t[_0xe681("0x407")][_0xe681("0x21b")],minY:t[_0xe681("0x407")][_0xe681("0x21c")],maxX:t[_0xe681("0x407")].maxX,maxY:t[_0xe681("0x407")][_0xe681("0x271")],modelHeight:5,isMerge:t[_0xe681("0x407")][_0xe681("0x12e")][_0xe681("0x1ca")],showBase:t[_0xe681("0x407")][_0xe681("0x12e")].showBase,layers:x[_0xe681("0x936")],layerType:1};return _[_0xe681("0x932")].createRooms(i)}},{key:_0xe681("0x5bf"),value:function(x,e){var _=this,t=this.scene,i={fnum:e,sceneX:t[_0xe681("0x1af")],sceneZ:t[_0xe681("0x1ad")],minX:t[_0xe681("0x407")][_0xe681("0x21b")],minY:t[_0xe681("0x407")][_0xe681("0x21c")],maxX:t[_0xe681("0x407")][_0xe681("0x21a")],maxY:t[_0xe681("0x407")][_0xe681("0x271")],modelHeight:5,isMerge:t[_0xe681("0x407")][_0xe681("0x12e")][_0xe681("0x1ca")],showBase:t[_0xe681("0x407")][_0xe681("0x12e")][_0xe681("0x570")],layers:x[_0xe681("0x937")],layerType:0};return _.RoomsHandler[_0xe681("0x938")](i)}},{key:_0xe681("0x5c8"),value:function(x,e){var _=this,t=_[_0xe681("0x172")],i={fnum:e,sceneX:t.sceneX_,sceneZ:t[_0xe681("0x1ad")],minX:t[_0xe681("0x407")][_0xe681("0x21b")],minY:t[_0xe681("0x407")][_0xe681("0x21c")],maxX:t[_0xe681("0x407")][_0xe681("0x21a")],maxY:t[_0xe681("0x407")][_0xe681("0x271")],floorHeight:t[_0xe681("0x5ac")][_0xe681("0x296")][e]?t[_0xe681("0x5ac")][_0xe681("0x296")][e][_0xe681("0x184")]:1,layers:x[_0xe681("0x5c6")],layerType:2},n=_[_0xe681("0x932")][_0xe681("0x939")](i);_[_0xe681("0x933")][_0xe681("0x6fe")](n),t[_0xe681("0x407")][_0xe681("0x150")]("loadLayerComplete",e,_0xe681("0x93a"))}},{key:_0xe681("0x5c4"),value:function(x){var e=this;e[_0xe681("0x933")].loadRooms(x)}},{key:_0xe681("0xad"),value:function(){this[_0xe681("0x172")][_0xe681("0x407")][_0xe681("0x224")]()}}]),x}();e[_0xe681("0x9d")]=C},function(x,e){function _(x,e){if(!(x instanceof e))throw new TypeError(_0xe681("0x77"))}function t(x,e){if(!x)throw new ReferenceError(_0xe681("0x36b"));return!e||_0xe681("0x24")!=typeof e&&"function"!=typeof e?x:e}function i(x,e){if(_0xe681("0x32")!=typeof e&&null!==e)throw new TypeError(_0xe681("0x36c")+typeof e);x[_0xe681("0x20")]=Object[_0xe681("0xda")](e&&e[_0xe681("0x20")],{constructor:{value:x,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object[_0xe681("0x36d")]?Object[_0xe681("0x36d")](x,e):x[_0xe681("0x36e")]=e)}_0xe681("0x3d"),Object.defineProperty(e,"__esModule",{value:!0});var n=function(){function x(x,e){for(var _=0;_<e.length;_++){var t=e[_];t[_0xe681("0x7c")]=t[_0xe681("0x7c")]||!1,t[_0xe681("0xc8")]=!0,_0xe681("0x7d")in t&&(t[_0xe681("0x7e")]=!0),Object[_0xe681("0x22")](x,t.key,t)}}return function(e,_,t){return _&&x(e[_0xe681("0x20")],_),t&&x(e,t),e}}(),g=function(x){function e(x){var i;return _(this,e),i=t(this,(e[_0xe681("0x36e")]||Object[_0xe681("0x36f")](e))[_0xe681("0x1a")](this,esmap[_0xe681("0x1e0")][_0xe681("0x93b")],{},new(THREE[_0xe681("0x32f")]))),i.alias=_0xe681("0x93c"),i.opts_=x||{},i[_0xe681("0x132")](),i}return i(e,x),n(e,[{key:_0xe681("0x132"),value:function(){var x=esmap.ESMap[_0xe681("0x163")],e=x[_0xe681("0x13d")],_=esmap[_0xe681("0x123")][_0xe681("0x86")],t=x.mapView;this.x_=_[_0xe681("0x372")](this[_0xe681("0x373")],"x",x[_0xe681("0x27d")].x),this.y_=_[_0xe681("0x372")](this[_0xe681("0x373")],"y",x[_0xe681("0x27d")].y),this[_0xe681("0x373")][_0xe681("0x95")]=_[_0xe681("0x372")](this[_0xe681("0x373")],_0xe681("0x95"),null),this[_0xe681("0x373")][_0xe681("0x376")]=_[_0xe681("0x372")](this[_0xe681("0x373")],_0xe681("0x376"),null),this[_0xe681("0x377")]=_.getValue(this[_0xe681("0x373")],"name",null),this[_0xe681("0x378")]=_[_0xe681("0x372")](this[_0xe681("0x373")],"id",esmap[_0xe681("0x123")].id++),this[_0xe681("0x3bf")]=_[_0xe681("0x372")](this[_0xe681("0x373")],_0xe681("0x26c"),32),this[_0xe681("0x3c0")]=_[_0xe681("0x372")](this[_0xe681("0x373")],"up",!0),this[_0xe681("0x37a")]=_[_0xe681("0x372")](this[_0xe681("0x373")],_0xe681("0x37b"),!0),this[_0xe681("0x37f")]=_[_0xe681("0x372")](this[_0xe681("0x373")],"showLevel",18),this[_0xe681("0x93d")]=_[_0xe681("0x372")](this[_0xe681("0x373")],_0xe681("0x93e"),768),this[_0xe681("0x93f")]=_[_0xe681("0x372")](this[_0xe681("0x373")],_0xe681("0x940"),null);var i=t.container_;if(!t[_0xe681("0x682")]){t.initCssScene();var n=t[_0xe681("0x683")];n[_0xe681("0x364")](t.w_,t.h_);var g=t[_0xe681("0x1bf")],a=n[_0xe681("0x24f")];a[_0xe681("0xcc")][_0xe681("0x185")]=_0xe681("0x2d9"),a[_0xe681("0xcc")][_0xe681("0x282")]=_0xe681("0x941"),a[_0xe681("0xcc")][_0xe681("0x2ba")]=_0xe681("0x7aa"),a[_0xe681("0xcc")][_0xe681("0x184")]=_0xe681("0x7aa"),i[_0xe681("0x9")](a);var r=g.domElement;r.style[_0xe681("0x185")]=_0xe681("0x2d9"),r[_0xe681("0xcc")][_0xe681("0x282")]=_0xe681("0x941"),r[_0xe681("0xcc")][_0xe681("0x2ba")]=_0xe681("0x7aa"),r.style[_0xe681("0x184")]="100%",r[_0xe681("0xcc")][_0xe681("0x942")]="none",a[_0xe681("0x9")](r),a[_0xe681("0x9")](x[_0xe681("0x14e")][_0xe681("0x7b3")])}var A;if(this[_0xe681("0x373")].url)A=document[_0xe681("0x2")](_0xe681("0x943")),A[_0xe681("0x7")]=this[_0xe681("0x373")][_0xe681("0x95")],A[_0xe681("0xcc")][_0xe681("0x46a")]=_0xe681("0x218");else{A=document.createElement(_0xe681("0x2d6"));var C=document[_0xe681("0x2ca")](this[_0xe681("0x93f")]);C&&A[_0xe681("0x9")](C),this.customHtml=C}var I=new esmap.ESWebViewPlane(t,A,{elementW:this[_0xe681("0x93d")],planeW:this[_0xe681("0x3bf")].w,planeH:this[_0xe681("0x3bf")].h}),o=0;o=void 0!=this[_0xe681("0x373")].height?this[_0xe681("0x373")][_0xe681("0x184")]:void 0!=this.opts_.z?this.opts_.z:3,
I[_0xe681("0x792")]&&(I.object3d[_0xe681("0x185")][_0xe681("0xfc")](-e[_0xe681("0x1af")]-this.x_,o,this.y_-e[_0xe681("0x1ad")]),I.object3d[_0xe681("0x50c")](Math.PI),I[_0xe681("0x792")].rotateY(THREE.Math.DEG2RAD*this.opts_.angle),this[_0xe681("0x17d")]=I[_0xe681("0x792")],this[_0xe681("0x944")]=I,this[_0xe681("0x17d")][_0xe681("0x17a")]=this,x[_0xe681("0xc4")][_0xe681("0x181")][_0xe681("0x1e")](this[_0xe681("0x17d")]),x.on(_0xe681("0xc6"),function(){t[_0xe681("0x945")]()}),this.opts_[_0xe681("0x47e")]&&this[_0xe681("0x373")][_0xe681("0x47e")](this))}},{key:"setPosition",value:function(x,e){var _=x,t=e,i=esmap.ESMap[_0xe681("0x163")][_0xe681("0x13d")];x instanceof Object&&(_=x.x,t=x.y),this[_0xe681("0x17d")][_0xe681("0x185")].x=-_-i[_0xe681("0x1af")],this[_0xe681("0x17d")][_0xe681("0x185")].z=t-i.sceneZ_}},{key:_0xe681("0x946"),value:function(x){_0xe681("0x947")==this[_0xe681("0x944")][_0xe681("0x24f")][_0xe681("0xcf")]&&(this[_0xe681("0x944")][_0xe681("0x24f")][_0xe681("0x7")]=x)}},{key:_0xe681("0x24c"),value:function(){var x=this[_0xe681("0x944")][_0xe681("0x24f")];x.parentNode.removeChild(x),this[_0xe681("0x17d")][_0xe681("0x193")][_0xe681("0x24c")](),this[_0xe681("0x17d")][_0xe681("0x17e")][_0xe681("0x24c")](),this[_0xe681("0x17d")][_0xe681("0xc7")][_0xe681("0x82")](this[_0xe681("0x17d")]),this[_0xe681("0x373")][_0xe681("0x481")]&&this[_0xe681("0x373")][_0xe681("0x481")]()}},{key:_0xe681("0x34f"),value:function(x){esmap.ESMapLabel[_0xe681("0x20")][_0xe681("0x34f")][_0xe681("0x1a")](this[_0xe681("0x17d")],x)}},{key:"url",get:function(){return this.opts_[_0xe681("0x95")]}},{key:"ID",get:function(){return this[_0xe681("0x378")]}},{key:_0xe681("0x40"),get:function(){return this[_0xe681("0x377")]},set:function(x){this[_0xe681("0x377")]=x}},{key:"x",get:function(){return this.x_},set:function(x){this.x_=x}},{key:"y",get:function(){return this.y_},set:function(x){this.y_=x}}]),e}(esmap[_0xe681("0x390")]);e[_0xe681("0x9d")]=g},function(x,e){_0xe681("0x3d"),THREE[_0xe681("0x356")]=function(x,e){if(this[_0xe681("0x1bf")]=x,void 0===e){var _={minFilter:THREE[_0xe681("0x42e")],magFilter:THREE[_0xe681("0x42e")],format:THREE.RGBAFormat,stencilBuffer:!1},t=x[_0xe681("0x230")]();e=new(THREE[_0xe681("0x948")])(t[_0xe681("0x2ba")],t[_0xe681("0x184")],_)}this[_0xe681("0x363")]=e,this[_0xe681("0x949")]=e[_0xe681("0x1cc")](),this.writeBuffer=this.renderTarget1,this[_0xe681("0x94a")]=this[_0xe681("0x949")],this[_0xe681("0x94b")]=[],void 0===THREE[_0xe681("0x35d")],this[_0xe681("0x94c")]=new(THREE[_0xe681("0x35c")])(THREE[_0xe681("0x35d")])},Object.assign(THREE[_0xe681("0x356")][_0xe681("0x20")],{swapBuffers:function(){var x=this[_0xe681("0x94a")];this[_0xe681("0x94a")]=this.writeBuffer,this[_0xe681("0x94d")]=x},addPass:function(x){this[_0xe681("0x94b")][_0xe681("0x1e")](x);var e=this[_0xe681("0x1bf")][_0xe681("0x230")]();x[_0xe681("0x364")](e[_0xe681("0x2ba")],e[_0xe681("0x184")])},insertPass:function(x,e){this[_0xe681("0x94b")][_0xe681("0x2b")](e,0,x)},render:function(x){var e,_,t=!1,i=this[_0xe681("0x94b")][_0xe681("0x25")];for(_=0;_<i;_++)if(e=this[_0xe681("0x94b")][_],e[_0xe681("0xbf")]!==!1){if(e[_0xe681("0x22a")](this[_0xe681("0x1bf")],this.writeBuffer,this[_0xe681("0x94a")],x,t),e[_0xe681("0x94e")]){if(t){var n=this[_0xe681("0x1bf")][_0xe681("0x523")];n[_0xe681("0x94f")](n.NOTEQUAL,1,4294967295),this[_0xe681("0x94c")].render(this[_0xe681("0x1bf")],this[_0xe681("0x94d")],this[_0xe681("0x94a")],x),n.stencilFunc(n[_0xe681("0x950")],1,4294967295)}this[_0xe681("0x951")]()}void 0!==THREE[_0xe681("0x952")]&&(e instanceof THREE[_0xe681("0x952")]?t=!0:e instanceof THREE[_0xe681("0x953")]&&(t=!1))}},reset:function(x){if(void 0===x){var e=this[_0xe681("0x1bf")][_0xe681("0x230")]();x=this[_0xe681("0x363")][_0xe681("0x1cc")](),x.setSize(e[_0xe681("0x2ba")],e.height)}this.renderTarget1[_0xe681("0x24c")](),this[_0xe681("0x949")][_0xe681("0x24c")](),this[_0xe681("0x363")]=x,this.renderTarget2=x[_0xe681("0x1cc")](),this[_0xe681("0x94d")]=this[_0xe681("0x363")],this.readBuffer=this.renderTarget2},setSize:function(x,e){this[_0xe681("0x363")][_0xe681("0x364")](x,e),this[_0xe681("0x949")][_0xe681("0x364")](x,e);for(var _=0;_<this[_0xe681("0x94b")].length;_++)this.passes[_].setSize(x,e)}}),THREE[_0xe681("0x954")]=function(){this.enabled=!0,this.needsSwap=!0,this[_0xe681("0x173")]=!1,this.renderToScreen=!1},Object[_0xe681("0x366")](THREE[_0xe681("0x954")][_0xe681("0x20")],{setSize:function(x,e){},render:function(x,e,_,t,i){}})},function(x,e){_0xe681("0x3d"),THREE[_0xe681("0x952")]=function(x,e){THREE[_0xe681("0x954")].call(this),this[_0xe681("0x172")]=x,this[_0xe681("0x133")]=e,this[_0xe681("0x173")]=!0,this.needsSwap=!1,this[_0xe681("0x6c4")]=!1},THREE[_0xe681("0x952")][_0xe681("0x20")]=Object[_0xe681("0x366")](Object[_0xe681("0xda")](THREE.Pass[_0xe681("0x20")]),{constructor:THREE[_0xe681("0x952")],render:function(x,e,_,t,i){var n=x[_0xe681("0x523")],g=x[_0xe681("0x955")];g[_0xe681("0x956")][_0xe681("0x19c")][_0xe681("0x957")](!1),g[_0xe681("0x956")][_0xe681("0x958")][_0xe681("0x957")](!1),g[_0xe681("0x956")].color[_0xe681("0x959")](!0),g[_0xe681("0x956")][_0xe681("0x958")][_0xe681("0x959")](!0);var a,r;this.inverse?(a=0,r=1):(a=1,r=0),g[_0xe681("0x956")][_0xe681("0x95a")].setTest(!0),g[_0xe681("0x956")][_0xe681("0x95a")][_0xe681("0x95b")](n[_0xe681("0x95c")],n[_0xe681("0x95c")],n[_0xe681("0x95c")]),g[_0xe681("0x956")].stencil[_0xe681("0x95d")](n.ALWAYS,a,4294967295),g.buffers[_0xe681("0x95a")][_0xe681("0x95e")](r),x.render(this.scene,this[_0xe681("0x133")],_,this[_0xe681("0x173")]),x[_0xe681("0x22a")](this[_0xe681("0x172")],this[_0xe681("0x133")],e,this.clear),g[_0xe681("0x956")][_0xe681("0x19c")][_0xe681("0x959")](!1),g[_0xe681("0x956")][_0xe681("0x958")][_0xe681("0x959")](!1),g[_0xe681("0x956")][_0xe681("0x95a")].setFunc(n.EQUAL,1,4294967295),g[_0xe681("0x956")][_0xe681("0x95a")][_0xe681("0x95b")](n[_0xe681("0x95f")],n[_0xe681("0x95f")],n.KEEP)}}),THREE[_0xe681("0x953")]=function(){THREE[_0xe681("0x954")].call(this),this[_0xe681("0x94e")]=!1},THREE[_0xe681("0x953")][_0xe681("0x20")]=Object[_0xe681("0xda")](THREE[_0xe681("0x954")].prototype),Object[_0xe681("0x366")](THREE[_0xe681("0x953")][_0xe681("0x20")],{render:function(x,e,_,t,i){x[_0xe681("0x955")][_0xe681("0x956")][_0xe681("0x95a")].setTest(!1)}})},function(x,e){_0xe681("0x3d"),THREE.RenderPass=function(x,e,_,t,i){THREE[_0xe681("0x954")][_0xe681("0x1a")](this),this.scene=x,this[_0xe681("0x133")]=e,this[_0xe681("0x960")]=_,this.clearColor=t,this[_0xe681("0x961")]=void 0!==i?i:0,this[_0xe681("0x173")]=!0,this[_0xe681("0x688")]=!1,this[_0xe681("0x94e")]=!1},THREE[_0xe681("0x358")][_0xe681("0x20")]=Object[_0xe681("0x366")](Object[_0xe681("0xda")](THREE[_0xe681("0x954")].prototype),{constructor:THREE[_0xe681("0x358")],render:function(x,e,_,t,i){var n=x[_0xe681("0x669")];x.autoClear=!1,this[_0xe681("0x172")][_0xe681("0x960")]=this[_0xe681("0x960")];var g,a;this[_0xe681("0x962")]&&(g=x[_0xe681("0x963")]()[_0xe681("0x964")](),a=x.getClearAlpha(),x[_0xe681("0x1c0")](this.clearColor,this[_0xe681("0x961")])),this[_0xe681("0x688")]&&x[_0xe681("0x688")](),x[_0xe681("0x22a")](this[_0xe681("0x172")],this[_0xe681("0x133")],this[_0xe681("0x35e")]?null:_,this.clear),this[_0xe681("0x962")]&&x[_0xe681("0x1c0")](g,a),this.scene[_0xe681("0x960")]=null,x[_0xe681("0x669")]=n}})},function(x,e){THREE[_0xe681("0x35c")]=function(x,e){THREE[_0xe681("0x954")][_0xe681("0x1a")](this),this[_0xe681("0x965")]=void 0!==e?e:_0xe681("0x966"),x instanceof THREE[_0xe681("0x967")]?(this[_0xe681("0x365")]=x.uniforms,this[_0xe681("0x17e")]=x):x&&(this[_0xe681("0x365")]=THREE[_0xe681("0x968")][_0xe681("0x1cc")](x[_0xe681("0x365")]),this[_0xe681("0x17e")]=new(THREE[_0xe681("0x967")])({defines:x[_0xe681("0x969")]||{},uniforms:this[_0xe681("0x365")],vertexShader:x[_0xe681("0x96a")],fragmentShader:x[_0xe681("0x96b")]})),this[_0xe681("0x133")]=new(THREE[_0xe681("0x671")])(-1,1,1,-1,0,1),this[_0xe681("0x172")]=new(THREE[_0xe681("0x673")]),this[_0xe681("0x96c")]=new(THREE[_0xe681("0x21f")])(new(THREE[_0xe681("0x43c")])(2,2),null),this[_0xe681("0x96c")][_0xe681("0x96d")]=!1,this[_0xe681("0x172")][_0xe681("0x80")](this[_0xe681("0x96c")])},THREE[_0xe681("0x35c")][_0xe681("0x20")]=Object[_0xe681("0x366")](Object[_0xe681("0xda")](THREE.Pass[_0xe681("0x20")]),{constructor:THREE.ShaderPass,render:function(x,e,_,t,i){this[_0xe681("0x365")][this.textureID]&&(this[_0xe681("0x365")][this[_0xe681("0x965")]][_0xe681("0x7d")]=_.texture),this[_0xe681("0x96c")][_0xe681("0x17e")]=this[_0xe681("0x17e")],this[_0xe681("0x35e")]?x[_0xe681("0x22a")](this[_0xe681("0x172")],this[_0xe681("0x133")]):x[_0xe681("0x22a")](this[_0xe681("0x172")],this[_0xe681("0x133")],e,this.clear)}})},function(x,e){THREE[_0xe681("0x35d")]={uniforms:{tDiffuse:{value:null},opacity:{value:1}},vertexShader:[_0xe681("0x96e"),"void main() {",_0xe681("0x96f"),"gl_Position = projectionMatrix * modelViewMatrix * vec4( position, 1.0 );","}"][_0xe681("0x105")]("\n"),fragmentShader:[_0xe681("0x970"),"uniform sampler2D tDiffuse;",_0xe681("0x96e"),_0xe681("0x490"),"vec4 texel = texture2D( tDiffuse, vUv );",_0xe681("0x971"),"}"][_0xe681("0x105")]("\n")}},function(x,e,_){_0xe681("0x3d"),x[_0xe681("0x3a")]=_(89)},function(x,e,_){function t(){i[_0xe681("0x7b4")]._configure(i.BufferReader),i[_0xe681("0x7b6")][_0xe681("0x76")]()}_0xe681("0x3d");var i=e;i.build=_0xe681("0x972"),i[_0xe681("0x7b5")]=_(7),i.BufferWriter=_(95),i[_0xe681("0x7b4")]=_(6),i[_0xe681("0x973")]=_(90),i[_0xe681("0x7b6")]=_(1),i[_0xe681("0x974")]=_(92),i[_0xe681("0x7b7")]=_(91),i[_0xe681("0x975")]=t,i[_0xe681("0x7b5")][_0xe681("0x76")](i[_0xe681("0x976")]),t()},function(x,e,_){function t(x){i[_0xe681("0x1a")](this,x)}_0xe681("0x3d"),x[_0xe681("0x3a")]=t;var i=_(6);(t[_0xe681("0x20")]=Object[_0xe681("0xda")](i[_0xe681("0x20")]))[_0xe681("0x7b")]=t;var n=_(1);n[_0xe681("0x58")]&&(t[_0xe681("0x20")][_0xe681("0xdc")]=n[_0xe681("0x58")][_0xe681("0x20")].slice),t[_0xe681("0x20")][_0xe681("0x53")]=function(){var x=this[_0xe681("0xdd")]();return this.buf[_0xe681("0x977")](this[_0xe681("0xd4")],this[_0xe681("0xd4")]=Math.min(this[_0xe681("0xd4")]+x,this[_0xe681("0xd7")]))}},function(x,e){_0xe681("0x3d"),x[_0xe681("0x3a")]={}},function(x,e,_){var t=e;t[_0xe681("0x978")]=_(93)},function(x,e,_){function t(x,e,_){if(_0xe681("0x32")!=typeof x)throw TypeError(_0xe681("0x979"));i[_0xe681("0x43")][_0xe681("0x1a")](this),this.rpcImpl=x,this.requestDelimited=Boolean(e),this[_0xe681("0x97a")]=Boolean(_)}_0xe681("0x3d"),x[_0xe681("0x3a")]=t;var i=_(1);(t[_0xe681("0x20")]=Object[_0xe681("0xda")](i.EventEmitter[_0xe681("0x20")])).constructor=t,t[_0xe681("0x20")][_0xe681("0x97b")]=function x(e,_,t,n,g){if(!n)throw TypeError(_0xe681("0x97c"));var a=this;if(!g)return i[_0xe681("0x41")](x,a,e,_,t,n);if(!a[_0xe681("0x97d")])return void setTimeout(function(){g(Error(_0xe681("0x97e")))},0);try{return a.rpcImpl(e,_[_0xe681(a[_0xe681("0x97f")]?"0x7c8":"0x103")](n)[_0xe681("0x101")](),function(x,_){if(x)return a[_0xe681("0x150")]("error",x,e),g(x);if(null===_)return void a[_0xe681("0x152")](!0);if(!(_ instanceof t))try{_=t[_0xe681(a[_0xe681("0x97a")]?"0x7ca":"0xfd")](_)}catch(x){return a[_0xe681("0x150")](_0xe681("0xb0"),x,e),g(x)}return a[_0xe681("0x150")]("data",_,e),g(null,_)})}catch(x){return a.emit(_0xe681("0xb0"),x,e),void setTimeout(function(){g(x)},0)}},t[_0xe681("0x20")][_0xe681("0x152")]=function(x){return this.rpcImpl&&(x||this.rpcImpl(null,null,null),this[_0xe681("0x97d")]=null,this[_0xe681("0x150")](_0xe681("0x152"))[_0xe681("0x108")]()),this}},function(x,e,_){function t(x,e){this.lo=x>>>0,this.hi=e>>>0}_0xe681("0x3d"),x[_0xe681("0x3a")]=t;var i=_(1),n=t[_0xe681("0x980")]=new t(0,0);n[_0xe681("0x6c")]=function(){return 0},n[_0xe681("0xf6")]=n[_0xe681("0xea")]=function(){return this},n[_0xe681("0x25")]=function(){return 1};var g=t[_0xe681("0x68")]=_0xe681("0x981");t[_0xe681("0xf2")]=function(x){if(0===x)return n;var e=x<0;e&&(x=-x);var _=x>>>0,i=(x-_)/4294967296>>>0;return e&&(i=~i>>>0,_=~_>>>0,++_>4294967295&&(_=0,++i>4294967295&&(i=0))),new t(_,i)},t[_0xe681("0x66")]=function(x){if(_0xe681("0x28")==typeof x)return t[_0xe681("0xf2")](x);if(i[_0xe681("0x52")](x)){if(!i.Long)return t[_0xe681("0xf2")](parseInt(x,10));x=i[_0xe681("0x5e")].fromString(x)}return x[_0xe681("0x982")]||x[_0xe681("0x983")]?new t(x.low>>>0,x[_0xe681("0x983")]>>>0):n},t[_0xe681("0x20")][_0xe681("0x6c")]=function(x){if(!x&&this.hi>>>31){var e=~this.lo+1>>>0,_=~this.hi>>>0;return e||(_=_+1>>>0),-(e+4294967296*_)}return this.lo+4294967296*this.hi},t.prototype[_0xe681("0xe9")]=function(x){return i[_0xe681("0x5e")]?new(i[_0xe681("0x5e")])(0|this.lo,0|this.hi,Boolean(x)):{low:0|this.lo,high:0|this.hi,unsigned:Boolean(x)}};var a=String.prototype[_0xe681("0x113")];t[_0xe681("0x6a")]=function(x){return x===g?n:new t((a.call(x,0)|a[_0xe681("0x1a")](x,1)<<8|a.call(x,2)<<16|a.call(x,3)<<24)>>>0,(a[_0xe681("0x1a")](x,4)|a[_0xe681("0x1a")](x,5)<<8|a.call(x,6)<<16|a.call(x,7)<<24)>>>0)},t.prototype[_0xe681("0x67")]=function(){return String[_0xe681("0x104")](255&this.lo,this.lo>>>8&255,this.lo>>>16&255,this.lo>>>24,255&this.hi,this.hi>>>8&255,this.hi>>>16&255,this.hi>>>24)},t[_0xe681("0x20")][_0xe681("0xf6")]=function(){var x=this.hi>>31;return this.hi=((this.hi<<1|this.lo>>>31)^x)>>>0,this.lo=(this.lo<<1^x)>>>0,this},t[_0xe681("0x20")][_0xe681("0xea")]=function(){var x=-(1&this.lo);return this.lo=((this.lo>>>1|this.hi<<31)^x)>>>0,this.hi=(this.hi>>>1^x)>>>0,this},t.prototype[_0xe681("0x25")]=function(){var x=this.lo,e=(this.lo>>>28|this.hi<<4)>>>0,_=this.hi>>>24;return 0===_?0===e?x<16384?x<128?1:2:x<2097152?3:4:e<16384?e<128?5:6:e<2097152?7:8:_<128?9:10}},function(x,e,_){function t(){n[_0xe681("0x1a")](this)}function i(x,e,_){x[_0xe681("0x25")]<40?g[_0xe681("0x46")][_0xe681("0x114")](x,e,_):e[_0xe681("0x5a")](x,_)}x[_0xe681("0x3a")]=t;var n=_(7);(t[_0xe681("0x20")]=Object[_0xe681("0xda")](n[_0xe681("0x20")]))[_0xe681("0x7b")]=t;var g=_(1),a=g.Buffer;t[_0xe681("0xef")]=function(x){return(t[_0xe681("0xef")]=g[_0xe681("0x5c")])(x)};var r=a&&a[_0xe681("0x20")]instanceof Uint8Array&&"set"===a[_0xe681("0x20")][_0xe681("0xfc")].name?function(x,e,_){e[_0xe681("0xfc")](x,_)}:function(x,e,_){if(x[_0xe681("0x233")])x.copy(e,_,0,x[_0xe681("0x25")]);else for(var t=0;t<x[_0xe681("0x25")];)e[_++]=x[t++]};t[_0xe681("0x20")][_0xe681("0xe4")]=function(x){g[_0xe681("0x52")](x)&&(x=g._Buffer_from(x,"base64"));var e=x[_0xe681("0x25")]>>>0;return this[_0xe681("0xdd")](e),e&&this[_0xe681("0xf1")](r,e,x),this},t.prototype[_0xe681("0x53")]=function(x){var e=a[_0xe681("0x984")](x);return this[_0xe681("0xdd")](e),e&&this[_0xe681("0xf1")](i,e,x),this}}]);