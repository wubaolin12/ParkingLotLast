<?xml version="1.0" encoding="UTF-8" ?>  
<!DOCTYPE mapper PUBLIC "-//ibatis.apache.org//DTD Mapper 3.0//EN" 
"http://ibatis.apache.org/dtd/ibatis-3-mapper.dtd">


<mapper namespace="org.great.mapper.VipMapper">
	<!-- 添加一个车辆VIP -->
	<insert id="AddvipX" parameterType="org.great.bean.Vip">
		insert into
		tb_vip(co_id,c_id,v_starttime,v_overtime,pm_id) values
		(#{co_id},#{c_id},#{v_starttime},#{v_overtime},#{pm_id})
	</insert>
	
<!-- 	根据video更改结束时间即续费包月 -->
	<update id="chageOvertimeByVidX"  parameterType="org.great.bean.Vip">
		update tb_vip set v_overtime = #{v_overtime} where v_id = #{v_id}
	</update>
	
	<!-- 自动判断月缴到期后，更改状态为已过期 -->
	<update id="updateVipStu" parameterType="java.lang.String">
	update tb_vip v set v.pm_id = 
	(select pm_id from tb_param where pm_name="已过期")  
		where v.v_overtime=#{date}

	</update>
	
</mapper>